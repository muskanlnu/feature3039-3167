(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1556],{19589:(Dn,Ct,e)=>{"use strict";e.d(Ct,{E:()=>Ze});var s=e(12082),l=e(11638),b=e(48821),_=e(17899),z=e(14041),r=e(64947),q=e(22968),ee=e(18690),a=e(73657),he=e(14451),_e=e(27799),le=e(94389),ie=e(20947),G=e(20473),we=e(45917),Ce=e(39347),ft=e(63309),k=e(4832),ce=e(85121),I=e(17400),h=e(42226),M=e(69550),C=e(52755),v=e(89350),N=e(8911),Q=e(33602),De=e(48108),Ee=e(77225),X=e(55700),p=e(71865),j=e(98392),J=e(55288),ue=e(91360),Te=e(50868),dt=e(80012),Ge=e(56558),rt=e(12285),pt=e(88714),qe=e(14360),st=e(58733);const Oe=V=>(...de)=>{const ge=de.length===0?[1]:de,Pt=(xt,cn)=>typeof xt=="string"?xt:cn*xt;return ge.map(xt=>{const cn=Pt(xt,V);return typeof cn=="number"?`${cn}px`:cn}).join(" ")};function je(V,de){if(!de||typeof de=="string")return;const ge=typeof de=="function"?de(V):de;if(ge)return{"@global":ge}}function $e(V,de){if(!(!de||typeof de=="string")){if(typeof de=="object"){const ge={...V},Pt=V.spacing(1);return typeof Pt=="number"&&(ge.spacing=Oe(Pt)),Object.fromEntries(Object.entries(de).map(([xt,cn])=>typeof cn=="function"?[xt,cn({theme:ge})]:[xt,cn]))}return de}}const vt=/^&.Mui-([\w-]+)$/;function ht(V){let de=V;if(!V||typeof V!="object")return de;for(const ge of Object.keys(V)){const Pt=V[ge];if(!(!Pt||typeof Pt!="object"))for(const xt of Object.keys(Pt)){const cn=xt,An=cn.match(vt);if(An){const[,Bn]=An,{[cn]:$n,...kn}=Pt;$n&&(de={...de,[ge]:kn,[Bn]:$n})}}}return de}function Ft(V,de={}){const ge={},Pt={};for(const xt of Object.keys(de)){const cn=de[xt];cn&&("styleOverrides"in cn&&(xt==="MuiCssBaseline"?ge[xt]=je(V,cn.styleOverrides):ge[xt]=ht($e(V,cn.styleOverrides))),"defaultProps"in cn&&(Pt[xt]=cn.defaultProps))}return{overrides:ge,props:Pt}}const me={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},ke={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function bt(V){var de;const{colors:ge,shape:Pt,options:xt}=V,An=`linear-gradient(90deg, ${(ge.length===1?[ge[0],ge[0]]:ge).join(", ")})`,Bn=`${Pt},  ${An}`,$n=(de=xt==null?void 0:xt.fontColor)!=null?de:"#FFFFFF";return{colors:ge,shape:Pt,backgroundImage:Bn,fontColor:$n}}const Yt={home:bt({colors:ke.teal,shape:me.wave}),documentation:bt({colors:ke.pinkSea,shape:me.wave2}),tool:bt({colors:ke.purpleSky,shape:me.round}),service:bt({colors:ke.marineBlue,shape:me.wave}),website:bt({colors:ke.veryBlue,shape:me.wave}),library:bt({colors:ke.rubyRed,shape:me.wave}),other:bt({colors:ke.darkGrey,shape:me.wave}),app:bt({colors:ke.toastyOrange,shape:me.wave}),apis:bt({colors:ke.teal,shape:me.wave2}),card:bt({colors:ke.greens,shape:me.wave})},yt=16,_t='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',S="home",R={htmlFontSize:yt,fontFamily:_t,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};function W(V){const{palette:de,htmlFontSize:ge=yt,fontFamily:Pt=_t,defaultPageTheme:xt=S,pageTheme:cn=Yt,typography:An}=V;if(!cn[xt])throw new Error(`${xt} is not defined in pageTheme.`);return R.htmlFontSize=ge,R.fontFamily=Pt,{palette:de,typography:An!=null?An:R,page:cn[xt],getPageTheme:({themeId:Bn})=>{var $n;return($n=cn[Bn])!=null?$n:cn[xt]}}}const Z={MuiCssBaseline:{styleOverrides:V=>({html:{height:"100%",fontFamily:V.typography.fontFamily},body:{height:"100%",fontFamily:V.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:V})=>({"&:nth-of-type(odd)":{backgroundColor:V.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:V})=>({"&:nth-of-type(odd)":{backgroundColor:V.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:V})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:V.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:V})=>({padding:V.spacing(1.5,2,1.5,2.5)}),head:({theme:V})=>({wordBreak:"break-word",overflow:"hidden",color:V.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:V})=>({color:V.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,dt.e$)(V.palette.link,.3),background:(0,dt.a)(V.palette.link,.95)},[V.breakpoints.up("md")]:{minWidth:120,fontSize:V.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:V})=>({color:V.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:V})=>({marginRight:V.spacing(1),marginBottom:V.spacing(1)}),label:({theme:V})=>({lineHeight:V.spacing(2.5),fontWeight:V.typography.fontWeightMedium,fontSize:V.spacing(1.75)}),labelSmall:({theme:V})=>({fontSize:V.spacing(1.5)}),deleteIcon:({theme:V})=>({width:V.spacing(3),height:V.spacing(3),margin:V.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:V})=>({width:V.spacing(2),height:V.spacing(2),margin:V.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}};var Pe=(V,de,ge)=>{if(!de.has(V))throw TypeError("Cannot "+ge)},Ue=(V,de,ge)=>(Pe(V,de,"read from private field"),ge?ge.call(V):de.get(V)),lt=(V,de,ge)=>{if(de.has(V))throw TypeError("Cannot add the same private member more than once");de instanceof WeakSet?de.add(V):de.set(V,ge)},et=(V,de,ge,Pt)=>(Pe(V,de,"write to private field"),Pt?Pt.call(V,ge):de.set(V,ge),ge),Je;class Wt{constructor(de,ge){lt(this,Je,new Map),et(this,Je,new Map),de&&Ue(this,Je).set("v4",de),ge&&Ue(this,Je).set("v5",ge)}getTheme(de){return Ue(this,Je).get(de)}}Je=new WeakMap;function tn(V){const de=W(V),ge={...Z,...V.components},Pt=(0,Ge.A)({...de,components:ge}),xt=Ft(Pt,ge),cn={...(0,j.A)(de),...xt};return new Wt(cn,Pt)}function Ut(V){const de=adaptV4Theme(V),ge=createTheme$2(V);return new Wt(ge,createTheme$1(de))}const mt={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},Xt={light:tn({palette:mt.light}),dark:tn({palette:mt.dark})};qe.A.configure(V=>`v5-${V}`);const on=(0,J.A)({productionPrefix:"jss4-"});function ln(V){const{children:de,theme:ge,noCssBaseline:Pt=!1}=V,xt=ge.getTheme("v4"),cn=ge.getTheme("v5");let An;Pt||(An=z.createElement(st.Ay,null));let Bn=z.createElement(z.Fragment,null,An,de);return xt&&(Bn=z.createElement(ue.Ay,{generateClassName:on},z.createElement(Te.A,{theme:xt},Bn))),cn&&(Bn=z.createElement(rt.A,{injectFirst:!0},z.createElement(pt.A,{theme:cn},Bn))),Bn}function qt(V){var de,ge,Pt,xt;return{props:{MuiGrid:(ge=(de=Z)==null?void 0:de.MuiGrid)==null?void 0:ge.defaultProps,MuiSwitch:(xt=(Pt=Z)==null?void 0:Pt.MuiSwitch)==null?void 0:xt.defaultProps},...W(V)}}function ve(V){return Ft(V,Z).overrides}function Qe(V){const de=qt(V),ge=(0,j.A)(de),Pt=ve(ge);return{...ge,overrides:Pt}}const Kt=Qe({palette:mt.light}),Vt=Qe({palette:mt.dark});var zt=e(75962),Bt=e(87145);const Ln=[(0,l.bW)({api:b.q,deps:{configApi:b.p},factory:({configApi:V})=>s.Yi.compile(`${V.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,l.bW)({api:b.l,deps:{},factory:()=>new s.$K}),(0,l.bW)({api:b.a,deps:{},factory:()=>new s.R8}),(0,l.bW)({api:b.r,deps:{alertApi:b.l},factory:({alertApi:V})=>{const de=new s.i3(V,new s.Fb);return s.u_.forward(de,{hidden:!1}),de}}),(0,l.bW)({api:b.y,deps:{errorApi:b.r},factory:({errorApi:V})=>s.gu.create({errorApi:V})}),(0,l.bW)({api:b.s,deps:{configApi:b.p,identityApi:b.t,discoveryApi:b.q},factory:({configApi:V,identityApi:de,discoveryApi:ge})=>(0,s.FA)({middleware:[s.W.resolvePluginProtocol({discoveryApi:ge}),s.W.injectIdentityAuth({identityApi:de,config:V})]})}),(0,l.bW)({api:b.x,deps:{},factory:()=>new s.aQ}),(0,l.bW)({api:b.g,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:de,configApi:ge})=>s.kF.create({configApi:ge,discoveryApi:V,oauthRequestApi:de,environment:ge.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.m,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:de,configApi:ge})=>s.n5.create({configApi:ge,discoveryApi:V,oauthRequestApi:de,environment:ge.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.d,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:de,configApi:ge})=>s.Qf.create({configApi:ge,discoveryApi:V,oauthRequestApi:de,defaultScopes:["read:user"],environment:ge.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.o,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:de,configApi:ge})=>s.gE.create({configApi:ge,discoveryApi:V,oauthRequestApi:de,environment:ge.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.e,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:de,configApi:ge})=>s.WW.create({configApi:ge,discoveryApi:V,oauthRequestApi:de,environment:ge.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.h,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:de,configApi:ge})=>s.kI.create({configApi:ge,discoveryApi:V,oauthRequestApi:de,environment:ge.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.i,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:de,configApi:ge})=>s.Ke.create({configApi:ge,discoveryApi:V,oauthRequestApi:de,defaultScopes:["account"],environment:ge.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.j,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:de,configApi:ge})=>s.l9.create({configApi:ge,discoveryApi:V,oauthRequestApi:de,defaultScopes:["REPO_READ"]})}),(0,l.bW)({api:b.k,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:de,configApi:ge})=>s.l2.create({configApi:ge,discoveryApi:V,oauthRequestApi:de,environment:ge.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.v,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:de,configApi:ge})=>s.Ud.create({configApi:ge,discoveryApi:V,oauthRequestApi:de,environment:ge.getOptionalString("auth.environment")})}),(0,l.bW)({api:_.x9,deps:{discovery:b.q,identity:b.t,config:b.p},factory:({config:V,discovery:de,identity:ge})=>_.ak.create({config:V,discovery:de,identity:ge})})];function mn({children:V}){return(0,ee.Ri)()?z.createElement(z.Fragment,null,V):z.createElement(ee.fS,null,V)}const nn=()=>z.createElement(q.M,{status:"404",statusMessage:"PAGE NOT FOUND"}),On=({step:V,error:de})=>{let ge="";return V==="load-config"?ge=`The configuration failed to load, someone should have a look at this error: ${de.message}`:V==="load-chunk"&&(ge=`Lazy loaded chunk failed to load, try to reload the page: ${de.message}`),z.createElement(mn,null,z.createElement(q.M,{statusMessage:ge,stack:de.stack}))},nt=({error:V,resetError:de,plugin:ge})=>z.createElement(q.bJ,{title:`Error in ${ge==null?void 0:ge.getId()}`,defaultExpanded:!0,error:V},z.createElement(r.A,{variant:"outlined",onClick:de},"Retry")),gt={Progress:q.ke,Router:a.Kd,NotFoundErrorPage:nn,BootErrorPage:On,ErrorBoundaryFallback:nt},Tt={brokenImage:_e.A,catalog:N.A,scaffolder:ie.A,techdocs:G.A,search:we.A,chat:Ce.A,dashboard:ft.A,docs:k.A,email:ce.A,github:h.A,group:Q.A,help:M.A,"kind:api":I.A,"kind:component":v.A,"kind:domain":he.A,"kind:group":Q.A,"kind:location":C.A,"kind:system":le.A,"kind:user":De.A,"kind:resource":X.A,"kind:template":p.A,user:De.A,warning:Ee.A},ot=[{id:"light",title:"Light Theme",variant:"light",icon:z.createElement(Bt.A,null),Provider:({children:V})=>z.createElement(ln,{theme:Xt.light,children:V})},{id:"dark",title:"Dark Theme",variant:"dark",icon:z.createElement(zt.A,null),Provider:({children:V})=>z.createElement(ln,{theme:Xt.dark,children:V})}];function Ze(V){var de,ge,Pt,xt;return(0,s.Z8)({...V,apis:(de=V==null?void 0:V.apis)!=null?de:[],bindRoutes:V==null?void 0:V.bindRoutes,components:{...gt,...V==null?void 0:V.components},configLoader:V==null?void 0:V.configLoader,defaultApis:Ln,icons:{...Tt,...V==null?void 0:V.icons},plugins:(ge=V==null?void 0:V.plugins)!=null?ge:[],featureFlags:(Pt=V==null?void 0:V.featureFlags)!=null?Pt:[],themes:(xt=V==null?void 0:V.themes)!=null?xt:ot})}},75757:(Dn,Ct,e)=>{"use strict";e.d(Ct,{K3:()=>k,cr:()=>q,dJ:()=>ft});var s=e(29835),l=e(3399),b=e(10288),_=e.n(b),z=e(94214),r=e.n(z);const q=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function ee(ce){return!ce.cursor}const a="catalog";var he=Object.defineProperty,_e=(ce,I,h)=>I in ce?he(ce,I,{enumerable:!0,configurable:!0,writable:!0,value:h}):ce[I]=h,le=(ce,I,h)=>(_e(ce,typeof I!="symbol"?I+"":I,h),h);class ie{constructor(I){le(this,"discoveryApi"),le(this,"fetchApi"),this.discoveryApi=I.discoveryApi,this.fetchApi=I.fetchApi||{fetch:_()}}async analyzeLocation(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/analyze-location").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify(I.body)})}async createLocation(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/locations{?dryRun}").expand({...I.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify(I.body)})}async deleteEntityByUid(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/entities/by-uid/{uid}").expand({uid:I.path.uid});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"DELETE"})}async deleteLocation(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/locations/{id}").expand({id:I.path.id});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"DELETE"})}async getEntities(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/entities{?fields,limit,filter*,offset,after,order*}").expand({...I.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"GET"})}async getEntitiesByQuery(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/entities/by-query{?fields,limit,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}").expand({...I.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"GET"})}async getEntitiesByRefs(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/entities/by-refs/{?filter*}").expand({...I.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify(I.body)})}async getEntityAncestryByName(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/entities/by-name/{kind}/{namespace}/{name}/ancestry").expand({kind:I.path.kind,namespace:I.path.namespace,name:I.path.name});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"GET"})}async getEntityByName(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/entities/by-name/{kind}/{namespace}/{name}").expand({kind:I.path.kind,namespace:I.path.namespace,name:I.path.name});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"GET"})}async getEntityByUid(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/entities/by-uid/{uid}").expand({uid:I.path.uid});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"GET"})}async getEntityFacets(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/entity-facets{?facet*,filter*}").expand({...I.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"GET"})}async getLocation(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/locations/{id}").expand({id:I.path.id});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"GET"})}async getLocationByEntity(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/locations/by-entity/{kind}/{namespace}/{name}").expand({kind:I.path.kind,namespace:I.path.namespace,name:I.path.name});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"GET"})}async getLocations(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/locations").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"GET"})}async refreshEntity(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/refresh").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify(I.body)})}async validateEntity(I,h){const M=await this.discoveryApi.getBaseUrl(a),v=z.parse("/validate-entity").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify(I.body)})}}var G=Object.defineProperty,we=(ce,I,h)=>I in ce?G(ce,I,{enumerable:!0,configurable:!0,writable:!0,value:h}):ce[I]=h,Ce=(ce,I,h)=>(we(ce,typeof I!="symbol"?I+"":I,h),h);class ft{constructor(I){Ce(this,"apiClient"),this.apiClient=new ie(I)}async getEntityAncestors(I,h){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,s.KU)(I.entityRef)},h))}async getLocationById(I,h){return await this.requestOptional(await this.apiClient.getLocation({path:{id:I}},h))}async getLocationByEntity(I,h){return await this.requestOptional(await this.apiClient.getLocationByEntity({path:(0,s.KU)(I)},h))}async getEntities(I,h){const{filter:M=[],fields:C=[],order:v,offset:N,limit:Q,after:De}=I!=null?I:{},Ee=[];if(v)for(const j of[v].flat())j&&Ee.push(`${j.order}:${j.field}`);const X=await this.requestRequired(await this.apiClient.getEntities({query:{fields:C,limit:Q,filter:this.getFilterValue(M),offset:N,after:De,order:v?Ee:void 0}},h)),p=(j,J)=>{var ue,Te;if(((ue=j.metadata)==null?void 0:ue.name)===void 0||j.kind===void 0||((Te=J.metadata)==null?void 0:Te.name)===void 0||J.kind===void 0)return 0;const dt=(0,s.U2)(j),Ge=(0,s.U2)(J);return dt<Ge?-1:dt>Ge?1:0};return{items:X.sort(p)}}async getEntitiesByRefs(I,h){const M=await this.apiClient.getEntitiesByRefs({body:{entityRefs:I.entityRefs,fields:I.fields},query:{filter:this.getFilterValue(I.filter)}},h);if(!M.ok)throw await l.o3.fromResponse(M);const{items:C}=await M.json();return{items:C.map(v=>v!=null?v:void 0)}}async queryEntities(I={},h){var M,C;const v={};if(ee(I)){const{fields:N=[],filter:Q,limit:De,orderFields:Ee,fullTextFilter:X}=I;v.filter=this.getFilterValue(Q),De!==void 0&&(v.limit=De),Ee!==void 0&&(v.orderField=(Array.isArray(Ee)?Ee:[Ee]).map(({field:j,order:J})=>`${j},${J}`)),N.length&&(v.fields=N);const p=(M=X==null?void 0:X.term)==null?void 0:M.trim();p&&(v.fullTextFilterTerm=p),(C=X==null?void 0:X.fields)!=null&&C.length&&(v.fullTextFilterFields=X.fields)}else{const{fields:N=[],limit:Q,cursor:De}=I;v.cursor=De,Q!==void 0&&(v.limit=Q),N.length&&(v.fields=N)}return this.apiClient.getEntitiesByQuery({query:v},h).then(N=>N.json())}async getEntityByRef(I,h){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,s.KU)(I)},h))}async getEntityByName(I,h){const{kind:M,namespace:C="default",name:v}=I;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:M,namespace:C,name:v}},h))}async refreshEntity(I,h){const M=await this.apiClient.refreshEntity({body:{entityRef:I}},h);if(M.status!==200)throw new Error(await M.text())}async getEntityFacets(I,h){const{filter:M=[],facets:C}=I;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:C,filter:this.getFilterValue(M)}},h))}async addLocation(I,h){const{type:M="url",target:C,dryRun:v}=I,N=await this.apiClient.createLocation({body:{type:M,target:C},query:{dryRun:v?"true":void 0}},h);if(N.status!==201)throw new Error(await N.text());const{location:Q,entities:De,exists:Ee}=await N.json();if(!Q)throw new Error(`Location wasn't added: ${C}`);return{location:Q,entities:De,exists:Ee}}async getLocationByRef(I,h){return(await this.requestRequired(await this.apiClient.getLocations({},h))).map(C=>C.data).find(C=>I===(0,s.KL)(C))}async removeLocationById(I,h){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:I}},h))}async removeEntityByUid(I,h){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:I}},h))}async validateEntity(I,h,M){const C=await this.apiClient.validateEntity({body:{entity:I,location:h}},M);if(C.ok)return{valid:!0};if(C.status!==400)throw await l.o3.fromResponse(C);const{errors:v=[]}=await C.json();return{valid:!1,errors:v}}async requestIgnored(I){if(!I.ok)throw await l.o3.fromResponse(I)}async requestRequired(I){if(!I.ok)throw await l.o3.fromResponse(I);return I.json()}async requestOptional(I){if(!I.ok){if(I.status===404)return;throw await l.o3.fromResponse(I)}return await I.json()}getFilterValue(I=[]){const h=[];for(const M of[I].flat()){const C=[];for(const[v,N]of Object.entries(M))for(const Q of[N].flat())Q===q?C.push(v):typeof Q=="string"&&C.push(`${v}=${Q}`);C.length&&h.push(C.join(","))}return h}}const k="backstage.io/catalog-processing"},29835:(Dn,Ct,e)=>{"use strict";e.d(Ct,{Cr:()=>Ga,Eo:()=>cr,Ey:()=>Ot,I4:()=>ga,IB:()=>We,KL:()=>ir,KU:()=>N,Kx:()=>Xe,L8:()=>It,P:()=>we,Qz:()=>Ve,U2:()=>Q,ZD:()=>ne,_P:()=>G,aY:()=>Ha,fO:()=>jt,fT:()=>Me,jn:()=>Gt,nC:()=>He,oQ:()=>ie,r2:()=>or,sA:()=>fn,sM:()=>v,tj:()=>Ln,u0:()=>Et,vv:()=>tt,yz:()=>zt,zj:()=>Dt,zu:()=>Kt});var s=e(45250),l=e.n(s),b=e(11601),_=e.n(b);function z(Ne){return Ne.kind.toLocaleUpperCase("en-US")==="API"}function r(Ne){return Ne.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function q(Ne){return Ne.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function ee(Ne){return Ne.kind.toLocaleUpperCase("en-US")==="GROUP"}function a(Ne){return Ne.kind.toLocaleUpperCase("en-US")==="LOCATION"}function he(Ne){return Ne.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function _e(Ne){return Ne.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function le(Ne){return Ne.kind.toLocaleUpperCase("en-US")==="USER"}const ie="default",G="backstage.io/view-url",we="backstage.io/edit-url",Ce="kubernetes.io/api-server",ft="kubernetes.io/api-server-certificate-authority",k="kubernetes.io/auth-provider";var ce=Object.defineProperty,I=(Ne,oe,it)=>oe in Ne?ce(Ne,oe,{enumerable:!0,configurable:!0,writable:!0,value:it}):Ne[oe]=it,h=(Ne,oe,it)=>(I(Ne,typeof oe!="symbol"?oe+"":oe,it),it);class M{constructor(oe=ie){h(this,"namespace"),this.namespace=oe}async enforce(oe){return oe.metadata.namespace?oe:lodash.merge({metadata:{namespace:this.namespace}},oe)}}function C(Ne){let oe=Ne.indexOf(":");const it=Ne.indexOf("/");it!==-1&&it<oe&&(oe=-1);const pn=oe===-1?void 0:Ne.slice(0,oe),vn=it===-1?void 0:Ne.slice(oe+1,it),Fn=Ne.slice(Math.max(oe+1,it+1));if(pn===""||vn===""||Fn==="")throw new TypeError(`Entity reference "${Ne}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:pn,namespace:vn,name:Fn}}function v(Ne){return{kind:Ne.kind,namespace:Ne.metadata.namespace||ie,name:Ne.metadata.name}}function N(Ne,oe){var it,pn,vn,Fn;if(!Ne)throw new Error("Entity reference must not be empty");const va=oe==null?void 0:oe.defaultKind,ka=(oe==null?void 0:oe.defaultNamespace)||ie;let La,Sa,Oa;if(typeof Ne=="string"){const Ba=C(Ne);La=(it=Ba.kind)!=null?it:va,Sa=(pn=Ba.namespace)!=null?pn:ka,Oa=Ba.name}else La=(vn=Ne.kind)!=null?vn:va,Sa=(Fn=Ne.namespace)!=null?Fn:ka,Oa=Ne.name;if(La)if(Sa){if(!Oa){const Ba=JSON.stringify(Ne);throw new Error(`Entity reference ${Ba} had missing or empty name`)}}else{const Ba=JSON.stringify(Ne);throw new Error(`Entity reference ${Ba} had missing or empty namespace`)}else{const Ba=JSON.stringify(Ne);throw new Error(`Entity reference ${Ba} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:La,namespace:Sa,name:Oa}}function Q(Ne){var oe,it;let pn,vn,Fn;return"metadata"in Ne?(pn=Ne.kind,vn=(oe=Ne.metadata.namespace)!=null?oe:ie,Fn=Ne.metadata.name):(pn=Ne.kind,vn=(it=Ne.namespace)!=null?it:ie,Fn=Ne.name),`${pn.toLocaleLowerCase("en-US")}:${vn.toLocaleLowerCase("en-US")}/${Fn.toLocaleLowerCase("en-US")}`}var De=Object.defineProperty,Ee=(Ne,oe,it)=>oe in Ne?De(Ne,oe,{enumerable:!0,configurable:!0,writable:!0,value:it}):Ne[oe]=it,X=(Ne,oe,it)=>(Ee(Ne,typeof oe!="symbol"?oe+"":oe,it),it);class p{constructor(oe){X(this,"parentRef");const{kind:it,namespace:pn,name:vn}=N(oe,{defaultKind:"Group",defaultNamespace:ie});if(it.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=Q({kind:it,namespace:pn,name:vn})}async enforce(oe){if(oe.kind!=="Group")return oe;const it=oe;return it.spec.parent||Q(it)!==this.parentRef&&(it.spec.parent=this.parentRef),it}}class j{static isValidPrefixAndOrSuffix(oe,it,pn,vn){if(typeof oe!="string")return!1;const Fn=oe.split(it);return Fn.length===1?vn(Fn[0]):Fn.length===2?pn(Fn[0])&&vn(Fn[1]):!1}static isJsonSafe(oe){try{return l().isEqual(oe,JSON.parse(JSON.stringify(oe)))}catch{return!1}}static isValidDnsSubdomain(oe){return typeof oe=="string"&&oe.length>=1&&oe.length<=253&&oe.split(".").every(j.isValidDnsLabel)}static isValidDnsLabel(oe){return typeof oe=="string"&&oe.length>=1&&oe.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(oe)}static isValidTag(oe){return typeof oe=="string"&&oe.length>=1&&oe.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(oe)}static isValidUrl(oe){if(typeof oe!="string")return!1;try{return new URL(oe),!0}catch{return!1}}static isValidString(oe){var it;return typeof oe=="string"&&((it=oe==null?void 0:oe.trim())==null?void 0:it.length)>=1}static isNonEmptyString(oe){var it;return typeof oe=="string"&&((it=oe==null?void 0:oe.trim())==null?void 0:it.length)>=1}}var J="http://json-schema.org/draft-07/schema",ue="EntityEnvelope",Te="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",dt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],Ge="object",rt=["apiVersion","kind","metadata"],pt=!0,qe={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},st={$schema:J,$id:ue,description:Te,examples:dt,type:Ge,required:rt,additionalProperties:pt,properties:qe},Oe="http://json-schema.org/draft-07/schema",je="Entity",$e="The parts of the format that's common to all versions/kinds of entity.",vt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],ht="object",Ft=["apiVersion","kind","metadata"],me=!1,ke={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},bt={$schema:Oe,$id:je,description:$e,examples:vt,type:ht,required:Ft,additionalProperties:me,properties:ke},Yt="http://json-schema.org/draft-07/schema",yt="EntityMeta",_t="Metadata fields common to all versions/kinds of entity.",S=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],R="object",W=["name"],Z=!0,Pe={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},Ue={$schema:Yt,$id:yt,description:_t,examples:S,type:R,required:W,additionalProperties:Z,properties:Pe},lt="http://json-schema.org/draft-07/schema",et="common",Je="object",Wt="Common definitions to import from other schemas",tn={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},Ut={$schema:lt,$id:et,type:Je,description:Wt,definitions:tn};const mt=new Map,Xt=[st,bt,Ue,Ut];function on(Ne){if(!(Ne!=null&&Ne.length))throw new TypeError("Unknown error");const oe=Ne[0];throw new TypeError(`${oe.instancePath||"<root>"} ${oe.message}${oe.params?` - ${Object.entries(oe.params).map(([it,pn])=>`${it}: ${pn}`).join(", ")}`:""}`)}function ln(Ne,oe={}){var it;const pn=(it=oe==null?void 0:oe.disableCache)!=null?it:!1,vn=pn?"":JSON.stringify(Ne);if(!pn){const La=mt.get(vn);if(La)return La}const Fn=qt(Ne),va=new(_())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});Fn.length&&va.addSchema(Fn,void 0,void 0,!0);const ka=va.compile(Ne);return pn||mt.set(vn,ka),ka}function qt(Ne){if(typeof Ne!="object")return[];const oe=new Set;Ne.$id&&oe.add(Ne.$id);const it=new Array,pn=[Ne];for(;pn.length;){const vn=pn.pop();for(const Fn of ve(vn))if(!oe.has(Fn)){oe.add(Fn);const va=Xt.find(ka=>ka.$id===Fn);va&&(it.push(va),pn.push(va))}}return it}function*ve(Ne){const oe=[Ne];for(;oe.length;){const it=oe.pop();if(typeof it=="object"&&it)for(const[pn,vn]of Object.entries(it))pn==="$ref"&&typeof vn=="string"?yield vn.split("#")[0]:oe.push(vn)}}function Qe(Ne){const oe=ln(Ne||st);return it=>{if(oe(it)===!0)return it;throw on(oe.errors)}}function Kt(Ne){const oe=ln(Ne);return it=>{var pn;if(oe(it)===!0)return it;const Fn=(pn=oe.errors)==null?void 0:pn.filter(va=>["/kind","/apiVersion"].includes(va.instancePath));if(Fn!=null&&Fn.length&&Fn.every(va=>va.keyword==="enum"))return!1;throw on(oe.errors)}}function Vt(Ne){const oe=ln(Ne||bt);return it=>{if(oe(it)===!0)return it;throw on(oe.errors)}}class zt{static isValidApiVersion(oe){return j.isValidPrefixAndOrSuffix(oe,"/",j.isValidDnsSubdomain,it=>it.length>=1&&it.length<=63&&/^[a-z0-9A-Z]+$/.test(it))}static isValidKind(oe){return typeof oe=="string"&&oe.length>=1&&oe.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(oe)}static isValidObjectName(oe){return typeof oe=="string"&&oe.length>=1&&oe.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(oe)}static isValidNamespace(oe){return j.isValidDnsLabel(oe)}static isValidLabelKey(oe){return j.isValidPrefixAndOrSuffix(oe,"/",j.isValidDnsSubdomain,zt.isValidObjectName)}static isValidLabelValue(oe){return oe===""||zt.isValidObjectName(oe)}static isValidAnnotationKey(oe){return j.isValidPrefixAndOrSuffix(oe,"/",j.isValidDnsSubdomain,zt.isValidObjectName)}static isValidAnnotationValue(oe){return typeof oe=="string"}}const Bt={isValidApiVersion:zt.isValidApiVersion,isValidKind:zt.isValidKind,isValidEntityName:zt.isValidObjectName,isValidNamespace:zt.isValidNamespace,isValidLabelKey:zt.isValidLabelKey,isValidLabelValue:zt.isValidLabelValue,isValidAnnotationKey:zt.isValidAnnotationKey,isValidAnnotationValue:zt.isValidAnnotationValue,isValidTag:Ne=>typeof Ne=="string"&&Ne.length>=1&&Ne.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(Ne)};function Ln(Ne={}){return{...Bt,...Ne}}var mn=Object.defineProperty,nn=(Ne,oe,it)=>oe in Ne?mn(Ne,oe,{enumerable:!0,configurable:!0,writable:!0,value:it}):Ne[oe]=it,On=(Ne,oe,it)=>(nn(Ne,typeof oe!="symbol"?oe+"":oe,it),it);class nt{constructor(oe=Ln()){On(this,"validators"),this.validators=oe}async enforce(oe){var it,pn,vn,Fn,va,ka,La;function Sa(E,c,A){if(c==null)throw new Error(`${E} must have a value`);let $;try{$=A(c)}catch(fe){throw new Error(`${E} could not be validated, ${fe}`)}if(!$){let fe;switch(A.name){case"isValidLabelValue":case"isValidObjectName":fe="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":fe="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":fe="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":fe="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":fe="a string";break;case"isValidKind":fe="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":fe="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":fe="a non empty string";break;default:fe=void 0;break}const Ie=fe?` expected ${fe} but found "${c}".`:"";throw new Error(`"${E}" is not valid;${Ie} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function Oa(E,c,A){return c===void 0||Sa(E,c,A)}Sa("apiVersion",oe.apiVersion,this.validators.isValidApiVersion),Sa("kind",oe.kind,this.validators.isValidKind),Sa("metadata.name",oe.metadata.name,this.validators.isValidEntityName),Oa("metadata.namespace",oe.metadata.namespace,this.validators.isValidNamespace);for(const[E,c]of Object.entries((it=oe.metadata.labels)!=null?it:[]))Sa(`labels.${E}`,E,this.validators.isValidLabelKey),Sa(`labels.${E}`,c,this.validators.isValidLabelValue);for(const[E,c]of Object.entries((pn=oe.metadata.annotations)!=null?pn:[]))Sa(`annotations.${E}`,E,this.validators.isValidAnnotationKey),Sa(`annotations.${E}`,c,this.validators.isValidAnnotationValue);const Ba=(vn=oe.metadata.tags)!=null?vn:[];for(let E=0;E<Ba.length;++E)Sa(`tags.${E}`,Ba[E],this.validators.isValidTag);const Qa=(Fn=oe.metadata.links)!=null?Fn:[];for(let E=0;E<Qa.length;++E)Sa(`links.${E}.url`,(va=Qa[E])==null?void 0:va.url,j.isValidUrl),Oa(`links.${E}.title`,(ka=Qa[E])==null?void 0:ka.title,j.isNonEmptyString),Oa(`links.${E}.icon`,(La=Qa[E])==null?void 0:La.icon,zt.isValidObjectName);return oe}}var gt=Object.defineProperty,Tt=(Ne,oe,it)=>oe in Ne?gt(Ne,oe,{enumerable:!0,configurable:!0,writable:!0,value:it}):Ne[oe]=it,ot=(Ne,oe,it)=>(Tt(Ne,typeof oe!="symbol"?oe+"":oe,it),it);const Ze=null;class V{constructor(oe=Ze){ot(this,"knownFields"),this.knownFields=oe}async enforce(oe){for(const it of Object.keys(oe))if(!this.knownFields.includes(it))throw new Error(`Unknown field ${it}`);return oe}}var de=Object.defineProperty,ge=(Ne,oe,it)=>oe in Ne?de(Ne,oe,{enumerable:!0,configurable:!0,writable:!0,value:it}):Ne[oe]=it,Pt=(Ne,oe,it)=>(ge(Ne,typeof oe!="symbol"?oe+"":oe,it),it);class xt{constructor(){Pt(this,"validate")}async enforce(oe){if(!this.validate){const vn=new Ajv({allowUnionTypes:!0});this.validate=vn.addSchema([Ut,Ue],void 0,void 0,!0).compile(bt)}if(this.validate(oe)===!0)return oe;const[pn]=this.validate.errors||[];throw pn?new Error(`Malformed envelope, ${pn.instancePath||"<root>"} ${pn.message}`):new Error("Malformed envelope, Unknown error")}}class cn{constructor(oe){this.policies=oe}async enforce(oe){let it=oe;for(const pn of this.policies){const vn=await pn.enforce(it);if(!vn)throw new Error(`Policy ${pn.constructor.name} did not return a result`);it=vn}return it}}class An{constructor(oe){this.policies=oe}async enforce(oe){for(const it of this.policies){const pn=await it.enforce(oe);if(pn)return pn}throw new Error("The entity did not match any known policy")}}const Bn={allOf(Ne){return new cn(Ne)},oneOf(Ne){return new An(Ne)}};var $n="http://json-schema.org/draft-07/schema",kn="ApiV1alpha1",bn="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",jn=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],ra=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],ct={$schema:$n,$id:kn,description:bn,examples:jn,allOf:ra};function m(Ne){let oe;return{async check(it){return oe||(oe=Kt(Ne)),oe(it)===it}}}const w=m(ct);var K="http://json-schema.org/draft-07/schema",re="ComponentV1alpha1",D='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',U=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Y=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],Se={$schema:K,$id:re,description:D,examples:U,allOf:Y};const Re=m(Se);var ut="http://json-schema.org/draft-07/schema",St="DomainV1alpha1",sn="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Zt=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],hn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],dn={$schema:ut,$id:St,description:sn,examples:Zt,allOf:hn};const kt=m(dn);var yn="http://json-schema.org/draft-07/schema",gn="GroupV1alpha1",Un="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",Qn=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],ea=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],Pn={$schema:yn,$id:gn,description:Un,examples:Qn,allOf:ea};const Sn=m(Pn);var Jt="http://json-schema.org/draft-07/schema",rn="LocationV1alpha1",Xn="A location is a marker that references other places to look for catalog data.",_n=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],H=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],be={$schema:Jt,$id:rn,description:Xn,examples:_n,allOf:H};const Fe=m(be),tt="ownedBy",It="ownerOf",Ot="consumesApi",jt="apiConsumedBy",ne="providesApi",We="apiProvidedBy",He="dependsOn",Me="dependencyOf",Xe="parentOf",Ve="childOf",Et="memberOf",Dt="hasMember",Gt="partOf",fn="hasPart";var an="http://json-schema.org/draft-07/schema",ta="ResourceV1alpha1",Mn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",Rn=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Vn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],na={$schema:an,$id:ta,description:Mn,examples:Rn,allOf:Vn};const Nn=m(na);var qn="http://json-schema.org/draft-07/schema",ia="SystemV1alpha1",_a="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",ba=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],Pa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],xa={$schema:qn,$id:ia,description:_a,examples:ba,allOf:Pa};const ja=m(xa);var Da="http://json-schema.org/draft-07/schema",Fa="UserV1alpha1",lr="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",rr=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],$a=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],Ja={$schema:Da,$id:Fa,description:lr,examples:rr,allOf:$a};const Sr=m(Ja),cr="backstage.io/managed-by-location",or="backstage.io/managed-by-origin-location",ga="backstage.io/source-location",ur=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function Ha(Ne){if(typeof Ne!="string")throw new TypeError(`Unable to parse location ref '${Ne}', unexpected argument ${typeof Ne}`);const oe=Ne.indexOf(":");if(oe<0)throw new TypeError(`Unable to parse location ref '${Ne}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const it=Ne.substring(0,oe).trim(),pn=Ne.substring(oe+1).trim();if(!it||!pn)throw new TypeError(`Unable to parse location ref '${Ne}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(it==="http"||it==="https")throw new TypeError(`Invalid location ref '${Ne}', please prefix it with 'url:', e.g. 'url:${Ne}'`);if(ur.test(pn))throw new TypeError(`Invalid location ref '${Ne}', target is a javascript: URL`);return{type:it,target:pn}}function ir(Ne){const{type:oe,target:it}=Ne;if(oe){if(!it)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(ur.test(it))throw new TypeError(`Invalid location ref '${oe}:${it}', target is a javascript: URL`);return`${oe}:${it}`}function Ga(Ne){var oe,it,pn,vn,Fn;const va=(Fn=(it=(oe=Ne.metadata)==null?void 0:oe.annotations)==null?void 0:it[ga])!=null?Fn:(vn=(pn=Ne.metadata)==null?void 0:pn.annotations)==null?void 0:vn[cr];if(!va)throw new Error(`Entity '${Q(Ne)}' is missing location`);return Ha(va)}},12082:(Dn,Ct,e)=>{"use strict";e.d(Ct,{$K:()=>ea,Lz:()=>it,l2:()=>dn,Ke:()=>St,l9:()=>Zt,i3:()=>It,Fb:()=>We,W:()=>na,iO:()=>bo,Qf:()=>V,WW:()=>ge,kF:()=>cn,n5:()=>D,R8:()=>Sn,aQ:()=>Fa,gE:()=>kn,kI:()=>Re,u_:()=>He,Yi:()=>Fe,Ud:()=>yn,gu:()=>cr,FA:()=>Gt,Z8:()=>Uo});var s=e(14041),l=e(39067),b=e.n(l),_=e(97388),z=e(96403),r=e.n(z),q=e(48821),ee=e(11638),a=e(46195);const he=null;function _e(d,n){let i,g=!1;const T={};try{i=n!=null&&n.key?d.getConfig(n.key):d;for(const se of he){const Le=i.getOptionalNumber(se);Le!==void 0&&(T[se]=Le,g=!0)}}catch(se){throw new InputError(`Failed to read duration from config, ${se}`)}try{if(!g){const Le=he.map(Ke=>`'${Ke}'`).join(", ");throw new Error(`Needs one or more of ${Le}`)}const se=i.keys().filter(Le=>!he.includes(Le));if(se.length){const Le=se.length===1?"property":"properties",Ke=se.map($t=>`'${$t}'`).join(", "),At=he.map($t=>`'${$t}'`).join(", ");throw new Error(`Unknown ${Le} ${Ke}; expected one or more of ${At}`)}}catch(se){let Le="Failed to read duration from config";throw n!=null&&n.key&&(Le+=` at '${n.key}'`),new InputError(`${Le}, ${se}`)}return T}var le=Object.defineProperty,ie=(d,n,i)=>n in d?le(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,G=(d,n,i)=>(ie(d,typeof n!="symbol"?n+"":n,i),i);const we=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function Ce(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function ft(d){return typeof d!="object"||d===null?d:Array.isArray(d)?d.map(ft):Object.fromEntries(Object.entries(d).map(([n,i])=>[n,ft(i)]))}function k(d,n){if(d===null)return;if(d===void 0)return n===void 0?void 0:k(n);if(typeof d!="object"||Array.isArray(d))return d;const i=Ce(n)?n:{},g={};for(const T of new Set([...Object.keys(d),...Object.keys(i)])){const se=k(d[T],i[T]);se!==void 0&&(g[T]=se)}return g}function ce(d){if(d===null)return"null";if(Array.isArray(d))return"array";const n=typeof d;return n==="number"&&isNaN(d)?"nan":n==="string"&&d===""?"empty-string":n}const I={type(d,n,i,g){return`Invalid type in config for key '${d}' in '${n}', got ${i}, wanted ${g}`},missing(d,n){return`Missing required config value at '${d}' in '${n}'`},convert(d,n,i){return`Unable to convert config value for key '${d}' in '${n}' to a ${i}`}};class h{constructor(n,i="mock-config",g,T=""){this.data=n,this.context=i,this.fallback=g,this.prefix=T,G(this,"filteredKeys"),G(this,"notifiedFilteredKeys",new Set)}static fromConfigs(n){return n.length===0?new h(void 0):n.reduce((i,{data:g,context:T,filteredKeys:se,deprecatedKeys:Le})=>{const Ke=new h(g,T,i);if(Ke.filteredKeys=se,Le)for(const{key:At,description:$t}of Le)console.warn(`The configuration key '${At}' of ${T} is deprecated and may be removed soon. ${$t||""}`);return Ke},void 0)}has(n){var i,g;const T=this.readValue(n);return T===null?!1:T!==void 0?!0:(g=(i=this.fallback)==null?void 0:i.has(n))!=null?g:!1}keys(){var n,i;const g=this.data?Object.keys(this.data):[],T=(i=(n=this.fallback)==null?void 0:n.keys())!=null?i:[];return[...new Set([...g,...T])].filter(se=>{var Le;return((Le=this.data)==null?void 0:Le[se])!==null})}get(n){const i=this.getOptional(n);if(i===void 0)throw new Error(I.missing(this.fullKey(n!=null?n:""),this.context));return i}getOptional(n){var i,g;const T=ft(this.readValue(n)),se=(i=this.fallback)==null?void 0:i.getOptional(n);if(T!==null)return T===void 0?k(se):se===void 0?k(T):k(T,se)}getConfig(n){const i=this.getOptionalConfig(n);if(i===void 0)throw new Error(I.missing(this.fullKey(n),this.context));return i}getOptionalConfig(n){var i;const g=this.readValue(n),T=(i=this.fallback)==null?void 0:i.getOptionalConfig(n);if(Ce(g))return this.copy(g,n,T);if(g!==null){if(g!==void 0)throw new TypeError(I.type(this.fullKey(n),this.context,ce(g),"object"));return T}}getConfigArray(n){const i=this.getOptionalConfigArray(n);if(i===void 0)throw new Error(I.missing(this.fullKey(n),this.context));return i}getOptionalConfigArray(n){var i;const g=this.readConfigValue(n,T=>{if(!Array.isArray(T))return{expected:"object-array"};for(const[se,Le]of T.entries())if(!Ce(Le))return{expected:"object-array",value:Le,key:`${n}[${se}]`};return!0});if(g)return g.map((T,se)=>this.copy(T,`${n}[${se}]`))}getNumber(n){const i=this.getOptionalNumber(n);if(i===void 0)throw new Error(I.missing(this.fullKey(n),this.context));return i}getOptionalNumber(n){const i=this.readConfigValue(n,T=>typeof T=="number"||typeof T=="string"||{expected:"number"});if(typeof i=="number"||i===void 0)return i;const g=Number(i);if(!Number.isFinite(g))throw new Error(I.convert(this.fullKey(n),this.context,"number"));return g}getBoolean(n){const i=this.getOptionalBoolean(n);if(i===void 0)throw new Error(I.missing(this.fullKey(n),this.context));return i}getOptionalBoolean(n){const i=this.readConfigValue(n,T=>typeof T=="boolean"||typeof T=="number"||typeof T=="string"||{expected:"boolean"});if(typeof i=="boolean"||i===void 0)return i;const g=String(i).trim();if(/^(?:y|yes|true|1|on)$/i.test(g))return!0;if(/^(?:n|no|false|0|off)$/i.test(g))return!1;throw new Error(I.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const i=this.getOptionalString(n);if(i===void 0)throw new Error(I.missing(this.fullKey(n),this.context));return i}getOptionalString(n){return this.readConfigValue(n,i=>typeof i=="string"&&i!==""||{expected:"string"})}getStringArray(n){const i=this.getOptionalStringArray(n);if(i===void 0)throw new Error(I.missing(this.fullKey(n),this.context));return i}getOptionalStringArray(n){return this.readConfigValue(n,i=>{if(!Array.isArray(i))return{expected:"string-array"};for(const[g,T]of i.entries())if(typeof T!="string"||T==="")return{expected:"string-array",value:T,key:`${n}[${g}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,i,g){const T=new h(n,this.context,g,this.fullKey(i));return T.filteredKeys=this.filteredKeys,T}readConfigValue(n,i){var g,T;const se=this.readValue(n);if(se===void 0)return(T=this.fallback)==null?void 0:T.readConfigValue(n,i);if(se===null)return;const Le=i(se);if(Le!==!0){const{key:Ke=n,value:At=se,expected:$t}=Le;throw new TypeError(I.type(this.fullKey(Ke),this.context,ce(At),$t))}return se}readValue(n){const i=n?n.split("."):[];for(const T of i)if(!we.test(T))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let g=this.data;for(const[T,se]of i.entries())if(Ce(g))g=g[se];else if(g!=null){const Le=this.fullKey(i.slice(0,T).join("."));throw new TypeError(I.type(Le,this.context,ce(g),"object"))}return g}}var M=e(18690),C=e(21613),v=e(73466),N=e(59294),Q=e(46155),De=e.n(Q),Ee=e(11746),X=e(47304),p=Object.defineProperty,j=(d,n,i)=>n in d?p(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,J=(d,n,i)=>(j(d,typeof n!="symbol"?n+"":n,i),i);class ue{constructor(...n){J(this,"holders"),this.holders=n}get(n){for(const i of this.holders){const g=i.get(n);if(g)return g}}}const Te=(0,_.tK)("api-context"),dt=d=>{var n;const{apis:i,children:g}=d,T=(n=(0,s.useContext)(Te))==null?void 0:n.atVersion(1),se=T?new ue(i,T):i;return s.createElement(Te.Provider,{value:(0,_.Bl)({1:se}),children:g})};dt.propTypes={apis:b().shape({get:b().func.isRequired}).isRequired,children:b().node};var Ge=Object.defineProperty,rt=(d,n,i)=>n in d?Ge(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,pt=(d,n,i)=>(rt(d,typeof n!="symbol"?n+"":n,i),i);class qe{constructor(n){this.factories=n,pt(this,"apis",new Map)}static validateFactories(n,i){for(const g of i){const T=[g],se=new Set;for(;T.length;){const Le=T.shift(),Ke=n.get(Le);if(Ke)for(const At of Object.values(Ke.deps)){if(At.id===g.id)throw new Error(`Circular dependency of api factory for ${g}`);se.has(At)||(se.add(At),T.push(At))}}}}get(n){return this.load(n)}load(n,i=[]){const g=this.apis.get(n.id);if(g)return g;const T=this.factories.get(n);if(!T)return;if(i.includes(T.api))throw new Error(`Circular dependency of api factory for ${T.api}`);const se=this.loadDeps(n,T.deps,[...i,T.api]),Le=T.factory(se);return this.apis.set(n.id,Le),Le}loadDeps(n,i,g){const T={};for(const se in i)if(i.hasOwnProperty(se)){const Le=i[se],Ke=this.load(Le,g);if(!Ke)throw new Error(`No API factory available for dependency ${Le} of dependent ${n}`);T[se]=Ke}return T}}var st=Object.defineProperty,Oe=(d,n,i)=>n in d?st(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,je=(d,n,i)=>(Oe(d,typeof n!="symbol"?n+"":n,i),i),$e=(d=>(d[d.default=10]="default",d[d.app=50]="app",d[d.static=100]="static",d))($e||{});class vt{constructor(){je(this,"factories",new Map)}register(n,i){const g=$e[n],T=this.factories.get(i.api.id);return T&&T.priority>=g?!1:(this.factories.set(i.api.id,{priority:g,factory:i}),!0)}get(n){const i=this.factories.get(n.id);if(i)return i.factory}getAllApis(){const n=new Set;for(const{factory:i}of this.factories.values())n.add(i.api);return n}}function ht(d){return new Promise((n,i)=>{const g=d.width||500,T=d.height||700,se=window.screen.width/2-g/2,Le=window.screen.height/2-T/2,Ke=window.open(d.url,d.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${g},height=${T},top=${Le},left=${se}`);let At="";if(!Ke||typeof Ke.closed=="undefined"||Ke.closed){const Tn=new Error("Failed to open auth popup.");Tn.name="PopupRejectedError",i(Tn);return}const $t=Tn=>{if(Tn.source!==Ke||Tn.origin!==d.origin)return;const{data:fa}=Tn;if(fa.type==="config_info"){At=fa.targetOrigin;return}if(fa.type!=="authorization_response")return;const aa=fa;if("error"in aa){const ua=new Error(aa.error.message);ua.name=aa.error.name,i(ua)}else n(aa.response);Kn()},Hn=setInterval(()=>{if(Ke.closed){const Tn=`Login failed, ${At&&At!==window.location.origin?`Incorrect app origin, expected ${At}`:"popup was closed"}`,fa=new Error(Tn);fa.name="PopupClosedError",i(fa),Kn()}},100);function Kn(){window.removeEventListener("message",$t),clearInterval(Hn)}window.addEventListener("message",$t)})}var Ft=Object.defineProperty,me=(d,n,i)=>n in d?Ft(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,ke=(d,n,i)=>(me(d,typeof n!="symbol"?n+"":n,i),i);let bt=!1;function Yt(d){return[...d].join(" ")}class yt{constructor(n){ke(this,"discoveryApi"),ke(this,"environment"),ke(this,"provider"),ke(this,"joinScopesFunc"),ke(this,"authRequester"),ke(this,"sessionTransform"),ke(this,"enableExperimentalRedirectFlow"),ke(this,"popupOptions");var i;const{configApi:g,discoveryApi:T,environment:se,provider:Le,joinScopes:Ke=Yt,oauthRequestApi:At,sessionTransform:$t=Kn=>Kn,popupOptions:Hn}=n;!bt&&!g&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),bt=!0),this.enableExperimentalRedirectFlow=g&&(i=g.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?i:!1,this.authRequester=At.createAuthRequester({provider:Le,onAuthRequest:async Kn=>this.enableExperimentalRedirectFlow?this.executeRedirect(Kn):this.showPopup(Kn)}),this.discoveryApi=T,this.environment=se,this.provider=Le,this.joinScopesFunc=Ke,this.sessionTransform=$t,this.popupOptions=Hn}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const i=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(T=>{throw new Error(`Auth refresh request failed, ${T}`)});if(!i.ok){const T=new Error(`Auth refresh request failed, ${i.statusText}`);throw T.status=i.status,T}const g=await i.json();if(g.error){const T=new Error(g.error.message);throw g.error.name&&(T.name=g.error.name),T}return await this.sessionTransform(g)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!n.ok){const i=new Error(`Logout request failed, ${n.statusText}`);throw i.status=n.status,i}}async showPopup(n){var i,g,T,se,Le,Ke,At,$t;const Hn=this.joinScopesFunc(n),Kn=await this.buildUrl("/start",{scope:Hn,origin:window.location.origin,flow:"popup"}),Tn=(g=(i=this.popupOptions)==null?void 0:i.size)!=null&&g.fullscreen?window.screen.width:((se=(T=this.popupOptions)==null?void 0:T.size)==null?void 0:se.width)||450,fa=(Ke=(Le=this.popupOptions)==null?void 0:Le.size)!=null&&Ke.fullscreen?window.screen.height:(($t=(At=this.popupOptions)==null?void 0:At.size)==null?void 0:$t.height)||730,aa=await ht({url:Kn,name:`${this.provider.title} Login`,origin:new URL(Kn).origin,width:Tn,height:fa});return await this.sessionTransform(aa)}async executeRedirect(n){const i=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:i,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,i){const g=await this.discoveryApi.getBaseUrl("auth"),T=this.buildQueryString({...i,env:this.environment});return`${g}/${this.provider.id}${n}${T}`}buildQueryString(n){if(!n)return"";const i=Object.entries(n).map(([g,T])=>{if(typeof T=="string")return`${encodeURIComponent(g)}=${encodeURIComponent(T)}`;if(T)return encodeURIComponent(g)}).filter(Boolean).join("&");return i?`?${i}`:""}}var _t=Object.defineProperty,S=(d,n,i)=>n in d?_t(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,R=(d,n,i)=>(S(d,typeof n!="symbol"?n+"":n,i),i);class W{constructor(n){R(this,"discoveryApi"),R(this,"environment"),R(this,"provider");const{discoveryApi:i,environment:g,provider:T}=n;this.discoveryApi=i,this.environment=g,this.provider=T}async createSession(){const n=await this.buildUrl("/start"),i=await ht({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:450,height:730});return{...i,id:i.profile.email}}async refreshSession(){}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!n.ok){const i=new Error(`Logout request failed, ${n.statusText}`);throw i.status=n.status,i}}async buildUrl(n){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${n}?env=${this.environment}`}}function Z(d,n){for(const i of n)if(!d.has(i))return!1;return!0}class Pe{constructor(n){this.options=n}sessionExistsAndHasScope(n,i){if(!n)return!1;if(!i||this.options.sessionScopes===void 0)return!0;const g=this.options.sessionScopes(n);return Z(g,i)}getExtendedScope(n,i){const g=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const T=this.options.sessionScopes(n);for(const se of T)g.add(se)}if(i)for(const T of i)g.add(T);return g}}var Ue=Object.defineProperty,lt=(d,n,i)=>n in d?Ue(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,et=(d,n,i)=>(lt(d,typeof n!="symbol"?n+"":n,i),i);class Je{constructor(){et(this,"isClosed",!1),et(this,"terminatingError"),et(this,"observable",new(r())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)}))),et(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(i=>i.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(i=>i.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,i,g){const T=typeof n=="function"?{next:n,error:i,complete:g}:n;return this.observable.subscribe(T)}}class Wt{constructor(n){et(this,"isClosed"),et(this,"currentValue"),et(this,"terminatingError"),et(this,"observable"),et(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(r())(i=>this.isClosed?(this.terminatingError?i.error(this.terminatingError):i.complete(),()=>{}):(i.next(this.currentValue),this.subscribers.add(i),()=>{this.subscribers.delete(i)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(i=>i.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(i=>i.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,i,g){const T=typeof n=="function"?{next:n,error:i,complete:g}:n;return this.observable.subscribe(T)}}var tn=Object.defineProperty,Ut=(d,n,i)=>n in d?tn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,mt=(d,n,i)=>(Ut(d,typeof n!="symbol"?n+"":n,i),i);class Xt{constructor(){mt(this,"subject",new Wt(q.S.SignedOut)),mt(this,"signedIn",!1)}setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?q.S.SignedIn:q.S.SignedOut))}sessionState$(){return this.subject}}var on=Object.defineProperty,ln=(d,n,i)=>n in d?on(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,qt=(d,n,i)=>(ln(d,typeof n!="symbol"?n+"":n,i),i);class ve{constructor(n){qt(this,"connector"),qt(this,"helper"),qt(this,"sessionScopesFunc"),qt(this,"sessionShouldRefreshFunc"),qt(this,"stateTracker",new Xt),qt(this,"refreshPromise"),qt(this,"currentSession");const{connector:i,defaultScopes:g=new Set,sessionScopes:T,sessionShouldRefresh:se}=n;this.connector=i,this.sessionScopesFunc=T,this.sessionShouldRefreshFunc=se,this.helper=new Pe({sessionScopes:T,defaultScopes:g})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const g=await this.collapsedSessionRefresh(n.scopes),T=this.sessionScopesFunc(this.currentSession),se=this.sessionScopesFunc(g);return Z(se,T)&&(this.currentSession=g),g}catch(g){if(n.optional)return;throw g}}if(!this.currentSession&&!n.instantPopup)try{const i=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=i,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,n));try{const i=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),i}finally{delete this.refreshPromise}}}var Qe=Object.defineProperty,Kt=(d,n,i)=>n in d?Qe(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Vt=(d,n,i)=>(Kt(d,typeof n!="symbol"?n+"":n,i),i);class zt{constructor(n){Vt(this,"connector"),Vt(this,"helper"),Vt(this,"stateTracker",new Xt),Vt(this,"currentSession");const{connector:i,defaultScopes:g=new Set,sessionScopes:T}=n;this.connector=i,this.helper=new Pe({sessionScopes:T,defaultScopes:g})}setSession(n){this.currentSession=n,this.stateTracker.setIsSignedIn(!!n)}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes))return this.currentSession;if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var Bt=Object.defineProperty,Ln=(d,n,i)=>n in d?Bt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,mn=(d,n,i)=>(Ln(d,typeof n!="symbol"?n+"":n,i),i);class nn{constructor(n){mn(this,"manager"),mn(this,"storageKey"),mn(this,"schema"),mn(this,"sessionShouldRefreshFunc"),mn(this,"helper");const{manager:i,storageKey:g,schema:T,sessionScopes:se,sessionShouldRefresh:Le=()=>!1}=n;this.manager=i,this.storageKey=g,this.schema=T,this.sessionShouldRefreshFunc=Le,this.helper=new Pe({sessionScopes:se,defaultScopes:new Set})}setSession(n){this.manager.setSession(n),this.saveSession(n)}async getSession(n){const{scopes:i}=n,g=this.loadSession();if(this.helper.sessionExistsAndHasScope(g,i)&&!this.sessionShouldRefreshFunc(g))return this.manager.setSession(g),g;const T=await this.manager.getSession(n);return this.saveSession(T),T}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const n=localStorage.getItem(this.storageKey);if(n){const i=JSON.parse(n,(g,T)=>(T==null?void 0:T.__type)==="Set"?new Set(T.__value):T);try{return this.schema.parse(i)}catch(g){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${g}`),g}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(n){if(n===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(n)}catch(i){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${i}`);return}localStorage.setItem(this.storageKey,JSON.stringify(n,(i,g)=>g instanceof Set?{__type:"Set",__value:Array.from(g)}:g))}}var On=Object.defineProperty,nt=(d,n,i)=>n in d?On(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,gt=(d,n,i)=>(nt(d,typeof n!="symbol"?n+"":n,i),i);const Tt={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class ot{constructor(n){gt(this,"sessionManager"),gt(this,"scopeTransform"),this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}static create(n){const{configApi:i,discoveryApi:g,environment:T="development",provider:se=Tt,oauthRequestApi:Le,defaultScopes:Ke=[],scopeTransform:At=Tn=>Tn,popupOptions:$t}=n,Hn=new yt({configApi:i,discoveryApi:g,environment:T,provider:se,oauthRequestApi:Le,sessionTransform({backstageIdentity:Tn,...fa}){var aa;const ua={...fa,providerInfo:{idToken:fa.providerInfo.idToken,accessToken:fa.providerInfo.accessToken,scopes:ot.normalizeScopes(At,fa.providerInfo.scope),expiresAt:fa.providerInfo.expiresInSeconds?new Date(Date.now()+fa.providerInfo.expiresInSeconds*1e3):void 0}};if(Tn){const Ya=(aa=Tn.expiresInSeconds)!=null?aa:fa.providerInfo.expiresInSeconds;ua.backstageIdentity={token:Tn.token,identity:Tn.identity,expiresAt:Ya?new Date(Date.now()+Ya*1e3):void 0}}return ua},popupOptions:$t}),Kn=new ve({connector:Hn,defaultScopes:new Set(Ke),sessionScopes:Tn=>Tn.providerInfo.scopes,sessionShouldRefresh:Tn=>{var fa,aa;let ua=1/0;return(fa=Tn.providerInfo)!=null&&fa.expiresAt&&(ua=Math.min(ua,(Tn.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(aa=Tn.backstageIdentity)!=null&&aa.expiresAt&&(ua=Math.min(ua,(Tn.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),ua<60*5}});return new ot({sessionManager:Kn,scopeTransform:At})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,i){var g;const T=ot.normalizeScopes(this.scopeTransform,n),se=await this.sessionManager.getSession({...i,scopes:T});return(g=se==null?void 0:se.providerInfo.accessToken)!=null?g:""}async getIdToken(n={}){var i;const g=await this.sessionManager.getSession({...n,scopes:new Set(["openid"])});return(i=g==null?void 0:g.providerInfo.idToken)!=null?i:""}async getBackstageIdentity(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.backstageIdentity}async getProfile(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.profile}static normalizeScopes(n,i){if(!i)return new Set;const g=Array.isArray(i)?i:i.split(/[\s|,]/).filter(Boolean);return new Set(n(g))}}const Ze={id:"github",title:"GitHub",icon:()=>null};class V{static create(n){const{configApi:i,discoveryApi:g,environment:T="development",provider:se=Ze,oauthRequestApi:Le,defaultScopes:Ke=["read:user"]}=n;return ot.create({configApi:i,discoveryApi:g,oauthRequestApi:Le,provider:se,environment:T,defaultScopes:Ke})}}const de={id:"gitlab",title:"GitLab",icon:()=>null};class ge{static create(n){const{configApi:i,discoveryApi:g,environment:T="development",provider:se=de,oauthRequestApi:Le,defaultScopes:Ke=["read_user"]}=n;return ot.create({configApi:i,discoveryApi:g,oauthRequestApi:Le,provider:se,environment:T,defaultScopes:Ke})}}const Pt={id:"google",title:"Google",icon:()=>null},xt="https://www.googleapis.com/auth/";class cn{static create(n){const{configApi:i,discoveryApi:g,oauthRequestApi:T,environment:se="development",provider:Le=Pt,defaultScopes:Ke=["openid",`${xt}userinfo.email`,`${xt}userinfo.profile`]}=n;return ot.create({configApi:i,discoveryApi:g,oauthRequestApi:T,provider:Le,environment:se,defaultScopes:Ke,scopeTransform(At){return At.map($t=>$t==="openid"?$t:$t==="profile"||$t==="email"?`${xt}userinfo.${$t}`:$t.startsWith(xt)?$t:`${xt}${$t}`)}})}}const An={id:"okta",title:"Okta",icon:()=>null},Bn=new Set(["openid","profile","email","phone","address","groups","offline_access"]),$n="okta.";class kn{static create(n){const{configApi:i,discoveryApi:g,environment:T="development",provider:se=An,oauthRequestApi:Le,defaultScopes:Ke=["openid","email","profile","offline_access"]}=n;return ot.create({configApi:i,discoveryApi:g,oauthRequestApi:Le,provider:se,environment:T,defaultScopes:Ke,scopeTransform(At){return At.map($t=>Bn.has($t)||$t.startsWith($n)?$t:`${$n}${$t}`)}})}}const bn=a.z.object({profile:a.z.object({email:a.z.string().optional(),displayName:a.z.string().optional(),picture:a.z.string().optional()}),backstageIdentity:a.z.object({token:a.z.string(),identity:a.z.object({type:a.z.literal("user"),userEntityRef:a.z.string(),ownershipEntityRefs:a.z.array(a.z.string())})})}),jn={id:"saml",title:"SAML",icon:()=>null};class ra{constructor(n){this.sessionManager=n}static create(n){const{discoveryApi:i,environment:g="development",provider:T=jn}=n,se=new W({discoveryApi:i,environment:g,provider:T}),Le=new zt({connector:se}),Ke=new nn({manager:Le,storageKey:`${T.id}Session`,schema:bn});return new ra(Ke)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.backstageIdentity}async getProfile(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.profile}}var ct=Object.defineProperty,m=(d,n,i)=>n in d?ct(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,w=(d,n,i)=>(m(d,typeof n!="symbol"?n+"":n,i),i);const K={id:"microsoft",title:"Microsoft",icon:()=>null},re=class kr{constructor(n){w(this,"oauth2"),w(this,"configApi"),w(this,"environment"),w(this,"provider"),w(this,"oauthRequestApi"),w(this,"discoveryApi"),w(this,"scopeTransform");const{configApi:i,environment:g="development",provider:T=K,oauthRequestApi:se,discoveryApi:Le,defaultScopes:Ke=["openid","offline_access","profile","email","User.Read"],scopeTransform:At=$t=>$t.concat("offline_access")}=n;this.configApi=i,this.environment=g,this.provider=T,this.oauthRequestApi=se,this.discoveryApi=Le,this.scopeTransform=At,this.oauth2={[kr.MicrosoftGraphID]:ot.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:Ke})}}static create(n){return new kr(n)}microsoftGraph(){return this.oauth2[kr.MicrosoftGraphID]}static resourceForScopes(n){var i;const g=[...new Set(n.split(" ").map(kr.resourceForScope).filter(se=>se!=="openid"))];if(g.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${g.join(", ")}. Access tokens can only have a single audience.`));const T=(i=g[0])!=null?i:kr.MicrosoftGraphID;return Promise.resolve(T)}static resourceForScope(n){var i;const g=(i=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:i.groups;if(g){const{resourceURI:T}=g;return T.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return kr.MicrosoftGraphID}}async getAccessToken(n,i){const g=n===void 0?kr.MicrosoftGraphID:await kr.resourceForScopes(Array.isArray(n)?n.join(" "):n);return g in this.oauth2||(this.oauth2[g]=ot.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[g].getAccessToken(n,i)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};w(re,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let D=re;const U={id:"onelogin",title:"onelogin",icon:()=>null},Y=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Se="onelogin.";class Re{static create(n){const{configApi:i,discoveryApi:g,environment:T="development",provider:se=U,oauthRequestApi:Le}=n;return ot.create({configApi:i,discoveryApi:g,oauthRequestApi:Le,provider:se,environment:T,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(Ke){return Ke.map(At=>Y.has(At)||At.startsWith(Se)?At:`${Se}${At}`)}})}}const ut={id:"bitbucket",title:"Bitbucket",icon:()=>null};class St{static create(n){const{configApi:i,discoveryApi:g,environment:T="development",provider:se=ut,oauthRequestApi:Le,defaultScopes:Ke=["account"]}=n;return ot.create({configApi:i,discoveryApi:g,oauthRequestApi:Le,provider:se,environment:T,defaultScopes:Ke})}}const sn={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class Zt{static create(n){const{configApi:i,discoveryApi:g,environment:T="development",provider:se=sn,oauthRequestApi:Le,defaultScopes:Ke=["PROJECT_ADMIN"]}=n;return ot.create({configApi:i,discoveryApi:g,oauthRequestApi:Le,provider:se,environment:T,defaultScopes:Ke})}}const hn={id:"atlassian",title:"Atlassian",icon:()=>null};class dn{static create(n){const{configApi:i,discoveryApi:g,environment:T="development",provider:se=hn,oauthRequestApi:Le}=n;return ot.create({configApi:i,discoveryApi:g,oauthRequestApi:Le,provider:se,environment:T})}}const kt={id:"vmwareCloudServices",title:"VMware Cloud",icon:()=>null};class yn{static create(n){const{configApi:i,discoveryApi:g,oauthRequestApi:T,environment:se="development",provider:Le=kt,defaultScopes:Ke=["openid"]}=n;return ot.create({configApi:i,discoveryApi:g,oauthRequestApi:T,provider:Le,environment:se,defaultScopes:Ke})}}var gn=Object.defineProperty,Un=(d,n,i)=>n in d?gn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Qn=(d,n,i)=>(Un(d,typeof n!="symbol"?n+"":n,i),i);class ea{constructor(){Qn(this,"subject",new Je)}post(n){this.subject.next(n)}alert$(){return this.subject}}class Pn{constructor(n){this.actualApis=n}static fromApis(n){return new Pn(n)}captureEvent(n){this.actualApis.forEach(i=>{try{i.captureEvent(n)}catch{}})}}class Sn{captureEvent(n){}}var Jt=Object.defineProperty,rn=(d,n,i)=>n in d?Jt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Xn=(d,n,i)=>(rn(d,typeof n!="symbol"?n+"":n,i),i);const _n="theme";class H{constructor(n){this.themes=n,Xn(this,"activeThemeId"),Xn(this,"subject",new Wt(void 0))}static createWithStorage(n){var i;const g=new H(n);if(!window.localStorage)return g;const T=(i=window.localStorage.getItem(_n))!=null?i:void 0;return g.setActiveThemeId(T),g.activeThemeId$().subscribe(se=>{se?window.localStorage.setItem(_n,se):window.localStorage.removeItem(_n)}),window.addEventListener("storage",se=>{var Le;if(se.key===_n){const Ke=(Le=localStorage.getItem(_n))!=null?Le:void 0;g.setActiveThemeId(Ke)}}),g}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const be="Invalid discovery URL pattern,";class Fe{constructor(n){this.parts=n}static compile(n){const i=n.split(/\{\{\s*pluginId\s*\}\}/),g=i.join("pluginId");let T;try{T=new URL(g)}catch{throw new Error(`${be} URL '${g}' is invalid`)}if(T.hash)throw new Error(`${be} URL must not have a hash`);if(T.search)throw new Error(`${be} URL must not have a query`);if(g.endsWith("/"))throw new Error(`${be} URL must not end with a slash`);return new Fe(i)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}class tt{constructor(n,i){this.endpoints=n,this.defaultEndpoint=i}static fromConfig(n,i){var g,T;const se=(g=i==null?void 0:i.pathPattern)!=null?g:"/api/{{ pluginId }}",Le=n.getString("backend.baseUrl"),Ke=(T=n.getOptionalConfigArray("discovery.endpoints"))==null?void 0:T.flatMap(At=>{const $t=typeof At.get("target")=="object"?At.getString("target.external"):At.getString("target"),Hn=Fe.compile($t);return At.getStringArray("plugins").map(Kn=>[Kn,Hn])});return new tt(new Map(Ke),Fe.compile(`${Le}${se}`))}async getBaseUrl(n){const i=this.endpoints.get(n);return i?i.getBaseUrl(n):this.defaultEndpoint.getBaseUrl(n)}}class It{constructor(n,i){this.alertApi=n,this.errorApi=i}post(n,i){return i!=null&&i.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,i)}error$(){return this.errorApi.error$()}}var Ot=Object.defineProperty,jt=(d,n,i)=>n in d?Ot(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,ne=(d,n,i)=>(jt(d,typeof n!="symbol"?n+"":n,i),i);class We{constructor(){ne(this,"subject",new Je)}post(n,i){this.subject.next({error:n,context:i})}error$(){return this.subject}}class He{static forward(n,i){window.addEventListener("unhandledrejection",g=>{n.post(g.reason,i)})}}var Me=Object.defineProperty,Xe=(d,n,i)=>n in d?Me(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Ve=(d,n,i)=>(Xe(d,typeof n!="symbol"?n+"":n,i),i);function Et(d){if(d.length<3)throw new Error(`The '${d}' feature flag must have a minimum length of three characters.`);if(d.length>150)throw new Error(`The '${d}' feature flag must not exceed 150 characters.`);if(!d.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${d}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class Dt{constructor(){Ve(this,"registeredFeatureFlags",[]),Ve(this,"flags")}registerFlag(n){Et(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===q.F.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[g,T]of Object.entries(n.states))this.flags.set(g,T);const i=Array.from(this.flags.entries()).filter(([,g])=>g===q.F.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(i)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const i=JSON.parse(n);if(typeof i!="object"||i===null||Array.isArray(i))return new Map;const g=Object.entries(i).filter(([T,se])=>(Et(T),se===q.F.Active));return new Map(g)}catch{return new Map}}}function Gt(d){var n;let i=d.baseImplementation||e.g.fetch;const g=[(n=d.middleware)!=null?n:[]].flat().reverse();for(const T of g)i=T.apply(i);return{fetch:i}}class fn{constructor(n,i,g,T){this.identityApi=n,this.allowUrl=i,this.headerName=g,this.headerValue=T}static create(n){var i,g;const T=an(n),se=((i=n.header)==null?void 0:i.name)||"authorization",Le=((g=n.header)==null?void 0:g.value)||(Ke=>`Bearer ${Ke}`);return new fn(n.identityApi,T,se,Le)}apply(n){return async(i,g)=>{const T=new Request(i,g),{token:se}=await this.identityApi.getCredentials();return T.headers.get(this.headerName)||typeof se!="string"||!se||!this.allowUrl(T.url)?n(i,g):(T.headers.set(this.headerName,this.headerValue(se)),n(T))}}}function an(d){return d.allowUrl?d.allowUrl:d.urlPrefixAllowlist?ta(d.urlPrefixAllowlist):d.config?ta([d.config.getString("backend.baseUrl")]):()=>!1}function ta(d){const n=d.map(i=>i.replace(/\/$/,""));return i=>n.some(g=>i===g||i.startsWith(`${g}/`))}function Mn(d,n){return!n||n==="/"?d:`${d.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class Rn{constructor(n){this.discoveryApi=n}apply(n){return async(i,g)=>{const T=new Request(i,g),se="plugin://";if(!T.url.startsWith(se))return n(i,g);const{hostname:Le,pathname:Ke,search:At,hash:$t,username:Hn,password:Kn}=new URL(`http://${T.url.substring(se.length)}`);let Tn=await this.discoveryApi.getBaseUrl(Le);if(Hn||Kn){const aa=new URL(Tn),ua=`${Hn}${Kn?`:${Kn}`:""}@`;Tn=`${aa.protocol}//${ua}${aa.host}${aa.pathname}`}const fa=`${Mn(Tn,Ke)}${At}${$t}`;return n(fa,typeof i=="string"||Vn(i)?g:i)}}}function Vn(d){return typeof d=="object"&&(d==null?void 0:d.constructor)===URL}class na{static resolvePluginProtocol(n){return new Rn(n.discoveryApi)}static injectIdentityAuth(n){return fn.create(n)}constructor(){}}var Nn=Object.defineProperty,qn=(d,n,i)=>n in d?Nn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,ia=(d,n,i)=>(qn(d,typeof n!="symbol"?n+"":n,i),i);function _a(d,n){for(const i of n)if(!d.has(i))return!1;return!0}function ba(d,...n){const i=new Set(d);for(const g of n)for(const T of g)i.add(T);return i}class Pa{constructor(){ia(this,"requests",[]),ia(this,"subject",new Wt(this.getCurrentPending()))}request(n){return new Promise((i,g)=>{this.requests.push({scopes:n,resolve:i,reject:g}),this.subject.next(this.getCurrentPending())})}resolve(n,i){this.requests=this.requests.filter(g=>_a(n,g.scopes)?(g.resolve(i),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(i=>i.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((i,g)=>ba(i,g.scopes),this.requests[0].scopes);return{scopes:n,resolve:i=>{n&&this.resolve(n,i)},reject:i=>{n&&this.reject(i)}}}}var xa=Object.defineProperty,ja=(d,n,i)=>n in d?xa(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Da=(d,n,i)=>(ja(d,typeof n!="symbol"?n+"":n,i),i);class Fa{constructor(){Da(this,"subject",new Wt([])),Da(this,"currentRequests",[]),Da(this,"handlerCount",0)}createAuthRequester(n){const i=new Pa,g=this.handlerCount;return this.handlerCount++,i.pending().subscribe({next:T=>{const se=this.currentRequests.slice(),Le=this.makeAuthRequest(T,n);Le?se[g]=Le:delete se[g],this.currentRequests=se,this.subject.next(se.filter(Boolean))}}),T=>i.request(T)}makeAuthRequest(n,i){const{scopes:g}=n;if(g)return{provider:i.provider,trigger:async()=>{const T=await i.onAuthRequest(g);n.resolve(T)},reject:()=>{const T=new Error("Login failed, rejected by user");T.name="RejectedError",n.reject(T)}}}authRequest$(){return this.subject}}var lr=Object.defineProperty,rr=(d,n,i)=>n in d?lr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,$a=(d,n,i)=>(rr(d,typeof n!="symbol"?n+"":n,i),i);const Ja=new Map,Sr=class co{constructor(n,i){this.namespace=n,this.errorApi=i,$a(this,"subscribers",new Set),$a(this,"observable",new(r())(g=>(this.subscribers.add(g),()=>{this.subscribers.delete(g)})))}static create(n){var i;return new co((i=n.namespace)!=null?i:"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{var i;for(const[g,T]of Ja.entries())(i=n.key)!=null&&i.startsWith(g)&&T.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let i,g="absent";try{const T=localStorage.getItem(this.getKeyName(n));T&&(i=JSON.parse(T,(se,Le)=>(typeof Le=="object"&&Le!==null&&Object.freeze(Le),Le)),g="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:i,presence:g}}forBucket(n){const i=`${this.namespace}/${n}`;return Ja.has(i)||Ja.set(i,new co(i,this.errorApi)),Ja.get(i)}async set(n,i){localStorage.setItem(this.getKeyName(n),JSON.stringify(i)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return co.hasSubscribed||(co.addStorageEventListener(),co.hasSubscribed=!0),this.observable.filter(({key:i})=>i===n)}handleStorageChange(n){if(!(n!=null&&n.startsWith(this.namespace)))return;const i=n==null?void 0:n.slice(`${this.namespace}/`.length);i.includes("/")||this.notifyChanges(decodeURIComponent(i))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const i=this.snapshot(n);for(const g of this.subscribers)g.next(i)}};$a(Sr,"hasSubscribed",!1);let cr=Sr;const or=(0,s.createContext)(void 0);function ga(){const[d]=(0,M.AV)(s.createElement(M.qh,{index:!0,element:s.createElement("div",null)}));return!d.index}const ur=(d,n)=>{try{const i=(0,C.ue)(n,{pathname:d}),g=i==null?void 0:i.filter(At=>{var $t;return(($t=At==null?void 0:At.route.routeRefs)==null?void 0:$t.size)>0}).pop(),T=g==null?void 0:g.route;if(!T||T.path===""&&d!=="/")return;let se;T.routeRefs.size===1&&(se=T.routeRefs.values().next().value);let Le;T.plugins.size===1&&(Le=T.plugins.values().next().value);const Ke=Object.entries((g==null?void 0:g.params)||{}).reduce((At,[$t,Hn])=>(Hn!==void 0&&$t!=="*"&&(At[$t]=Hn),At),{});return{extension:"App",pluginId:(Le==null?void 0:Le.getId())||"root",...se?{routeRef:se.id}:{},_routeNodeType:T.element,params:Ke}}catch{return}},Ha=({pathname:d,search:n,hash:i,attributes:g})=>{const T=(0,ee.st)();return(0,s.useEffect)(()=>{T.captureEvent("navigate",`${d}${n}${i}`,{attributes:g})},[T,d,n,i,g]),null},ir=({routeObjects:d})=>{const{pathname:n,search:i,hash:g}=(0,M.zy)(),{params:T,...se}=ur(n,d)||{params:{}};return s.createElement(ee.Ig,{attributes:se},s.createElement(Ha,{pathname:n,search:i,hash:g,attributes:T}))};function Ga(d){return ga()?Ne(d):""}function Ne(d){var n;let{pathname:i}=new URL((n=d.getOptionalString("app.baseUrl"))!=null?n:"/","http://sample.dev");return i=i.replace(/\/*$/,""),i}function oe({component:d,appIdentityProxy:n,children:i}){const[g,T]=(0,s.useState)(),se=(0,q.u)(q.p),Le=Ne(se);return g?(n.setTarget(g,{signOutTargetUrl:Le||"/"}),s.createElement(s.Fragment,null,i)):s.createElement(d,{onSignInSuccess:T})}function it(d){const{Router:n,SignInPage:i}=(0,ee.nm)().getComponents(),g=(0,q.u)(q.p),T=Ne(g),se=`${T}/*`,Le=(0,s.useContext)(or);if(!Le)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:Ke,appIdentityProxy:At}=Le;return i?ga()?s.createElement(n,null,s.createElement(ir,{routeObjects:Ke}),s.createElement(oe,{component:i,appIdentityProxy:At},s.createElement(M.BV,null,s.createElement(M.qh,{path:se,element:s.createElement(s.Fragment,null,d.children)})))):s.createElement(n,{basename:T},s.createElement(ir,{routeObjects:Ke}),s.createElement(oe,{component:i,appIdentityProxy:At},d.children)):(At.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:T||"/"}),ga()?s.createElement(n,null,s.createElement(ir,{routeObjects:Ke}),s.createElement(M.BV,null,s.createElement(M.qh,{path:se,element:s.createElement(s.Fragment,null,d.children)}))):s.createElement(n,{basename:T},s.createElement(ir,{routeObjects:Ke}),d.children))}(0,ee.h3)(it,"core.type","AppRouter");function pn(d){const n={};for(const g in d.collectors)d.collectors.hasOwnProperty(g)&&(n[g]=d.collectors[g]());const i=[{node:s.Children.toArray(d.root),parent:void 0,contexts:{}}];for(;i.length!==0;){const{node:g,parent:T,contexts:se}=i.shift();s.Children.forEach(g,Le=>{if(!(0,s.isValidElement)(Le))return;const Ke={};for(const At in n)if(n.hasOwnProperty(At)){const $t=n[At];Ke[At]=$t.visit($t.accumulator,Le,T,se[At])}for(const At of d.discoverers){const $t=At(Le);$t&&i.push({node:$t,parent:Le,contexts:Ke})}})}return Object.fromEntries(Object.entries(n).map(([g,T])=>[g,T.accumulator]))}function vn(d,n){return()=>({accumulator:d(),visit:n})}function Fn(d){var n;return(n=d.props)==null?void 0:n.children}function va(d){var n,i,g;if((n=d.props)!=null&&n.path&&((i=d.props)!=null&&i.element))return(g=d.props)==null?void 0:g.element}const ka=vn(()=>new Set,(d,n)=>{const i=(0,ee.E0)(n,"core.plugin");i&&d.add(i)}),La=d=>{const{children:n}=d,i=(0,q.u)(q.f),g="with"in d?i.isActive(d.with):!i.isActive(d.without);return s.createElement(s.Fragment,null,g?n:null)};(0,ee.h3)(La,"core.featureFlagged",!0);const Sa={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Oa(d){var n,i;const g=d;return g!=null&&g.type?(i=(n=g.type.displayName)!=null?n:g.type.name)!=null?i:String(g.type):String(g)}const Ba=d=>{const n=new Set;return d&&n.add(d),n};function Qa(d,n=new Array){return s.Children.forEach(d,i=>{if(!(0,s.isValidElement)(i))return;const g=(0,ee.E0)(i,"core.mountPoint");if(g){const T=(0,ee.E0)(i,"core.plugin");n.push({routeRef:g,plugin:T})}Qa(i.props.children,n)}),n}const E=vn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,i,g)=>{var T,se,Le,Ke,At,$t,Hn;if(g!=null&&g.isElementAncestor)return g;if((i==null?void 0:i.props.element)===n)return{...g,isElementAncestor:!0};const Kn=(T=n.props)==null?void 0:T.path,Tn=(0,ee.E0)(n,"core.mountPoint");if(Tn&&Kn)throw new Error(`Path property may not be set directly on a routable extension "${Oa(n)}"`);const fa=(Le=(se=g==null?void 0:g.obj)==null?void 0:se.children)!=null?Le:d.objects;if(Kn!==void 0){if(typeof Kn!="string")throw new Error(`Element path must be a string at "${Oa(n)}"`);const aa=Kn.startsWith("/")?Kn.slice(1):Kn,ua=n.props.element;if((0,ee.E0)(n,"core.gatherMountPoints")){if(ua)throw new Error(`Mount point gatherers may not have an element prop "${Oa(n)}"`);const Ya={path:aa,element:"gathered",routeRefs:new Set,caseSensitive:!!((Ke=n.props)!=null&&Ke.caseSensitive),children:[Sa],plugins:new Set};return fa.push(Ya),{obj:Ya,gatherPath:aa,routeRef:g==null?void 0:g.routeRef,gatherRouteRef:g==null?void 0:g.routeRef}}if(ua){const[Ya,...Ca]=Qa(ua);if(Ca.length>0)throw new Error(`Route element with path "${Kn}" may not contain multiple routable extensions`);if(!Ya)return g;const{routeRef:pr,plugin:zr}=Ya,_o={path:aa,element:"mounted",routeRefs:new Set([pr]),caseSensitive:!!((At=n.props)!=null&&At.caseSensitive),children:[Sa],plugins:Ba(zr)};return fa.push(_o),d.paths.set(pr,aa),d.parents.set(pr,g==null?void 0:g.routeRef),{obj:_o,routeRef:pr!=null?pr:g==null?void 0:g.routeRef,gatherPath:aa,gatherRouteRef:g==null?void 0:g.gatherRouteRef}}}if(Tn){if((g==null?void 0:g.gatherPath)===void 0)throw new Error(`Routable extension "${Oa(n)}" with mount point "${Tn}" must be assigned a path`);($t=g==null?void 0:g.obj)==null||$t.routeRefs.add(Tn);const aa=(0,ee.E0)(n,"core.plugin");return aa&&((Hn=g==null?void 0:g.obj)==null||Hn.plugins.add(aa)),d.paths.set(Tn,g.gatherPath),d.parents.set(Tn,g==null?void 0:g.gatherRouteRef),{...g,routeRef:Tn}}return g}),c=vn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,i,g)=>{var T,se,Le,Ke,At;if((i==null?void 0:i.props.element)===n)return g;let $t=g==null?void 0:g.obj,Hn=g==null?void 0:g.routeRef,Kn=g==null?void 0:g.sticky;const Tn=(T=n.props)==null?void 0:T.path,fa=(se=$t==null?void 0:$t.children)!=null?se:d.objects,aa=!!((Le=n.props)!=null&&Le.caseSensitive);let ua=g==null?void 0:g.path;if((0,ee.E0)(n,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");ua=Tn}const Ya=(Ke=n.props)==null?void 0:Ke.element;let Ca=(0,ee.E0)(n,"core.mountPoint");if(!Ca&&(0,s.isValidElement)(Ya)&&(Ca=(0,ee.E0)(Ya,"core.mountPoint")),Ca){let zr=Tn;if(ua&&(zr?ua=void 0:zr=ua),!zr)throw new Error("Mounted routable extension must have a path");d.paths.set(Ca,zr),Hn&&Kn?(d.parents.set(Ca,Hn),Tn&&(Hn=Ca,Kn=!1)):(d.parents.set(Ca,Hn),Hn=Ca),Tn?($t={caseSensitive:aa,path:Tn,element:"mounted",routeRefs:new Set([Ca]),children:[Sa],plugins:Ba((0,ee.E0)(n.props.element,"core.plugin"))},fa.push($t)):$t==null||$t.routeRefs.add(Ca)}if((0,ee.E0)(n,"core.gatherMountPoints")&&(Kn=!0),(0,ee.E0)(n,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");Ca||($t={caseSensitive:aa,path:Tn,element:"gathered",routeRefs:new Set,children:[Sa],plugins:((At=g==null?void 0:g.obj)==null?void 0:At.plugins)||new Set},fa.push($t))}return{obj:$t,path:ua,routeRef:Hn,sticky:Kn}}),A=vn(()=>new Set,(d,n)=>{if(n.type===La){const i=n.props;d.add("with"in i?i.with:i.without)}}),$=(0,_.Q6)("route-ref-type",()=>Symbol("route-ref-type"));function fe(d){return d[$]==="absolute"}function Ie(d){return d[$]==="sub"}function Rt(d){return d[$]==="external"}function Lt(...d){const n=d.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}function wn(d,n,i){let g,T="";if(fe(d))g=d;else if(Ie(d))g=d.parent,T=d.path;else if(Rt(d)){const Ke=i.get(d);if(!Ke)return[void 0,""];if(fe(Ke))g=Ke;else if(Ie(Ke))g=Ke.parent,T=Ke.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${Ke}`)}else throw d[$]?new Error(`Unknown or invalid route ref type, ${d[$]}`):new Error(`Unknown object passed to useRouteRef, got ${d}`);if(!g)return[void 0,""];const se=n.get(g);if(se===void 0)return[void 0,""];const Le=Lt(se,T);return[g,Le]}function Cn(d,n,i,g,T){var se;const Le=(se=(0,C.ue)(T,n))!=null?se:[],Ke=Array();let At=-1;for(let Kn=d;Kn&&(At=Le.findIndex(Tn=>Tn.route.routeRefs.has(Kn)),At===-1);Kn=g.get(Kn))Ke.unshift(Kn);Ke.length===0&&(At-=1);const $t=At===-1?"":Le[At].pathname,Hn=Ke.slice(0,-1).map(Kn=>{const Tn=i.get(Kn);if(Tn===void 0)throw new Error(`No path for ${Kn}`);if(Tn.includes(":"))throw new Error(`Cannot route to ${d} with parent ${Kn} as it has parameters`);return Tn});return`${Lt($t,...Hn)}/`}class Ta{constructor(n,i,g,T,se){this.routePaths=n,this.routeParents=i,this.routeObjects=g,this.routeBindings=T,this.appBasePath=se}resolve(n,i){const[g,T]=wn(n,this.routePaths,this.routeBindings);if(!g)return;let se;typeof i=="string"?se=this.trimPath(i):i.pathname?se={...i,pathname:this.trimPath(i.pathname)}:se=i;const Le=this.appBasePath+Cn(g,se,this.routePaths,this.routeParents,this.routeObjects);return(...[At])=>{const $t=At&&De()(At,Hn=>typeof Hn=="string"?Hn.replaceAll(/[&?#;\/]/g,Kn=>encodeURIComponent(Kn)):Hn);return Lt(Le,(0,C.tW)(T,$t))}}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const Ia=(0,_.tK)("routing-context"),Ra=({routePaths:d,routeParents:n,routeObjects:i,routeBindings:g,basePath:T="",children:se})=>{const Le=new Ta(d,n,i,g,T),Ke=(0,_.Bl)({1:Le});return s.createElement(Ia.Provider,{value:Ke},se)};function da(d,n){const i=new Set(n.values());i.delete(void 0);for(const g of n.keys()){if(i.has(g))continue;let T=g,se="";for(;T;){const Ke=d.get(T);if(Ke===void 0)throw new Error(`No path for ${T}`);se=Lt(Ke,se),T=n.get(T)}const Le=se.match(/:(\w+)/g);if(Le){for(let Ke=0;Ke<Le.length;Ke++)for(let At=Ke+1;At<Le.length;At++)if(Le[At]===Le[Ke])throw new Error(`Parameter ${Le[At]} is duplicated in path ${se}`)}}}function Va(d,n){for(const i of n)if(i.externalRoutes){for(const[g,T]of Object.entries(i.externalRoutes))if(!T.optional&&!d.has(T))throw new Error(`External route '${g}' of the '${i.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const tr=(0,_.tK)("app-context"),dr=({appContext:d,children:n})=>{const i=(0,_.Bl)({1:d});return s.createElement(tr.Provider,{value:i,children:n})};var Er=Object.defineProperty,uo=(d,n,i)=>n in d?Er(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Nr=(d,n,i)=>(uo(d,typeof n!="symbol"?n+"":n,i),i);function mo(d){return new Error(`Tried to access IdentityApi ${d} before app was loaded`)}function Vr(d){console.warn(`WARNING: Call to ${d} is deprecated and will break in the future`)}class Zr{constructor(){Nr(this,"target"),Nr(this,"waitForTarget"),Nr(this,"resolveTarget",()=>{}),Nr(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,i){this.target=n,this.signOutTargetUrl=i.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw mo("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return Vr("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw mo("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return Vr("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(i=>i.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return Vr("getIdToken"),n.getIdToken()})}async signOut(){await this.waitForTarget.then(n=>n.signOut()),window.location.href=this.signOutTargetUrl}}function Rr(d,n,i){if(d!==void 0){const T=i.find(se=>se.id===d);if(T)return T}if(n){const T=i.find(se=>se.variant==="dark");if(T)return T}const g=i.find(T=>T.variant==="light");return g||i[0]}const Yr=()=>{const d=(0,s.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,i]=(0,s.useState)(d.matches);return(0,s.useEffect)(()=>{const g=T=>{i(T.matches)};return d.addListener(g),()=>{d.removeListener(g)}},[d]),n};function Xa({children:d}){const n=(0,q.u)(q.n),i=(0,Ee.A)(n.activeThemeId$(),n.getActiveThemeId()),g=window.matchMedia?Yr():!1,T=Rr(i,g,n.getInstalledThemes());if(!T)throw new Error("App has no themes");return s.createElement(T.Provider,{children:d})}const vr=async()=>Dr();function Dr(d="__APP_INJECTED_RUNTIME_CONFIG__"){const n=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},techdocs:{builder:"local"},auth:{providers:{guest:{}}},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!n)throw new Error("No static configuration provided");if(!Array.isArray(n))throw new Error("Static configuration has invalid format");const i=n.slice();if(d!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const T=JSON.parse(d);Array.isArray(T)?i.push(...T):i.push({data:T,context:"env"})}catch(T){throw new Error(`Failed to load runtime configuration, ${T}`)}const g=window.__APP_CONFIG__;return g&&i.push({context:"window",data:g}),i}var qr=Object.defineProperty,Jr=(d,n,i)=>n in d?qr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,eo=(d,n,i)=>(Jr(d,typeof n!="symbol"?n+"":n,i),i);class po{constructor(){eo(this,"apis",[])}add(n,i){return this.apis.push([n.id,i]),i}build(){return new wr(new Map(this.apis))}}class wr{constructor(n){this.apis=n}static builder(){return new po}static from(n){return new wr(new Map(n.map(([i,g])=>[i.id,g])))}static with(n,i){return new wr(new Map([[n.id,i]]))}with(n,i){return new wr(new Map([...this.apis,[n.id,i]]))}get(n){return this.apis.get(n.id)}}function Fr(d){const n=new Map;return d&&d({bind:(g,T)=>{for(const[se,Le]of Object.entries(T)){const Ke=g[se];if(!Ke)throw new Error(`Key ${se} is not an existing external route`);if(!Le&&!Ke.optional)throw new Error(`External route ${se} is required but was undefined`);Le&&n.set(Ke,Le)}}}),n}var to=(d,n,i)=>{if(!n.has(d))throw TypeError("Cannot "+i)},hr=(d,n,i)=>(to(d,n,"read from private field"),i?i.call(d):n.get(d)),gr=(d,n,i)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,i)},Wr=(d,n,i,g)=>(to(d,n,"write to private field"),g?g.call(d,i):n.set(d,i),i),Or,yr,Mr;const Tr="language",Wa="en",xr=class Xo{constructor(n,i){gr(this,Or,void 0),gr(this,yr,void 0),gr(this,Mr,void 0),Wr(this,Or,n),Wr(this,yr,i),Wr(this,Mr,new Wt({language:hr(this,yr)}))}static create(n){var i,g;const T=(i=n==null?void 0:n.availableLanguages)!=null?i:[Wa];if(T.length!==new Set(T).size)throw new Error(`Supported languages may not contain duplicates, got '${T.join("', '")}'`);if(!T.includes(Wa))throw new Error(`Supported languages must include '${Wa}'`);const se=(g=n==null?void 0:n.defaultLanguage)!=null?g:Wa;if(!T.includes(se))throw new Error(`Initial language must be one of the supported languages, got '${se}'`);return new Xo(T,se)}static createWithStorage(n){const i=Xo.create(n);if(!window.localStorage)return i;const g=window.localStorage.getItem(Tr),{languages:T}=i.getAvailableLanguages();return g&&T.includes(g)&&i.setLanguage(g),i.language$().subscribe(({language:se})=>{se!==window.localStorage.getItem(Tr)&&window.localStorage.setItem(Tr,se)}),window.addEventListener("storage",se=>{var Le;if(se.key===Tr){const Ke=(Le=localStorage.getItem(Tr))!=null?Le:void 0;Ke&&i.setLanguage(Ke)}}),i}getAvailableLanguages(){return{languages:hr(this,Or).slice()}}setLanguage(n){const i=n!=null?n:Wa;if(i!==hr(this,yr)){if(i&&!hr(this,Or).includes(i))throw new Error(`Failed to change language to '${i}', available languages are '${hr(this,Or).join("', '")}'`);Wr(this,yr,i),hr(this,Mr).next({language:i})}}getLanguage(){return{language:hr(this,yr)}}language$(){return hr(this,Mr)}};Or=new WeakMap,yr=new WeakMap,Mr=new WeakMap;let ho=xr;function go(d){const n=d;if(n.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation resource, bad version '${n.version}'`);return n}function no(d){const n=d;if(n.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation ref, bad version '${n.version}'`);return n}var ao=(d,n,i)=>{if(!n.has(d))throw TypeError("Cannot "+i)},ya=(d,n,i)=>(ao(d,n,"read from private field"),i?i.call(d):n.get(d)),Za=(d,n,i)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,i)},Kr=(d,n,i,g)=>(ao(d,n,"write to private field"),g?g.call(d,i):n.set(d,i),i),mr=(d,n,i)=>(ao(d,n,"access private method"),i),Ar,Qr,y,O,x,L,te,ye,Be,xe,at,Nt,wt,en,En,un;function xn(d){return Object.fromEntries(Object.entries(d).filter(n=>n[1]!==null))}class Zn{constructor(n){this.onLoad=n,Za(this,O),Za(this,Ar,new Set),Za(this,Qr,new Map),Za(this,y,new Map)}addTranslationResource(n){const i=go(n);for(const g of i.resources){const T=mr(this,O,x).call(this,g.language,i.id);ya(this,y).has(T)||ya(this,y).set(T,g.loader)}}needsLoading(n,i){const g=mr(this,O,x).call(this,n,i);return ya(this,y).get(g)?!ya(this,Ar).has(g):!1}async load(n,i){const g=mr(this,O,x).call(this,n,i),T=ya(this,y).get(g);if(!T||ya(this,Ar).has(g))return;const se=ya(this,Qr).get(g);if(se){await se;return}const Le=T().then(Ke=>{this.onLoad({language:n,namespace:i,messages:Ke.messages}),ya(this,Ar).add(g)},Ke=>{throw ya(this,Ar).add(g),Ke});ya(this,Qr).set(g,Le),await Le}}Ar=new WeakMap,Qr=new WeakMap,y=new WeakMap,O=new WeakSet,x=function(d,n){return`${d}/${n}`};const In=class ji{constructor(n,i,g){Za(this,at),Za(this,wt),Za(this,En),Za(this,L,void 0),Za(this,te,void 0),Za(this,ye,void 0),Za(this,Be,new Set),Za(this,xe,new Set),Kr(this,L,n),Kr(this,te,i),Kr(this,ye,g)}static create(n){const{languages:i}=n.languageApi.getAvailableLanguages(),g=(0,X.Q_)({fallbackLng:Wa,supportedLngs:i,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(g.init(),!g.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:T}=n.languageApi.getLanguage();T!==Wa&&g.changeLanguage(T);const se=new Zn(At=>{g.addResourceBundle(At.language,At.namespace,xn(At.messages),!1,!0)}),Le=(n==null?void 0:n.resources)||[];for(let At=Le.length-1;At>=0;At--){const $t=Le[At];$t.$$type==="@backstage/TranslationResource"?se.addTranslationResource($t):$t.$$type==="@backstage/TranslationMessages"&&g.addResourceBundle(Wa,$t.id,xn($t.messages),!0,!1)}const Ke=new ji(g,se,n.languageApi.getLanguage().language);return n.languageApi.language$().subscribe(({language:At})=>{var $t;mr($t=Ke,at,Nt).call($t,At)}),Ke}getTranslation(n){const i=no(n);return mr(this,En,un).call(this,i),mr(this,wt,en).call(this,i)}translation$(n){const i=no(n);return mr(this,En,un).call(this,i),new(r())(g=>{let T={};const se=()=>{T={};const Ke=T;ya(this,te).load(ya(this,ye),i.id).then(()=>{if(Ke===T){const At=mr(this,wt,en).call(this,i);At.ready&&g.next(At)}},At=>{Ke===T&&g.error(Array.isArray(At)?At[0]:At)})},Le=()=>{const Ke=mr(this,wt,en).call(this,i);Ke.ready?g.next(Ke):se()};return ya(this,te).needsLoading(ya(this,ye),i.id)&&se(),ya(this,xe).add(Le),()=>{ya(this,xe).delete(Le)}})}};L=new WeakMap,te=new WeakMap,ye=new WeakMap,Be=new WeakMap,xe=new WeakMap,at=new WeakSet,Nt=function(d){ya(this,ye)!==d&&(Kr(this,ye,d),ya(this,L).changeLanguage(d),ya(this,xe).forEach(n=>n()))},wt=new WeakSet,en=function(d){return ya(this,te).needsLoading(ya(this,ye),d.id)?{ready:!1}:{ready:!0,t:ya(this,L).getFixedT(null,d.id)}},En=new WeakSet,un=function(d){if(ya(this,Be).has(d.id))return;ya(this,Be).add(d.id);const n=d.getDefaultMessages();ya(this,L).addResourceBundle(Wa,d.id,n,!0,!1);const i=d.getDefaultResource();i&&ya(this,te).addTranslationResource(i)};let sa=In;function pa(d){const n=new URL(d);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function Wn(d){const n=h.fromConfigs(d),i=n.getOptionalString("app.baseUrl"),g=n.getOptionalString("backend.baseUrl");let T=d,se,Le;if(i&&g){const Ke=new URL(i).origin,At=new URL(g).origin;if(Ke===At){const $t=pa(g);g!==$t&&(se=$t)}}if(i){const Ke=pa(i);i!==Ke&&(Le=Ke)}return(Le||se)&&(T=T.concat({data:{app:Le&&{baseUrl:Le},backend:se&&{baseUrl:se}},context:"relative-resolver"})),T}var Yn=Object.defineProperty,oa=(d,n,i)=>n in d?Yn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,ca=(d,n,i)=>(oa(d,typeof n!="symbol"?n+"":n,i),i),ha=(d,n,i)=>{if(!n.has(d))throw TypeError("Cannot "+i)},ma=(d,n,i)=>(ha(d,n,"read from private field"),i?i.call(d):n.get(d)),Ea=(d,n,i)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,i)},Aa=(d,n,i,g)=>(ha(d,n,"write to private field"),g?g.call(d,i):n.set(d,i),i),qa;function ro(d,n,i){var g;const T=!!d,se=(0,v.A)(d||(()=>Promise.resolve([])));let Le;if(T&&se.loading){const{Progress:$t}=n;Le=s.createElement($t,null)}else if(se.error){const{BootErrorPage:$t}=n;Le=s.createElement($t,{step:"load-config",error:se.error})}const{ThemeProvider:Ke=Xa}=n;return Le?{node:s.createElement(dt,{apis:wr.with(q.n,i)},s.createElement(Ke,null,Le))}:{api:h.fromConfigs((g=se.value)!=null&&g.length?Wn(se.value):[])}}class qo{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class ei{constructor(n){ca(this,"apiHolder"),ca(this,"configApi"),ca(this,"apis"),ca(this,"icons"),ca(this,"plugins"),ca(this,"featureFlags"),ca(this,"components"),ca(this,"themes"),ca(this,"configLoader"),ca(this,"defaultApis"),ca(this,"bindRoutes"),ca(this,"appLanguageApi"),ca(this,"translationResources"),ca(this,"appIdentityProxy",new Zr),ca(this,"apiFactoryRegistry"),Ea(this,qa,!1);var i,g,T,se,Le,Ke,At,$t,Hn;this.apis=(i=n.apis)!=null?i:[],this.icons=n.icons,this.plugins=new Set((g=n.plugins)!=null?g:[]),this.featureFlags=(T=n.featureFlags)!=null?T:[],this.components=n.components,this.themes=n.themes,this.configLoader=(se=n.configLoader)!=null?se:vr,this.defaultApis=(Le=n.defaultApis)!=null?Le:[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new vt,this.appLanguageApi=ho.createWithStorage({defaultLanguage:(Ke=n.__experimentalTranslations)==null?void 0:Ke.defaultLanguage,availableLanguages:(At=n.__experimentalTranslations)==null?void 0:At.availableLanguages}),this.translationResources=(Hn=($t=n.__experimentalTranslations)==null?void 0:$t.resources)!=null?Hn:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const i=this.getProvider();return()=>s.createElement(i,null,n)}getProvider(){if(ma(this,qa))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");Aa(this,qa,!0);const n=new qo(this);let i=!1;return({children:T})=>{const se=(0,s.useRef)(!0),Le=(0,s.useMemo)(()=>H.createWithStorage(this.themes),[]),{routing:Ke,featureFlags:At,routeBindings:$t}=(0,s.useMemo)(()=>{const aa=ga();aa&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const ua=pn({root:T,discoverers:[Fn,va],collectors:{routing:aa?c:E,collectedPlugins:ka,featureFlags:A}});return ua.collectedPlugins.forEach(Ya=>this.plugins.add(Ya)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...ua,routeBindings:Fr(this.bindRoutes)}},[T]);i||(i=!0,da(Ke.paths,Ke.parents),Va($t,this.plugins));const Hn=ro(this.configLoader,this.components,Le),Kn="api"in Hn;if(Kn){const{api:aa}=Hn;this.configApi=aa}if("node"in Hn)return Hn.node;if(Kn&&se.current){se.current=!1;const aa=this.getApiHolder().get(q.f);if(aa){for(const Ca of this.featureFlags)aa.registerFlag({...Ca,pluginId:""});for(const Ca of this.plugins.values())if("getFeatureFlags"in Ca)for(const pr of Ca.getFeatureFlags())aa.registerFlag({name:pr.name,pluginId:Ca.getId()});else for(const pr of Ca.output())pr.type==="feature-flag"&&aa.registerFlag({name:pr.name,pluginId:Ca.getId()});const ua=aa.getRegisteredFlags(),Ya=new Set(ua.map(Ca=>Ca.name));for(const Ca of At)Ya.has(Ca)||aa.registerFlag({name:Ca,pluginId:""})}}const{ThemeProvider:Tn=Xa,Progress:fa}=this.components;return s.createElement(dt,{apis:this.getApiHolder()},s.createElement(dr,{appContext:n},s.createElement(Tn,null,s.createElement(Ra,{routePaths:Ke.paths,routeParents:Ke.parents,routeObjects:Ke.objects,routeBindings:$t,basePath:Ga(Hn.api)},s.createElement(or.Provider,{value:{routeObjects:Ke.objects,appIdentityProxy:this.appIdentityProxy}},s.createElement(s.Suspense,{fallback:s.createElement(fa,null)},T))))))}}getRouter(){return it}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const i of n.getApis())this.apiFactoryRegistry.get(i.api)||this.apiFactoryRegistry.register("default",i);return qe.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:q.n,deps:{},factory:()=>H.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:q.p,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:q.t,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:N.pl,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:N.Jm,deps:{languageApi:N.pl},factory:({languageApi:n})=>sa.create({languageApi:n,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:q.f,deps:{},factory:()=>new Dt});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const i of n.getApis())if(!this.apiFactoryRegistry.register("default",i))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${i.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return qe.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new qe(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const i=new Set;for(const g of n){const T=g.getId();if(i.has(T))throw new Error(`Duplicate plugin found '${T}'`);i.add(T)}}}qa=new WeakMap;function Uo(d){return new ei(d)}let Ao=!1;const bo=d=>{const n=(0,ee.nm)(),{NotFoundErrorPage:i}=n.getComponents(),g=(0,s.useMemo)(()=>ga(),[]),se=[...(0,ee.OJ)(d.children,Le=>Le.getElements().flatMap(Ke=>{var At;let $t=Ke.props.path;if($t==="")return[];$t=(At=$t==null?void 0:$t.replace(/\/\*$/,""))!=null?At:"/";let Hn=g?Ke:Ke.props.element;return!g&&!Hn&&(Hn=Ke,Ao||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),Ao=!0)),[{path:$t,element:Hn,children:Ke.props.children?[{path:$t==="/"?"/":"*",element:Ke.props.children}]:void 0}]}).sort((Ke,At)=>At.path.localeCompare(Ke.path)).map(Ke=>({...Ke,path:Ke.path==="/"?"/":`${Ke.path}/*`}))),{path:"*",element:s.createElement(i,null)}];return(0,M.Ye)(se)};(0,ee.h3)(bo,"core.type","FlatRoutes")},22968:(Dn,Ct,e)=>{"use strict";e.d(Ct,{Db:()=>an,eu:()=>ja,BI:()=>vi,cy:()=>lc,fX:()=>ds,z7:()=>Ne,UC:()=>Po,dv:()=>Ei,lz:()=>Ga,ly:()=>oe,wB:()=>Ie,DT:()=>it,Vf:()=>ms,pp:()=>Ia,M:()=>Gs,bJ:()=>gr,Hk:()=>ps,Y9:()=>Io,Pu:()=>mr,ST:()=>Ml,of:()=>ci,nO:()=>ha,s3:()=>$l,f1:()=>$i,N_:()=>ga,Su:()=>Ha,rW:()=>at,h2:()=>Xa,z3:()=>En,Mm:()=>xn,YW:()=>Do,dT:()=>Nl,ke:()=>Zn,_1:()=>Or,kE:()=>ui,l6:()=>g,Bx:()=>sl,Mj:()=>_l,Cn:()=>Wo,uk:()=>Ui,GE:()=>ol,tW:()=>Pl,Ds:()=>bl,O6:()=>Li,hl:()=>ul,q4:()=>ac,c_:()=>Hi,Xs:()=>pr,So:()=>Ya,Ek:()=>zr,W$:()=>_o,EV:()=>Ca,tA:()=>ss,md:()=>Ss,Yl:()=>ys,xO:()=>ic,XI:()=>fi,ny:()=>hs,Bp:()=>Fr,hC:()=>Lr,HZ:()=>Ko,FS:()=>Ro,Ut:()=>wo});var s=e(48821),l=e(11638),b=e(59294),_=e(29365),z=e(38097),r=e(72501),q=e(32881),ee=e(74219),a=e(14041);const he=(0,b.h2)({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:`Enter your own User ID and credentials.
 This selection will not be stored.`,userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:`Enter as a Guest User.
 You will not have a verified identity, meaning some features might be unavailable.`,enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All"},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all"}},alertDisplay:{message_one:"({{ count }} older message)",message_other:"({{ count }} older messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}});var _e=e(18846),le=e(64947),ie=e(76891),G=e(93453),we=e(46805),Ce=e(61477),ft=e(19087),k=e(58837),ce=e(54917),I=e(268),h=e(7031),M=e(99703),C=e(60882),v=e(50868),N=e(53373),Q=e.n(N),De=e(49203),Ee=e(45250),X=e(18690),p=e(73657),j=e(21613),J=e(77125),ue=e(20279),Te=e(40697),dt=e(25577),Ge=e(71677),rt=e(99594),pt=e(36338),qe=e(5893),st=e(25534),Oe=e(1517),je=e(67566),$e=e(41809),vt=e(67991),ht=e.n(vt),Ft=e(12784),me=e.n(Ft),ke=e(22249),bt=e(1121),Yt=e(24260),yt=e(20644),_t=e.n(yt),S=e(11746),R=e(42899);const W=e.p+"static/missingAnnotation.67f79e98..svg",Z=e.p+"static/noInformation.4b426325..svg",Pe=e.p+"static/createComponent.975d1e1e..svg",Ue=e.p+"static/noBuild.1715fa71..svg";var lt=e(58007),et=e(8109),Je=e(5951),Wt=e(8973),tn=e(29655),Ut=e(91567),mt=e(9181),Xt=e(6924),on=e(60767),ln=e(28138),qt=e(37197),ve=e(43144),Qe=e(86613),Kt=e(68887),Vt=e(63798),zt=e(91467),Bt=e(3399),Ln=e(62220),mn=e.n(Ln),nn=e(85058),On=e(76842),nt=e(88951),gt=e(40703),Tt=e(59469),ot=e(48653),Ze=e(45685),V=e(52235),de=e(90147),ge=e(69076),Pt=e(67720),xt=e(95061),cn=e(41857),An=e(48543),Bn=e(26343),$n=e(81215),kn=e(10437),bn=e(95479),jn=e.n(bn),ra=e(61009),ct=e(13677),m=e(54801),w=e(9719),K=e(46423),re=e(28233),D=e(55197),U=e(45810),Y=e.n(U),Se=e(27799),Re=e(93285),ut=e(38605),St=e(31653),sn=e(25301),Zt=e(83313),hn=e(89019),dn=e(62461),kt=e(64704),yn=e(6774),gn=e(75625),Un=e(65859),Qn=e(5416),ea=e(33494),Pn=e(80113),Sn=e(26229),Jt=e(46802),rn=e(78467),Xn=e(16975);const _n=e.p+"static/mic-drop.fe3ef4d0..svg";var H=e(45634),be=e(1125),Fe=e(73845),tt=e(27326),It=e(97388),Ot=e(13085),jt=e(79065),ne=e(55704),We=e(94509),He=e(16249),Me=e(62248),Xe=e(46195),Ve=e(48472),Et=e(80824),Dt=e(51253),Gt=e(3514),fn=e.n(Gt);function an(t){const[o,u]=(0,a.useState)([]),f=(0,s.u)(s.l),{t:P}=(0,b.ie)(he),{anchorOrigin:B={vertical:"top",horizontal:"center"},transientTimeoutMs:F}=t,ae=F!=null?F:5e3;(0,a.useEffect)(()=>{const Ye=f.alert$().subscribe(ze=>u(Mt=>Mt.concat(ze)));return()=>{Ye.unsubscribe()}},[f]);const[pe]=o;if((0,a.useEffect)(()=>{if(pe&&pe.display==="transient"){const Ye=setTimeout(()=>{u(ze=>{const Mt=ze.filter(Ht=>Ht!==pe);return Mt.length===ze.length?ze:Mt})},ae);return()=>clearTimeout(Ye)}},[pe,ae]),o.length===0)return null;const Ae=()=>{u(Ye=>Ye.filter(ze=>ze!==pe))};return a.createElement(z.A,{open:!0,anchorOrigin:B},a.createElement(ee.A,{action:a.createElement(_.A,{color:"inherit",size:"small",onClick:Ae,"data-testid":"error-button-close"},a.createElement(q.A,null)),severity:pe.severity},a.createElement(r.A,{component:"span"},String(pe.message),o.length>1&&a.createElement("em",null,P("alertDisplay.message",{count:o.length-1})))))}const ta="@backstage/autologout:lastSeenOnline",Mn=({enableEffect:t,autologoutIsEnabled:o,idleTimeoutSeconds:u,lastSeenOnlineStore:f,identityApi:P})=>{useEffect(()=>{if(o&&t){const B=f.get();if(B){const ae=Math.ceil(new Date().getTime()/1e3),pe=Math.ceil(B.getTime()/1e3);ae-pe>u&&P.signOut()}f.save(new Date)}else f.delete()},[o,t,P,u,f])},Rn=t=>{const{idleTimer:o,setOpen:u,open:f,promptTimeoutMillis:P,remainingTime:B,setRemainingTime:F}=t,{t:ae}=useTranslationRef(coreComponentsTranslationRef);useEffect(()=>{const ze=setInterval(()=>{F(Math.ceil(o.getRemainingTime()))},500);return()=>{clearInterval(ze)}},[o,F]);const pe=()=>{u(!1),o.activate()},Ye=Math.max(B-P/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:f,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,ae("autoLogout.stillTherePrompt.title")),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil(B/1e3)," ",Ye),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:pe,color:"secondary",variant:"contained",size:"small"},ae("autoLogout.stillTherePrompt.buttonText"))))};class Vn{constructor(o){this.key=o}save(o){localStorage.setItem(this.key,o.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const o=localStorage.getItem(this.key);return o!==null?new Date(Date.parse(o)):null}}const na=({idleTimeoutMinutes:t,events:o,useWorkerTimers:u,logoutIfDisconnected:f,promptBeforeIdleSeconds:P,promptOpen:B,setPromptOpen:F,remainingTimeCountdown:ae,setRemainingTimeCountdown:pe,identityApi:Ae,lastSeenOnlineStore:Ye})=>{const ze=P*1e3,Mt=ze>0,Ht=async()=>{F(!0),pe(ze)},Qt=()=>{F(!1),pe(0),Ae.signOut()},Gn=()=>{F(!1),pe(0)},zn=(Ka,nr)=>{Ye.save(new Date)},la=useIdleTimer({timeout:t*60*1e3,events:o,crossTab:!0,name:"autologout-timer",timers:u?workerTimers:void 0,onIdle:Qt,onActive:Mt?Gn:void 0,onAction:f?zn:void 0,onPrompt:Mt?Ht:void 0,promptBeforeIdle:Mt?ze:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,Mt&&React.createElement(Rn,{idleTimer:la,open:B,setOpen:F,remainingTime:ae,setRemainingTime:pe,promptTimeoutMillis:ze}))},Nn={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},qn=null,ia=(t,o)=>{var u,f,P,B,F,ae,pe,Ae,Ye,ze;return{enabled:(f=(u=t.getOptionalBoolean("auth.autologout.enabled"))!=null?u:o.enabled)!=null?f:Nn.enabled,idleTimeoutMinutes:(B=(P=t.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?P:o.idleTimeoutMinutes)!=null?B:Nn.idleTimeoutMinutes,promptBeforeIdleSeconds:(ae=(F=t.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?F:o.promptBeforeIdleSeconds)!=null?ae:Nn.promptBeforeIdleSeconds,useWorkerTimers:(Ae=(pe=t.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?pe:o.useWorkerTimers)!=null?Ae:Nn.useWorkerTimers,logoutIfDisconnected:(ze=(Ye=t.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?Ye:o.logoutIfDisconnected)!=null?ze:Nn.logoutIfDisconnected}},_a=t=>{const o=useApi(identityApiRef),u=useApi(configApiRef),[f,P]=useState(!1);useEffect(()=>{async function Gn(zn){(await zn.getCredentials()).token?P(!0):P(!1)}Gn(o)},[o]);const{enabled:B,idleTimeoutMinutes:F,promptBeforeIdleSeconds:ae,logoutIfDisconnected:pe,useWorkerTimers:Ae}=useMemo(()=>ia(u,t),[u,t]);useEffect(()=>{if(F<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(ae<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(F*60<=ae)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[F,ae]);const Ye=useMemo(()=>new Vn(ta),[]),[ze,Mt]=useState(!1),[Ht,Qt]=useState(0);return Mn({enableEffect:pe,autologoutIsEnabled:B&&f,idleTimeoutSeconds:F*60,lastSeenOnlineStore:Ye,identityApi:o}),!B||!f?null:React.createElement(na,{idleTimeoutMinutes:F,promptBeforeIdleSeconds:ae,useWorkerTimers:Ae,events:qn,logoutIfDisconnected:pe,promptOpen:ze,setPromptOpen:Mt,remainingTimeCountdown:Ht,setRemainingTimeCountdown:Qt,identityApi:o,lastSeenOnlineStore:Ye})};function ba(t){let o=0;for(let f=0;f<t.length;f++)o=t.charCodeAt(f)+((o<<5)-o);let u="#";for(let f=0;f<3;f++){const P=o>>f*8&255;u+=`00${P.toString(16)}`.slice(-2)}return u}function Pa(t){var o;const u=t.trim().split(" "),f=(o=u[0])!=null?o:"",P=u.length>1?u[u.length-1]:"";return f&&P?`${f.charAt(0)}${P.charAt(0)}`:f.charAt(0)}const xa=(0,k.A)(t=>({avatar:{width:"4rem",height:"4rem",color:t.palette.common.white,backgroundColor:o=>o.backgroundColor},avatarText:{fontWeight:t.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function ja(t){var o,u;const{displayName:f,picture:P,customStyles:B}=t,F={...B},ae={fontFamily:F.fontFamily,fontSize:F.fontSize,fontWeight:F.fontWeight},pe=xa(P?{}:{backgroundColor:ba(f||"")}),Ae=Q()((o=t.classes)==null?void 0:o.avatar,pe.avatar),Ye=Q()((u=t.classes)==null?void 0:u.avatarText,pe.avatarText);return a.createElement(ft.A,{alt:f,src:P,className:Ae,style:F},f&&a.createElement(r.A,{variant:"h6",component:"span",className:Ye,style:ae},Pa(f)))}function Da(){const[t]=(0,X.AV)(a.createElement(X.qh,{index:!0,element:a.createElement("div",null)}));return!t.index}const Fa=(0,k.A)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),lr=t=>/^([a-z+.-]+):/.test(t),rr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,$a=window.open;if($a&&!$a.__backstage){const t=function(...u){const f=String(u[0]);if(rr.test(f))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return $a.apply(this,u)};t.__backstage=!0,window.open=t}const Ja=()=>{try{return(0,s.u)(s.p).getOptionalString("app.baseUrl")}catch{return}},Sr=()=>{var t;const o="http://sample.dev",u=(t=Ja())!=null?t:"/",{pathname:f}=new URL(u,o);return(0,Ee.trimEnd)(f,"/")},cr=t=>{let o=String(t);const u=Sr(),f=lr(o),P=o.startsWith(u);return!f&&!P&&(o=u.concat(o)),o},or=t=>{var o;return t instanceof Array?t.map(or).join(" ").trim():typeof t=="object"&&t?or((o=t==null?void 0:t.props)==null?void 0:o.children):["string","number"].includes(typeof t)?String(t):""},ga=a.forwardRef(({onClick:t,noTrack:o,...u},f)=>{const P=Fa(),B=(0,l.st)(),F=Da()?cr(u.to):u.to,ae=or(u.children)||F,pe=lr(F),Ae=pe&&!!/^https?:/.exec(F);if(rr.test(F))throw new Error("Link component rejected javascript: URL as a security precaution");const Ye=ze=>{t==null||t(ze),o||B.captureEvent("click",ae,{attributes:{to:F}})};return pe?a.createElement(De.A,{...Ae?{target:"_blank",rel:"noopener"}:{},...u,...u["aria-label"]?{"aria-label":`${u["aria-label"]}, Opens in a new window`}:{},ref:f,href:F,onClick:Ye,className:Q()(P.externalLink,u.className)},u.children,a.createElement(r.A,{component:"span",className:P.visuallyHidden},", Opens in a new window")):a.createElement(De.A,{...u,ref:f,component:p.N_,to:F,onClick:Ye})}),ur=a.forwardRef((t,o)=>a.createElement(ga,{ref:o,...t,color:"initial"})),Ha=a.forwardRef((t,o)=>a.createElement(le.A,{ref:o,component:ur,...t})),ir=null;function Ga(t){const{t:o}=(0,b.ie)(he),{text:u,tooltipDelay:f=1e3,tooltipText:P=o("copyTextButton.tooltipText"),"aria-label":B="Copy text"}=t,F=(0,s.u)(s.r),[ae,pe]=(0,a.useState)(!1),[{error:Ae},Ye]=(0,pt.A)();(0,a.useEffect)(()=>{Ae&&F.post(Ae)},[Ae,F]);const ze=Mt=>{Mt.stopPropagation(),pe(!0),Ye(u)};return a.createElement(a.Fragment,null,a.createElement(Ge.Ay,{id:"copy-test-tooltip",title:P,placement:"top",leaveDelay:f,onClose:()=>pe(!1),open:ae},a.createElement(_.A,{onClick:ze,"aria-label":B},a.createElement(rt.A,null))))}function Ne(t){const{text:o,language:u,showLineNumbers:f=!1,highlightedNumbers:P,customStyle:B,showCopyCodeButton:F=!1}=t,ae=(0,ce.A)(),pe=ae.palette.type==="dark"?Te.A:dt.A,Ae=ae.palette.type==="dark"?"#256bf3":"#e6ffed";return a.createElement(J.A,{position:"relative"},a.createElement(ue.A,{customStyle:B,language:u,style:pe,showLineNumbers:f,wrapLines:!0,lineNumberStyle:{color:ae.palette.textVerySubtle},lineProps:Ye=>P!=null&&P.includes(Ye)?{style:{backgroundColor:Ae}}:{}},o),F&&a.createElement(J.A,{position:"absolute",top:0,right:0},a.createElement(Ga,{text:o})))}function oe(t){const{title:o,to:u}=t,f=(0,qe.A)(P=>P.breakpoints.down("xs"));return u?f?a.createElement(_.A,{component:p.N_,color:"primary",title:o,size:"small",to:u},a.createElement(st.A,null)):a.createElement(le.A,{component:p.N_,variant:"contained",color:"primary",to:u},o):null}var it;(t=>{(o=>{o.TOP_BOTTOM="TB",o.BOTTOM_TOP="BT",o.LEFT_RIGHT="LR",o.RIGHT_LEFT="RL"})(t.Direction||(t.Direction={})),(o=>{o.UP_LEFT="UL",o.UP_RIGHT="UR",o.DOWN_LEFT="DL",o.DOWN_RIGHT="DR"})(t.Alignment||(t.Alignment={})),(o=>{o.NETWORK_SIMPLEX="network-simplex",o.TIGHT_TREE="tight-tree",o.LONGEST_PATH="longest-path"})(t.Ranker||(t.Ranker={})),(o=>{o.LEFT="l",o.RIGHT="r",o.CENTER="c"})(t.LabelPosition||(t.LabelPosition={}))})(it||(it={}));const pn=(0,k.A)(t=>({node:{fill:t.palette.primary.light,stroke:t.palette.primary.light},text:{fill:t.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function vn({node:{id:t}}){const o=pn(),[u,f]=a.useState(0),[P,B]=a.useState(0),F=a.useRef(null);a.useLayoutEffect(()=>{if(F.current){let{height:Ye,width:ze}=F.current.getBBox();Ye=Math.round(Ye),ze=Math.round(ze),(Ye!==P||ze!==u)&&(f(ze),B(Ye))}},[u,P]);const ae=10,pe=u+ae*2,Ae=P+ae*2;return a.createElement("g",null,a.createElement("rect",{className:o.node,width:pe,height:Ae,rx:10}),a.createElement("text",{ref:F,className:o.text,y:Ae/2,x:pe/2,textAnchor:"middle",alignmentBaseline:"middle"},t))}const Fn="arrow-marker",va="node",ka="edge",La="label",Sa=(0,ke.A)(t=>({node:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),Oa=t=>a.createElement(vn,{...t});function Ba({render:t=Oa,setNode:o,node:u}){const{width:f,height:P,x:B=0,y:F=0}=u,ae=u,pe=Sa(),Ae=a.useRef(null);return a.useLayoutEffect(()=>{if(Ae.current){let{height:Ye,width:ze}=Ae.current.getBBox();Ye=Math.round(Ye),ze=Math.round(ze),(Ye!==P||ze!==f)&&o(u.id,{...u,height:Ye,width:ze})}},[u,f,P,o]),a.createElement("g",{ref:Ae,"data-testid":va,className:pe.node,transform:`translate(${B-f/2},${F-P/2})`},t({node:ae}))}const Qa=(0,ke.A)(t=>({text:{fill:t.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function E({edge:{label:t}}){const o=Qa();return a.createElement("text",{className:o.text,textAnchor:"middle"},t)}const c=(0,ke.A)(t=>({path:{strokeWidth:1.3,stroke:t.palette.textSubtle,fill:"none",transition:`${t.transitions.duration.shortest}ms`},label:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),A=t=>a.createElement(E,{...t});function $({render:t=A,setEdge:o,id:u,edge:f,curve:P,showArrowHeads:B}){const{x:F=0,y:ae=0,width:pe,height:Ae,points:Ye}=f,ze=f,Mt=c(),Ht=a.useRef(null);a.useLayoutEffect(()=>{if(Ht.current){let{height:zn,width:la}=Ht.current.getBBox();zn=Math.round(zn),la=Math.round(la),(zn!==Ae||la!==pe)&&o(u,{...f,height:zn,width:la})}},[f,Ae,pe,o,u]);let Qt="";const Gn=a.useMemo(()=>bt.A().x(zn=>zn.x).y(zn=>zn.y).curve(Yt[P]),[P]);if(Ye){const zn=Ye.filter(la=>_t()(la.x)&&_t()(la.y));Qt=Gn(zn)||""}return a.createElement(a.Fragment,null,Qt&&a.createElement("path",{"data-testid":ka,className:Mt.path,markerEnd:B?`url(#${Fn})`:void 0,d:Qt}),ze.label?a.createElement("g",{ref:Ht,"data-testid":La,className:Mt.label,transform:`translate(${F},${ae})`},t({edge:ze})):null)}const fe="workspace";function Ie(t){var o,u;const{edges:f,nodes:P,renderNode:B,direction:F=it.Direction.TOP_BOTTOM,align:ae,nodeMargin:pe=50,edgeMargin:Ae=10,rankMargin:Ye=50,paddingX:ze=0,paddingY:Mt=0,acyclicer:Ht,ranker:Qt=it.Ranker.NETWORK_SIMPLEX,labelPosition:Gn=it.LabelPosition.RIGHT,labelOffset:zn=10,edgeRanks:la=1,edgeWeight:Ka=1,renderLabel:nr,defs:Jn,zoom:Ma="enabled",curve:za="curveMonotoneX",showArrowHeads:ar=!1,fit:Ir="grow",...so}=t,Br=(0,$e.A)(),[jr,Jo]=a.useState(100),[Xr,Lo]=a.useState(100),wa=a.useRef(new(ht()).graphlib.Graph),[sr,fo]=a.useState(((o=wa.current.graph())==null?void 0:o.width)||0),[Ur,Eo]=a.useState(((u=wa.current.graph())==null?void 0:u.height)||0),[Gr,Hr]=a.useState([]),[Qo,cc]=a.useState([]),vo=Math.max(sr,jr),lo=Math.max(Ur,Xr),uc=Math.min(Ur,Xr),dc=Ir==="grow"?lo:uc,mc=a.useMemo(()=>me()(Na=>{if(!Na)return;const er=je.A(Na),Ua=je.A(Na.getElementById(fe));function _r(){er.call(Oe.s_().scaleExtent([1,1/0]).on("zoom",$r=>{$r.transform.x=Math.min(0,Math.max($r.transform.x,vo-vo*$r.transform.k)),$r.transform.y=Math.min(0,Math.max($r.transform.y,lo-lo*$r.transform.k)),Ua.attr("transform",$r.transform)}))}Ma==="enabled"?_r():Ma==="enable-on-click"&&er.on("click",()=>_r());const{width:Cr,height:Bo}=Na.getBoundingClientRect();jr!==Cr&&Jo(Cr),Xr!==Bo&&Lo(Bo)},100),[Xr,jr,vo,lo,Ma]),zi=a.useCallback(()=>{const Na=wa.current.nodes(),er=wa.current.edges();Na.forEach(Ua=>{P.some(Cr=>Cr.id===Ua)||wa.current.removeNode(Ua)}),er.forEach(Ua=>{f.some(Cr=>Cr.from===Ua.v&&Cr.to===Ua.w)||wa.current.removeEdge(Ua.v,Ua.w)}),P.forEach(Ua=>{const _r=wa.current.nodes().find(Cr=>Ua.id===Cr);if(_r&&wa.current.node(_r)){const{width:Cr,height:Bo,x:$r,y:gc}=wa.current.node(_r);wa.current.setNode(_r,{...Ua,width:Cr,height:Bo,x:$r,y:gc})}else wa.current.setNode(Ua.id,{...Ua,width:0,height:0})}),f.forEach(Ua=>{wa.current.setEdge(Ua.from,Ua.to,{...Ua,label:Ua.label,width:0,height:0,labelpos:Gn,labeloffset:zn,weight:Ka,minlen:la})})},[f,P,Gn,zn,Ka,la]),yo=a.useMemo(()=>me()(()=>{ht().layout(wa.current);const{height:Na,width:er}=wa.current.graph(),Ua=Math.max(0,Na||0),_r=Math.max(0,er||0);fo(_r),Eo(Ua),Hr(wa.current.nodes()),cc(wa.current.edges())},250,{leading:!0}),[]);a.useEffect(()=>(wa.current.setGraph({rankdir:F,align:ae,nodesep:pe,edgesep:Ae,ranksep:Ye,marginx:ze,marginy:Mt,acyclicer:Ht,ranker:Qt}),zi(),yo(),yo.cancel),[Ht,ae,F,Ae,ze,Mt,pe,Ye,Qt,zi,yo]);function pc(Na,er){return wa.current.setNode(Na,er),yo(),wa.current}function hc(Na,er){return wa.current.setEdge(Na,er),yo(),wa.current}return a.createElement("svg",{ref:mc,...so,width:"100%",height:dc,viewBox:`0 0 ${vo} ${lo}`},a.createElement("defs",null,a.createElement("marker",{id:Fn,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},a.createElement("path",{fill:Br.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Jn),a.createElement("g",{id:fe},a.createElement("svg",{width:sr,height:Ur,y:lo/2-Ur/2,x:vo/2-sr/2,viewBox:`0 0 ${sr} ${Ur}`},Qo.map(Na=>{const er=wa.current.edge(Na);return er?a.createElement($,{key:`${Na.v}-${Na.w}`,id:Na,setEdge:hc,render:nr,edge:er,curve:za,showArrowHeads:ar}):null}),Gr.map(Na=>{const er=wa.current.node(Na);return er?a.createElement(Ba,{key:Na,setNode:pc,render:B,node:er}):null}))))}const Rt=(0,k.A)(t=>{var o,u;return{root:{padding:t.spacing(0),marginBottom:t.spacing(0),marginTop:t.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:t.spacing(6),marginTop:-t.spacing(3),zIndex:"unset"},icon:{fontSize:t.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:t.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:t.palette.banner.link}},button:{color:(o=t.palette.banner.closeButtonColor)!=null?o:"inherit"},info:{backgroundColor:t.palette.banner.info},error:{backgroundColor:t.palette.banner.error},warning:{backgroundColor:(u=t.palette.banner.warning)!=null?u:t.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Lt=t=>{var o;const{variant:u,message:f,id:P,fixed:B=!1}=t,F=Rt(),pe=useApi(storageApiRef).forBucket("notifications"),Ae=(o=pe.snapshot("dismissedBanners").value)!=null?o:[],[Ye,ze]=useState(new Set(Ae)),Mt=useObservable(pe.observe$("dismissedBanners"));useEffect(()=>{var Qt;if(Mt!=null&&Mt.value){const Gn=(Qt=Mt==null?void 0:Mt.value)!=null?Qt:[];ze(new Set(Gn))}},[Mt==null?void 0:Mt.value]);const Ht=()=>{pe.set("dismissedBanners",[...Ye,P])};return React.createElement(Snackbar,{anchorOrigin:B?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!Ye.has(P),classes:{root:classNames(F.root,!B&&F.topPosition)}},React.createElement(SnackbarContent,{classes:{root:classNames(F.content,F[u]),message:F.message},message:f,action:[React.createElement(IconButton,{key:"dismiss",title:"Permanently dismiss this message",className:F.button,onClick:Ht},React.createElement(CloseIcon,{className:F.icon}))]}))},wn=(0,k.A)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Cn=({missing:t})=>{const o=wn();switch(t){case"field":return a.createElement("img",{src:W,className:o.generalImg,alt:"annotation is missing"});case"info":return a.createElement("img",{src:Z,alt:"no Information",className:o.generalImg});case"content":return a.createElement("img",{src:Pe,alt:"create Component",className:o.generalImg});case"data":return a.createElement("img",{src:Ue,alt:"no Build",className:o.generalImg});default:return null}},Ta=(0,k.A)(t=>({root:{backgroundColor:t.palette.background.default,padding:t.spacing(2,0,0,0)},action:{marginTop:t.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Ia(t){const{title:o,description:u,missing:f,action:P}=t,B=Ta();return a.createElement(R.A,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:B.root,spacing:2},a.createElement(R.A,{item:!0,xs:12,md:6},a.createElement(R.A,{container:!0,direction:"column"},a.createElement(R.A,{item:!0,xs:!0},a.createElement(r.A,{variant:"h5"},o)),a.createElement(R.A,{item:!0,xs:!0},a.createElement(r.A,{variant:"body1"},u)),a.createElement(R.A,{item:!0,xs:!0,className:B.action},P))),a.createElement(R.A,{item:!0,xs:12,md:6,className:B.imageContainer},typeof f=="string"?a.createElement(Cn,{missing:f}):f.customImage))}const Ra=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,da=/^.*ANNOTATION.*$/m,Va=Ra.match(da)[0],tr=Ra.split(`
`).findIndex(t=>da.test(t)),dr=(0,k.A)(t=>({code:{borderRadius:6,margin:t.spacing(2,0),background:t.palette.type==="dark"?"#444":t.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Er(t){return Array.from(Array(t+1).keys(),o=>o+tr)}function uo(t){const o=t.map(u=>Va.replace("ANNOTATION",u)).join(`
`);return Ra.replace(Va,o)}function Nr(t){const o=t.length<=1;return React.createElement(React.Fragment,null,"The ",o?"annotation":"annotations"," ",t.map(u=>React.createElement("code",null,u)).reduce((u,f)=>React.createElement(React.Fragment,null,u,", ",f))," ",o?"is":"are"," missing. You need to add the"," ",o?"annotation":"annotations"," to your component if you want to enable this tool.")}function mo(t){const{annotation:o,readMoreUrl:u}=t,f=Array.isArray(o)?o:[o],P=u||"https://backstage.io/docs/features/software-catalog/well-known-annotations",B=dr(),{t:F}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Ia,{missing:"field",title:F("emptyState.missingAnnotation.title"),description:Nr(f),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},F("emptyState.missingAnnotation.actionTitle")),React.createElement(Box,{className:B.code},React.createElement(Ne,{text:uo(f),language:"yaml",showLineNumbers:!0,highlightedNumbers:Er(f.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:ga,to:P},F("emptyState.missingAnnotation.readMore")))})}const Vr=(0,k.A)(t=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${t.palette.border}`},"& th, & td":{border:`1px solid ${t.palette.border}`,padding:t.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:t.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:t.palette.background.paper},"& tr":{backgroundColor:t.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:t.palette.background.default},"& a":{color:t.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Zr=(t,o)=>o?typeof o=="string"?t+o:a.Children.toArray(o.props.children).reduce(Zr,t):t,Rr=({level:t,children:o})=>{const P=a.Children.toArray(o).reduce(Zr,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return a.createElement(`h${t}`,{id:P},o)},Yr={code:({inline:t,className:o,children:u,...f})=>{const P=String(u).replace(/\n+$/,""),B=/language-(\w+)/.exec(o||"");return!t&&B?a.createElement(Ne,{language:B[1],text:P}):a.createElement("code",{className:o,...f},u)},h1:Rr,h2:Rr,h3:Rr,h4:Rr,h5:Rr,h6:Rr};function Xa(t){const{content:o,dialect:u="gfm",linkTarget:f,transformLinkUri:P,transformImageUri:B,className:F}=t,ae=Vr();return a.createElement(on.$,{remarkPlugins:u==="gfm"?[ln.A]:[],className:`${ae.markdown} ${F}`,children:o,components:Yr,linkTarget:f,transformLinkUri:P,transformImageUri:B})}const vr=(t,o)=>(o.palette.type==="light"?I.e$:I.a)(o.palette[t].light,.6),Dr=(t,o)=>(o.palette.type==="light"?I.a:I.e$)(o.palette[t].light,.9),qr=(0,k.A)(t=>({root:{marginRight:t.spacing(1),fill:({severity:o})=>vr(o,t)}})),Jr=({severity:t})=>{const o=qr({severity:t});return a.createElement(mt.A,{classes:o})},eo=({severity:t})=>{const o=qr({severity:t});return a.createElement(Xt.A,{classes:o})},po=(0,k.A)(t=>({panel:{backgroundColor:({severity:o})=>Dr(o,t),color:({severity:o})=>vr(o,t),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:o})=>vr(o,t),fontWeight:t.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:o})=>vr(o,t),backgroundColor:({severity:o})=>Dr(o,t)},details:{width:"100%",display:"block",color:t.palette.textContrast,backgroundColor:t.palette.background.default,border:`1px solid ${t.palette.border}`,padding:t.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),wr=t=>t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);function Fr(t){const{severity:o="warning",title:u,titleFormat:f,message:P,children:B,defaultExpanded:F}=t,ae=po({severity:o}),pe=wr(o)+(u?`: ${u}`:"");return a.createElement(Wt.A,{defaultExpanded:F!=null?F:!1,className:ae.panel,role:"alert"},a.createElement(tn.A,{expandIcon:a.createElement(eo,{severity:o}),className:ae.summary},a.createElement(Jr,{severity:o}),a.createElement(r.A,{className:ae.summaryText,variant:"subtitle1"},f==="markdown"?a.createElement(Xa,{content:pe,className:ae.markdownContent}):pe)),(P||B)&&a.createElement(Ut.A,null,a.createElement(R.A,{container:!0},P&&a.createElement(R.A,{item:!0,xs:12},a.createElement(r.A,{className:ae.message,variant:"body1"},P)),B&&a.createElement(R.A,{item:!0,xs:12,className:ae.details},B))))}const to=(0,k.A)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageErrorPanel"}),hr=({error:t,message:o,stack:u,children:f})=>{const P=to();return a.createElement(lt.A,{dense:!0},a.createElement(et.A,{alignItems:"flex-start"},a.createElement(Je.A,{classes:{secondary:P.text},primary:"Error",secondary:t}),a.createElement(Ga,{text:t})),a.createElement(et.A,{alignItems:"flex-start"},a.createElement(Je.A,{classes:{secondary:P.text},primary:"Message",secondary:o}),a.createElement(Ga,{text:o})),u&&a.createElement(et.A,{alignItems:"flex-start"},a.createElement(Je.A,{classes:{secondary:P.text},primary:"Stack Trace",secondary:u}),a.createElement(Ga,{text:u})),f)};function gr(t){const{title:o,error:u,defaultExpanded:f,titleFormat:P,children:B}=t;return a.createElement(Fr,{severity:"error",title:o!=null?o:u.message,defaultExpanded:f,titleFormat:P},a.createElement(hr,{error:u.name,message:u.message,stack:u.stack,children:B}))}const Wr=(0,k.A)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Or(t){var o;const{title:u,error:f,defaultExpanded:P}=t,B=Wr();if(f.name!=="ResponseError")return a.createElement(gr,{title:u!=null?u:f.message,defaultExpanded:P,error:f});const{body:F,cause:ae}=f,{request:pe,response:Ae}=F,Ye=`${Ae.statusCode}: ${ae.name}`,ze=pe&&`${pe.method} ${pe.url}`,Mt=ae.message.replace(/\\n/g,`
`),Ht=(o=ae.stack)==null?void 0:o.replace(/\\n/g,`
`),Qt=JSON.stringify(F,void 0,2);return a.createElement(gr,{title:u!=null?u:f.message,defaultExpanded:P,error:{name:Ye,message:Mt,stack:Ht}},ze&&a.createElement(et.A,{alignItems:"flex-start"},a.createElement(Je.A,{classes:{secondary:B.text},primary:"Request",secondary:pe?`${ze}`:void 0}),a.createElement(Ga,{text:ze})),a.createElement(a.Fragment,null,a.createElement(qt.A,{component:"li",className:B.divider}),a.createElement(et.A,{alignItems:"flex-start"},a.createElement(Je.A,{classes:{secondary:B.text},primary:"Full Error as JSON"})),a.createElement(Ne,{language:"json",text:Qt,showCopyCodeButton:!0})))}function yr(t){const o=document.createElement("div");return o.setAttribute("id",t),o}function Mr(t){document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)}function Tr(t){const o=useRef(null);useEffect(function(){const P=document.querySelector(`#${t}`),B=P||yr(t);return P||Mr(B),B.appendChild(o.current),function(){o.current.remove(),B.childNodes.length===-1&&B.remove()}},[t]);function u(){return o.current||(o.current=document.createElement("div")),o.current}return u()}const Wa="core.calloutSeen";function xr(){const[t,o]=useState(()=>{const f=localStorage.getItem(Wa);return f?JSON.parse(f):{}}),u=useCallback((f,P)=>{const B=localStorage.getItem(Wa),ae={...B?JSON.parse(B):{},[f]:P};o(ae),localStorage.setItem(Wa,JSON.stringify(ae))},[]);return{states:t,setState:u}}function ho(t){const{states:o,setState:u}=xr(),f=useCallback(()=>{u(t,!0)},[u,t]);return{seen:o[t]===!0,markSeen:f}}function go(t){const{seen:o,markSeen:u}=ho(t);return{show:o===!1,hide:u}}const no=(0,k.A)(t=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${t.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:t.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function ao(t){const{featureId:o,title:u,description:f,children:P}=t,{show:B,hide:F}=go(o),ae=Tr("core.callout"),pe=useRef(null),[Ae,Ye]=useState(),ze=no(),Mt=useCallback(()=>{if(pe.current){const Ht=pe.current.getBoundingClientRect(),Qt=Math.max(Ht.width,Ht.height),Gn=800,zn=Ht.x-(Qt-Ht.width)/2-Gn,la=Ht.y-(Qt-Ht.height)/2-Gn,Ka=Qt+2*Gn,nr=450,Jn=Ht.x+Ht.width/2-nr,Ma=Ht.y-(Qt-Ht.height)/2+Qt+20;Ye({dotLeft:zn,dotTop:la,dotSize:Ka,borderWidth:Gn,textTop:Ma,textLeft:Jn,textWidth:nr})}},[]);return useEffect(()=>(window.addEventListener("resize",Mt),window.addEventListener("scroll",Mt),()=>{window.removeEventListener("resize",Mt),window.removeEventListener("scroll",Mt)}),[Mt]),useLayoutEffect(Mt,[pe.current,Mt]),B?React.createElement(React.Fragment,null,React.createElement(Box,{className:ze.featureWrapper,ref:pe},P),createPortal(React.createElement(Box,{className:ze.backdrop},React.createElement(ClickAwayListener,{onClickAway:F},React.createElement(React.Fragment,null,React.createElement(Box,{className:ze.dot,"data-testid":"dot",style:{left:Ae==null?void 0:Ae.dotLeft,top:Ae==null?void 0:Ae.dotTop,width:Ae==null?void 0:Ae.dotSize,height:Ae==null?void 0:Ae.dotSize,borderWidth:Ae==null?void 0:Ae.borderWidth},onClick:F,onKeyDown:F,role:"button",tabIndex:0},React.createElement(Box,{className:ze.pulseCircle})),React.createElement(Box,{className:ze.text,"data-testid":"text",style:{left:Ae==null?void 0:Ae.textLeft,top:Ae==null?void 0:Ae.textTop,width:Ae==null?void 0:Ae.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},u),React.createElement(Typography,null,f))))),ae)):React.createElement(React.Fragment,null,P)}const ya=(0,k.A)(t=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:t.palette.text.secondary,cursor:"default"},primary:{color:t.palette.primary.main},secondary:{color:t.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function Za({color:t="primary",disabled:o=!1,href:u="#",icon:f=a.createElement(Qe.A,null),label:P,onClick:B,title:F}){const ae=ya();return o?a.createElement(J.A,{title:F,className:Q()(ae.link,ae.disabled)},f,a.createElement(r.A,{variant:"caption",component:"span",className:ae.label},P)):a.createElement(ga,{title:F,className:Q()(ae.link,ae[t]),to:u,onClick:B},f,a.createElement(r.A,{variant:"caption",component:"span",className:ae.label},P))}const Kr=(0,k.A)(t=>({links:{margin:t.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:t.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function mr(t){const{links:o}=t,u=Kr();return a.createElement("nav",{className:u.links},o.map((f,P)=>a.createElement(Za,{key:P+1,...f})))}const Ar=t=>{const o=t==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${o}) 0%,
    hsla(0, 0%, ${o}, 0.987) 8.1%,
    hsla(0, 0%, ${o}, 0.951) 15.5%,
    hsla(0, 0%, ${o}, 0.896) 22.5%,
    hsla(0, 0%, ${o}, 0.825) 29%,
    hsla(0, 0%, ${o}, 0.741) 35.3%,
    hsla(0, 0%, ${o}, 0.648) 41.2%,
    hsla(0, 0%, ${o}, 0.55) 47.1%,
    hsla(0, 0%, ${o}, 0.45) 52.9%,
    hsla(0, 0%, ${o}, 0.352) 58.8%,
    hsla(0, 0%, ${o}, 0.259) 64.7%,
    hsla(0, 0%, ${o}, 0.175) 71%,
    hsla(0, 0%, ${o}, 0.104) 77.5%,
    hsla(0, 0%, ${o}, 0.049) 84.5%,
    hsla(0, 0%, ${o}, 0.013) 91.9%,
    hsla(0, 0%, ${o}, 0) 100%
  `},Qr=100,y=10,O=(0,k.A)(t=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:Qr,height:`calc(100% + ${y}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-y,background:`linear-gradient(90deg, ${Ar(t.palette.type)})`},fadeRight:{right:-y,background:`linear-gradient(270deg, ${Ar(t.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-t.spacing(2)},buttonRight:{right:-t.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function x(t){const[[o,u],f]=React.useState([0,0]);return React.useLayoutEffect(()=>{const P=t.current;if(!P){f([0,0]);return}const B=()=>{const F=P.scrollLeft,ae=P.scrollWidth-P.offsetWidth-P.scrollLeft;f([F,ae])};return B(),P.addEventListener("scroll",B),window.addEventListener("resize",B),()=>{P.removeEventListener("scroll",B),window.removeEventListener("resize",B)}},[t]),[o,u]}function L(t,o,u){const[f,P]=React.useState(0);return React.useLayoutEffect(()=>{if(f===0)return;const B=window.performance.now(),F=requestAnimationFrame(ae=>{if(!t.current)return;const pe=ae-B,Ae=Math.abs(f)*pe/o,ze=Math.max(u,Ae)*Math.sign(f);t.current.scrollBy({left:ze});const Mt=f-ze;Math.sign(f)!==Math.sign(Mt)?P(0):P(Mt)});return()=>cancelAnimationFrame(F)},[t,f,o,u]),P}function te(t){const{scrollStep:o=100,scrollSpeed:u=50,minScrollDistance:f=5,children:P,...B}=t,F=O(t),ae=React.useRef(),[pe,Ae]=x(ae),Ye=L(ae,u,f),ze=Mt=>{ae.current&&Ye(Mt?o:-o)};return React.createElement(Box,{...B,className:F.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:F.container,ref:ae},P),React.createElement(Box,{className:classNames(F.fade,F.fadeLeft,{[F.fadeHidden]:pe===0})}),React.createElement(Box,{className:classNames(F.fade,F.fadeRight,{[F.fadeHidden]:Ae===0})}),pe>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>ze(!1),className:classNames(F.button,F.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Ae>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>ze(!0),className:classNames(F.button,F.buttonRight,{})},React.createElement(ChevronRight,null)))}const ye=(0,k.A)(t=>({alpha:{color:t.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function Be(t){const o=ye(t),{shorthand:u,alpha:f}=t;return u?React.createElement(Typography,{component:"span",className:o[f?"alpha":"beta"],style:{fontSize:"120%"}},f?React.createElement(React.Fragment,null,"\u03B1"):React.createElement(React.Fragment,null,"\u03B2")):React.createElement(Typography,{component:"span",className:o[f?"alpha":"beta"]},f?"Alpha":"Beta")}const xe=(0,a.lazy)(()=>e.e(9781).then(e.bind(e,9781)).then(t=>({default:t.RealLogViewer})));function at(t){const{Progress:o}=(0,l.nm)().getComponents();return a.createElement(a.Suspense,{fallback:a.createElement(o,null)},a.createElement(xe,{...t}))}const Nt=(0,k.A)(t=>({root:{paddingLeft:t.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),wt=({request:t,busy:o,setBusy:u})=>{const f=Nt(),[P,B]=(0,a.useState)(),{t:F}=(0,b.ie)(he),ae=async()=>{u(!0);try{await t.trigger()}catch(Ae){B((0,Bt.bJ)(Ae)?Ae.message:"An unspecified error occurred")}finally{u(!1)}},pe=t.provider.icon;return a.createElement(et.A,{disabled:o,classes:{root:f.root}},a.createElement(zt.A,null,a.createElement(pe,{fontSize:"large"})),a.createElement(Je.A,{primary:t.provider.title,secondary:P&&a.createElement(r.A,{color:"error"},P)}),a.createElement(le.A,{color:"primary",variant:"contained",onClick:ae},F("oauthRequestDialog.login")))},en=(0,k.A)(t=>({dialog:{paddingTop:t.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:t.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:t.spacing(2,0)}}),{name:"OAuthRequestDialog"});function En(t){var o;const u=en(),[f,P]=(0,a.useState)(!1),B=(0,s.u)(s.x),F=(0,s.u)(s.p),{t:ae}=(0,b.ie)(he),pe=(o=F.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?o:!1,Ae=(0,S.A)((0,a.useMemo)(()=>B.authRequest$(),[B]),[]),Ye=()=>{Ae.forEach(ze=>ze.reject())};return a.createElement(ie.A,{open:!!Ae.length,fullWidth:!0,maxWidth:"xs",classes:{paper:u.dialog},"aria-labelledby":"oauth-req-dialog-title"},a.createElement("main",null,a.createElement(Ce.A,{classes:{root:u.title},id:"oauth-req-dialog-title"},a.createElement(r.A,{className:u.titleHeading,variant:"h1",variantMapping:{h1:"span"}},ae("oauthRequestDialog.title")),pe?a.createElement(r.A,null,ae("oauthRequestDialog.authRedirectTitle")):null),a.createElement(we.A,{dividers:!0,classes:{root:u.contentList}},a.createElement(lt.A,null,Ae.map(ze=>a.createElement(wt,{key:ze.provider.title,request:ze,busy:f,setBusy:P}))))),a.createElement(G.A,{classes:{root:u.actionButtons}},a.createElement(le.A,{onClick:Ye},ae("oauthRequestDialog.rejectAll"))))}const un=(0,k.A)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function xn(t){var o;const[u,f]=(0,a.useState)(!1),P=(0,nn.a)(),B=un(),F=ae=>{P()&&f(ae)};return a.createElement(Ge.Ay,{title:(o=t.title)!=null?o:t.text||"",placement:t.placement,disableHoverListener:!u},a.createElement(mn(),{text:t.text,line:t.line,onToggled:F,containerClassName:B.container}))}function Zn(t){const o=(0,ce.A)(),[u,f]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const P=setTimeout(()=>f(!0),o.transitions.duration.short);return()=>clearTimeout(P)},[o.transitions.duration.short]),u?a.createElement(nt.A,{...t,"data-testid":"progress"}):a.createElement(J.A,{display:"none"})}const In=(0,k.A)(t=>({root:{maxWidth:"fit-content",padding:t.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:t.palette.textSubtle},arrow:{color:t.palette.textSubtle}}),{name:"BackstageBottomLink"});function sa(t){const{link:o,title:u,onClick:f}=t,P=In();return a.createElement(J.A,null,a.createElement(qt.A,null),a.createElement(ga,{to:o,onClick:f,underline:"none"},a.createElement(J.A,{display:"flex",alignItems:"center",className:P.root},a.createElement(J.A,{className:P.boxTitle,fontWeight:"fontWeightBold",m:1},a.createElement(r.A,null,a.createElement("strong",null,u))),a.createElement(V.A,{className:P.arrow}))))}const pa=t=>{const{slackChannel:o}=t,{t:u}=(0,b.ie)(he);if(o){if(typeof o=="string")return a.createElement(r.A,null,u("errorBoundary.title",{slackChannel:o}));if(!o.href)return a.createElement(r.A,null,u("errorBoundary.title",{slackChannel:o.name}))}else return null;return a.createElement(Ha,{to:o.href,variant:"contained"},o.name)},Wn=class extends a.Component{constructor(o){super(o),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(o,u){console.error(`ErrorBoundary, error: ${o}, info: ${u}`),this.setState({error:o,errorInfo:u})}render(){const{slackChannel:o,children:u}=this.props,{error:f}=this.state;return f?a.createElement(gr,{title:"Something Went Wrong",error:f},a.createElement(pa,{slackChannel:o})):u}},Yn=(0,k.A)(t=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:t.spacing(2,2,2,2.5)},headerTitle:{fontWeight:t.typography.fontWeightBold},headerSubheader:{paddingTop:t.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),oa=(0,h.A)(t=>({root:{display:"inline-block",padding:t.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Tt.A),ca={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function ha(t){const{title:o,subheader:u,divider:f=!0,deepLink:P,slackChannel:B,errorBoundaryProps:F,variant:ae,children:pe,headerStyle:Ae,headerProps:Ye,icon:ze,action:Mt,actionsClassName:Ht,actions:Qt,cardClassName:Gn,actionsTopRight:zn,className:la,noPadding:Ka,titleTypographyProps:nr}=t,Jn=Yn();let Ma={},za={};ae&&ae.split(/[\s]+/g).forEach(Br=>{Ma={...Ma,...ca.card[Br]},za={...za,...ca.cardContent[Br]}});const ar=()=>!u&&!ze?null:a.createElement("div",{className:Jn.headerSubheader,"data-testid":"info-card-subheader"},u&&a.createElement("div",{className:Jn.subheader},u),ze),Ir=F||(B?{slackChannel:B}:{});return a.createElement(gt.A,{style:Ma,className:la},a.createElement(Wn,{...Ir},o&&a.createElement(Ze.A,{classes:{root:Jn.header,title:Jn.headerTitle,subheader:Jn.headerSubheader,avatar:Jn.headerAvatar,action:Jn.headerAction,content:Jn.headerContent},title:o,subheader:ar(),action:Mt,style:{...Ae},titleTypographyProps:nr,...Ye}),zn&&a.createElement(oa,null,zn),f&&a.createElement(qt.A,null),a.createElement(ot.A,{className:Q()(Gn,{[Jn.noPadding]:Ka}),style:za},pe),Qt&&a.createElement(Tt.A,{className:Ht},Qt),P&&a.createElement(sa,{...P})))}const ma=(0,k.A)(t=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:t.typography.pxToRem(45),fontWeight:t.typography.fontWeightBold,color:t.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Ea={fractional:!0,inverse:!1,unit:"%",max:100},Aa=({palette:t,value:o,inverse:u,max:f})=>{if(isNaN(o))return"#ddd";const P=f||Ea.max,B=u?P-o:o;return B<P/3?t.status.error:B<P*(2/3)?t.status.warning:t.status.ok};function qa(t){const[o,u]=useState(null),{getColor:f=Aa}=t,P=ma(t),{palette:B}=useTheme(),{value:F,fractional:ae,inverse:pe,unit:Ae,max:Ye,description:ze}={...Ea,...t},Mt=ae?Math.round(F*Ye):F,Ht=Ye!==100?Math.round(F):Mt,[Qt,Gn]=useState(!1);return useEffect(()=>{const zn=o,la=()=>Gn(!0),Ka=()=>Gn(!1);return zn&&ze?(zn.addEventListener("mouseenter",la),zn.addEventListener("mouseleave",Ka),()=>{zn.removeEventListener("mouseenter",la),zn.removeEventListener("mouseleave",Ka)}):()=>{Gn(!1)}},[ze,o]),React.createElement(Box,{ref:u,className:P.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Mt,strokeWidth:12,trailWidth:12,strokeColor:f({palette:B,value:Ht,inverse:pe,max:Ye}),className:P.circle}),ze&&Qt?React.createElement(Box,{className:P.description},ze):React.createElement(Box,{className:P.overlay},isNaN(F)?"N/A":`${Ht}${Ae}`))}const ro=(0,k.A)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function qo(t){const o=ro(t),{title:u,subheader:f,progress:P,inverse:B,deepLink:F,description:ae,icon:pe,variant:Ae,getColor:Ye}=t,ze={inverse:B,description:ae,getColor:Ye,value:P};return React.createElement(Box,{className:o.root},React.createElement(ha,{title:u,subheader:f,deepLink:F,variant:Ae,icon:pe},React.createElement(qa,{...ze})))}function ei(t){const{value:o,getColor:u=Aa,width:f="thick"}=t,{palette:P}=useTheme();if(isNaN(o))return null;let B=Math.round(o*100*100)/100;B>100&&(B=100);const F=f==="thick"?4:1,ae=u({palette:P,value:B,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${B}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:B,strokeWidth:F,trailWidth:F,strokeColor:ae})))}const Uo=(0,k.A)(t=>(0,M.A)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageClosedDropdown"}),Ao=()=>{const t=Uo();return a.createElement(kn.A,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"currentColor"}))},bo=(0,k.A)(t=>(0,M.A)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageOpenedDropdown"}),d=()=>{const t=bo();return a.createElement(kn.A,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"currentColor"}))},n=(0,h.A)(t=>(0,M.A)({root:{"label + &":{marginTop:t.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:t.palette.primary.main}},input:{borderRadius:t.shape.borderRadius,position:"relative",backgroundColor:t.palette.background.paper,border:"1px solid #ced4da",fontSize:t.typography.body1.fontSize,padding:t.spacing(1.25,3.25,1.25,1.5),transition:t.transitions.create(["border-color","box-shadow"]),"&:focus":{background:t.palette.background.paper,borderRadius:t.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(cn.A),i=(0,k.A)(t=>(0,M.A)({formControl:{margin:t.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function g(t){const{multiple:o,items:u,label:f,placeholder:P,selected:B,onChange:F,triggerReset:ae,native:pe=!1,disabled:Ae=!1,margin:Ye}=t,ze=i(),[Mt,Ht]=(0,a.useState)(B||(o?[]:"")),[Qt,Gn]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Ht(o?[]:"")},[ae,o]),(0,a.useEffect)(()=>{Ht(B||(o?[]:""))},[B,o]);const zn=Jn=>{Ht(Jn.target.value),F(Jn.target.value)},la=Jn=>{if(Ae){Jn.preventDefault();return}Gn(Ma=>o&&!(Jn.target instanceof HTMLElement)?!0:!Ma)},Ka=()=>{Gn(!1)},nr=Jn=>()=>{const Ma=Mt.filter(za=>za!==Jn);Ht(Ma),F(Ma)};return a.createElement(J.A,{className:ze.root},a.createElement(xt.A,{className:ze.formControl},a.createElement(An.A,{className:ze.formLabel},f),a.createElement($n.A,{"aria-label":f,value:Mt,native:pe,disabled:Ae,"data-testid":"select",displayEmpty:!0,multiple:o,margin:Ye,onChange:zn,open:Qt,onOpen:la,onClose:Ka,input:a.createElement(n,null),label:f,renderValue:Jn=>{var Ma;return o&&Mt.length!==0?a.createElement(J.A,{className:ze.chips},Jn.map(za=>{const ar=u.find(Ir=>Ir.value===za);return ar?a.createElement(Pt.A,{key:ar==null?void 0:ar.value,label:ar==null?void 0:ar.label,clickable:!0,onDelete:nr(za),className:ze.chip}):!1})):a.createElement(r.A,null,Mt.length===0?P||"":(Ma=u.find(za=>za.value===Jn))==null?void 0:Ma.label)},IconComponent:()=>Qt?a.createElement(d,null):a.createElement(Ao,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},P&&!o&&a.createElement(Bn.A,{value:[]},P),pe?u&&u.map(Jn=>a.createElement("option",{value:Jn.value,key:Jn.value},Jn.label)):u&&u.map(Jn=>a.createElement(Bn.A,{key:Jn.value,value:Jn.value},o&&a.createElement(ge.A,{color:"primary",checked:Mt.includes(Jn.value)||!1,className:ze.checkbox}),Jn.label)))))}const T=()=>{},se=a.createContext({stepperLength:0,stepIndex:0,setStepIndex:T,stepHistory:[],setStepHistory:T,onStepChange:T});function Le(t){const{children:o,elevated:u,onStepChange:f,activeStep:P=0}=t,[B,F]=useState(P),[ae,pe]=useState([0]);useEffect(()=>{F(P)},[P]);const Ae=[];let Ye;return Children.forEach(o,ze=>{isValidElement(ze)&&(ze.props.end?Ye=ze:Ae.push(ze))}),React.createElement(React.Fragment,null,React.createElement(se.Provider,{value:{stepIndex:B,setStepIndex:F,stepHistory:ae,setStepHistory:pe,onStepChange:f,stepperLength:Children.count(o)}},React.createElement(MuiStepper,{activeStep:B,orientation:"vertical",elevation:u?2:0},Ae)),B>=Children.count(o)-1&&Ye)}const Ke=(0,k.A)(t=>({root:{marginTop:t.spacing(3),"& button":{marginRight:t.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),At=({text:t,handleClick:o})=>{const{t:u}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{onClick:o},t||u("simpleStepper.reset"))},$t=({text:t,handleClick:o,disabled:u,last:f,stepIndex:P})=>{const{t:B}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{variant:"contained",color:"primary",disabled:u,"data-testid":`nextButton-${P}`,onClick:o},t||B(f?"simpleStepper.finish":"simpleStepper.next"))},Hn=({text:t,handleClick:o,disabled:u,stepIndex:f})=>{const{t:P}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:u,"data-testid":`skipButton-${f}`,onClick:o},t||P("simpleStepper.skip"))},Kn=({text:t,handleClick:o,disabled:u,stepIndex:f})=>{const{t:P}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{onClick:o,"data-testid":`backButton-${f}`,disabled:u},t||P("simpleStepper.back"))},Tn=({actions:t={},children:o})=>{const u=Ke(),{stepperLength:f,stepIndex:P,setStepIndex:B,stepHistory:F,setStepHistory:ae,onStepChange:pe}=useContext(se),Ae=(Ht,Qt)=>{Qt&&Qt(),pe&&pe(P,Ht),B(Ht)},Ye=()=>{const Ht=t.nextStep?t.nextStep(P,f-1):P+1;Ae(Ht,t.onNext),ae([...F,Ht])},ze=()=>{F.pop(),Ae(F[F.length-1],t.onBack),ae([...F])},Mt=()=>{Ae(0,t.onRestart),ae([0])};return React.createElement(Box,{className:u.root},[void 0,!0].includes(t.showBack)&&P!==0&&React.createElement(Kn,{text:t.backText,handleClick:ze,disabled:P===0,stepIndex:P}),t.showSkip&&React.createElement(Hn,{text:t.skipText,handleClick:Ye,disabled:!!f&&P>=f||!!t.canSkip&&!t.canSkip(),stepIndex:P}),[void 0,!0].includes(t.showNext)&&React.createElement($t,{text:t.nextText,handleClick:Ye,disabled:!!f&&P>=f||!!t.canNext&&!t.canNext(),stepIndex:P}),t.showRestart&&P!==0&&React.createElement(At,{text:t.restartText,handleClick:Mt,stepIndex:P}),o)},fa=(0,k.A)(t=>({end:{padding:t.spacing(3)}}),{name:"SimpleStepperStep"});function aa(t){const{title:o,children:u,end:f,actions:P,...B}=t,F=fa();return f?React.createElement(Box,{className:F.end},React.createElement(Typography,{variant:"h6"},o),u,React.createElement(Tn,{actions:{...P||{},showNext:!1}})):React.createElement(MuiStep,{...B},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},o)),React.createElement(StepContent,null,u,React.createElement(Tn,{actions:P})))}const ua=(0,k.A)(t=>({status:{fontWeight:t.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:t.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:t.palette.status.ok}},warning:{"&::before":{backgroundColor:t.palette.status.warning}},error:{"&::before":{backgroundColor:t.palette.status.error}},pending:{"&::before":{backgroundColor:t.palette.status.pending}},running:{"&::before":{backgroundColor:t.palette.status.running}},aborted:{"&::before":{backgroundColor:t.palette.status.aborted}}}),{name:"BackstageStatus"});function Ya(t){const o=ua(t);return a.createElement(r.A,{component:"span",className:Q()(o.status,o.ok),"aria-label":"Status ok","aria-hidden":"true",...t})}function Ca(t){const o=ua(t);return a.createElement(r.A,{component:"span",className:Q()(o.status,o.warning),"aria-label":"Status warning","aria-hidden":"true",...t})}function pr(t){const o=ua(t);return a.createElement(r.A,{component:"span",className:Q()(o.status,o.error),"aria-label":"Status error","aria-hidden":"true",...t})}function zr(t){const o=ua(t);return a.createElement(r.A,{component:"span",className:Q()(o.status,o.pending),"aria-label":"Status pending","aria-hidden":"true",...t})}function _o(t){const o=ua(t);return a.createElement(r.A,{component:"span",className:Q()(o.status,o.running),"aria-label":"Status running","aria-hidden":"true",...t})}function Hi(t){const o=ua(t);return a.createElement(r.A,{component:"span",className:Q()(o.status,o.aborted),"aria-label":"Status aborted","aria-hidden":"true",...t})}const Vi=t=>(0,M.A)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),Yi={root:{border:"0",verticalAlign:"top"}},Ji=t=>(0,M.A)({root:{margin:t.spacing(0,0,-1,0)}}),Qi=t=>(0,M.A)({root:{padding:t.spacing(0,0,1,0)},random:{}}),Xi=(0,h.A)(Vi,{name:"BackstageMetadataTableTitleCell"})(m.A),Zi=(0,h.A)(Yi,{name:"BackstageMetadataTableCell"})(m.A),qi=({dense:t,children:o})=>a.createElement(ra.A,{size:t?"small":"medium"},a.createElement(ct.A,null,o)),es=({title:t,children:o,...u})=>a.createElement(w.A,null,t&&a.createElement(Xi,null,t),a.createElement(Zi,{colSpan:t?1:2,...u},o)),ti=(0,h.A)(Ji,{name:"BackstageMetadataTableList"})(({classes:t,children:o})=>a.createElement(lt.A,{disablePadding:!0,className:t.root},o)),ni=(0,h.A)(Qi,{name:"BackstageMetadataTableListItem"})(({classes:t,children:o})=>a.createElement(et.A,{className:t.root},o)),ai=(0,M.A)({root:{margin:"0 0",listStyleType:"none"}}),ts=t=>(0,M.A)({root:{...ai.root,paddingLeft:t.spacing(1)}}),ri=(0,h.A)(ai,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:o})=>a.createElement(ti,{classes:t},o)),oi=(0,h.A)(ts,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:o})=>a.createElement(ti,{classes:t},o));function ns(t,o,u){const f=t.map((P,B)=>a.createElement(ni,{key:B},$o(P,o,u)));return u?a.createElement(oi,null,f):a.createElement(ri,null,f)}function as(t,o,u){const f=Object.keys(t).map(P=>{const B=$o(t[P],o,!0);return a.createElement(ni,{key:P},a.createElement(r.A,{variant:"body2",component:"span"},`${o.titleFormat(P)}: `),B)});return u?a.createElement(oi,null,f):a.createElement(ri,null,f)}function $o(t,o,u){return a.isValidElement(t)?a.createElement(a.Fragment,null,t):t!==null&&typeof t=="object"&&!Array.isArray(t)?as(t,o,u):Array.isArray(t)?ns(t,o,u):typeof t=="boolean"?a.createElement(a.Fragment,null,t?"\u2705":"\u274C"):a.createElement(r.A,{variant:"body2",component:"span"},t)}const rs=({value:t,options:o})=>a.createElement(a.Fragment,null,$o(t,o,!1)),os=({title:t,value:o,options:u})=>a.createElement(es,{title:u.titleFormat(t)},a.createElement(rs,{value:o,options:u}));function is(t,o){return Object.keys(t).map(u=>a.createElement(os,{key:u,title:u,value:t[u],options:o}))}function ss(t){const{metadata:o,dense:u=!0,options:f={}}=t,P=is(o,{titleFormat:jn(),...f});return a.createElement(qi,{dense:u},P)}function ls(t){return qs.stringify(t,{strictNullHandling:!0})}function ii(t){return qs.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function si(t,o){return ii(t)[o]}function cs(t,o,u){const f={...ii(t),[o]:u};return ls(f)}function fc(t,o=250){const[u,f]=useSearchParams(),P=u.toString(),[B,F]=useState(si(P,t));return useEffect(()=>{const ae=si(P,t);F(pe=>isEqual(ae,pe)?pe:ae)},[P,F,t]),useDebouncedEffect(()=>{const ae=cs(P,t,B);P!==ae&&f(ae,{replace:!0})},[f,B,P,t],o),[B,F]}const us=()=>{const{t}=(0,b.ie)(he);return{url:"https://github.com/backstage/backstage/issues",items:[{title:t("supportConfig.default.title"),icon:"warning",links:[{title:t("supportConfig.default.linkTitle"),url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]}};function li(){const o=(0,s.b)().get(s.p),u=o==null?void 0:o.getOptionalConfig("app.support"),f=us();return u?{url:u.getString("url"),items:u.getConfigArray("items").flatMap(P=>{var B;return{title:P.getString("title"),icon:P.getOptionalString("icon"),links:((B=P.getOptionalConfigArray("links"))!=null?B:[]).flatMap(F=>({url:F.getString("url"),title:F.getString("title")}))}})}:f}function br(t){var o;const{id:u,Fallback:f=Se.A,...P}=t,F=(o=(0,l.nm)().getSystemIcon(u))!=null?o:f;return a.createElement(F,{...P})}function Ec(t){return React.createElement(br,{id:"brokenImage",...t})}function ds(t){return a.createElement(br,{id:"catalog",...t})}function vc(t){return React.createElement(br,{id:"chat",...t})}function yc(t){return React.createElement(br,{id:"dashboard",...t})}function ms(t){return a.createElement(br,{id:"docs",...t})}function Ac(t){return React.createElement(br,{id:"email",...t})}function ps(t){return a.createElement(br,{id:"github",...t})}function bc(t){return React.createElement(br,{id:"group",...t})}function Co(t){return a.createElement(br,{id:"help",...t})}function hs(t){return a.createElement(br,{id:"user",...t})}function _c(t){return React.createElement(br,{id:"warning",...t})}const gs=(0,k.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),fs=({icon:t})=>{var o;const u=(0,l.nm)(),f=t&&(o=u.getSystemIcon(t))!=null?o:Co;return a.createElement(f,null)},Es=({link:t})=>{var o;return a.createElement(ga,{to:t.url},(o=t.title)!=null?o:t.url)},vs=({item:t})=>{var o;return a.createElement(Bn.A,null,a.createElement(K.A,null,a.createElement(fs,{icon:t.icon})),a.createElement(Je.A,{primary:t.title,secondary:(o=t.links)==null?void 0:o.reduce((u,f,P)=>[...u,P>0&&a.createElement("br",{key:P}),a.createElement(Es,{link:f,key:f.url})],[])}))};function ys(t){const{t:o}=(0,b.ie)(he),{title:u,items:f,children:P}=t,{items:B}=li(),[F,ae]=(0,a.useState)(!1),[pe,Ae]=(0,a.useState)(null),Ye=gs(),ze=(0,qe.A)(Qt=>Qt.breakpoints.down("sm")),Mt=Qt=>{Ae(Qt.currentTarget),ae(!0)},Ht=()=>{ae(!1)};return a.createElement(a.Fragment,null,a.createElement(J.A,{display:"flex",ml:1},ze?a.createElement(_.A,{color:"primary",size:"small",onClick:Mt,"data-testid":"support-button","aria-label":"Support"},a.createElement(Co,null)):a.createElement(le.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:Mt,startIcon:a.createElement(Co,null)},o("supportButton.title"))),a.createElement(D.Ay,{"data-testid":"support-button-popover",open:F,anchorEl:pe,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:Ht},a.createElement(re.A,{className:Ye.popoverList,autoFocusItem:!!pe},u&&a.createElement(Bn.A,{alignItems:"flex-start",className:Ye.menuItem},a.createElement(r.A,{variant:"subtitle1"},u)),a.Children.map(P,(Qt,Gn)=>a.createElement(Bn.A,{alignItems:"flex-start",key:`child-${Gn}`,className:Ye.menuItem},Qt)),(f!=null?f:B).map((Qt,Gn)=>a.createElement(vs,{item:Qt,key:`item-${Gn}`}))),a.createElement(G.A,null,a.createElement(le.A,{color:"primary",onClick:Ht,"aria-label":"Close"},o("supportButton.close")))))}const As=(0,k.A)(t=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:t.spacing(3),paddingBottom:t.spacing(3),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Po(t){const{className:o,stretch:u,noPadding:f,children:P,...B}=t,F=As();return a.createElement("article",{...B,className:Q()(F.root,o,{[F.stretch]:u,[F.noPadding]:f})},P)}const bs=(0,k.A)(t=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(3),minWidth:0},defaultTab:{...t.typography.caption,padding:t.spacing(3,3),textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,color:t.palette.text.secondary},selected:{color:t.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:t.palette.background.default,color:t.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function ci(t){const{tabs:o,onChange:u,selectedIndex:f}=t,[P,B]=(0,a.useState)(f!=null?f:0),F=bs(),ae=(0,a.useCallback)((pe,Ae)=>{f===void 0&&B(Ae),u&&u(Ae)},[f,u]);return(0,a.useEffect)(()=>{f!==void 0&&B(f)},[f]),a.createElement(J.A,{className:F.tabsWrapper},a.createElement(St.A,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:ae,value:P},o.map((pe,Ae)=>a.createElement(ut.A,{...pe.tabProps,"data-testid":`header-tab-${Ae}`,label:pe.label,key:pe.id,value:Ae,className:F.defaultTab,classes:{selected:F.selected,root:F.tabRoot}}))))}function _s(t){var o,u,f,P,B;const F=(0,X.g)(),pe=t.map(({path:Ht,children:Qt})=>({caseSensitive:!1,path:`${Ht}/*`,element:Qt})).sort((Ht,Qt)=>Qt.path.replace(/\/\*$/,"").localeCompare(Ht.path.replace(/\/\*$/,""))),Ae=(u=(0,X.Ye)(pe))!=null?u:(o=t[0])==null?void 0:o.children;let Ye=(f=F["*"])!=null?f:"";Ye.startsWith("/")||(Ye=`/${Ye}`);const[ze]=(P=(0,j.ue)(pe,Ye))!=null?P:[],Mt=ze?t.findIndex(Ht=>`${Ht.path}/*`===ze.route.path):0;return{index:Mt===-1?0:Mt,element:Ae,route:(B=t[Mt])!=null?B:t[0]}}function ui(t){const{routes:o}=t,u=(0,X.Zp)(),{index:f,route:P,element:B}=_s(o),F=(0,a.useMemo)(()=>o.map(pe=>({id:pe.path,label:pe.title,tabProps:pe.tabProps})),[o]),ae=pe=>{let{path:Ae}=o[pe];Ae=Ae.replace(/\/\*$/,""),Ae=Ae.replace(/^\//,""),u(Ae)};return a.createElement(a.Fragment,null,a.createElement(ci,{tabs:F,selectedIndex:f,onChange:ae}),a.createElement(Po,null,a.createElement(Re.m,{title:P==null?void 0:P.title}),B))}const ko=()=>null;(0,l.h3)(ko,"core.gatherMountPoints",!0);function di(t){const o=a.createElement(ko,{path:"",title:""},a.createElement("div",null)).type;return a.Children.toArray(t).flatMap(u=>{if(!(0,a.isValidElement)(u))return[];if(u.type===a.Fragment)return di(u.props.children);if(u.type!==o)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:f,title:P,children:B,tabProps:F}=u.props;return[{path:f,title:P,children:B,tabProps:F}]})}function Cs(t){const o=di(t.children);return a.createElement(ui,{routes:o})}Cs.Route=ko;const Ps=(0,k.A)(t=>({value:{marginBottom:t.spacing(.75)},subvalue:{color:t.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Ss(t){const{value:o,subvalue:u}=t,f=Ps();return a.createElement(a.Fragment,null,a.createElement(J.A,{className:f.value},o),a.createElement(J.A,{className:f.subvalue},u))}const Rs=(0,k.A)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),ws=t=>{var o;const u=Rs(),{onChangeFilters:f}=t,{t:P}=(0,b.ie)(he),[B,F]=(0,a.useState)({...t.selectedFilters}),[ae,pe]=(0,a.useState)(!1),Ae=()=>{F({}),pe(Ye=>!Ye)};return(0,a.useEffect)(()=>{f(B)},[B,f]),a.createElement(J.A,{className:u.root},a.createElement(J.A,{className:u.header},a.createElement(J.A,{className:u.value},P("table.filter.title")),a.createElement(le.A,{color:"primary",onClick:Ae},P("table.filter.clearAll"))),a.createElement(J.A,{className:u.filters},((o=t.filters)==null?void 0:o.length)&&t.filters.map(Ye=>a.createElement(g,{triggerReset:ae,key:Ye.element.label,...Ye.element,selected:B[Ye.element.label],onChange:ze=>F({...B,[Ye.element.label]:ze})}))))};function Os(t){return a.createElement("tbody",{"data-testid":"loading-indicator"},a.createElement("tr",null,a.createElement("td",{colSpan:t.colSpan},a.createElement(J.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},a.createElement(rn.A,{size:"5rem"})))))}const mi={Add:(0,a.forwardRef)((t,o)=>a.createElement(Zt.A,{...t,ref:o})),Check:(0,a.forwardRef)((t,o)=>a.createElement(dn.A,{...t,ref:o})),Clear:(0,a.forwardRef)((t,o)=>a.createElement(kt.A,{...t,ref:o})),Delete:(0,a.forwardRef)((t,o)=>a.createElement(yn.A,{...t,ref:o})),DetailPanel:(0,a.forwardRef)((t,o)=>a.createElement(Vt.A,{...t,ref:o})),Edit:(0,a.forwardRef)((t,o)=>a.createElement(gn.A,{...t,ref:o})),Export:(0,a.forwardRef)((t,o)=>a.createElement(Sn.A,{...t,ref:o})),Filter:(0,a.forwardRef)((t,o)=>a.createElement(Un.A,{...t,ref:o})),FirstPage:(0,a.forwardRef)((t,o)=>a.createElement(Qn.A,{...t,ref:o})),LastPage:(0,a.forwardRef)((t,o)=>a.createElement(ea.A,{...t,ref:o})),NextPage:(0,a.forwardRef)((t,o)=>a.createElement(Vt.A,{...t,ref:o})),PreviousPage:(0,a.forwardRef)((t,o)=>a.createElement(Kt.A,{...t,ref:o})),ResetSearch:(0,a.forwardRef)((t,o)=>a.createElement(kt.A,{...t,ref:o})),Search:(0,a.forwardRef)((t,o)=>a.createElement(Un.A,{...t,ref:o})),SortArrow:(0,a.forwardRef)((t,o)=>a.createElement(hn.A,{...t,ref:o})),ThirdStateCheck:(0,a.forwardRef)((t,o)=>a.createElement(Pn.A,{...t,ref:o})),ViewColumn:(0,a.forwardRef)((t,o)=>a.createElement(Jt.A,{...t,ref:o}))};function pi(t,o){const u=o.split(".");let f=t[u[0]];for(let P=1;P<u.length;++P){if(f===void 0)return f;const B=u[P];f=f[B]}return f}const Ts=(0,h.A)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal",textTransform:"uppercase"}}),{name:"BackstageTableHeader"})(sn.rV),hi=(0,h.A)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})(sn.Nb),Is=(0,k.A)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Ds=(0,k.A)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ms(t,o){return t.map(u=>{var f;const P=(f=u.headerStyle)!=null?f:{};let B=u.cellStyle||{};if(u.highlight)if(P.color=o.palette.textContrast,typeof B=="object")B.fontWeight=o.typography.fontWeightBold;else{const F=B;B=(ae,pe,Ae)=>({...F(ae,pe,Ae),fontWeight:o.typography.fontWeightBold})}return{...u,headerStyle:P,cellStyle:B}})}function xs(t,o){return(0,Ee.transform)(t,(u,f,P)=>{(0,Ee.isEqual)(f,o[P])||(u[P]=f)})}const gi={search:"",filtersOpen:!1,filters:{}};function Ls(t){const{toolbarRef:o,setSearch:u,hasFilters:f,selectedFiltersLength:P,toggleFilters:B}=t,F=Is(),ae=(0,a.useCallback)(pe=>{t.onSearchChanged(pe),u(pe)},[t,u]);return f?a.createElement(J.A,{className:F.root},a.createElement(J.A,{className:F.root},a.createElement(_.A,{onClick:B,"aria-label":"filter list"},a.createElement(Un.A,null)),a.createElement(r.A,{className:F.title},"Filters (",P,")")),a.createElement(hi,{...t,ref:o,onSearchChanged:ae})):a.createElement(hi,{...t,ref:o,onSearchChanged:ae})}function fi(t){const{data:o,columns:u,emptyContent:f,options:P,title:B,subtitle:F,localization:ae,filters:pe,initialState:Ae,onStateChange:Ye,components:ze,isLoading:Mt,...Ht}=t,Qt=Ds(),Gn=(0,ce.A)(),zn={...gi,...Ae},[la,Ka]=(0,a.useState)(zn.filtersOpen),nr=(0,a.useCallback)(()=>Ka(sr=>!sr),[Ka]),[Jn,Ma]=(0,a.useState)(zn.filters),[za,ar]=(0,a.useState)(zn.search);(0,a.useEffect)(()=>{if(Ye){const sr=xs({search:za,filtersOpen:la,filters:Jn},gi);Ye(sr)}},[za,la,Jn,Ye]);const Ir=(0,a.useCallback)(sr=>{var fo;return(fo=u.find(Ur=>Ur.title===sr))==null?void 0:fo.field},[u]),so=(0,a.useMemo)(()=>{if(typeof o=="function"||!Jn)return o;const sr=Object.values(Jn);return o&&sr.flat().length?o.filter(Ur=>!!Object.entries(Jn).filter(([,Eo])=>!!Eo.length).every(([Eo,Gr])=>{const Hr=pi(Ur,Ir(Eo));return Array.isArray(Hr)&&Array.isArray(Gr)?Hr.some(Qo=>Gr.includes(Qo)):Array.isArray(Hr)?Hr.includes(Gr):Array.isArray(Gr)?Gr.includes(Hr):Hr===Gr})):o},[o,Jn,Ir]),Br=Object.values(Jn).flat().length,jr=!!(pe!=null&&pe.length),Jo=(0,a.useCallback)(sr=>a.createElement(Ls,{setSearch:ar,hasFilters:jr,selectedFiltersLength:Br,toggleFilters:nr,...sr}),[nr,jr,Br,ar]),Xr=typeof o!="function"&&o.length===0,Lo=u.length,wa=(0,a.useMemo)(()=>Bs({hasNoRows:Xr,emptyContent:f,columnCount:Lo,loading:Mt}),[Xr,f,Lo,Mt]);return a.createElement(J.A,{className:Qt.root},la&&o&&typeof o!="function"&&(pe==null?void 0:pe.length)&&a.createElement(ws,{filters:Us(pe,o,u),selectedFilters:Jn,onChangeFilters:Ma}),a.createElement(sn.Ay,{components:{Header:Ts,Body:wa,Toolbar:Jo,...ze},options:P,columns:Ms(u,Gn),icons:mi,title:a.createElement(a.Fragment,null,a.createElement(r.A,{variant:"h5",component:"h2"},B),F&&a.createElement(r.A,{color:"textSecondary",variant:"body1"},F)),data:so,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...ae},...Ht}))}fi.icons=Object.freeze(mi);function Bs({columnCount:t,emptyContent:o,hasNoRows:u,loading:f}){return P=>f?a.createElement(Os,{colSpan:t}):o&&u?a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{colSpan:t},o))):a.createElement(sn.C6,{...P})}function Us(t,o,u){const f=B=>{const F=new Set,ae=pe=>{pe!=null&&F.add(pe)};return o&&o.forEach(pe=>{var Ae;const Ye=pi(pe,(Ae=u.find(ze=>ze.title===B))==null?void 0:Ae.field);Array.isArray(Ye)?Ye.forEach(ae):ae(Ye)}),F},P=B=>({placeholder:"All results",label:B.column,multiple:B.type==="multiple-select",items:[...f(B.column)].sort().map(F=>({label:F,value:F}))});return t.map(B=>({type:B.type,element:P(B)}))}function $s(t,o){const u=t[t.length-1];if(u)return u>=.9?o.palette.status.ok:u>=.5?o.palette.status.warning:o.palette.status.error}function Cc(t){var o;const u=useTheme();return t.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...t},t.title&&React.createElement("title",null,t.title),React.createElement(SparklinesLine,{color:(o=t.color)!=null?o:$s(t.data,u)})):null}const ks=t=>(0,k.A)(o=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:o.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:o.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Ns=({title:t="Unknown page",className:o})=>a.createElement(r.A,{variant:"h4",component:"h2",className:o,"data-testid":"header-title"},t);function Ei(t){const{description:o,title:u,titleComponent:f=void 0,children:P,textAlign:B="left"}=t,F=ks({textAlign:B})(),ae=f||a.createElement(Ns,{title:u,className:F.title});return a.createElement(a.Fragment,null,a.createElement(Re.m,{title:u}),a.createElement(J.A,{className:F.container},a.createElement(J.A,{className:F.leftItemsBox},ae,o&&a.createElement(r.A,{className:F.description,variant:"body2"},o)),a.createElement(J.A,{className:F.rightItemsBox},P)))}const Fs=(0,k.A)(t=>({micDrop:{maxWidth:"60%",bottom:t.spacing(2),right:t.spacing(2),[t.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:t.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Ws=()=>{const t=Fs();return a.createElement("img",{src:_n,className:t.micDrop,alt:"Girl dropping mic from her hands"})},Ks=(0,k.A)(t=>({title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function zs(t){const{stack:o}=t,u=Ks(),{t:f}=(0,b.ie)(he),[P,B]=(0,a.useState)(!1);return P?a.createElement(a.Fragment,null,a.createElement(r.A,{variant:"h6",className:u.title},a.createElement(ga,{to:"#",onClick:()=>B(!1)},f("errorPage.showLessDetails"))),a.createElement(Ne,{text:o,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})):a.createElement(r.A,{variant:"h6",className:u.title},a.createElement(ga,{to:"#",onClick:()=>B(!0)},f("errorPage.showMoreDetails")))}const js=(0,k.A)(t=>({container:{padding:t.spacing(8),[t.breakpoints.down("xs")]:{padding:t.spacing(2)}},title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}},subtitle:{color:t.palette.textSubtle}}),{name:"BackstageErrorPage"});function Gs(t){const{status:o="",statusMessage:u,additionalInfo:f,supportUrl:P,stack:B}=t,F=js(),ae=(0,X.Zp)(),pe=li(),{t:Ae}=(0,b.ie)(he);return a.createElement(R.A,{container:!0,className:F.container},a.createElement(R.A,{item:!0,xs:12,sm:8,md:4},a.createElement(r.A,{"data-testid":"error",variant:"body1",className:F.subtitle},Ae("errorPage.subtitle",{status:o,statusMessage:u})),a.createElement(r.A,{variant:"body1",className:F.subtitle},f),a.createElement(r.A,{variant:"h2",className:F.title},Ae("errorPage.title")),a.createElement(r.A,{variant:"h6",className:F.title},a.createElement(ga,{to:"#","data-testid":"go-back-link",onClick:()=>ae(-1)},Ae("errorPage.goBack")),"... or please"," ",a.createElement(ga,{to:P||pe.url},"contact support")," if you think this is a bug."),B&&a.createElement(zs,{stack:B})),a.createElement(Ws,null))}const Hs=(0,h.A)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(r.A),No=(0,h.A)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(J.A),Vs=(0,h.A)({root:{fontStyle:"italic"}},{name:"BreadcrumbsCurrentPage"})(J.A);function vi(t){const{children:o,...u}=t,[f,P]=a.useState(null),B=a.Children.toArray(o),[F,ae,...pe]=B,Ae=pe.length?pe.pop():B[B.length-1],Ye=B.length>3,ze=Qt=>{P(Qt.currentTarget)},Mt=()=>{P(null)},Ht=!!f;return a.createElement(a.Fragment,null,a.createElement(H.A,{"aria-label":"breadcrumb",...u},B.length>1&&a.createElement(No,{clone:!0},F),B.length>2&&a.createElement(No,{clone:!0},ae),Ye&&a.createElement(Hs,{onClick:ze},"..."),a.createElement(Vs,null,Ae)),a.createElement(D.Ay,{open:Ht,anchorEl:f,onClose:Mt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},a.createElement(lt.A,null,pe.map((Qt,Gn)=>a.createElement(et.A,{key:Gn,button:!0},a.createElement(No,{clone:!0},Qt))))))}const So=72,yi=24,Ai=18,Lr={drawerWidthClosed:So,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:So,iconSize:So-yi*2,iconPadding:yi,selectedIndicatorWidth:3,userBadgePadding:Ai,userBadgeDiameter:So-Ai*2,mobileSidebarHeight:56},Ys=t=>({...Lr,...t,iconContainerWidth:Lr.drawerWidthClosed,iconSize:Lr.drawerWidthClosed-Lr.iconPadding*2,userBadgeDiameter:Lr.drawerWidthClosed-Lr.userBadgePadding*2}),bi={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Lr.defaultOpenDelayMs+200},Js=t=>({...bi,...t}),Pc="@backstage/core/sidebar-intro-dismissed",fr=(0,a.createContext)({sidebarConfig:Lr,submenuConfig:bi}),Fo=(0,a.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),_i={isOpen:!1,setOpen:()=>{}},Ci=(0,a.createContext)(_i),Pi=(0,It.tK)("sidebar-open-state-context");function Si(t){const{children:o,value:u}=t;return a.createElement(Ci.Provider,{value:u},a.createElement(Pi.Provider,{value:(0,It.Bl)({1:u})},o))}const Ro=()=>{const t=(0,a.useContext)(Pi),o=(0,a.useContext)(Ci);if(t===void 0)return o||_i;const u=t.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Ri=(0,a.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),wi={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},Oi=(0,a.createContext)(wi),Ti=(0,It.tK)("sidebar-pin-state-context");function Qs(t){const{children:o,value:u}=t;return a.createElement(Oi.Provider,{value:u},a.createElement(Ti.Provider,{value:(0,It.Bl)({1:u})},o))}const wo=()=>{const t=(0,a.useContext)(Ti),o=(0,a.useContext)(Oi);if(t===void 0)return o||wi;const u=t.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Xs=(0,k.A)(t=>({root:{flexGrow:0,margin:t.spacing(0,2),color:t.palette.navigation.color},selected:o=>({color:`${t.palette.navigation.selectedColor}!important`,borderTop:`solid ${o.sidebarConfig.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Zs=t=>{const{to:o,label:u,icon:f,value:P}=t,{sidebarConfig:B}=(0,a.useContext)(fr),F=Xs({sidebarConfig:B}),ae=(0,X.zy)(),{selectedMenuItemIndex:pe,setSelectedMenuItemIndex:Ae}=(0,a.useContext)(Ri),Ye=(Mt,Ht)=>{Ae(Ht===pe?-1:Ht)},ze=P===pe&&pe>=0||P!==pe&&!(pe>=0)&&o===ae.pathname;return a.createElement(Ot.A,{"aria-label":u,label:u,icon:f,component:ga,to:o||ae.pathname,onChange:Ye,value:P,selected:ze,classes:F})},Wo=t=>{const{children:o,to:u,label:f,icon:P,value:B}=t,{isMobile:F}=wo();return F?a.createElement(Zs,{to:u,label:f,icon:P,value:B}):a.createElement(a.Fragment,null,o)},Ii=(0,k.A)(t=>({root:{position:"fixed",backgroundColor:t.palette.navigation.background,color:t.palette.navigation.color,bottom:0,left:0,right:0,zIndex:t.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:o=>({background:t.palette.navigation.background,width:"100%",bottom:`${o.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${o.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:t.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3)},overlayHeaderClose:{color:t.palette.navigation.color},marginMobileSidebar:o=>({marginBottom:`${o.sidebarConfig.mobileSidebarHeight}px`})})),el=t=>(0,Ee.orderBy)(t,({props:{priority:o}})=>Number.isInteger(o)?o:-1,"desc"),tl=a.createElement(Wo).type,nl=({children:t,label:o="Menu",open:u,onClose:f})=>{const{sidebarConfig:P}=(0,a.useContext)(fr),B=Ii({sidebarConfig:P});return a.createElement(Fe.Ay,{anchor:"bottom",open:u,onClose:f,ModalProps:{BackdropProps:{classes:{root:B.marginMobileSidebar}}},classes:{root:B.marginMobileSidebar,paperAnchorBottom:B.overlay}},a.createElement(J.A,{className:B.overlayHeader},a.createElement(r.A,{variant:"h3"},o),a.createElement(_.A,{onClick:f,classes:{root:B.overlayHeaderClose}},a.createElement(q.A,null))),a.createElement(J.A,{component:"nav"},t))},al=t=>{const{sidebarConfig:o}=(0,a.useContext)(fr),{children:u}=t,f=Ii({sidebarConfig:o}),P=(0,X.zy)(),[B,F]=(0,a.useState)(-1);(0,a.useEffect)(()=>{F(-1)},[P.pathname]);let ae=(0,l.OJ)(u,Ae=>Ae.getElements().filter(Ye=>Ye.type===tl));if(u)ae.length?ae=el(ae):ae.push(a.createElement(Wo,{key:"default_menu",icon:a.createElement(tt.A,null)},u));else return null;const pe=B>=0&&!ae[B].props.to;return a.createElement(Si,{value:{isOpen:!0,setOpen:()=>{}}},a.createElement(Ri.Provider,{value:{selectedMenuItemIndex:B,setSelectedMenuItemIndex:F}},a.createElement(nl,{label:ae[B]&&ae[B].props.label,open:pe,onClose:()=>F(-1)},ae[B]&&ae[B].props.children),a.createElement(be.A,{className:f.root,"data-testid":"mobile-sidebar-root",component:"nav"},ae)))},Di={getSidebarPinState(){let t;try{t=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!t},setSidebarPinState(t){return window.localStorage.setItem("sidebarPinState",JSON.stringify(t))}},rl=(0,k.A)(t=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[t.breakpoints.up("sm")]:{paddingLeft:o=>o.isPinned?o.sidebarConfig.drawerWidthOpen:o.sidebarConfig.drawerWidthClosed},[t.breakpoints.down("xs")]:{paddingBottom:o=>o.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Mi=(0,a.createContext)({content:{contentRef:void 0}});function ol(t){const[o,u]=(0,a.useState)(()=>Di.getSidebarPinState()),{sidebarConfig:f}=(0,a.useContext)(fr),P=(0,a.useRef)(null),B=(0,a.useMemo)(()=>({content:{contentRef:P}}),[P]);(0,a.useEffect)(()=>{Di.setSidebarPinState(o)},[o]);const F=(0,qe.A)(Ae=>Ae.breakpoints.down("xs"),{noSsr:!0}),ae=()=>u(!o),pe=rl({isPinned:o,sidebarConfig:f});return a.createElement(Qs,{value:{isPinned:o,toggleSidebarPinState:ae,isMobile:F}},a.createElement(Mi.Provider,{value:B},a.createElement(J.A,{className:pe.root},t.children)))}function Ko(){const{content:t}=(0,a.useContext)(Mi);return{focusContent:(0,a.useCallback)(()=>{var u,f;(f=(u=t==null?void 0:t.contentRef)==null?void 0:u.current)==null||f.focus()},[t]),contentRef:t==null?void 0:t.contentRef}}const xi=(0,k.A)(t=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:t.zIndex.appBar,background:t.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:o=>({width:o.sidebarConfig.drawerWidthClosed}),drawerOpen:o=>({width:o.sidebarConfig.drawerWidthOpen,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),il=t=>{const{sidebarConfig:o}=(0,a.useContext)(fr),{openDelayMs:u=o.defaultOpenDelayMs,closeDelayMs:f=o.defaultCloseDelayMs,disableExpandOnHover:P,children:B}=t,F=xi({sidebarConfig:o}),ae=(0,qe.A)(la=>la.breakpoints.down("md"),{noSsr:!0}),[pe,Ae]=(0,a.useState)(0),Ye=(0,a.useRef)(),{isPinned:ze,toggleSidebarPinState:Mt}=wo(),Ht=()=>{ze||P||(Ye.current&&(clearTimeout(Ye.current),Ye.current=void 0),pe!==2&&!ae&&(Ye.current=window.setTimeout(()=>{Ye.current=void 0,Ae(2)},u),Ae(1)))},Qt=()=>{ze||P||(Ye.current&&(clearTimeout(Ye.current),Ye.current=void 0),pe===1?Ae(0):pe===2&&(Ye.current=window.setTimeout(()=>{Ye.current=void 0,Ae(0)},f)))},Gn=pe===2&&!ae||ze,zn=la=>{la?(Ae(2),Mt()):(Ae(0),Mt())};return a.createElement("nav",{style:{},"aria-label":"sidebar nav"},a.createElement(ll,null),a.createElement(Si,{value:{isOpen:Gn,setOpen:zn}},a.createElement(J.A,{className:F.root,"data-testid":"sidebar-root",onMouseEnter:P?()=>{}:Ht,onFocus:P?()=>{}:Ht,onMouseLeave:P?()=>{}:Qt,onBlur:P?()=>{}:Qt},a.createElement(J.A,{className:Q()(F.drawer,F.drawerWidth,{[F.drawerOpen]:Gn})},B))))},sl=t=>{var o,u;const f=Ys((o=t.sidebarOptions)!=null?o:{}),P=Js((u=t.submenuOptions)!=null?u:{}),{children:B,disableExpandOnHover:F,openDelayMs:ae,closeDelayMs:pe}=t,{isMobile:Ae}=wo();return Ae?a.createElement(al,null,B):a.createElement(fr.Provider,{value:{sidebarConfig:f,submenuConfig:P}},a.createElement(il,{openDelayMs:ae,closeDelayMs:pe,disableExpandOnHover:F},B))};function ll(){const{sidebarConfig:t}=(0,a.useContext)(fr),{focusContent:o,contentRef:u}=Ko(),f=xi({sidebarConfig:t}),{t:P}=(0,b.ie)(he);return u!=null&&u.current?a.createElement(le.A,{onClick:o,variant:"contained",className:Q()(f.visuallyHidden)},P("skipToContent")):null}function Oo(t,o,u=!1){const f=new URLSearchParams(o.search).toString(),P=Y().parse(f),B=new URLSearchParams(t.search).toString(),F=Y().parse(B),ae=u?Ee.isEqual:Ee.isMatch;return(0,Ee.isEqual)(o.pathname,t.pathname)&&ae(F,P)}const cl=(0,k.A)(t=>{var o,u;return{item:{height:48,width:"100%","&:hover":{background:((o=t.palette.navigation.navItem)==null?void 0:o.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:t.palette.navigation.color,padding:t.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:t.palette.common.white},label:{margin:t.spacing(1.75),marginLeft:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((u=t.palette.navigation.navItem)==null?void 0:u.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor}},textContent:{color:t.palette.navigation.color,paddingLeft:t.spacing(4),paddingRight:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),ul=t=>{const{title:o,subtitle:u,to:f,icon:P,dropdownItems:B,exact:F}=t,ae=cl(),{setIsHoveredOn:pe}=(0,a.useContext)(Fo),Ae=()=>{pe(!1)},Ye=(0,X.x$)(f!=null?f:""),ze=(0,X.zy)();let Mt=Oo(ze,Ye,F);const[Ht,Qt]=(0,a.useState)(!1),Gn=()=>{Qt(!Ht)};return B!==void 0?(B.some(zn=>{const la=(0,j.o1)(zn.to);return Mt=Oo(ze,la,F),Mt}),a.createElement(J.A,{className:ae.itemContainer},a.createElement(Ge.Ay,{title:o,enterDelay:500,enterNextDelay:500},a.createElement(le.A,{role:"button",onClick:Gn,onTouchStart:zn=>zn.stopPropagation(),className:Q()(ae.item,Mt?ae.selected:void 0)},P&&a.createElement(P,{fontSize:"small"}),a.createElement(r.A,{variant:"subtitle1",component:"span",className:ae.label},o,a.createElement("br",null),u&&a.createElement(r.A,{variant:"caption",component:"span",className:ae.subtitle},u)),Ht?a.createElement(ne.A,{className:ae.dropdownArrow}):a.createElement(jt.A,{className:ae.dropdownArrow}))),B&&Ht&&a.createElement(J.A,{className:ae.dropdown},B.map((zn,la)=>a.createElement(Ge.Ay,{key:la,title:zn.title,enterDelay:500,enterNextDelay:500},a.createElement(ga,{to:zn.to,underline:"none",className:ae.dropdownItem,onClick:Ae,onTouchStart:Ka=>Ka.stopPropagation()},a.createElement(r.A,{component:"span",className:ae.textContent},zn.title))))))):a.createElement(J.A,{className:ae.itemContainer},a.createElement(Ge.Ay,{title:o,enterDelay:500,enterNextDelay:500},a.createElement(ga,{to:f,underline:"none",className:Q()(ae.item,Mt?ae.selected:void 0),onClick:Ae,onTouchStart:zn=>zn.stopPropagation()},P&&a.createElement(P,{fontSize:"small"}),a.createElement(r.A,{variant:"subtitle1",component:"span",className:ae.label},o,a.createElement("br",null),u&&a.createElement(r.A,{variant:"caption",component:"span",className:ae.subtitle},u)))))},dl=(0,k.A)(t=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:t.spacing(7)+1},drawer:o=>{var u,f;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[t.breakpoints.up("sm")]:{marginLeft:o.left,transition:t.transitions.create("margin-left",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(f=(u=t.palette.navigation.submenu)==null?void 0:u.background)!=null?f:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:o.submenuConfig.drawerWidthClosed,transitionDelay:`${o.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:o=>({width:o.submenuConfig.drawerWidthOpen,[t.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:t.spacing(3),left:0,top:0}}),title:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightMedium,color:t.palette.common.white,padding:t.spacing(2.5),[t.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Li=t=>{const{isOpen:o}=Ro(),{sidebarConfig:u,submenuConfig:f}=(0,a.useContext)(fr),P=o?u.drawerWidthOpen:u.drawerWidthClosed,B=dl({left:P,submenuConfig:f}),{isHoveredOn:F}=(0,a.useContext)(Fo),[ae,pe]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{pe(F)},[F]),a.createElement(J.A,{className:Q()(B.drawer,{[B.drawerOpen]:ae})},a.createElement(r.A,{variant:"h5",component:"span",className:B.title},t.title),t.children)},ml=(0,k.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),pl=()=>{const t=ml();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},hl=(0,k.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),gl=()=>{const t=hl();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},fl=t=>(0,k.A)(o=>{var u,f,P,B;return{root:{color:o.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:t.drawerWidthClosed,justifyContent:"center"},open:{[o.breakpoints.up("sm")]:{width:t.drawerWidthOpen}},highlightable:{"&:hover":{background:(f=(u=o.palette.navigation.navItem)==null?void 0:u.hoverBackground)!=null?f:"#404040"}},highlighted:{background:(B=(P=o.palette.navigation.navItem)==null?void 0:P.hoverBackground)!=null?B:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:t.iconContainerWidth,marginRight:-o.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:o.typography.fontWeightBold,fontSize:o.typography.fontSize},searchFieldHTMLInput:{padding:o.spacing(2,0,2)},searchContainer:{width:t.drawerWidthOpen-t.iconContainerWidth},secondaryAction:{width:o.spacing(6),textAlign:"center",marginRight:o.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:o.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${t.selectedIndicatorWidth}px ${o.palette.navigation.indicator}`,color:o.palette.navigation.selectedColor},"&$closed":{width:t.drawerWidthClosed},"& $closedItemIcon":{paddingRight:t.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-t.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function To(t){return(0,a.useMemo)(()=>fl(t),[t])()}const El=(t,o)=>(0,l.OJ)(t.props.children,u=>{let f=!1;return u.getElements().forEach(({props:{to:P,dropdownItems:B}})=>{if(!f){if(B!=null&&B.length){B.forEach(({to:F})=>f=f||Oo(o,(0,j.o1)(F)));return}P&&(f=Oo(o,(0,j.o1)(P)))}}),f},[o.pathname]);function zo(t){return t.to===void 0}const vl=a.createElement(Li).type,yl=a.forwardRef(function({to:o,end:u,style:f,className:P,activeStyle:B,caseSensitive:F,activeClassName:ae="active","aria-current":pe="page",...Ae},Ye){let{pathname:ze}=(0,X.zy)(),{pathname:Mt}=(0,X.x$)(o);F||(ze=ze.toLocaleLowerCase("en-US"),Mt=Mt.toLocaleLowerCase("en-US"));let Ht=ze===Mt;!Ht&&!u&&(Ht=ze.startsWith(`${Mt}/`));const Qt=Ht?pe:void 0;return a.createElement(p.N_,{...Ae,to:o,ref:Ye,"aria-current":Qt,style:{...f,...Ht?B:void 0},className:Q()([typeof P!="function"?P:void 0,Ht?ae:void 0])})}),Bi=(0,a.forwardRef)((t,o)=>{const{icon:u,text:f,hasNotifications:P=!1,hasSubmenu:B=!1,disableHighlight:F=!1,onClick:ae,noTrack:pe,children:Ae,className:Ye,...ze}=t,{sidebarConfig:Mt}=(0,a.useContext)(fr),Ht=To(Mt),{isOpen:Qt}=Ro(),Gn=!Qt&&B?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},zn=a.createElement(J.A,{style:Gn},a.createElement(u,{fontSize:"small"}),!Qt&&B?a.createElement(Me.A,{fontSize:"small"}):a.createElement(a.Fragment,null)),la=a.createElement(We.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!P,className:Q()({[Ht.closedItemIcon]:!Qt})},zn),Ka=a.createElement(a.Fragment,null,a.createElement(J.A,{"data-testid":"login-button",className:Ht.iconContainer},la),f&&a.createElement(r.A,{variant:"subtitle2",component:"span",className:Ht.label},f),a.createElement("div",{className:Ht.secondaryAction},Ae)),nr=Qt?Ka:la,Jn={onClick:ae,className:Q()(Ye,Ht.root,Qt?Ht.open:Ht.closed,zo(t)&&Ht.buttonItem,{[Ht.highlightable]:!F})},Ma=(0,l.st)(),{pathname:za}=(0,X.x$)(!zo(t)&&t.to?t.to:""),ar=(0,a.useCallback)(Ir=>{if(!pe){const so="click",Br=f!=null?f:"Sidebar Item",jr=za?{attributes:{to:za}}:void 0;Ma.captureEvent(so,Br,jr)}ae==null||ae(Ir)},[Ma,f,za,pe,ae]);return zo(t)?a.createElement(le.A,{role:"button","aria-label":f,...Jn,ref:o,onClick:ar},nr):a.createElement(yl,{...Jn,activeClassName:Ht.selected,to:t.to?t.to:"",ref:o,"aria-label":f||t.to,...ze,onClick:ar},nr)}),Al=({children:t,...o})=>{const{sidebarConfig:u}=(0,a.useContext)(fr),f=To(u),[P,B]=(0,a.useState)(!1),F=(0,X.zy)(),ae=El(t,F),pe=(0,qe.A)(Mt=>Mt.breakpoints.down("sm")),Ae=()=>{B(!0)},Ye=()=>{B(!1)},ze=()=>pe?P?a.createElement(ne.A,{fontSize:"small",className:f.submenuArrow}):a.createElement(jt.A,{fontSize:"small",className:f.submenuArrow}):!P&&a.createElement(Me.A,{fontSize:"small",className:f.submenuArrow});return a.createElement(Fo.Provider,{value:{isHoveredOn:P,setIsHoveredOn:B}},a.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:Ye,onTouchStart:P?Ye:Ae,onMouseEnter:Ae,className:Q()(P&&f.highlighted)},a.createElement(Bi,{hasSubmenu:!0,className:ae?f.selected:"",...o},ze()),P&&t))},Ui=(0,a.forwardRef)((t,o)=>{const[u]=(0,l.OJ)(t.children,f=>f.getElements().filter(P=>P.type===vl));return u?a.createElement(Al,{...t},u):a.createElement(Bi,{...t,ref:o})});function Sc(t){const{sidebarConfig:o}=useContext(fr),[u,f]=useState(""),P=To(o),B=t.icon?t.icon:SearchIcon,F=()=>{t.onSearch(u),f("")},ae=ze=>{ze.key==="Enter"&&(ze.preventDefault(),F())},pe=ze=>{f(ze.target.value)},Ae=ze=>{ze.preventDefault(),ze.stopPropagation()},Ye=ze=>{F(),ze.preventDefault()};return React.createElement(Box,{className:P.searchRoot},React.createElement(Ui,{icon:B,to:t.to,onClick:Ye,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:u,onClick:Ae,onChange:pe,onKeyDown:ae,className:P.searchContainer,InputProps:{disableUnderline:!0,className:P.searchField},inputProps:{className:P.searchFieldHTMLInput}})))}const bl=(0,C.A)("div")({flex:1},{name:"BackstageSidebarSpace"}),Rc=(0,C.A)("div")({height:8},{name:"BackstageSidebarSpacer"}),_l=(0,C.A)("hr")(({theme:t})=>({height:1,width:"100%",background:"#383838",border:"none",margin:t.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),Cl=t=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:t.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t.palette.text.secondary,borderRadius:"5px"}}),Pl=(0,C.A)("div")(({theme:t})=>{const o=Cl(t);return{flex:"0 1 auto",overflowX:"hidden",width:"100%",minHeight:"48px",overflowY:"hidden","@media (hover: none)":o,"&:hover":o}}),wc=()=>{const{sidebarConfig:t}=useContext(fr),o=To(t),{isOpen:u,setOpen:f}=Ro();if(useMediaQuery(F=>F.breakpoints.down("md"),{noSsr:!0}))return null;const B=()=>{f(!u)};return React.createElement(Button$1,{role:"button",onClick:B,className:o.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:o.arrows},u?React.createElement(pl,null):React.createElement(gl,null)))},Sl=(0,k.A)(t=>({header:{gridArea:"pageHeader",padding:t.spacing(3),width:"100%",boxShadow:t.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:t.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[t.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:t.page.fontColor,wordBreak:"break-word",fontSize:t.typography.h3.fontSize,marginBottom:0},subtitle:{color:t.page.fontColor,opacity:.8,display:"inline-block",marginTop:t.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:t.spacing(1),color:t.page.fontColor},breadcrumb:{color:t.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-t.spacing(.3),marginBottom:t.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-t.spacing(.3),marginBottom:t.spacing(.3)}}),{name:"BackstageHeader"}),Rl=({type:t,typeLink:o,classes:u,pageTitle:f})=>t?o?a.createElement(vi,{className:u.breadcrumb},a.createElement(ga,{to:o},t),a.createElement(r.A,null,f)):a.createElement(r.A,{className:u.type},t):null,wl=({pageTitle:t,classes:o,tooltip:u})=>{const{contentRef:f}=Ko(),P=a.createElement(r.A,{ref:f,tabIndex:-1,className:o.title,variant:"h1"},t);return u?a.createElement(Ge.Ay,{title:u,placement:"top-start"},P):P},Ol=({classes:t,subtitle:o})=>o?typeof o!="string"?a.createElement(a.Fragment,null,o):a.createElement(r.A,{className:t.subtitle,variant:"subtitle2",component:"span"},o):null;function Io(t){const{children:o,pageTitleOverride:u,style:f,subtitle:P,title:B,tooltip:F,type:ae,typeLink:pe}=t,Ae=Sl(),ze=(0,s.u)(s.p).getOptionalString("app.title")||"Backstage",Mt=u||B,Ht=B||u,Qt=`${Mt} | %s | ${ze}`,Gn=`${Mt} | ${ze}`;return a.createElement(a.Fragment,null,a.createElement(Re.m,{titleTemplate:Qt,defaultTitle:Gn}),a.createElement("header",{style:f,className:Ae.header},a.createElement(J.A,{className:Ae.leftItemsBox},a.createElement(Rl,{classes:Ae,type:ae,typeLink:pe,pageTitle:Ht}),a.createElement(wl,{classes:Ae,pageTitle:Ht,tooltip:F}),a.createElement(Ol,{classes:Ae,subtitle:P})),a.createElement(R.A,{container:!0,className:Ae.rightItemsBox,spacing:4},o)))}const Tl=({label:t,secondaryLabel:o,icon:u,disabled:f=!1,onClick:P})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:f,button:!0,onClick:B=>{P&&P(B)}},u&&React.createElement(ListItemIcon,null,u),React.createElement(ListItemText,{primary:t,secondary:o})));function Oc(t){const{palette:{common:{white:o}}}=useTheme(),{actionItems:u}=t,[f,P]=React.useState(!1),B=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>P(!0),"data-testid":"header-action-menu",ref:B,style:{color:o,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:f,anchorEl:B.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>P(!1)},React.createElement(List,null,u.map((F,ae)=>React.createElement(Tl,{key:`header-action-menu-${ae}`,...F})))))}const Il=(0,k.A)(t=>({root:{textAlign:"left"},label:{color:t.page.fontColor,fontWeight:t.typography.fontWeightBold,letterSpacing:0,fontSize:t.typography.fontSize,marginBottom:t.spacing(1)/2,lineHeight:1},value:{color:(0,I.X4)(t.page.fontColor,.8),fontSize:t.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Dl=({value:t,className:o,typographyRootComponent:u})=>a.createElement(r.A,{component:u!=null?u:typeof t=="string"?"p":"span",className:o},t);function Ml(t){const{label:o,value:u,url:f,contentTypograpyRootComponent:P}=t,B=Il(),F=a.createElement(Dl,{className:B.value,value:u||"<Unknown>",typographyRootComponent:P});return a.createElement(R.A,{item:!0},a.createElement(r.A,{component:"span",className:B.root},a.createElement(r.A,{className:B.label},o),f?a.createElement(ga,{to:f},F):F))}const xl=t=>(0,M.A)({root:{color:t.palette.common.white,padding:t.spacing(2,2,3),backgroundImage:t.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),Ll=(0,k.A)(xl,{name:"BackstageItemCardHeader"});function $i(t){const{title:o,subtitle:u,children:f}=t,P=Ll(t);return a.createElement(J.A,{className:P.root},u&&a.createElement(r.A,{variant:"subtitle2",component:"h3"},u),o&&a.createElement(r.A,{variant:"h6",component:"h4"},o),f)}function Tc(t){const{description:o,tags:u,title:f,type:P,subtitle:B,label:F,onClick:ae,href:pe}=t;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement($i,{title:f,subtitle:B||P})),React.createElement(CardContent,null,u!=null&&u.length?React.createElement(Box,null,u.map((Ae,Ye)=>React.createElement(Chip,{size:"small",label:Ae,key:Ye}))):null,o),React.createElement(CardActions,null,!pe&&React.createElement(Ha,{to:"#",onClick:ae,color:"primary"},F),pe&&React.createElement(Ha,{to:pe,color:"primary"},F)))}const Bl=t=>(0,M.A)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:t.spacing(2)}}),Ul=(0,k.A)(Bl,{name:"BackstageItemCardGrid"});function $l(t){const{children:o,...u}=t,f=Ul(u);return a.createElement(J.A,{className:f.root,...u},o)}const kl=(0,k.A)(t=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[t.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function Do(t){const{themeId:o,children:u}=t,f=kl();return a.createElement(v.A,{theme:P=>({...P,page:P.getPageTheme({themeId:o})})},a.createElement("main",{className:f.root},u))}function Nl(t){const{themeId:o,children:u,...f}=t;return a.createElement(Do,{themeId:o},a.createElement(Io,{...f}),u)}const Fl=Xe.z.object({providerInfo:Xe.z.object({}).catchall(Xe.z.unknown()).optional(),profile:Xe.z.object({email:Xe.z.string().optional(),displayName:Xe.z.string().optional(),picture:Xe.z.string().optional()}),backstageIdentity:Xe.z.object({token:Xe.z.string(),identity:Xe.z.object({type:Xe.z.literal("user"),userEntityRef:Xe.z.string(),ownershipEntityRefs:Xe.z.array(Xe.z.string())})})});var Wl=Object.defineProperty,Kl=(t,o,u)=>o in t?Wl(t,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[o]=u,jo=(t,o,u)=>(Kl(t,typeof o!="symbol"?o+"":o,u),u);const ki={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function zl(t){const o=new Date(Date.now()+ki.defaultTokenExpiryMillis);if(!t)return o;const[u,f,P]=t.split("."),B=JSON.parse(window.atob(f));return typeof B.exp!="number"?o:new Date(B.exp*1e3-ki.tokenExpiryMarginMillis)}class Go{constructor(o){jo(this,"options"),jo(this,"abortController"),jo(this,"state"),this.options=o,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:o}=this.getSessionSync(),u=o.identity.userEntityRef,f=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(u);if(!f)throw new TypeError(`Invalid user entity reference "${u}"`);return f[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const o=this.state.type==="active"?this.state.session:void 0,u=this.fetchSession().then(f=>(this.state={type:"active",session:f,expiresAt:zl(f.backstageIdentity.token)},f),f=>{throw this.state={type:"failed",error:f},f});return this.state={type:"fetching",promise:u,previous:o},u}async fetchSession(){const o=await this.options.discoveryApi.getBaseUrl("auth"),u=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,f=new Headers(u);f.set("X-Requested-With","XMLHttpRequest");const P=await fetch(`${o}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:f,credentials:"include"});if(!P.ok)throw await Bt.o3.fromResponse(P);return Fl.parse(await P.json())}}const Ic=t=>{const o=useApi(discoveryApiRef),{t:u}=useTranslationRef(coreComponentsTranslationRef),[{status:f,error:P},{execute:B}]=useAsync(async()=>{const F=new Go({provider:t.provider,discoveryApi:o,headers:t.headers});await F.start(),t.onSignInSuccess(F)});return useMountEffect(B),f==="loading"?React.createElement(Zn,null):P?React.createElement(gr,{title:u("proxiedSignInPage.title"),error:P}):null};class Mo{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const o="user:default/guest";return{type:"user",userEntityRef:o,ownershipEntityRefs:[o]}}async getCredentials(){return{}}async signOut(){}}function jl(t){const[o,u,f]=t.split(".");return JSON.parse(window.atob(u))}class Ho{constructor(o){this.result=o}getUserId(){return this.result.userId}static fromResult(o){return new Ho(o)}async getIdToken(){var o,u;return(u=(o=this.result).getIdToken)==null?void 0:u.call(o)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const o=await this.getIdToken();if(!o){const P=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:P,ownershipEntityRefs:[P]}}const{sub:u,ent:f}=jl(o);return{type:"user",userEntityRef:u,ownershipEntityRefs:f!=null?f:[]}}async getCredentials(){var o,u;return{token:await((u=(o=this.result).getIdToken)==null?void 0:u.call(o))}}async signOut(){var o,u;return(u=(o=this.result).signOut)==null?void 0:u.call(o)}}var Gl=Object.defineProperty,Hl=(t,o,u)=>o in t?Gl(t,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[o]=u,Vl=(t,o,u)=>(Hl(t,typeof o!="symbol"?o+"":o,u),u);class oo{constructor(o,u,f){this.identity=o,this.authApi=u,this.profile=f,Vl(this,"profilePromise")}static createGuest(){return new Mo}static fromLegacy(o){return Ho.fromResult(o)}static create(o){return new oo(o.identity,o.authApi,o.profile)}getUserId(){const o=this.identity.userEntityRef,u=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(o);if(!u)throw new TypeError(`Invalid user entity reference "${o}"`);return u[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(o){throw this.profilePromise=void 0,o}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const Vo=(0,k.A)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),xo=({children:t})=>{const o=Vo();return a.createElement(R.A,{component:"li",item:!0,classes:o},t)},Yl={Component:({config:t,onSignInStarted:o,onSignInSuccess:u,onSignInFailure:f})=>{const{apiRef:P,title:B,message:F}=t,ae=(0,s.u)(P),pe=(0,s.u)(s.r),{t:Ae}=(0,b.ie)(he),Ye=async()=>{try{o();const ze=await ae.getBackstageIdentity({instantPopup:!0});if(!ze)throw f(),new Error(`The ${B} provider is not configured to support sign-in`);const Mt=await ae.getProfile();u(oo.create({identity:ze.identity,profile:Mt,authApi:ae}))}catch(ze){f(),pe.post(new Bt.HK(Ae("signIn.loginFailed"),ze))}};return a.createElement(xo,null,a.createElement(ha,{variant:"fullHeight",title:B,actions:a.createElement(le.A,{color:"primary",variant:"outlined",onClick:Ye},Ae("signIn.title"))},a.createElement(r.A,{variant:"body1"},F)))},loader:async(t,o)=>{const u=t.get(o),f=await u.getBackstageIdentity({optional:!0});if(!f)return;const P=await u.getProfile();return oo.create({identity:f.identity,profile:P,authApi:u})}},Ni=async t=>{try{return await t.getBackstageIdentity()}catch(o){if(o.name==="ResponseError"&&o.cause.name==="NotFoundError")return;throw o}},Jl={Component:({onSignInStarted:t,onSignInSuccess:o,onSignInFailure:u})=>{const f=(0,s.u)(s.q),[P,B]=(0,Ve.A)("enableLegacyGuestToken"),{t:F}=(0,b.ie)(he),ae=async()=>{t();const pe=new Go({provider:"guest",discoveryApi:f});if(!await Ni(pe)){if(confirm("Failed to sign in as a guest using the auth backend. Do you want to fallback to the legacy guest token?")){B(!0),o(new Mo);return}throw u(),new Error("You cannot sign in as a guest, you must either enable the legacy guest token or configure the auth backend to support guest sign in.")}o(pe)};return a.createElement(xo,null,a.createElement(ha,{title:"Guest",variant:"fullHeight",actions:a.createElement(le.A,{color:"primary",variant:"outlined",onClick:ae},F("signIn.guestProvider.enter"))},a.createElement(r.A,{variant:"body1",style:{whiteSpace:"pre-line"}},F("signIn.guestProvider.subtitle"))))},loader:async t=>{const o=localStorage.getItem("enableLegacyGuestToken")==="true",u=new Go({provider:"guest",discoveryApi:t.get(s.q)}),f=await Ni(u);if(!(!f&&!o)){if(f&&o)if(confirm("You are currently using the legacy guest token, but you have the new guest backend module installed. Do you want to use the new module?"))localStorage.removeItem("enableLegacyGuestToken");else return new Mo;else if(o)return new Mo;return u}}},Ql=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Xl=(0,k.A)(t=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:t.spacing(2)},subTitle:{whiteSpace:"pre-line"}}),{name:"BackstageCustomProvider"}),Fi=t=>{const{ref:o,...u}=t;return{inputRef:o,...u}},Zl={Component:({onSignInStarted:t,onSignInSuccess:o})=>{const u=Xl(),{t:f}=(0,b.ie)(he),{register:P,handleSubmit:B,formState:F}=(0,Et.mN)({mode:"onChange"}),{errors:ae}=F,pe=({userId:Ae,idToken:Ye})=>{t(),o(oo.fromLegacy({userId:Ae,getIdToken:Ye!==void 0?async()=>Ye:void 0,profile:{email:`${Ae}@example.com`}}))};return a.createElement(xo,null,a.createElement(ha,{title:f("signIn.customProvider.title"),variant:"fullHeight"},a.createElement(r.A,{variant:"body1",className:u.subTitle},f("signIn.customProvider.subtitle")),a.createElement("form",{className:u.form,onSubmit:B(pe)},a.createElement(xt.A,null,a.createElement(He.A,{...Fi(P("userId",{required:!0})),label:f("signIn.customProvider.userId"),margin:"normal",error:!!ae.userId}),ae.userId&&a.createElement(Dt.A,{error:!0},ae.userId.message)),a.createElement(xt.A,null,a.createElement(He.A,{...Fi(P("idToken",{required:!1,validate:Ae=>!Ae||Ql.test(Ae)||f("signIn.customProvider.tokenInvalid")})),label:f("signIn.customProvider.idToken"),margin:"normal",autoComplete:"off",error:!!ae.idToken}),ae.idToken&&a.createElement(Dt.A,{error:!0},ae.idToken.message)),a.createElement(le.A,{type:"submit",color:"primary",variant:"outlined",className:u.button,disabled:!(F!=null&&F.isDirty)||!fn()(ae)},f("signIn.customProvider.continue")))))},loader:async()=>{}};class Yo{constructor(o){this.config=o}static from(o){return new Yo(o)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const io="@backstage/core:SignInPage:provider",Wi={guest:Jl,custom:Zl,common:Yl};function Ki(t,o){if(t in o)throw new Error(`"${t}" ID is duplicated. IDs of identity providers have to be unique.`)}function ql(t){return t.reduce((u,f)=>{if(typeof f=="string")return Ki(f,u),u[f]={components:Wi[f],id:f},u;const{id:P}=f;return Ki(P,u),u[P]={components:Wi.common,id:P,config:f},u},{})}const ec=(t,o)=>{const u=(0,s.u)(s.r),f=(0,s.b)(),[P,B]=(0,a.useState)(!0),F=(0,a.useCallback)(pe=>{o(Yo.from({identityApi:pe,signOut:async()=>{var Ae;localStorage.removeItem(io),await((Ae=pe.signOut)==null?void 0:Ae.call(pe))}}))},[o]);(0,a.useLayoutEffect)(()=>{var pe;if(!P)return;const Ae=localStorage.getItem(io);if(Ae===null){B(!1);return}const Ye=t[Ae];if(!Ye){B(!1);return}let ze=!1;return Ye.components.loader(f,(pe=Ye.config)==null?void 0:pe.apiRef).then(Mt=>{if(ze){localStorage.removeItem(io);return}Mt?F(Mt):B(!1)}).catch(Mt=>{localStorage.removeItem(io),!ze&&(u.post(Mt),B(!1))}),()=>{ze=!0}},[P,u,o,f,t,F]);const ae=(0,a.useMemo)(()=>Object.keys(t).map(pe=>{const Ae=t[pe],{Component:Ye}=Ae.components,ze=Qt=>{F(Qt)},Mt=()=>{var Qt;localStorage.setItem(io,((Qt=Ae==null?void 0:Ae.config)==null?void 0:Qt.id)||Ae.id)},Ht=()=>{localStorage.removeItem(io)};return a.createElement(Ye,{key:Ae.id,config:Ae.config,onSignInStarted:Mt,onSignInSuccess:ze,onSignInFailure:Ht})}),[t,F]);return[P,ae]},tc=({onSignInSuccess:t,providers:o=[],title:u,align:f="left"})=>{const P=(0,s.u)(s.p),B=Vo(),F=ql(o),[ae,pe]=ec(F,t);return ae?a.createElement(Zn,null):a.createElement(Do,{themeId:"home"},a.createElement(Io,{title:P.getString("app.title")}),a.createElement(Po,null,u&&a.createElement(Ei,{title:u,textAlign:f}),a.createElement(R.A,{container:!0,justifyContent:f==="center"?f:"flex-start",spacing:2,component:"ul",classes:B},pe)))},nc=({provider:t,auto:o,onSignInSuccess:u})=>{const f=Vo(),P=(0,s.u)(t.apiRef),B=(0,s.u)(s.p),{t:F}=(0,b.ie)(he),[ae,pe]=(0,a.useState)(),[Ae,Ye]=(0,a.useState)(!1),ze=async({checkExisting:Mt,showPopup:Ht})=>{try{let Qt;if(Mt&&(Qt=await P.getBackstageIdentity({optional:!0})),!Qt&&(Ht||o)&&(Ye(!0),Qt=await P.getBackstageIdentity({instantPopup:!0}),!Qt))throw new Error(`The ${t.title} provider is not configured to support sign-in`);if(!Qt){Ye(!0);return}const Gn=await P.getProfile();u(oo.create({identity:Qt.identity,authApi:P,profile:Gn}))}catch(Qt){pe(Qt),Ye(!0)}};return(0,On.u)(()=>ze({checkExisting:!0})),Ae?a.createElement(Do,{themeId:"home"},a.createElement(Io,{title:B.getString("app.title")}),a.createElement(Po,null,a.createElement(R.A,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:f},a.createElement(xo,null,a.createElement(ha,{variant:"fullHeight",title:t.title,actions:a.createElement(le.A,{color:"primary",variant:"outlined",onClick:()=>{ze({showPopup:!0})}},F("signIn.title"))},a.createElement(r.A,{variant:"body1"},t.message),ae&&ae.name!=="PopupRejectedError"&&a.createElement(r.A,{variant:"body1",color:"error"},ae.message)))))):a.createElement(Zn,null)};function ac(t){return"provider"in t?a.createElement(nc,{...t}):a.createElement(tc,{...t})}const rc=(0,k.A)(t=>({root:{padding:t.spacing(0,2,0,2.5),minHeight:t.spacing(3)},indicator:{backgroundColor:t.palette.info.main,height:t.spacing(.3)}}),{name:"BackstageTabbedCard"}),oc=(0,h.A)(t=>({root:{padding:t.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:t.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(Ze.A);function ic(t){const{slackChannel:o,errorBoundaryProps:u,children:f,title:P,deepLink:B,value:F,onChange:ae}=t,pe=rc(),[Ae,Ye]=(0,a.useState)(0),ze=ae||((Qt,Gn)=>Ye(Gn));let Mt;F?a.Children.map(f,Qt=>{a.isValidElement(Qt)&&(Qt==null?void 0:Qt.props.value)===F&&(Mt=Qt==null?void 0:Qt.props.children)}):a.Children.map(f,(Qt,Gn)=>{a.isValidElement(Qt)&&Gn===Ae&&(Mt=Qt==null?void 0:Qt.props.children)});const Ht=u||(o?{slackChannel:o}:{});return a.createElement(gt.A,null,a.createElement(Wn,{...Ht},P&&a.createElement(oc,{title:P}),a.createElement(St.A,{classes:pe,value:F||Ae,onChange:ze},f),a.createElement(qt.A,null),a.createElement(ot.A,null,Mt),B&&a.createElement(sa,{...B})))}const sc=(0,k.A)(t=>({root:{minWidth:t.spacing(6),minHeight:t.spacing(3),margin:t.spacing(0,2,0,0),padding:t.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:t.palette.text.primary}},selected:{fontWeight:t.typography.fontWeightBold}}),{name:"BackstageCardTab"});function lc(t){const{children:o,...u}=t,f=sc();return a.createElement(ut.A,{disableRipple:!0,classes:f,...u})}},59294:(Dn,Ct,e)=>{"use strict";e.d(Ct,{Jm:()=>k,h2:()=>ft,ie:()=>h,pl:()=>ce});var s=e(14041),l=e(48821);function b(M){return{$$type:"@backstage/TranslationMessages",id:M.ref.id,full:!!M.full,messages:M.messages}}function _(M){return{$$type:"@backstage/TranslationResource",version:"v1",id:M.ref.id,resources:Object.entries(M.translations).map(([C,v])=>({language:C,loader:()=>v().then(N=>{const Q=N.default;return{messages:(Q==null?void 0:Q.$$type)==="@backstage/TranslationMessages"?Q.messages:Q}})}))}}var z=Object.defineProperty,r=(M,C,v)=>C in M?z(M,C,{enumerable:!0,configurable:!0,writable:!0,value:v}):M[C]=v,q=(M,C,v)=>(r(M,typeof C!="symbol"?C+"":C,v),v),ee=(M,C,v)=>{if(!C.has(M))throw TypeError("Cannot "+v)},a=(M,C,v)=>(ee(M,C,"read from private field"),v?v.call(M):C.get(M)),he=(M,C,v)=>{if(C.has(M))throw TypeError("Cannot add the same private member more than once");C instanceof WeakSet?C.add(M):C.set(M,v)},_e=(M,C,v,N)=>(ee(M,C,"write to private field"),N?N.call(M,v):C.set(M,v),v),le,ie,G;function we(M){const C=new Array;function v(N,Q){for(const[De,Ee]of Object.entries(N))typeof Ee=="string"?C.push([Q+De,Ee]):v(Ee,`${Q}${De}.`)}return v(M,""),Object.fromEntries(C)}class Ce{constructor(C){he(this,le,void 0),he(this,ie,void 0),he(this,G,void 0),q(this,"$$type","@backstage/TranslationRef"),q(this,"version","v1"),_e(this,le,C.id),_e(this,ie,we(C.messages))}get id(){return a(this,le)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return a(this,ie)}setDefaultResource(C){_e(this,G,C)}getDefaultResource(){return a(this,G)}toString(){return`TranslationRef{id=${this.id}}`}}le=new WeakMap,ie=new WeakMap,G=new WeakMap;function ft(M){const C=new Ce(M);return M.translations&&C.setDefaultResource(_({ref:C,translations:M.translations})),C}const k=(0,l.c)({id:"core.translation"}),ce=(0,l.c)({id:"core.applanguage"}),I=new WeakSet,h=M=>{const C=(0,l.u)(l.r),v=(0,l.u)(k),[N,Q]=(0,s.useState)(()=>v.getTranslation(M)),De=(0,s.useMemo)(()=>v.translation$(M),[v,M]),Ee=(0,s.useCallback)(p=>{if(!I.has(M)){const j=`Failed to load translation resource '${M.id}'; caused by ${p}`;console.error(j),C.post(new Error(j)),I.add(M)}},[C,M]);(0,s.useEffect)(()=>{const p=De.subscribe({next(j){j.ready&&Q(j)},error(j){Ee(j)}});return()=>{p.unsubscribe()}},[De,Ee]);const X=(0,s.useRef)(!0);if((0,s.useEffect)(()=>{X.current?X.current=!1:Q(v.getTranslation(M))},[v,M]),!N.ready)throw new Promise(p=>{const j=De.subscribe({next(J){J.ready&&(j.unsubscribe(),p())},error(J){j.unsubscribe(),Ee(J),p()}})});return{t:N.t}}},48821:(Dn,Ct,e)=>{"use strict";e.d(Ct,{F:()=>Q,S:()=>a,a:()=>h,b:()=>_,c:()=>ee,d:()=>_e,e:()=>ie,f:()=>De,g:()=>he,h:()=>we,i:()=>Ce,j:()=>ft,k:()=>k,l:()=>I,m:()=>G,n:()=>M,o:()=>le,p:()=>C,q:()=>v,r:()=>N,s:()=>Ee,t:()=>X,u:()=>z,v:()=>ce,x:()=>p,y:()=>j});var s=e(14041),l=e(97388),b=e(3399);function _(){const J=(0,l.qO)("api-context");if(!J)throw new b.EH("API context is not available");const ue=J.atVersion(1);if(!ue)throw new b.EH("ApiContext v1 not available");return ue}function z(J){const Te=_().get(J);if(!Te)throw new b.EH(`No implementation available for ${J}`);return Te}function r(J){return function(Te){const dt=rt=>{const pt=_(),qe={};for(const st in J)if(J.hasOwnProperty(st)){const Oe=J[st],je=pt.get(Oe);if(!je)throw new NotImplementedError(`No implementation available for ${Oe}`);qe[st]=je}return React.createElement(Te,{...rt,...qe})},Ge=Te.displayName||Te.name||"Component";return dt.displayName=`withApis(${Ge})`,dt}}class q{constructor(ue){if(this.config=ue,!ue.id.split(".").flatMap(dt=>dt.split("-")).every(dt=>dt.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${ue.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function ee(J){return new q(J)}var a=(J=>(J.SignedIn="SignedIn",J.SignedOut="SignedOut",J))(a||{});const he=ee({id:"core.auth.google"}),_e=ee({id:"core.auth.github"}),le=ee({id:"core.auth.okta"}),ie=ee({id:"core.auth.gitlab"}),G=ee({id:"core.auth.microsoft"}),we=ee({id:"core.auth.onelogin"}),Ce=ee({id:"core.auth.bitbucket"}),ft=ee({id:"core.auth.bitbucket-server"}),k=ee({id:"core.auth.atlassian"}),ce=ee({id:"core.auth.vmware-cloud"}),I=ee({id:"core.alert"}),h=ee({id:"core.analytics"}),M=ee({id:"core.apptheme"}),C=ee({id:"core.config"}),v=ee({id:"core.discovery"}),N=ee({id:"core.error"});var Q=(J=>(J[J.None=0]="None",J[J.Active=1]="Active",J))(Q||{});const De=ee({id:"core.featureflags"}),Ee=ee({id:"core.fetch"}),X=ee({id:"core.identity"}),p=ee({id:"core.oauthrequest"}),j=ee({id:"core.storage"})},11638:(Dn,Ct,e)=>{"use strict";e.d(Ct,{E0:()=>k,HM:()=>N,Ig:()=>q,Il:()=>pt,KS:()=>st,NC:()=>Ft,OJ:()=>Yt,QJ:()=>ht,Sf:()=>qe,Vb:()=>J,bW:()=>ee,h3:()=>ft,i1:()=>_t,nm:()=>G,st:()=>ie,zZ:()=>me});var s=e(97388),l=e(14041),b=e(48821),_=e(18690);const z=(0,s.tK)("analytics-context"),r=()=>{const S=(0,l.useContext)(z);if(S===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const R=S.atVersion(1);if(R===void 0)throw new Error("No context found for version 1.");return R},q=S=>{const{attributes:R,children:W}=S,Pe={...r(),...R},Ue=(0,s.Bl)({1:Pe});return l.createElement(z.Provider,{value:Ue},W)};function ee(S,R){return"id"in S?{api:S,deps:{},factory:()=>R}:S}const a=(0,s.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),he="_ROUTABLE-EXTENSION-RENDERED";class _e{constructor(R,W={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=R,this.context=W,a.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{a.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...a.mostRecentGatheredNavigation,...a.mostRecentRoutableExtensionRender}),a.mostRecentGatheredNavigation=void 0,a.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),a.beforeUnloadRegistered=!0)}setContext(R){this.context=R}captureEvent(R,W,{value:Z,attributes:Pe}={}){const{_routeNodeType:Ue,...lt}=this.context;if(R===he){a.mostRecentGatheredNavigation&&(a.mostRecentRoutableExtensionRender={context:{...lt,extension:"App"}});return}if(a.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...a.mostRecentGatheredNavigation,...a.mostRecentRoutableExtensionRender})}catch(et){console.warn("Error during analytics event capture. %o",et)}a.mostRecentGatheredNavigation=void 0,a.mostRecentRoutableExtensionRender=void 0}if(R==="navigate"&&Ue==="gathered"&&lt.pluginId==="root"){a.mostRecentGatheredNavigation={action:R,subject:W,value:Z,attributes:Pe,context:lt};return}try{this.analyticsApi.captureEvent({action:R,subject:W,value:Z,attributes:Pe,context:lt})}catch(et){console.warn("Error during analytics event capture. %o",et)}}}function le(){try{return(0,b.u)(b.a)}catch{return{captureEvent:()=>{}}}}function ie(){const S=(0,l.useRef)(null),R=r(),W=le();function Z(){return S.current===null&&(S.current=new _e(W)),S.current}const Pe=Z();return Pe.setContext(R),Pe}const G=()=>{const S=(0,s.qO)("app-context");if(!S)throw new Error("App context is not available");const R=S.atVersion(1);if(!R)throw new Error("AppContext v1 not available");return R},we=(0,s.Q6)("component-data-store",()=>new WeakMap),Ce="__backstage_data";function ft(S,R,W){var Z;const Pe=S;let Ue=(Z=Pe[Ce])!=null?Z:we.get(S);if(Ue||(Ue={map:new Map},Object.defineProperty(Pe,Ce,{enumerable:!1,configurable:!0,writable:!1,value:Ue}),we.set(S,Ue)),Ue.map.has(R)){const lt=S.displayName||S.name;throw new Error(`Attempted to attach duplicate data "${R}" to component "${lt}"`)}Ue.map.set(R,W)}function k(S,R){var W;if(!S)return;const Z=S.type;if(!Z)return;const Pe=(W=Z[Ce])!=null?W:we.get(Z);if(Pe)return Pe.map.get(R)}const ce=(0,s.Q6)("route-ref-type",()=>Symbol("route-ref-type"));var I=Object.defineProperty,h=(S,R,W)=>R in S?I(S,R,{enumerable:!0,configurable:!0,writable:!0,value:W}):S[R]=W,M=(S,R,W)=>(h(S,typeof R!="symbol"?R+"":R,W),W),C;class v{constructor(R,W){this.id=R,this.params=W,M(this,C,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}C=ce;function N(S){var R;return new v(S.id,(R=S.params)!=null?R:[])}var Q=Object.defineProperty,De=(S,R,W)=>R in S?Q(S,R,{enumerable:!0,configurable:!0,writable:!0,value:W}):S[R]=W,Ee=(S,R,W)=>(De(S,typeof R!="symbol"?R+"":R,W),W),X;const p=/^\w+$/;class j{constructor(R,W,Z,Pe){this.id=R,this.path=W,this.parent=Z,this.params=Pe,Ee(this,X,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}X=ce;function J(S){const{id:R,path:W,parent:Z}=S,Pe=W.split("/").filter(et=>et.startsWith(":")).map(et=>et.substring(1)),Ue=[...Z.params,...Pe];if(Z.params.some(et=>Pe.includes(et)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!W.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${W}'`);if(W.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${W}'`);for(const et of Pe)if(!p.test(et))throw new Error(`SubRouteRef path has invalid param, got '${et}'`);return new j(R,W,Z,Ue)}var ue=Object.defineProperty,Te=(S,R,W)=>R in S?ue(S,R,{enumerable:!0,configurable:!0,writable:!0,value:W}):S[R]=W,dt=(S,R,W)=>(Te(S,typeof R!="symbol"?R+"":R,W),W),Ge;class rt{constructor(R,W,Z){this.id=R,this.params=W,this.optional=Z,dt(this,Ge,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}Ge=ce;function pt(S){var R;return new rt(S.id,(R=S.params)!=null?R:[],!!S.optional)}function qe(S){const{pathname:R}=(0,_.zy)(),W=(0,s.qO)("routing-context");if(!W)throw new Error("Routing context is not available");const Z=W.atVersion(1),Pe=(0,l.useMemo)(()=>Z&&Z.resolve(S,{pathname:R}),[Z,S,R]);if(!W)throw new Error("useRouteRef used outside of routing context");if(!Z)throw new Error("RoutingContext v1 not available");const Ue="optional"in S&&S.optional;if(!Pe&&!Ue)throw new Error(`No path for ${S}`);return Pe}function st(S){return(0,_.g)()}var Oe=Object.defineProperty,je=(S,R,W)=>R in S?Oe(S,R,{enumerable:!0,configurable:!0,writable:!0,value:W}):S[R]=W,$e=(S,R,W)=>(je(S,typeof R!="symbol"?R+"":R,W),W);class vt extends l.Component{constructor(){super(...arguments),$e(this,"state",{error:void 0}),$e(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(R){return{error:R}}render(){const{error:R}=this.state,{app:W,plugin:Z}=this.props,{ErrorBoundaryFallback:Pe}=W.getComponents();return R?l.createElement(Pe,{error:R,resetError:this.handleErrorReset,plugin:Z}):this.props.children}}function ht(S){const{component:R,mountPoint:W,name:Z}=S;return me({component:{lazy:()=>R().then(Pe=>{const Ue=et=>{const Je=ie();try{qe(W)}catch(Wt){if(typeof Wt=="object"&&Wt!==null){const{message:tn}=Wt;if(typeof tn=="string"&&tn.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${W} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw Wt}return(0,l.useEffect)(()=>{Je.captureEvent(he,"")},[Je]),l.createElement(Pe,{...et})},lt=Z||Pe.displayName||Pe.name||"LazyComponent";return Ue.displayName=`RoutableExtension(${lt})`,Ue},Pe=>lt=>{const et=G(),{BootErrorPage:Je}=et.getComponents();return l.createElement(Je,{step:"load-chunk",error:Pe})})},data:{"core.mountPoint":W},name:Z})}function Ft(S){const{component:R,name:W}=S;return me({component:R,name:W})}function me(S){const{data:R={},name:W}=S;W||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let Z;if("lazy"in S.component){const Ue=S.component.lazy;Z=(0,l.lazy)(()=>Ue().then(lt=>({default:lt})))}else Z=S.component.sync;const Pe=W||Z.displayName||Z.name||"Component";return{expose(Ue){const lt=et=>{const Je=G(),{Progress:Wt}=Je.getComponents(),tn=R==null?void 0:R["core.mountPoint"];return l.createElement(l.Suspense,{fallback:l.createElement(Wt,null)},l.createElement(vt,{app:Je,plugin:Ue},l.createElement(q,{attributes:{pluginId:Ue.getId(),...W&&{extension:W},...tn&&{routeRef:tn.id}}},l.createElement(Z,{...et}))))};ft(lt,"core.plugin",Ue),ft(lt,"core.extensionName",W);for(const[et,Je]of Object.entries(R))ft(lt,et,Je);return lt.displayName=`Extension(${Pe})`,lt}}}function ke(S,R,W,Z){return l.Children.toArray(S).flatMap(Pe=>{if(!(0,l.isValidElement)(Pe))return[];if(Pe.type===l.Fragment)return ke(Pe.props.children,R,W,Z);if(k(Pe,"core.featureFlagged")){const Ue=Pe.props;return("with"in Ue?R.isActive(Ue.with):!R.isActive(Ue.without))?ke(Pe.props.children,R,W,Z):[]}if(W===void 0||W(Pe))return[Pe];if(Z)throw new Error(Z);return ke(Pe.props.children,R,W,Z)})}class bt{constructor(R,W){this.node=R,this.featureFlagsApi=W}selectByComponentData(R){const W=ke(this.node,this.featureFlagsApi,Z=>k(Z,R.key)!==void 0,R.withStrictError);return new bt(W,this.featureFlagsApi)}findComponentData(R){return ke(this.node,this.featureFlagsApi,Z=>k(Z,R.key)!==void 0).map(Z=>k(Z,R.key)).filter(Z=>Z!==void 0)}getElements(){return ke(this.node,this.featureFlagsApi)}}function Yt(S,R,W=[]){const Z=(0,b.u)(b.f),Pe=new bt(S,Z);return(0,l.useMemo)(()=>R(Pe),[S,...W])}class yt{constructor(R){this.config=R}getId(){return this.config.id}getApis(){var R;return(R=this.config.apis)!=null?R:[]}getFeatureFlags(){var R,W;return(W=(R=this.config.featureFlags)==null?void 0:R.slice())!=null?W:[]}get routes(){var R;return(R=this.config.routes)!=null?R:{}}get externalRoutes(){var R;return(R=this.config.externalRoutes)!=null?R:{}}provide(R){return R.expose(this)}toString(){return`plugin{${this.config.id}}`}}function _t(S){return new yt(S)}},3399:(Dn,Ct,e)=>{"use strict";e.d(Ct,{EH:()=>h,HK:()=>C,bJ:()=>b,m_:()=>k,o3:()=>Ee,tX:()=>_});var s=e(69655),l=e.n(s);function b(X){if(typeof X!="object"||X===null||Array.isArray(X))return!1;const p=X;return!(typeof p.name!="string"||p.name===""||typeof p.message!="string")}function _(X){if(typeof X!="object"||X===null||Array.isArray(X))throw new Error(`Encountered invalid error, not an object, got '${X}'`);const p=X;if(typeof p.name!="string"||p.name==="")throw new Error(`Encountered error object without a name, got '${X}'`);if(typeof p.message!="string")throw new Error(`Encountered error object without a message, got '${X}'`)}function z(X,p){const J={name:"Unknown",message:"<no reason given>",...serializeError$1(X)};return p!=null&&p.includeStack||delete J.stack,J}function r(X){const p=(0,s.deserializeError)(X);return X.stack||(p.stack=void 0),p}function q(X){if(b(X)){const p=String(X);return p!=="[object Object]"?p:`${X.name}: ${X.message}`}return`unknown error '${X}'`}var ee=Object.defineProperty,a=(X,p,j)=>p in X?ee(X,p,{enumerable:!0,configurable:!0,writable:!0,value:j}):X[p]=j,he=(X,p,j)=>(a(X,typeof p!="symbol"?p+"":p,j),j);class _e extends Error{constructor(p,j){var J;let ue=p;if(j!==void 0){const Te=q(j);ue?ue+=`; caused by ${Te}`:ue=`caused by ${Te}`}super(ue),he(this,"cause"),(J=Error.captureStackTrace)==null||J.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=b(j)?j:void 0}}var le=Object.defineProperty,ie=(X,p,j)=>p in X?le(X,p,{enumerable:!0,configurable:!0,writable:!0,value:j}):X[p]=j,G=(X,p,j)=>(ie(X,typeof p!="symbol"?p+"":p,j),j);class we extends _e{constructor(){super(...arguments),G(this,"name","InputError")}}class Ce extends _e{constructor(){super(...arguments),G(this,"name","AuthenticationError")}}class ft extends _e{constructor(){super(...arguments),G(this,"name","NotAllowedError")}}class k extends _e{constructor(){super(...arguments),G(this,"name","NotFoundError")}}class ce extends _e{constructor(){super(...arguments),G(this,"name","ConflictError")}}class I extends _e{constructor(){super(...arguments),G(this,"name","NotModifiedError")}}class h extends _e{constructor(){super(...arguments),G(this,"name","NotImplementedError")}}class M extends null{}class C extends _e{constructor(p,j){super(p,j),this.name=b(j)?j.name:"Error"}}async function v(X){var p;try{const j=await X.text();if(j){if((p=X.headers.get("content-type"))!=null&&p.startsWith("application/json"))try{const J=JSON.parse(j);if(J.error&&J.response)return J}catch{}return{error:{name:"Error",message:`Request failed with status ${X.status} ${X.statusText}, ${j}`},response:{statusCode:X.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${X.status} ${X.statusText}`},response:{statusCode:X.status}}}var N=Object.defineProperty,Q=(X,p,j)=>p in X?N(X,p,{enumerable:!0,configurable:!0,writable:!0,value:j}):X[p]=j,De=(X,p,j)=>(Q(X,typeof p!="symbol"?p+"":p,j),j);class Ee extends Error{constructor(p){super(p.message),De(this,"response"),De(this,"body"),De(this,"cause"),De(this,"statusCode"),De(this,"statusText"),this.name="ResponseError",this.response=p.response,this.body=p.data,this.cause=p.cause,this.statusCode=p.statusCode,this.statusText=p.statusText}static async fromResponse(p){const j=await v(p),J=j.response.statusCode||p.status,ue=p.statusText,Te=`Request failed with ${J} ${ue}`,dt=r(j.error);return new Ee({message:Te,response:p,data:j,cause:dt,statusCode:J,statusText:ue})}}},33478:(Dn,Ct,e)=>{"use strict";e.d(Ct,{$J:()=>r,L7:()=>h,LS:()=>ce,YT:()=>I,gh:()=>k});var s=e(48821),l=e(11638),b=e(63188),_=e(13660),z=e(14041);const r=(0,s.c)({id:"core.scmauth"});var q=(M,C,v)=>{if(!C.has(M))throw TypeError("Cannot "+v)},ee=(M,C,v)=>(q(M,C,"read from private field"),v?v.call(M):C.get(M)),a=(M,C,v)=>{if(C.has(M))throw TypeError("Cannot add the same private member more than once");C instanceof WeakSet?C.add(M):C.set(M,v)},he=(M,C,v,N)=>(q(M,C,"write to private field"),N?N.call(M,v):C.set(M,v),v),_e,le,ie,G,we;class Ce{constructor(C){a(this,_e,void 0),he(this,_e,C)}async getCredentials(C){const v=new URL(C.url),N=ee(this,_e).find(Q=>Q.isUrlSupported(v));if(!N)throw new Error(`No auth provider available for '${C.url}', see https://backstage.io/link?scm-auth`);return N.getCredentials(C)}}_e=new WeakMap;const ft=class Pr{constructor(C,v,N,Q){a(this,le,void 0),a(this,ie,void 0),a(this,G,void 0),a(this,we,void 0),he(this,le,v),he(this,ie,N),he(this,G,Q),he(this,we,C)}static createDefaultApiFactory(){return(0,l.bW)({api:r,deps:{github:s.d,gitlab:s.e,azure:s.m,bitbucket:s.i},factory:({github:C,gitlab:v,azure:N,bitbucket:Q})=>Pr.merge(Pr.forGithub(C),Pr.forGitlab(v),Pr.forAzure(N),Pr.forBitbucket(Q))})}static forAuthApi(C,v){return new Pr("generic",C,v.host,v.scopeMapping)}static forGithub(C,v){var N;const Q=(N=v==null?void 0:v.host)!=null?N:"github.com";return new Pr("github",C,Q,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(C,v){var N;const Q=(N=v==null?void 0:v.host)!=null?N:"gitlab.com";return new Pr("gitlab",C,Q,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(C,v){var N;const Q=(N=v==null?void 0:v.host)!=null?N:"dev.azure.com";return new Pr("azure",C,Q,{default:["499b84ac-1321-427f-aa17-267ca6975798/vso.build","499b84ac-1321-427f-aa17-267ca6975798/vso.code","499b84ac-1321-427f-aa17-267ca6975798/vso.graph","499b84ac-1321-427f-aa17-267ca6975798/vso.project","499b84ac-1321-427f-aa17-267ca6975798/vso.profile"],repoWrite:["499b84ac-1321-427f-aa17-267ca6975798/vso.code_manage"]})}static forBitbucket(C,v){var N;const Q=(N=v==null?void 0:v.host)!=null?N:"bitbucket.org";return new Pr("bitbucket",C,Q,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...C){return new Ce(C)}isUrlSupported(C){return C.host===ee(this,ie)}getAdditionalScopesForProvider(C){var v,N;return!(C!=null&&C.customScopes)||ee(this,we)==="generic"?[]:(N=(v=C.customScopes)==null?void 0:v[ee(this,we)])!=null?N:[]}async getCredentials(C){const{url:v,additionalScope:N,...Q}=C,De=ee(this,G).default.slice();N!=null&&N.repoWrite&&De.push(...ee(this,G).repoWrite);const Ee=this.getAdditionalScopesForProvider(N);Ee.length&&De.push(...Ee);const X=[...new Set(De)],p=await ee(this,le).getAccessToken(X,Q);return{token:p,headers:{Authorization:`Bearer ${p}`}}}};le=new WeakMap,ie=new WeakMap,G=new WeakMap,we=new WeakMap;let k=ft;class ce{static fromConfig(C){return b.b5.fromConfig(C)}}const I=(0,s.c)({id:"integration.scmintegrations"}),h=M=>{var C;const{type:v}=M,N=(0,l.nm)(),Q=_.A,De=v&&(C=N.getSystemIcon(v))!=null?C:Q;return z.createElement(De,null)}},63188:(Dn,Ct,e)=>{"use strict";e.d(Ct,{B:()=>oe,Fw:()=>Nn,b5:()=>Qa,bm:()=>It});var s=e(52536),l=e.n(s),b=e(45250),_=e.n(b),z=e(10288),r=e.n(z),q=e(36142),ee=e(49863),a=e(52950),he=e(1048).Buffer;function _e(E){const c=new URL("http://example.com");return c.host=E,c.host===E}function le(E){try{return new URL(E),!0}catch{return!1}}function ie(E,c){return{list(){return E},byUrl(A){try{const $=typeof A=="string"?new URL(A):A;return E.find(fe=>c(fe)===$.host)}catch{return}},byHost(A){return E.find($=>c($)===A)}}}function G(E){const{url:c,base:A,lineNumber:$}=E;try{return new URL(c),c}catch{}let fe;if(c.startsWith("/")){const{href:Ie,filepath:Rt}=l()(A);fe=new URL(Ie);const Lt=(0,b.trimEnd)(fe.pathname.substring(0,fe.pathname.length-Rt.length),"/");fe.pathname=`${Lt}${c}`}else fe=new URL(c,A);return fe.search=new URL(A).search,$&&(fe.hash=`L${$}`),fe.toString()}const we="amazonaws.com";function Ce(E){var c,A;const $=E.getOptionalString("endpoint"),fe=(c=E.getOptionalBoolean("s3ForcePathStyle"))!=null?c:!1;let Ie,Rt;if($){try{const Ia=new URL($);Ie=Ia.host,Rt=Ia.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${$}' is not a valid URL`)}if(Rt!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${$}'`)}else Ie=we;const Lt=E.getOptionalString("accessKeyId"),wn=(A=E.getOptionalString("secretAccessKey"))==null?void 0:A.trim(),Cn=E.getOptionalString("roleArn"),Ta=E.getOptionalString("externalId");return{host:Ie,endpoint:$,s3ForcePathStyle:fe,accessKeyId:Lt,secretAccessKey:wn,roleArn:Cn,externalId:Ta}}function ft(E){const c=E.map(Ce);return c.some(A=>A.host===we)||c.push({host:we}),c}var k=Object.defineProperty,ce=(E,c,A)=>c in E?k(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,I=(E,c,A)=>(ce(E,typeof c!="symbol"?c+"":c,A),A);const h=class{constructor(c){this.integrationConfig=c}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return G(c)}resolveEditUrl(c){return c}};I(h,"factory",({config:E})=>{var c;const A=ft((c=E.getOptionalConfigArray("integrations.awsS3"))!=null?c:[]);return ie(A.map($=>new h($)),$=>$.config.host)});let M=h;var C=(E,c,A)=>{if(!c.has(E))throw TypeError("Cannot "+A)},v=(E,c,A)=>(C(E,c,"read from private field"),A?A.call(E):c.get(E)),N=(E,c,A)=>{if(c.has(E))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(E):c.set(E,A)},Q=(E,c,A,$)=>(C(E,c,"write to private field"),$?$.call(E,A):c.set(E,A),A),De,Ee,X,p,j,J,ue;const Te="GB",dt=class Gi{constructor(c,A,$,fe,Ie,Rt){N(this,De,void 0),N(this,Ee,void 0),N(this,X,void 0),N(this,p,void 0),N(this,j,void 0),N(this,J,void 0),N(this,ue,(...Lt)=>{const wn=new URL(v(this,De));return wn.pathname=Lt.map(Cn=>encodeURIComponent(Cn)).join("/"),wn}),Q(this,De,c),Q(this,Ee,A),Q(this,X,$),Q(this,p,fe),Q(this,j,Ie),Q(this,J,Rt)}static fromRepoUrl(c){var A;const $=new URL(c);let fe,Ie,Rt;const Lt=$.pathname.split("/").map(Ia=>decodeURIComponent(Ia));if(Lt[2]==="_git"?(fe=Lt[1],Ie=Rt=Lt[3]):Lt[3]==="_git"?(fe=Lt[1],Ie=Lt[2],Rt=Lt[4]):Lt[4]==="_git"&&(fe=`${Lt[1]}/${Lt[2]}`,Ie=Lt[3],Rt=Lt[5]),!fe||!Ie||!Rt)throw new Error("Azure URL must point to a git repository");const wn=(A=$.searchParams.get("path"))!=null?A:void 0;let Cn;const Ta=$.searchParams.get("version");if(Ta){if(Ta.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Cn=Ta.slice(2)}return new Gi($.origin,fe,Ie,Rt,wn,Cn)}toRepoUrl(){let c;return v(this,X)===v(this,p)?c=v(this,ue).call(this,v(this,Ee),"_git",v(this,p)):c=v(this,ue).call(this,v(this,Ee),v(this,X),"_git",v(this,p)),v(this,j)&&c.searchParams.set("path",v(this,j)),v(this,J)&&c.searchParams.set("version",Te+v(this,J)),c.toString()}toFileUrl(){if(!v(this,j))throw new Error("Azure URL must point to a specific path to be able to download a file");const c=v(this,ue).call(this,v(this,Ee),v(this,X),"_apis","git","repositories",v(this,p),"items");return c.searchParams.set("api-version","6.0"),c.searchParams.set("path",v(this,j)),v(this,J)&&c.searchParams.set("version",v(this,J)),c.toString()}toArchiveUrl(){const c=v(this,ue).call(this,v(this,Ee),v(this,X),"_apis","git","repositories",v(this,p),"items");return c.searchParams.set("recursionLevel","full"),c.searchParams.set("download","true"),c.searchParams.set("api-version","6.0"),v(this,j)&&c.searchParams.set("scopePath",v(this,j)),v(this,J)&&c.searchParams.set("version",v(this,J)),c.toString()}toCommitsUrl(){const c=v(this,ue).call(this,v(this,Ee),v(this,X),"_apis","git","repositories",v(this,p),"commits");return c.searchParams.set("api-version","6.0"),v(this,J)&&c.searchParams.set("searchCriteria.itemVersion.version",v(this,J)),c.toString()}getOwner(){return v(this,Ee)}getProject(){return v(this,X)}getRepo(){return v(this,p)}getPath(){return v(this,j)}getRef(){return v(this,J)}};De=new WeakMap,Ee=new WeakMap,X=new WeakMap,p=new WeakMap,j=new WeakMap,J=new WeakMap,ue=new WeakMap;let Ge=dt;const rt="dev.azure.com",pt=["clientId","clientSecret","tenantId","personalAccessToken"],qe=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function st(E){for(const c of qe.entries()){const[A,$]=c,fe=pt.filter(Ie=>!$.includes(Ie));if($.every(Ie=>E[Ie]!==void 0)&&fe.every(Ie=>E[Ie]===void 0))return{kind:A,organizations:E.organizations,...$.reduce((Ie,Rt)=>(Ie[Rt]=E[Rt],Ie),{})}}throw new Error("is not a valid credential")}function Oe(E){var c,A,$,fe,Ie,Rt,Lt;const wn=(c=E.getOptionalString("host"))!=null?c:rt;let Cn=(A=E.getOptionalConfigArray("credentials"))==null?void 0:A.map(Ra=>{var da,Va;return{organizations:Ra.getOptionalStringArray("organizations"),personalAccessToken:(da=Ra.getOptionalString("personalAccessToken"))==null?void 0:da.trim(),tenantId:Ra.getOptionalString("tenantId"),clientId:Ra.getOptionalString("clientId"),clientSecret:(Va=Ra.getOptionalString("clientSecret"))==null?void 0:Va.trim()}});const Ta=($=E.getOptionalString("token"))==null?void 0:$.trim();if(E.getOptional("credential")!==void 0&&E.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(E.getOptional("token")!==void 0&&E.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(Ta!==void 0){const Ra=[{personalAccessToken:Ta}];Cn=(fe=Cn==null?void 0:Cn.concat(Ra))!=null?fe:Ra}if(E.getOptional("credential")!==void 0){const Ra=[{organizations:E.getOptionalStringArray("credential.organizations"),token:(Ie=E.getOptionalString("credential.token"))==null?void 0:Ie.trim(),tenantId:E.getOptionalString("credential.tenantId"),clientId:E.getOptionalString("credential.clientId"),clientSecret:(Rt=E.getOptionalString("credential.clientSecret"))==null?void 0:Rt.trim()}];Cn=(Lt=Cn==null?void 0:Cn.concat(Ra))!=null?Lt:Ra}if(!_e(wn))throw new Error(`Invalid Azure integration config, '${wn}' is not a valid host`);let Ia;if(Cn!==void 0){const Ra=Cn==null?void 0:Cn.reduce((da,Va,tr)=>{let dr;try{st(Va)}catch(Er){dr=Er.message}return dr!==void 0&&da.push(`credential at position ${tr+1} ${dr}`),da},Array.of()).concat(Object.entries(Cn.filter(da=>da.organizations!==void 0&&da.organizations.length>0).reduce((da,Va,tr)=>{var dr;return(dr=Va.organizations)==null||dr.forEach(Er=>{da[Er]||(da[Er]=[]),da[Er].push(tr+1)}),da},{})).filter(([da,Va])=>Va.length>1).reduce((da,[Va,tr])=>(da.push(`organization ${Va} is specified multiple times in credentials at positions ${tr.slice(0,tr.length-1).join(", ")} and ${tr[tr.length-1]}`),da),Array.of()));if((Ra==null?void 0:Ra.length)>0)throw new Error(`Invalid Azure integration config for ${wn}: ${Ra.join("; ")}`);if(Ia=Cn.map(da=>st(da)),Ia.some(da=>da.kind!=="PersonalAccessToken")&&wn!==rt)throw new Error(`Invalid Azure integration config for ${wn}, only personal access tokens can be used with hosts other than ${rt}`);if(Ia.filter(da=>da.organizations===void 0||da.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${wn}, you cannot specify multiple credentials without organizations`)}return{host:wn,credentials:Ia}}function je(E){const c=E.map(Oe);return c.some(A=>A.host===rt)||c.push({host:rt}),c}var $e=Object.defineProperty,vt=(E,c,A)=>c in E?$e(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,ht=(E,c,A)=>(vt(E,typeof c!="symbol"?c+"":c,A),A);const Ft=class{constructor(c){this.integrationConfig=c}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){var A;const{url:$,base:fe}=c;if(le($))return $;try{const Ie=Ge.fromRepoUrl(fe),Rt=new URL(fe),Lt=new URL(`https://a.com${(A=Ie.getPath())!=null?A:""}`),wn=new URL($,Lt).pathname;return Rt.searchParams.set("path",wn),c.lineNumber&&(Rt.searchParams.set("line",String(c.lineNumber)),Rt.searchParams.set("lineEnd",String(c.lineNumber+1)),Rt.searchParams.set("lineStartColumn","1"),Rt.searchParams.set("lineEndColumn","1")),Rt.toString()}catch{return new URL($,fe).toString()}}resolveEditUrl(c){return c}};ht(Ft,"factory",({config:E})=>{var c;const A=je((c=E.getOptionalConfigArray("integrations.azure"))!=null?c:[]);return ie(A.map($=>new Ft($)),$=>$.config.host)});let me=Ft;function ke(E){return Ge.fromRepoUrl(E).toFileUrl()}function bt(E){return Ge.fromRepoUrl(E).toArchiveUrl()}function Yt(E){return Ge.fromRepoUrl(E).toCommitsUrl()}var yt=Object.defineProperty,_t=(E,c,A)=>c in E?yt(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,S=(E,c,A)=>(_t(E,typeof c!="symbol"?c+"":c,A),A);const R=null;class W{constructor(c){this.credential=c,S(this,"azureDevOpsScope","499b84ac-1321-427f-aa17-267ca6975798/.default"),S(this,"cached")}static fromAzureDevOpsCredential(c){switch(c.kind){case"PersonalAccessToken":return W.fromPersonalAccessTokenCredential(c);case"ClientSecret":return W.fromTokenCredential(new ClientSecretCredential(c.tenantId,c.clientId,c.clientSecret));case"ManagedIdentity":return W.fromTokenCredential(new ManagedIdentityCredential(c.clientId));default:throw new Error(`Credential kind '${c.kind}' not supported`)}}static fromTokenCredential(c){return new W(c)}static fromPersonalAccessTokenCredential(c){return new W(c.personalAccessToken)}async getCredentials(){if(this.cached===void 0||this.cached.expiresAt!==void 0&&Date.now()>this.cached.expiresAt)if(typeof this.credential=="string")this.cached={headers:{Authorization:`Basic ${btoa(`:${this.credential}`)}`},type:"pat",token:this.credential};else{const c=await this.credential.getToken(this.azureDevOpsScope);if(!c)throw new Error("Failed to retrieve access token");this.cached={expiresAt:c.expiresOnTimestamp-R,headers:{Authorization:`Bearer ${c.token}`},type:"bearer",token:c.token}}return this.cached}}class Z{constructor(c){this.providers=c}static fromIntegrations(c){const A=c.azure.list().reduce(($,fe)=>{var Ie;return(Ie=fe.config.credentials)==null||Ie.forEach(Rt=>{var Lt;if(Rt.organizations===void 0||Rt.organizations.length===0)$.get(fe.config.host)===void 0&&$.set(fe.config.host,W.fromAzureDevOpsCredential(Rt));else{const wn=W.fromAzureDevOpsCredential(Rt);(Lt=Rt.organizations)==null||Lt.forEach(Cn=>{$.set(`${fe.config.host}/${Cn}`,wn)})}}),fe.config.host==="dev.azure.com"&&$.get(fe.config.host)===void 0&&$.set(fe.config.host,W.fromTokenCredential(new DefaultAzureCredential)),$},new Map);return new Z(A)}forAzureDevOpsServerOrganization(c){const A=c.pathname.split("/").filter($=>$!=="");if(c.host!=="dev.azure.com"&&A.length>0){if(A[0]!=="tfs")return this.providers.get(`${c.host}/${A[0]}`);if(A[0]==="tfs"&&A.length>1)return this.providers.get(`${c.host}/${A[1]}`)}}forAzureDevOpsOrganization(c){const A=c.pathname.split("/").filter($=>$!=="");if(c.host==="dev.azure.com"&&A.length>0)return this.providers.get(`${c.host}/${A[0]}`)}forHost(c){return this.providers.get(c.host)}async getCredentials(c){var A,$;const fe=new URL(c.url),Ie=($=(A=this.forAzureDevOpsOrganization(fe))!=null?A:this.forAzureDevOpsServerOrganization(fe))!=null?$:this.forHost(fe);if(Ie!==void 0)return Ie.getCredentials(c)}}async function Pe(E,c){var A;const $=c?{...c}:{},fe=(A=E.credentials)==null?void 0:A.filter(Ie=>Ie.organizations===void 0||Ie.organizations.length===0)[0];if(fe){const Rt=await W.fromAzureDevOpsCredential(fe).getCredentials();return{headers:{...Rt==null?void 0:Rt.headers,...$}}}return{headers:$}}const Ue="bitbucket.org",lt="https://api.bitbucket.org/2.0";function et(E){var c,A,$;const fe=(c=E.getOptionalString("host"))!=null?c:Ue;let Ie=E.getOptionalString("apiBaseUrl");const Rt=(A=E.getOptionalString("token"))==null?void 0:A.trim(),Lt=E.getOptionalString("username"),wn=($=E.getOptionalString("appPassword"))==null?void 0:$.trim();if(!_e(fe))throw new Error(`Invalid Bitbucket integration config, '${fe}' is not a valid host`);return Ie?Ie=(0,b.trimEnd)(Ie,"/"):fe===Ue?Ie=lt:Ie=`https://${fe}/rest/api/1.0`,{host:fe,apiBaseUrl:Ie,token:Rt,username:Lt,appPassword:wn}}function Je(E){const c=E.map(et);return c.some(A=>A.host===Ue)||c.push({host:Ue,apiBaseUrl:lt}),c}var Wt=Object.defineProperty,tn=(E,c,A)=>c in E?Wt(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,Ut=(E,c,A)=>(tn(E,typeof c!="symbol"?c+"":c,A),A);const mt=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const A=G(c);if(!c.lineNumber)return A;const $=new URL(A);return this.integrationConfig.host==="bitbucket.org"?$.hash=`lines-${c.lineNumber}`:$.hash=`${c.lineNumber}`,$.toString()}resolveEditUrl(c){const A=l()(c),$=new URL(c);return $.searchParams.set("mode","edit"),$.searchParams.set("spa","0"),$.searchParams.set("at",A.ref),$.toString()}};Ut(mt,"factory",({config:E})=>{var c,A,$;const fe=Je(($=E.getOptionalConfigArray("integrations.bitbucket"))!=null?$:[...(c=E.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?c:[],...(A=E.getOptionalConfigArray("integrations.bitbucketServer"))!=null?A:[]]);return ie(fe.map(Ie=>new mt(Ie)),Ie=>Ie.config.host)});let Xt=mt;async function on(E,c){const{name:A,owner:$,resource:fe}=parseGitUrl(E),Ie=fe==="bitbucket.org";let Rt=Ie?`${c.apiBaseUrl}/repositories/${$}/${A}`:`${c.apiBaseUrl}/projects/${$}/repos/${A}/default-branch`,Lt=await fetch(Rt,ve(c));if(Lt.status===404&&!Ie&&(Rt=`${c.apiBaseUrl}/projects/${$}/repos/${A}/branches/default`,Lt=await fetch(Rt,ve(c))),!Lt.ok){const Cn=`Failed to retrieve default branch from ${Rt}, ${Lt.status} ${Lt.statusText}`;throw new Error(Cn)}let wn;if(Ie)wn=(await Lt.json()).mainbranch.name;else{const{displayId:Cn}=await Lt.json();wn=Cn}if(!wn)throw new Error(`Failed to read default branch from ${Rt}. Response ${Lt.status} ${Lt.json()}`);return wn}async function ln(E,c){const{name:A,owner:$,ref:fe,protocol:Ie,resource:Rt,filepath:Lt}=parseGitUrl(E),wn=Rt==="bitbucket.org";let Cn=fe;Cn||(Cn=await on(E,c));const Ta=Lt?`&path=${encodeURIComponent(decodeURIComponent(Lt))}`:"";return wn?`${Ie}://${Rt}/${$}/${A}/get/${Cn}.tar.gz`:`${c.apiBaseUrl}/projects/${$}/repos/${A}/archive?format=tgz&at=${Cn}&prefix=${$}-${A}${Ta}`}function qt(E,c){try{const{owner:A,name:$,ref:fe,filepathtype:Ie,filepath:Rt}=parseGitUrl(E);if(!A||!$||Ie!=="browse"&&Ie!=="raw"&&Ie!=="src")throw new Error("Invalid Bitbucket URL or file path");const Lt=Rt.replace(/^\//,"");if(c.host==="bitbucket.org"){if(!fe)throw new Error("Invalid Bitbucket URL or file path");return`${c.apiBaseUrl}/repositories/${A}/${$}/src/${fe}/${Lt}`}return`${c.apiBaseUrl}/projects/${A}/repos/${$}/raw/${Lt}?at=${fe}`}catch(A){throw new Error(`Incorrect URL: ${E}, ${A}`)}}function ve(E){const c={};if(E.token)c.Authorization=`Bearer ${E.token}`;else if(E.username&&E.appPassword){const A=he.from(`${E.username}:${E.appPassword}`,"utf8");c.Authorization=`Basic ${A.toString("base64")}`}return{headers:c}}const Qe="bitbucket.org",Kt="https://api.bitbucket.org/2.0";function Vt(E){var c;const A=Qe,$=Kt,fe=E.getString("username"),Ie=(c=E.getString("appPassword"))==null?void 0:c.trim();return{host:A,apiBaseUrl:$,username:fe,appPassword:Ie}}function zt(E){const c=E.map(Vt);return c.length===0&&c.push({host:Qe,apiBaseUrl:Kt}),c}var Bt=Object.defineProperty,Ln=(E,c,A)=>c in E?Bt(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,mn=(E,c,A)=>(Ln(E,typeof c!="symbol"?c+"":c,A),A);const nn=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const A=G(c);if(c.lineNumber){const $=new URL(A);return $.hash=`lines-${c.lineNumber}`,$.toString()}return A}resolveEditUrl(c){const A=l()(c),$=new URL(c);return $.searchParams.set("mode","edit"),$.searchParams.set("at",A.ref),$.toString()}};mn(nn,"factory",({config:E})=>{var c;const A=zt((c=E.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?c:[]);return ie(A.map($=>new nn($)),$=>$.config.host)});let On=nn;async function nt(E,c){const{name:A,owner:$}=parseGitUrl(E),fe=`${c.apiBaseUrl}/repositories/${$}/${A}`,Ie=await fetch(fe,ot(c));if(!Ie.ok){const wn=`Failed to retrieve default branch from ${fe}, ${Ie.status} ${Ie.statusText}`;throw new Error(wn)}const Lt=(await Ie.json()).mainbranch.name;if(!Lt)throw new Error(`Failed to read default branch from ${fe}. Response ${Ie.status} ${Ie.json()}`);return Lt}async function gt(E,c){const{name:A,owner:$,ref:fe,protocol:Ie,resource:Rt}=parseGitUrl(E);let Lt=fe;return Lt||(Lt=await nt(E,c)),`${Ie}://${Rt}/${$}/${A}/get/${Lt}.tar.gz`}function Tt(E,c){try{const{owner:A,name:$,ref:fe,filepathtype:Ie,filepath:Rt}=parseGitUrl(E);if(!A||!$||Ie!=="src"&&Ie!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const Lt=Rt.replace(/^\//,"");if(!fe)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${c.apiBaseUrl}/repositories/${A}/${$}/src/${fe}/${Lt}`}catch(A){throw new Error(`Incorrect URL: ${E}, ${A}`)}}function ot(E){const c={};if(E.username&&E.appPassword){const A=he.from(`${E.username}:${E.appPassword}`,"utf8");c.Authorization=`Basic ${A.toString("base64")}`}return{headers:c}}function Ze(E){var c;const A=E.getString("host");let $=E.getOptionalString("apiBaseUrl");const fe=(c=E.getOptionalString("token"))==null?void 0:c.trim(),Ie=E.getOptionalString("username"),Rt=E.getOptionalString("password");if(!_e(A))throw new Error(`Invalid Bitbucket Server integration config, '${A}' is not a valid host`);return $?$=(0,b.trimEnd)($,"/"):$=`https://${A}/rest/api/1.0`,{host:A,apiBaseUrl:$,token:fe,username:Ie,password:Rt}}function V(E){return E.map(Ze)}var de=Object.defineProperty,ge=(E,c,A)=>c in E?de(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,Pt=(E,c,A)=>(ge(E,typeof c!="symbol"?c+"":c,A),A);const xt=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const A=G(c);if(c.lineNumber){const $=new URL(A);return $.hash=c.lineNumber.toString(),$.toString()}return A}resolveEditUrl(c){return c.includes("?")?c.substring(0,c.indexOf("?")):c}};Pt(xt,"factory",({config:E})=>{var c;const A=V((c=E.getOptionalConfigArray("integrations.bitbucketServer"))!=null?c:[]);return ie(A.map($=>new xt($)),$=>$.config.host)});let cn=xt;async function An(E,c){const{name:A,owner:$}=parseGitUrl(E);let fe=`${c.apiBaseUrl}/projects/${$}/repos/${A}/default-branch`,Ie=await fetch(fe,kn(c));if(Ie.status===404&&(fe=`${c.apiBaseUrl}/projects/${$}/repos/${A}/branches/default`,Ie=await fetch(fe,kn(c))),!Ie.ok){const wn=`Failed to retrieve default branch from ${fe}, ${Ie.status} ${Ie.statusText}`;throw new Error(wn)}const{displayId:Rt}=await Ie.json(),Lt=Rt;if(!Lt)throw new Error(`Failed to read default branch from ${fe}. Response ${Ie.status} ${Ie.json()}`);return Lt}async function Bn(E,c){const{name:A,owner:$,ref:fe,filepath:Ie}=parseGitUrl(E);let Rt=fe;Rt||(Rt=await An(E,c));const Lt=Ie?`&path=${encodeURIComponent(decodeURIComponent(Ie))}`:"";return`${c.apiBaseUrl}/projects/${$}/repos/${A}/archive?format=tgz&at=${Rt}&prefix=${$}-${A}${Lt}`}function $n(E,c){try{const{owner:A,name:$,ref:fe,filepathtype:Ie,filepath:Rt}=parseGitUrl(E);if(!A||!$||Ie!=="browse"&&Ie!=="raw"&&Ie!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const Lt=Rt.replace(/^\//,"");return`${c.apiBaseUrl}/projects/${A}/repos/${$}/raw/${Lt}?at=${fe}`}catch(A){throw new Error(`Incorrect URL: ${E}, ${A}`)}}function kn(E){const c={};if(E.token)c.Authorization=`Bearer ${E.token}`;else if(E.username&&E.password){const A=he.from(`${E.username}:${E.password}`,"utf8");c.Authorization=`Basic ${A.toString("base64")}`}return{headers:c}}function bn(E){var c;const A=E.getString("host");let $=E.getOptionalString("baseUrl"),fe=E.getOptionalString("cloneUrl"),Ie=E.getOptionalString("gitilesBaseUrl");const Rt=E.getOptionalString("username"),Lt=(c=E.getOptionalString("password"))==null?void 0:c.trim();if(_e(A)){if($&&!le($))throw new Error(`Invalid Gerrit integration config, '${$}' is not a valid baseUrl`);if(fe&&!le(fe))throw new Error(`Invalid Gerrit integration config, '${fe}' is not a valid cloneUrl`);if(Ie&&!le(Ie))throw new Error(`Invalid Gerrit integration config, '${Ie}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${A}' is not a valid host`);return $?$=(0,b.trimEnd)($,"/"):$=`https://${A}`,Ie?Ie=(0,b.trimEnd)(Ie,"/"):Ie=`https://${A}`,fe?fe=(0,b.trimEnd)(fe,"/"):fe=$,{host:A,baseUrl:$,cloneUrl:fe,gitilesBaseUrl:Ie,username:Rt,password:Lt}}function jn(E){return E.map(bn)}const ra=")]}'";function ct(E,c){const A=new URL(E.gitilesBaseUrl),$=new URL(c),Ie=$.pathname.substring($.pathname.startsWith("/a/")?2:0).replace(A.pathname,"").split("/").filter(Ia=>!!Ia),Rt=Ie.indexOf("+");if(Rt<=0)throw new Error(`Unable to parse project from url: ${c}`);const Lt=(0,b.trimStart)(Ie.slice(0,Rt).join("/"),"/"),wn=Ie.indexOf("heads");if(wn<=0)throw new Error(`Unable to parse branch from url: ${c}`);const Cn=Ie[wn+1],Ta=Ie.slice(wn+2).join("/");return{branch:Cn,filePath:Ta===""?"/":Ta,project:Lt}}function m(E,c,A,$){return`${E.gitilesBaseUrl}/${c}/+/refs/heads/${A}/${(0,b.trimStart)($,"/")}`}function w(E,c,A,$){const fe=$==="/"||$===""?".tar.gz":`/${$}.tar.gz`;return`${re(E)}/${c}/+archive/refs/heads/${A}${fe}`}function K(E){return E.password?"/a/":"/"}function re(E){if(!E.baseUrl||!E.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(E.gitilesBaseUrl.startsWith(E.baseUrl))return E.gitilesBaseUrl.replace(E.baseUrl.concat("/"),E.baseUrl.concat(K(E)));if(E.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return E.gitilesBaseUrl}function D(E,c){const{branch:A,project:$}=ct(E,c);return`${E.baseUrl}${K(E)}projects/${encodeURIComponent($)}/branches/${A}`}function U(E,c){const{project:A}=ct(E,c);return`${E.cloneUrl}${K(E)}${A}`}function Y(E,c){const{branch:A,filePath:$,project:fe}=ct(E,c);return`${E.baseUrl}${K(E)}projects/${encodeURIComponent(fe)}/branches/${A}/files/${encodeURIComponent($)}/content`}function Se(E){return`${E.baseUrl}${K(E)}projects/`}function Re(E){const c={};if(!E.password)return c;const A=he.from(`${E.username}:${E.password}`,"utf8");return c.Authorization=`Basic ${A.toString("base64")}`,{headers:c}}async function ut(E){const c=await E.text();if(c.startsWith(ra))try{return JSON.parse(c.slice(ra.length))}catch(A){throw new Error(`Invalid response from Gerrit: ${c.slice(0,10)} - ${A}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${c.slice(0,10)}`)}var St=Object.defineProperty,sn=(E,c,A)=>c in E?St(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,Zt=(E,c,A)=>(sn(E,typeof c!="symbol"?c+"":c,A),A);const hn=class{constructor(c){this.integrationConfig=c}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const{url:A,base:$,lineNumber:fe}=c;let Ie;if(A.startsWith("/")){const{branch:Rt,project:Lt}=ct(this.config,$);return m(this.config,Lt,Rt,A)}return A?Ie=new URL(A,$):Ie=new URL($),fe&&(Ie.hash=fe.toString()),Ie.toString()}resolveEditUrl(c){return c}};Zt(hn,"factory",({config:E})=>{var c;const A=jn((c=E.getOptionalConfigArray("integrations.gerrit"))!=null?c:[]);return ie(A.map($=>new hn($)),$=>$.config.host)});let dn=hn;function kt(E){var c;const A=E.getString("host");let $=E.getOptionalString("baseUrl");const fe=E.getOptionalString("username"),Ie=(c=E.getOptionalString("password"))==null?void 0:c.trim();if(_e(A)){if($&&!le($))throw new Error(`Invalid Gitea integration config, '${$}' is not a valid baseUrl`)}else throw new Error(`Invalid Gitea integration config, '${A}' is not a valid host`);return $?$=(0,b.trimEnd)($,"/"):$=`https://${A}`,{host:A,baseUrl:$,username:fe,password:Ie}}function yn(E,c){const A=Pn(E,c);return`${A.url}/${A.owner}/${A.name}/_edit/${A.ref}/${A.path}`}function gn(E,c){const A=Pn(E,c);return`${A.url}/api/v1/repos/${A.owner}/${A.name}/contents/${A.path}?ref=${A.ref}`}function Un(E,c){const A=Pn(E,c);return`${A.url}/api/v1/repos/${A.owner}/${A.name}/archive/${A.ref}.tar.gz`}function Qn(E,c){const A=Pn(E,c);return`${A.url}/api/v1/repos/${A.owner}/${A.name}/git/commits/${A.ref}`}function ea(E){const c={},{username:A,password:$}=E;return $?(A?c.Authorization=`basic ${he.from(`${A}:${$}`).toString("base64")}`:c.Authorization=`token ${$}`,{headers:c}):c}function Pn(E,c){var A;const $=(A=E.baseUrl)!=null?A:`https://${E.host}`;try{const[fe,Ie,Rt,Lt,wn,Cn,...Ta]=c.replace($,"").split("/"),Ia=Ta.join("/").replace(/^\//,"");return{url:$,owner:Ie,name:Rt,ref:Cn,path:Ia}}catch(fe){throw new Error(`Incorrect URL: ${c}, ${fe}`)}}var Sn=Object.defineProperty,Jt=(E,c,A)=>c in E?Sn(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,rn=(E,c,A)=>(Jt(E,typeof c!="symbol"?c+"":c,A),A);const Xn=class{constructor(c){this.config=c}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(c){return G(c)}resolveEditUrl(c){return yn(this.config,c)}};rn(Xn,"factory",({config:E})=>{var c;const $=((c=E.getOptionalConfigArray("integrations.gitea"))!=null?c:[]).map(fe=>kt(fe));return ie($.map(fe=>new Xn(fe)),fe=>fe.config.host)});let _n=Xn;const H="github.com",be="https://api.github.com",Fe="https://raw.githubusercontent.com";function tt(E){var c,A,$;const fe=(c=E.getOptionalString("host"))!=null?c:H;let Ie=E.getOptionalString("apiBaseUrl"),Rt=E.getOptionalString("rawBaseUrl");const Lt=(A=E.getOptionalString("token"))==null?void 0:A.trim(),wn=($=E.getOptionalConfigArray("apps"))==null?void 0:$.map(Cn=>({appId:Cn.getNumber("appId"),clientId:Cn.getString("clientId"),clientSecret:Cn.getString("clientSecret"),webhookSecret:Cn.getString("webhookSecret"),privateKey:Cn.getString("privateKey"),allowedInstallationOwners:Cn.getOptionalStringArray("allowedInstallationOwners")}));if(!_e(fe))throw new Error(`Invalid GitHub integration config, '${fe}' is not a valid host`);return Ie?Ie=(0,b.trimEnd)(Ie,"/"):fe===H&&(Ie=be),Rt?Rt=(0,b.trimEnd)(Rt,"/"):fe===H&&(Rt=Fe),{host:fe,apiBaseUrl:Ie,rawBaseUrl:Rt,token:Lt,apps:wn}}function It(E){const c=E.map(tt);return c.some(A=>A.host===H)||c.push({host:H,apiBaseUrl:be,rawBaseUrl:Fe}),c}function Ot(E,c,A){try{const{owner:$,name:fe,ref:Ie,filepathtype:Rt,filepath:Lt}=parseGitUrl(E);if(!$||!fe||!Ie||Rt!=="blob"&&Rt!=="raw"&&Rt!=="tree")throw new Error("Invalid GitHub URL or file path");const wn=Lt.replace(/^\//,"");return ne(c,A)==="api"?`${c.apiBaseUrl}/repos/${$}/${fe}/contents/${wn}?ref=${Ie}`:`${c.rawBaseUrl}/${$}/${fe}/${Ie}/${wn}`}catch($){throw new Error(`Incorrect URL: ${E}, ${$}`)}}function jt(E,c){const A={};return ne(E,c)==="api"&&(A.Accept="application/vnd.github.v3.raw"),c.token&&(A.Authorization=`token ${c.token}`),{headers:A}}function ne(E,c){return E.apiBaseUrl&&(c.token||!E.rawBaseUrl)?"api":"raw"}var We=Object.defineProperty,He=(E,c,A)=>c in E?We(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,Me=(E,c,A)=>(He(E,typeof c!="symbol"?c+"":c,A),A);class Xe{constructor(){Me(this,"tokenCache",new Map),Me(this,"isExpired",c=>a.c9.local()>c)}async getOrCreateToken(c,A,$){let fe=this.tokenCache.get(c);if((!fe||this.isExpired(fe.expiresAt))&&(fe=await $(),fe.expiresAt=fe.expiresAt.minus({minutes:10}),this.tokenCache.set(c,fe)),!this.appliesToRepo(fe,A))throw new Error(`The Backstage GitHub application used in the ${c} organization does not have access to a repository with the name ${A}`);return{accessToken:fe.token}}appliesToRepo(c,A){return A===void 0?!0:c.repositories!==void 0?c.repositories.includes(A):!0}}const Ve={Accept:"application/vnd.github.machine-man-preview+json"};class Et{constructor(c,A){Me(this,"appClient"),Me(this,"baseUrl"),Me(this,"baseAuthConfig"),Me(this,"cache",new Xe),Me(this,"allowedInstallationOwners"),this.allowedInstallationOwners=c.allowedInstallationOwners,this.baseUrl=A,this.baseAuthConfig={appId:c.appId,privateKey:c.privateKey.replace(/\\n/gm,`
`)},this.appClient=new ee.E({baseUrl:A,headers:Ve,authStrategy:q.K,auth:this.baseAuthConfig})}async getInstallationCredentials(c,A){var $;return this.allowedInstallationOwners&&!(($=this.allowedInstallationOwners)!=null&&$.includes(c))?{accessToken:void 0}:this.cache.getOrCreateToken(c,A,async()=>{var fe;const{installationId:Ie,suspended:Rt}=await this.getInstallationData(c);if(Rt)throw new Error(`The GitHub application for ${c} is suspended`);const Lt=await this.appClient.apps.createInstallationAccessToken({installation_id:Ie,headers:Ve});let wn;if(Lt.data.repository_selection==="selected"){const Cn=new ee.E({baseUrl:this.baseUrl,auth:Lt.data.token}),Ta=await Cn.paginate(Cn.apps.listReposAccessibleToInstallation);wn=((fe=Ta.repositories)!=null?fe:Ta).map(Ra=>Ra.name)}return{token:Lt.data.token,expiresAt:a.c9.fromISO(Lt.data.expires_at),repositories:wn}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(c){const $=(await this.getInstallations()).find(Ie=>{var Rt;return Ie.account&&"login"in Ie.account&&((Rt=Ie.account.login)==null?void 0:Rt.toLocaleLowerCase("en-US"))===c.toLocaleLowerCase("en-US")});if($)return{installationId:$.id,suspended:!!$.suspended_by};const fe=new Error(`No app installation found for ${c} in ${this.baseAuthConfig.appId}`);throw fe.name="NotFoundError",fe}}class Dt{constructor(c){Me(this,"apps");var A,$;this.apps=($=(A=c.apps)==null?void 0:A.map(fe=>new Et(fe,c.apiBaseUrl)))!=null?$:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(A=>A.getInstallations()))).flat():[]}async getAppToken(c,A){if(this.apps.length===0)return;const $=await Promise.all(this.apps.map(Lt=>Lt.getInstallationCredentials(c,A).then(wn=>({credentials:wn,error:void 0}),wn=>({credentials:void 0,error:wn})))),fe=$.find(Lt=>{var wn;return(wn=Lt.credentials)==null?void 0:wn.accessToken});if(fe)return fe.credentials.accessToken;const Rt=$.map(Lt=>Lt.error).find(Lt=>(Lt==null?void 0:Lt.name)!=="NotFoundError");if(Rt)throw Rt}}const Gt=class{constructor(c,A){this.githubAppCredentialsMux=c,this.token=A}async getCredentials(c){const A=l()(c.url),$=A.owner||A.name,fe=A.owner?A.name:void 0;let Ie="app",Rt=await this.githubAppCredentialsMux.getAppToken($,fe);return Rt||(Ie="token",Rt=this.token),{headers:Rt?{Authorization:`Bearer ${Rt}`}:void 0,token:Rt,type:Ie}}};Me(Gt,"create",E=>new Gt(new Dt(E),E.token));let fn=null;class an{constructor(c){this.providers=c}static fromIntegrations(c){const A=new Map;return c.github.list().forEach($=>{const fe=fn.create($.config);A.set($.config.host,fe)}),new an(A)}async getCredentials(c){const A=new URL(c.url),$=this.providers.get(A.host);if(!$)throw new Error(`There is no GitHub integration that matches ${c.url}. Please add a configuration for an integration.`);return $.getCredentials(c)}}var ta=Object.defineProperty,Mn=(E,c,A)=>c in E?ta(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,Rn=(E,c,A)=>(Mn(E,typeof c!="symbol"?c+"":c,A),A);const Vn=class{constructor(c){this.integrationConfig=c}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return Nn(G(c),"tree")}resolveEditUrl(c){return Nn(c,"edit")}parseRateLimitInfo(c){return{isRateLimited:c.status===429||c.status===403&&c.headers.get("x-ratelimit-remaining")==="0"}}};Rn(Vn,"factory",({config:E})=>{var c;const A=It((c=E.getOptionalConfigArray("integrations.github"))!=null?c:[]);return ie(A.map($=>new Vn($)),$=>$.config.host)});let na=Vn;function Nn(E,c){return E.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(A,$,fe,Ie)=>`//${$}/${fe}/${Ie}/${c}/`)}var qn=Object.defineProperty,ia=(E,c,A)=>c in E?qn(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,_a=(E,c,A)=>(ia(E,typeof c!="symbol"?c+"":c,A),A);const ba=null;class Pa extends na{constructor(c){super(c)}get config(){return super.config}}_a(Pa,"factory",na.factory);const xa=null,ja=null,Da=null,Fa="gitlab.com",lr="https://gitlab.com/api/v4";function rr(E){var c;const A=E.getString("host");let $=E.getOptionalString("apiBaseUrl");const fe=(c=E.getOptionalString("token"))==null?void 0:c.trim();let Ie=E.getOptionalString("baseUrl");if($?$=(0,b.trimEnd)($,"/"):A===Fa&&($=lr),Ie?Ie=(0,b.trimEnd)(Ie,"/"):Ie=`https://${A}`,_e(A)){if(!$||!le($))throw new Error(`Invalid GitLab integration config, '${$}' is not a valid apiBaseUrl`);if(!le(Ie))throw new Error(`Invalid GitLab integration config, '${Ie}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${A}' is not a valid host`);return{host:A,token:fe,apiBaseUrl:$,baseUrl:Ie}}function $a(E){const c=E.map(rr);return c.some(A=>A.host===Fa)||c.push({host:Fa,apiBaseUrl:lr,baseUrl:`https://${Fa}`}),c}function Ja(E){let c="";return E.host!==Fa&&(c=new URL(E.baseUrl).pathname),trimEnd(c,"/")}async function Sr(E,c){const A=await ga(E,c);return or(E,A,c).toString()}function cr(E){const{token:c=""}=E;return{headers:{"PRIVATE-TOKEN":c}}}function or(E,c,A){try{const $=new URL(E),fe=$.pathname.split("/blob/").slice(1).join("/blob/"),[Ie,...Rt]=fe.split("/"),Lt=Ja(A);return $.pathname=[...Lt?[Lt]:[],"api/v4/projects",c,"repository/files",encodeURIComponent(decodeURIComponent(Rt.join("/"))),"raw"].join("/"),$.search=`?ref=${Ie}`,$}catch($){throw new Error(`Incorrect url: ${E}, ${$}`)}}async function ga(E,c){const A=new URL(E);if(!A.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let $=A.pathname.split("/-/blob/")[0].split("/blob/")[0];const fe=Ja(c);fe&&($=$.replace(fe,""));const Ie=new URL(`${A.origin}${fe}/api/v4/projects/${encodeURIComponent($.replace(/^\//,""))}`),Rt=await fetch(Ie.toString(),cr(c)),Lt=await Rt.json();if(!Rt.ok)throw new Error(`GitLab Error '${Lt.error}', ${Lt.error_description}`);return Number(Lt.id)}catch($){throw new Error(`Could not get GitLab project ID for: ${E}, ${$}`)}}var ur=Object.defineProperty,Ha=(E,c,A)=>c in E?ur(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,ir=(E,c,A)=>(Ha(E,typeof c!="symbol"?c+"":c,A),A);const Ga=class{constructor(c){this.integrationConfig=c}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return G(c)}resolveEditUrl(c){return oe(c,"edit")}};ir(Ga,"factory",({config:E})=>{var c;const A=$a((c=E.getOptionalConfigArray("integrations.gitlab"))!=null?c:[]);return ie(A.map($=>new Ga($)),$=>$.config.host)});let Ne=Ga;function oe(E,c){return E.replace(/\/\-\/(blob|tree|edit)\//,`/-/${c}/`)}var it=Object.defineProperty,pn=(E,c,A)=>c in E?it(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,vn=(E,c,A)=>(pn(E,typeof c!="symbol"?c+"":c,A),A);const Fn=class{constructor(c){this.token=c}async getCredentials(c){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};vn(Fn,"create",E=>new Fn(E.token));let va=null;class ka{constructor(c){this.providers=c}static fromIntegrations(c){const A=new Map;return c.gitlab.list().forEach($=>{const fe=va.create($.config);A.set($.config.host,fe)}),new ka(A)}async getCredentials(c){const A=new URL(c.url),$=this.providers.get(A.host);if(!$)throw new Error(`There is no GitLab integration that matches ${c.url}. Please add a configuration for an integration.`);return $.getCredentials(c)}}function La(E){if(!E)return{};if(!E.has("clientEmail")&&!E.has("privateKey"))return{};const c=E.getString("privateKey").split("\\n").join(`
`);return{clientEmail:E.getString("clientEmail"),privateKey:c}}var Sa=Object.defineProperty,Oa=(E,c,A)=>c in E?Sa(E,c,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[c]=A,Ba=(E,c,A)=>(Oa(E,typeof c!="symbol"?c+"":c,A),A);class Qa{constructor(c){Ba(this,"byType"),this.byType=c}static fromConfig(c){return new Qa({awsS3:M.factory({config:c}),azure:me.factory({config:c}),bitbucket:Xt.factory({config:c}),bitbucketCloud:On.factory({config:c}),bitbucketServer:cn.factory({config:c}),gerrit:dn.factory({config:c}),github:na.factory({config:c}),gitlab:Ne.factory({config:c}),gitea:_n.factory({config:c})})}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(c=>c.list())}byUrl(c){let A=Object.values(this.byType).map($=>$.byUrl(c)).filter(Boolean);if(A.length>1){const $=A.filter(fe=>!(fe instanceof Xt));$.length!==0&&(A=$)}return A[0]}byHost(c){return Object.values(this.byType).map(A=>A.byHost(c)).find(Boolean)}resolveUrl(c){const A=this.byUrl(c.base);return A?A.resolveUrl(c):G(c)}resolveEditUrl(c){const A=this.byUrl(c);return A?A.resolveEditUrl(c):c}}},33861:(Dn,Ct,e)=>{"use strict";e.d(Ct,{a:()=>ee,b:()=>q,d:()=>ft,r:()=>r});var s=e(11638),l=e(48821),b=e(14041),_=e(22968),z=e(54917);const r=(0,s.HM)({id:"api-docs"}),q=(0,s.Il)({id:"register-component",optional:!0}),ee=(0,l.c)({id:"plugin.api-docs.config"}),a=b.lazy(()=>Promise.all([e.e(1072),e.e(2216),e.e(2589),e.e(6463)]).then(e.bind(e,86463)).then(k=>({default:k.AsyncApiDefinition}))),he=k=>b.createElement(b.Suspense,{fallback:b.createElement(_.ke,null)},b.createElement(a,{...k})),_e=b.lazy(()=>e.e(1346).then(e.bind(e,71346)).then(k=>({default:k.GraphQlDefinition}))),le=k=>b.createElement(b.Suspense,{fallback:b.createElement(_.ke,null)},b.createElement(_e,{...k})),ie=b.lazy(()=>Promise.all([e.e(1072),e.e(2216),e.e(2248)]).then(e.bind(e,32248)).then(k=>({default:k.OpenApiDefinition}))),G=k=>{var ce;const I=(ce=k.supportedSubmitMethods)==null?void 0:ce.map(h=>h.toLocaleLowerCase());return b.createElement(b.Suspense,{fallback:b.createElement(_.ke,null)},b.createElement(ie,{...k,supportedSubmitMethods:I}))},we=k=>{const ce=(0,z.A)();return b.createElement(_.z7,{customStyle:{backgroundColor:ce.palette.background.default},text:k.definition,language:"protobuf",showCopyCodeButton:!0})},Ce=k=>{const{definition:ce}=k,I=(0,z.A)();return b.createElement(_.z7,{customStyle:{backgroundColor:I.palette.background.default},text:ce,language:"typescript",showCopyCodeButton:!0})};function ft(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:k=>b.createElement(G,{definition:k})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:k=>b.createElement(he,{definition:k})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:k=>b.createElement(le,{definition:k})},{type:"grpc",title:"gRPC",component:k=>b.createElement(we,{definition:k})},{type:"trpc",title:"tRPC",component:k=>b.createElement(Ce,{definition:k})}]}},20440:(Dn,Ct,e)=>{"use strict";e.d(Ct,{Br:()=>q,Io:()=>he,Rf:()=>z,Vw:()=>r,aR:()=>a,hR:()=>_,l:()=>_e,pW:()=>ee});var s=e(33861),l=e(14041),b=e(11638);const _=(0,b.i1)({id:"api-docs",routes:{root:s.r},apis:[(0,b.bW)({api:s.a,deps:{},factory:()=>{const le=(0,s.d)();return{getApiDefinitionWidget:ie=>le.find(G=>G.type===ie.spec.type)}}})],externalRoutes:{registerApi:s.b}}),z=_.provide((0,b.QJ)({name:"ApiExplorerPage",component:()=>e.e(6017).then(e.bind(e,16017)).then(le=>le.ApiExplorerIndexPage),mountPoint:s.r})),r=_.provide((0,b.NC)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(8108).then(e.bind(e,98108)).then(le=>le.ApiDefinitionCard)}})),q=_.provide((0,b.NC)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(9721).then(e.bind(e,29721)).then(le=>le.ConsumedApisCard)}})),ee=_.provide((0,b.NC)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(8589).then(e.bind(e,8589)).then(le=>le.ConsumingComponentsCard)}})),a=_.provide((0,b.NC)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(9721).then(e.bind(e,29721)).then(le=>le.ProvidedApisCard)}})),he=_.provide((0,b.NC)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(8589).then(e.bind(e,8589)).then(le=>le.ProvidingComponentsCard)}})),_e=_.provide((0,b.NC)({name:"EntityHasApisCard",component:{lazy:()=>e.e(9721).then(e.bind(e,29721)).then(le=>le.HasApisCard)}}))},99993:(Dn,Ct,e)=>{"use strict";e.d(Ct,{C4:()=>_,Nf:()=>z,tS:()=>r});var s=e(50585);const l="catalog-entity",b=(0,s.iP)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:l}),_=(0,s.iP)({name:"catalog.entity.create",attributes:{action:"create"}}),z=(0,s.iP)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:l}),r=(0,s.iP)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:l}),q=(0,s.iP)({name:"catalog.location.read",attributes:{action:"read"}}),ee=(0,s.iP)({name:"catalog.location.create",attributes:{action:"create"}}),a=(0,s.iP)({name:"catalog.location.delete",attributes:{action:"delete"}}),he=[b,_,z,r,q,ee,a]},6906:(Dn,Ct,e)=>{"use strict";e.d(Ct,{A:()=>h,D:()=>M,E:()=>De,a:()=>X,c:()=>Ee});var s=e(29835),l=e(22968),b=e(11638),_=e(48821),z=e(78467),r=e(58837),q=e(54917),ee=e(53373),a=e.n(ee),he=e(14041),_e=e(22249),le=e(92651),ie=e(10437),G=e(22771),we=e(87290);const Ce=(0,_e.A)(p=>({text:{fill:p.palette.textContrast},secondary:{fill:p.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function ft({edge:{relations:p}}){const j=Ce();return he.createElement("text",{className:j.text,textAnchor:"middle"},p.map((J,ue)=>he.createElement("tspan",{key:J,className:a()(ue>0&&j.secondary)},ue>0&&he.createElement("tspan",null," / "),J)))}function k({kind:p,...j}){var J;const Te=(J=(0,b.nm)().getSystemIcon(`kind:${p.toLocaleLowerCase("en-US")}`))!=null?J:ie.A;return he.createElement(Te,{...j})}const ce=(0,r.A)(p=>({node:{fill:p.palette.grey[300],stroke:p.palette.grey[300],"&.primary":{fill:p.palette.primary.light,stroke:p.palette.primary.light},"&.secondary":{fill:p.palette.secondary.light,stroke:p.palette.secondary.light}},text:{fill:p.palette.getContrastText(p.palette.grey[300]),"&.primary":{fill:p.palette.primary.contrastText},"&.secondary":{fill:p.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function I({node:{id:p,entity:j,color:J="default",focused:ue,onClick:Te}}){const dt=ce(),[Ge,rt]=(0,he.useState)(0),[pt,qe]=(0,he.useState)(0),st=(0,b.nm)(),Oe=(0,he.useRef)(null);(0,he.useLayoutEffect)(()=>{if(Oe.current){let{height:S,width:R}=Oe.current.getBBox();S=Math.round(S),R=Math.round(R),(S!==pt||R!==Ge)&&(rt(R),qe(S))}},[Ge,pt]);const{kind:je,metadata:{name:$e,namespace:vt=s.oQ,title:ht}}=j,Ft=st.getSystemIcon(`kind:${je.toLocaleLowerCase("en-US")}`),me=10,ke=pt,bt=Ft?ke+me:0,Yt=bt+Ge+me*2,yt=pt+me*2,_t=ht!=null?ht:je&&$e&&vt?(0,le.SE)({kind:je,name:$e,namespace:vt}):p;return he.createElement("g",{onClick:Te,className:a()(Te&&dt.clickable)},he.createElement("rect",{className:a()(dt.node,J==="primary"&&"primary",J==="secondary"&&"secondary"),width:Yt,height:yt,rx:10}),Ft&&he.createElement(k,{kind:je,y:me,x:me,width:ke,height:ke,className:a()(dt.text,ue&&"focused",J==="primary"&&"primary",J==="secondary"&&"secondary")}),he.createElement("text",{ref:Oe,className:a()(dt.text,ue&&"focused",J==="primary"&&"primary",J==="secondary"&&"secondary"),y:yt/2,x:bt+(Ge+me*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},_t))}const h=[[s.L8,s.vv],[s.Ey,s.fO],[s.IB,s.ZD],[s.sA,s.jn],[s.Kx,s.Qz],[s.zj,s.u0],[s.nC,s.fT]];var M=(p=>(p.TOP_BOTTOM="TB",p.BOTTOM_TOP="BT",p.LEFT_RIGHT="LR",p.RIGHT_LEFT="RL",p))(M||{});function C(){const p=(0,_.u)(le.vp),j=(0,he.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[J,ue]=(0,he.useState)({}),Te=(0,he.useCallback)(()=>{const{cachedEntities:st,requestedEntities:Oe}=j.current,je={};Oe.forEach($e=>{const vt=st.get($e);vt&&(je[$e]=vt)}),ue(je)},[j,ue]),[dt,Ge]=(0,we.A)(async()=>{const{requestedEntities:st,cachedEntities:Oe}=j.current,je=Array.from(st).filter(vt=>!Oe.has(vt));if(je.length===0){Te();return}const{items:$e}=await p.getEntitiesByRefs({entityRefs:je});$e.forEach(vt=>{if(vt){const ht=(0,s.U2)(vt);Oe.set(ht,vt)}}),Te()},[j,Te]),{loading:rt,error:pt}=dt,qe=(0,he.useCallback)(st=>{const Oe=new Set(st),{requestedEntities:je}=j.current;(Oe.size!==je.size||Array.from(Oe).some($e=>!je.has($e)))&&(j.current.requestedEntities=Oe,Ge(),Te())},[j,Ge,Te]);return{entities:J,loading:rt,error:pt,requestEntities:qe}}function v({rootEntityRefs:p,filter:{maxDepth:j=Number.POSITIVE_INFINITY,relations:J,kinds:ue}={}}){const{entities:Te,loading:dt,error:Ge,requestEntities:rt}=C();return(0,he.useEffect)(()=>{const pt=new Set([...p]),qe=new Set;let st=[...p],Oe=0;for(;st.length>0&&(!isFinite(j)||Oe<j);){const je=st;for(st=[];je.length>0;){const $e=je.shift(),vt=Te[$e];if(qe.add($e),vt&&vt.relations)for(const ht of vt.relations)(!J||J.includes(ht.type))&&(!ue||ue.some(Ft=>ht.targetRef.startsWith(`${Ft.toLocaleLowerCase("en-US")}:`)))&&(qe.has(ht.targetRef)||(st.push(ht.targetRef),pt.add(ht.targetRef)))}++Oe}rt([...pt])},[Te,p,j,J,ue,rt]),{entities:Te,loading:dt,error:Ge}}function N({rootEntityRefs:p,maxDepth:j=Number.POSITIVE_INFINITY,unidirectional:J=!0,mergeRelations:ue=!0,kinds:Te,relations:dt,onNodeClick:Ge,relationPairs:rt=h}){const[pt,qe]=(0,he.useState)({}),{entities:st,loading:Oe,error:je}=v({rootEntityRefs:p,filter:{maxDepth:j,kinds:Te,relations:dt}});return(0,G.A)(()=>{var $e;if(!st||Object.keys(st).length===0){qe({});return}const vt=Object.entries(st).map(([ke,bt])=>{const Yt=p.includes(ke),yt={id:ke,entity:bt,focused:Yt,color:Yt?"secondary":"primary",kind:bt.kind,name:bt.metadata.name,namespace:bt.metadata.namespace||s.oQ,title:bt.metadata.title,spec:bt.spec};return Ge&&(yt.onClick=_t=>Ge(yt,_t)),yt}),ht=[],Ft=new Set,me=[...p];for(;me.length>0;){const ke=me.pop(),bt=st[ke];Ft.add(ke),bt&&(($e=bt==null?void 0:bt.relations)==null||$e.forEach(Yt=>{var yt;if(st[Yt.targetRef]&&!(dt&&!dt.includes(Yt.type))&&!(Te&&!Te.some(_t=>Yt.targetRef.startsWith(`${_t.toLocaleLowerCase("en-US")}:`)))){if(!J||!Ft.has(Yt.targetRef))if(ue){const _t=(yt=rt.find(([R,W])=>R===Yt.type||W===Yt.type))!=null?yt:[Yt.type],[S]=_t;ht.push({from:S===Yt.type?ke:Yt.targetRef,to:S===Yt.type?Yt.targetRef:ke,relations:_t,label:"visible"})}else ht.push({from:ke,to:Yt.targetRef,relations:[Yt.type],label:"visible"});Ft.has(Yt.targetRef)||(me.push(Yt.targetRef),Ft.add(Yt.targetRef))}}))}qe({nodes:vt,edges:ht})},100,[st,p,Te,dt,J,ue,Ge,rt]),{loading:Oe,error:je,...pt}}const Q=(0,r.A)(p=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${p.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),De=p=>{const{rootEntityNames:j,maxDepth:J=2,unidirectional:ue=!0,mergeRelations:Te=!0,kinds:dt,relations:Ge,direction:rt=M.LEFT_RIGHT,onNodeClick:pt,relationPairs:qe=h,className:st,zoom:Oe="enabled",renderNode:je,renderLabel:$e,curve:vt,showArrowHeads:ht}=p,Ft=(0,q.A)(),me=Q(),ke=(0,he.useMemo)(()=>(Array.isArray(j)?j:[j]).map(R=>(0,s.U2)(R)),[j]),bt=(0,_.u)(_.r),{loading:Yt,error:yt,nodes:_t,edges:S}=N({rootEntityRefs:ke,maxDepth:J,unidirectional:ue,mergeRelations:Te,kinds:dt,relations:Ge,onNodeClick:pt,relationPairs:qe});return(0,he.useEffect)(()=>{yt&&bt.post(yt)},[bt,yt]),he.createElement("div",{className:a()(me.container,st)},Yt&&he.createElement(z.A,{className:me.progress}),_t&&S&&he.createElement(l.wB,{nodes:_t,edges:S,renderNode:je||I,renderLabel:$e||ft,direction:rt,className:me.graph,paddingX:Ft.spacing(4),paddingY:Ft.spacing(4),labelPosition:l.DT.LabelPosition.RIGHT,labelOffset:Ft.spacing(1),zoom:Oe,curve:vt,showArrowHeads:ht}))},Ee=(0,b.HM)({id:"catalog-graph"}),X=(0,b.Il)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0})},18638:(Dn,Ct,e)=>{"use strict";e.d(Ct,{N9:()=>ee,NW:()=>q});var s=e(6906),l=e(11638),b=e(53373),_=e.n(b),z=e(14041);const r=(0,l.i1)({id:"catalog-graph",routes:{catalogGraph:s.c},externalRoutes:{catalogEntity:s.a}}),q=r.provide((0,l.NC)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(9957).then(e.bind(e,49957)).then(a=>a.CatalogGraphCard)}})),ee=r.provide((0,l.QJ)({name:"CatalogGraphPage",component:()=>e.e(6605).then(e.bind(e,6605)).then(a=>a.CatalogGraphPage),mountPoint:s.c}))},39327:(Dn,Ct,e)=>{"use strict";e.d(Ct,{C:()=>M,a:()=>he,c:()=>h,d:()=>le,g:()=>ie});var s=e(48821),l=e(11638),b=e(33478),_=e(92651),z=e(49863),r=e(93584),q=e(51419),ee=e(52536),a=e.n(ee);const he=(0,s.c)({id:"plugin.catalog-import.service"}),_e=(C,v)=>{const N=C.github.byUrl(v);if(!N)return;const{name:Q,owner:De}=a()(v);return{repo:Q,owner:De,githubIntegrationConfig:N.config}};function le(C){const{ref:v,...N}=C;return{inputRef:v,...N}}function ie(C){var v;return(v=C.getOptionalString("catalog.import.entityFilename"))!=null?v:"catalog-info.yaml"}function G(C){var v;return(v=C.getOptionalString("catalog.import.pullRequestBranchName"))!=null?v:"backstage-integration"}var we=Object.defineProperty,Ce=(C,v,N)=>v in C?we(C,v,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[v]=N,ft=(C,v,N)=>(Ce(C,typeof v!="symbol"?v+"":v,N),N);class k{constructor(v){ft(this,"discoveryApi"),ft(this,"identityApi"),ft(this,"scmAuthApi"),ft(this,"scmIntegrationsApi"),ft(this,"catalogApi"),ft(this,"configApi"),this.discoveryApi=v.discoveryApi,this.scmAuthApi=v.scmAuthApi,this.identityApi=v.identityApi,this.scmIntegrationsApi=v.scmIntegrationsApi,this.catalogApi=v.catalogApi,this.configApi=v.configApi}async analyzeUrl(v){var N;if(new URL(v).pathname.match(/\.ya?ml$/)||(N=new URL(v).searchParams.get("path"))!=null&&N.match(/.ya?ml$/)){const Ee=await this.catalogApi.addLocation({type:"url",target:v,dryRun:!0});return{type:"locations",locations:[{exists:Ee.exists,target:Ee.location.target,entities:Ee.entities.map(X=>{var p;return{kind:X.kind,namespace:(p=X.metadata.namespace)!=null?p:"default",name:X.metadata.name}})}]}}if(!_e(this.scmIntegrationsApi,v)){const Ee=this.scmIntegrationsApi.byUrl(v),X=ie(this.configApi);throw Ee?new Error(`The ${Ee.title} integration only supports full URLs to ${X} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${X} file instead.`)}const De=await this.analyzeLocation({repo:v});if(De.existingEntityFiles.length>0){const Ee=De.existingEntityFiles.reduce((X,p)=>{var j;return X[p.location.target]={target:p.location.target,exists:p.isRegistered,entities:[...p.location.target in X?X[p.location.target].entities:[],{name:p.entity.metadata.name,namespace:(j=p.entity.metadata.namespace)!=null?j:"default",kind:p.entity.kind}]},X},{});return{type:"locations",locations:Object.values(Ee)}}return{type:"repository",integrationType:"github",url:v,generatedEntities:De.generateEntities.map(Ee=>Ee.entity)}}async preparePullRequest(){var v;const N=(v=this.configApi.getOptionalString("app.title"))!=null?v:"Backstage",Q=this.configApi.getString("app.baseUrl");return{title:`Add ${ie(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${N} software catalog](${Q}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(v){const{repositoryUrl:N,fileContent:Q,title:De,body:Ee}=v,X=q.Ay.parse(Q),p=await this.catalogApi.validateEntity(X,`url:${N}`);if(!p.valid)throw new Error(p.errors[0].message);const j=_e(this.scmIntegrationsApi,N);if(j)return await this.submitGitHubPrToRepo({...j,repositoryUrl:N,fileContent:Q,title:De,body:Ee});throw new Error("unimplemented!")}async analyzeLocation(v){const{token:N}=await this.identityApi.getCredentials(),Q=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...N&&{Authorization:`Bearer ${N}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:v.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(Ee=>{throw new Error(`Failed to generate entity definitions, ${Ee.message}`)});if(!Q.ok)throw new Error(`Failed to generate entity definitions. Received http response ${Q.status}: ${Q.statusText}`);return await Q.json()}async submitGitHubPrToRepo(v){const{owner:N,repo:Q,title:De,body:Ee,fileContent:X,repositoryUrl:p,githubIntegrationConfig:j}=v,{token:J}=await this.scmAuthApi.getCredentials({url:p,additionalScope:{repoWrite:!0}}),ue=new z.E({auth:J,baseUrl:j.apiBaseUrl}),Te=G(this.configApi),dt=ie(this.configApi),Ge=await ue.repos.get({owner:N,repo:Q}).catch(qe=>{throw new Error(ce("Couldn't fetch repo data",qe))}),rt=await ue.git.getRef({owner:N,repo:Q,ref:`heads/${Ge.data.default_branch}`}).catch(qe=>{throw new Error(ce("Couldn't fetch default branch data",qe))});return await ue.git.createRef({owner:N,repo:Q,ref:`refs/heads/${Te}`,sha:rt.data.object.sha}).catch(qe=>{throw new Error(ce(`Couldn't create a new branch with name '${Te}'`,qe))}),await ue.repos.createOrUpdateFileContents({owner:N,repo:Q,path:dt,message:De,content:r.o4.encode(X),branch:Te}).catch(qe=>{throw new Error(ce(`Couldn't create a commit with ${dt} file added`,qe))}),{link:(await ue.pulls.create({owner:N,repo:Q,title:De,head:Te,body:Ee,base:Ge.data.default_branch}).catch(qe=>{throw new Error(ce(`Couldn't create a pull request for ${Te} branch`,qe))})).data.html_url,location:`https://${j.host}/${N}/${Q}/blob/${Ge.data.default_branch}/${dt}`}}}function ce(C,v){return`${C}, received http response status code ${v.status}: ${v.message}`}const I=(0,l.HM)({id:"catalog-import"}),h=(0,l.i1)({id:"catalog-import",apis:[(0,l.bW)({api:he,deps:{discoveryApi:s.q,scmAuthApi:b.$J,identityApi:s.t,scmIntegrationsApi:b.YT,catalogApi:_.vp,configApi:s.p},factory:({discoveryApi:C,scmAuthApi:v,identityApi:N,scmIntegrationsApi:Q,catalogApi:De,configApi:Ee})=>new k({discoveryApi:C,scmAuthApi:v,scmIntegrationsApi:Q,identityApi:N,catalogApi:De,configApi:Ee})})],routes:{importPage:I}}),M=h.provide((0,l.QJ)({name:"CatalogImportPage",component:()=>e.e(5383).then(e.bind(e,35383)).then(C=>C.ImportPage),mountPoint:I}))},90749:(Dn,Ct,e)=>{"use strict";e.d(Ct,{Az:()=>kn});var s=e(97388),l=e(14041),b=e(48821),_=e(11638),z=e(46195),r=e(63177);const q=(0,s.tK)("analytics-context"),ee=()=>{const m=useContext(q);if(m===void 0)return{pluginId:"app",extensionId:"app"};const w=m.atVersion(1);if(w===void 0)throw new Error("No context found for version 1.");return w},a=m=>{const{attributes:w,children:K}=m,D={...ee(),...w},U=createVersionedValueMap({1:D});return React.createElement(q.Provider,{value:U},K)},he=(0,b.c)({id:"core.app-tree"}),_e=(0,b.c)({id:"core.components"});function le(m){return(0,b.u)(_e).getComponent(m)}const ie=(0,b.c)({id:"core.icons"}),G=(0,b.c)({id:"core.route-resolution"}),we=(0,b.c)({id:"core.analytics"}),Ce=(0,s.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),ft="_ROUTABLE-EXTENSION-RENDERED";class k{constructor(w,K={pluginId:"root",extensionId:"App"}){this.analyticsApi=w,this.context=K,Ce.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{Ce.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...Ce.mostRecentGatheredNavigation,...Ce.mostRecentRoutableExtensionRender}),Ce.mostRecentGatheredNavigation=void 0,Ce.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),Ce.beforeUnloadRegistered=!0)}setContext(w){this.context=w}captureEvent(w,K,{value:re,attributes:D}={}){const U=this.context;if(w===ft){Ce.mostRecentGatheredNavigation&&(Ce.mostRecentRoutableExtensionRender={context:{...U,extensionId:"App"}});return}if(Ce.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...Ce.mostRecentGatheredNavigation,...Ce.mostRecentRoutableExtensionRender})}catch(Y){console.warn("Error during analytics event capture. %o",Y)}Ce.mostRecentGatheredNavigation=void 0,Ce.mostRecentRoutableExtensionRender=void 0}if(w==="navigate"&&U.pluginId==="root"){Ce.mostRecentGatheredNavigation={action:w,subject:K,value:re,attributes:D,context:U};return}try{this.analyticsApi.captureEvent({action:w,subject:K,value:re,attributes:D,context:U})}catch(Y){console.warn("Error during analytics event capture. %o",Y)}}}function ce(){try{return useApi(we)}catch(m){if(m.name==="NotImplementedError")return{captureEvent:()=>{}};throw m}}function I(){const m=useRef(null),w=ee(),K=ce();function re(){return m.current===null&&(m.current=new k(K)),m.current}const D=re();return D.setContext(w),D}var h=Object.defineProperty,M=(m,w,K)=>w in m?h(m,w,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[w]=K,C=(m,w,K)=>(M(m,typeof w!="symbol"?w+"":w,K),K);class v extends l.Component{constructor(){super(...arguments),C(this,"state",{error:void 0}),C(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(w){return{error:w}}render(){const{error:w}=this.state,{plugin:K,children:re,Fallback:D}=this.props;return w?l.createElement(D,{plugin:K,error:w,resetError:this.handleErrorReset}):re}}(0,s.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}));const N="_ROUTABLE-EXTENSION-RENDERED";function Q(m){const{id:w}=m;return{id:w,toString(){return`ComponentRef{id=${w}}`}}}const De=Q({id:"core.components.progress"}),Ee=Q({id:"core.components.notFoundErrorPage"}),X=Q({id:"core.components.errorBoundaryFallback"}),p={progress:De,notFoundErrorPage:Ee,errorBoundaryFallback:X},j=m=>{const{disableTracking:w,children:K}=m,re=(0,_.st)();return(0,l.useEffect)(()=>{w||re.captureEvent(N,"")},[re,w]),l.createElement(l.Fragment,null,K)};function J(m){var w,K;const{node:re,routable:D,children:U}=m,Y=re.spec.source,Se=le(p.progress),Re=le(p.errorBoundaryFallback),ut={extensionId:re.spec.id,pluginId:(K=(w=re.spec.source)==null?void 0:w.id)!=null?K:"app"};return l.createElement(l.Suspense,{fallback:l.createElement(Se,null)},l.createElement(v,{plugin:Y,Fallback:Re},l.createElement(_.Ig,{attributes:ut},l.createElement(j,{disableTracking:!D},U))))}function ue(m){return{id:m,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}},toString(){const w=!!this.config.optional;return`ExtensionDataRef{id=${m},optional=${w}}`}}}const Te={reactElement:ue("core.reactElement"),routePath:ue("core.routing.path"),routeRef:ue("core.routing.ref")};function dt(m){const w=m;if(w.$$type!=="@backstage/ExtensionDefinition")throw new Error(`Invalid extension definition instance, bad type '${w.$$type}'`);if(w.version!=="v1")throw new Error(`Invalid extension definition instance, bad version '${w.version}'`);return w}function Ge(m){var w,K;return{$$type:"@backstage/ExtensionDefinition",version:"v1",kind:m.kind,namespace:m.namespace,name:m.name,attachTo:m.attachTo,disabled:(w=m.disabled)!=null?w:!1,inputs:(K=m.inputs)!=null?K:{},output:m.output,configSchema:m.configSchema,factory({inputs:re,...D}){return m.factory({inputs:re,...D})},toString(){const re=[];return m.kind&&re.push(`kind=${m.kind}`),m.namespace&&re.push(`namespace=${m.namespace}`),m.name&&re.push(`name=${m.name}`),re.push(`attachTo=${m.attachTo.id}@${m.attachTo.input}`),`ExtensionDefinition{${re.join(",")}}`}}}function rt(m,w){return{$$type:"@backstage/ExtensionInput",extensionData:m,config:{singleton:!!(w!=null&&w.singleton),optional:!!(w!=null&&w.optional)}}}function pt(m,w){var K;const re=dt(m),{name:D,kind:U,namespace:Y,...Se}=re,Re=(K=re.namespace)!=null?K:w==null?void 0:w.namespace,ut=D&&Re?`${Re}/${D}`:Re||D;if(!ut)throw new Error(`Extension must declare an explicit namespace or name as it could not be resolved from context, kind=${U} namespace=${Re} name=${D}`);const St=U?`${U}:${ut}`:ut;return{...Se,$$type:"@backstage/Extension",version:"v1",id:St,toString(){return`Extension{id=${St}}`}}}function qe(m){var w,K,re,D;const U=((w=m.extensions)!=null?w:[]).map(Se=>pt(Se,{namespace:m.id})),Y=U.map(Se=>Se.id);if(Y.length!==new Set(Y).size){const Se=Array.from(new Set(Y.filter((Re,ut)=>Y.indexOf(Re)!==ut)));throw new Error(`Plugin '${m.id}' provided duplicate extensions: ${Se.join(", ")}`)}return{$$type:"@backstage/BackstagePlugin",version:"v1",id:m.id,routes:(K=m.routes)!=null?K:{},externalRoutes:(re=m.externalRoutes)!=null?re:{},featureFlags:(D=m.featureFlags)!=null?D:[],extensions:U,toString(){return`Plugin{id=${m.id}}`}}}function st(m){var w;const K=m.extensions.map(D=>pt(D)),re=(w=m.featureFlags)!=null?w:[];return{$$type:"@backstage/ExtensionOverrides",version:"v1",extensions:K,featureFlags:re,toString(){const D=K.map(String).join(","),U=re.map(Y=>Y.name).join(",");return`ExtensionOverrides{extensions=[${D}],featureFlags=[${U}]}`}}}function Oe(m){const{factory:w,configSchema:K,inputs:re}=m,D="api"in m?m.api:w.api;return Ge({kind:"api",namespace:D.id,attachTo:{id:"app",input:"apis"},inputs:re,configSchema:K,output:{api:Oe.factoryDataRef},factory({config:U,inputs:Y}){return typeof w=="function"?{api:w({config:U,inputs:Y})}:{api:w}}})}(m=>{m.factoryDataRef=ue("core.api.factory")})(Oe||(Oe={}));function je(m){var w;return Ge({kind:"app-root-element",namespace:m.namespace,name:m.name,attachTo:(w=m.attachTo)!=null?w:{id:"app/root",input:"elements"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{element:Te.reactElement},factory({inputs:K,config:re}){return{element:typeof m.element=="function"?m.element({inputs:K,config:re}):m.element}}})}function $e(m){var w;return Ge({kind:"app-root-wrapper",namespace:m.namespace,name:m.name,attachTo:(w=m.attachTo)!=null?w:{id:"app/root",input:"wrappers"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{component:$e.componentDataRef},factory({inputs:K,config:re}){return{component:U=>l.createElement(m.Component,{inputs:K,config:re},U.children)}}})}(m=>{m.componentDataRef=ue("app.root.wrapper")})($e||($e={}));function vt(m){var w;return Ge({kind:"app-router-component",namespace:m.namespace,name:m.name,attachTo:(w=m.attachTo)!=null?w:{id:"app/root",input:"router"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{component:vt.componentDataRef},factory({inputs:K,config:re}){return{component:U=>l.createElement(m.Component,{inputs:K,config:re},U.children)}}})}(m=>{m.componentDataRef=ue("app.router.wrapper")})(vt||(vt={}));function ht(m){const w=m(z.z);return{parse:K=>{const re=w.safeParse(K);if(re.success)return re.data;throw new Error(re.error.issues.map(Ft).join("; "))},schema:(0,r.Ay)(w)}}function Ft(m){if(m.code==="invalid_union")return Ft(m.unionErrors[0].issues[0]);let w=m.message;return w==="Required"&&(w="Missing required value"),m.path.length&&(w+=` at '${m.path.join(".")}'`),w}function me(m){var w;const K="configSchema"in m?m.configSchema:ht(re=>re.object({path:re.string().default(m.defaultPath)}));return Ge({kind:"page",namespace:m.namespace,name:m.name,attachTo:(w=m.attachTo)!=null?w:{id:"app/routes",input:"routes"},configSchema:K,inputs:m.inputs,disabled:m.disabled,output:{element:Te.reactElement,path:Te.routePath,routeRef:Te.routeRef.optional()},factory({config:re,inputs:D,node:U}){const Y=lazy(()=>m.loader({config:re,inputs:D}).then(Se=>({default:()=>Se})));return{path:re.path,routeRef:m.routeRef,element:React.createElement(J,{node:U,routable:!0},React.createElement(Y,null))}}})}function ke(m){const{routeRef:w,title:K,icon:re,namespace:D,name:U}=m;return Ge({namespace:D,name:U,kind:"nav-item",attachTo:{id:"app/nav",input:"items"},configSchema:ht(Y=>Y.object({title:Y.string().default(K)})),output:{navTarget:ke.targetDataRef},factory:({config:Y})=>({navTarget:{title:Y.title,icon:re,routeRef:w}})})}(m=>{m.targetDataRef=ue("core.nav-item.target")})(ke||(ke={}));function bt(m){const{logoIcon:w,logoFull:K}=m;return Ge({kind:"nav-logo",name:m==null?void 0:m.name,namespace:m==null?void 0:m.namespace,attachTo:{id:"app/nav",input:"logos"},output:{logos:bt.logoElementsDataRef},factory:()=>({logos:{logoIcon:w,logoFull:K}})})}(m=>{m.logoElementsDataRef=ue("core.nav-logo.logo-elements")})(bt||(bt={}));function Yt(m){var w;return Ge({kind:"sign-in-page",namespace:m==null?void 0:m.namespace,name:m==null?void 0:m.name,attachTo:(w=m.attachTo)!=null?w:{id:"app/root",input:"signInPage"},configSchema:m.configSchema,inputs:m.inputs,disabled:m.disabled,output:{component:Yt.componentDataRef},factory({config:K,inputs:re,node:D}){const U=(0,l.lazy)(()=>m.loader({config:K,inputs:re}).then(Y=>({default:Y})));return{component:Y=>l.createElement(J,{node:D,routable:!0},l.createElement(U,{...Y}))}}})}(m=>{m.componentDataRef=ue("core.sign-in-page.component")})(Yt||(Yt={}));function yt(m){return Ge({kind:"theme",namespace:"app",name:m.id,attachTo:{id:"app",input:"themes"},output:{theme:yt.themeDataRef},factory:()=>({theme:m})})}(m=>{m.themeDataRef=ue("core.theme.theme")})(yt||(yt={}));function _t(m){return Ge({kind:"component",namespace:m.ref.id,name:m.name,attachTo:{id:"app",input:"components"},inputs:m.inputs,disabled:m.disabled,configSchema:m.configSchema,output:{component:_t.componentDataRef},factory({config:w,inputs:K}){if("sync"in m.loader)return{component:{ref:m.ref,impl:m.loader.sync({config:w,inputs:K})}};const re=m.loader.lazy,D=(0,l.lazy)(()=>re({config:w,inputs:K}).then(U=>({default:U})));return{component:{ref:m.ref,impl:D}}}})}(m=>{m.componentDataRef=ue("core.component.component")})(_t||(_t={}));function S(m){return Ge({kind:"translation",namespace:m.resource.id,name:m.name,attachTo:{id:"app",input:"translations"},output:{resource:S.translationDataRef},factory:()=>({resource:m.resource})})}(m=>{m.translationDataRef=ue("core.translation.translation")})(S||(S={}));const R="eHgtF5hmbrXyiEvo";function W(m=Error){const{stack:w}=new m(R);if(!w)return"<unknown>";const K=w.includes(R)?w.indexOf(`
`)+1:0,re=w.indexOf(`
`,w.indexOf(`
`,K)+1)+1,D=w.indexOf(`
`,re),U=w.substring(re,D).trim();return U?U.includes("(")?U.substring(U.indexOf("(")+1,U.indexOf(")")):U.includes("@")?U.substring(U.indexOf("@")+1):U:"unknown"}var Z=Object.defineProperty,Pe=(m,w,K)=>w in m?Z(m,w,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[w]=K,Ue=(m,w,K)=>(Pe(m,typeof w!="symbol"?w+"":w,K),K),lt=(m,w,K)=>{if(!w.has(m))throw TypeError("Cannot "+K)},et=(m,w,K)=>(lt(m,w,"read from private field"),K?K.call(m):w.get(m)),Je=(m,w,K)=>{if(w.has(m))throw TypeError("Cannot add the same private member more than once");w instanceof WeakSet?w.add(m):w.set(m,K)},Wt=(m,w,K,re)=>(lt(m,w,"write to private field"),re?re.call(m,K):w.set(m,K),K),tn,Ut,mt,Xt,on;function ln(m){const w=m;if(w.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${w.$$type}'`);return w}class qt{constructor(w=[],K){this.params=w,Je(this,Xt),Ue(this,"$$type","@backstage/RouteRef"),Ue(this,"version","v1"),Je(this,tn,void 0),Je(this,Ut,void 0),Je(this,mt,void 0),Wt(this,Ut,w),Wt(this,mt,K)}getParams(){return et(this,Ut)}getDescription(){return et(this,tn)?et(this,tn):`created at '${et(this,mt)}'`}setId(w){if(!w)throw new Error(`${et(this,Xt,on)} id must be a non-empty string`);if(et(this,tn))throw new Error(`${et(this,Xt,on)} was referenced twice as both '${et(this,tn)}' and '${w}'`);Wt(this,tn,w)}toString(){return`${et(this,Xt,on)}{${this.getDescription()}}`}}tn=new WeakMap,Ut=new WeakMap,mt=new WeakMap,Xt=new WeakSet,on=function(){return this.$$type.slice(11)};function ve(m){return new qt(m==null?void 0:m.params,W())}var Qe=Object.defineProperty,Kt=(m,w,K)=>w in m?Qe(m,w,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[w]=K,Vt=(m,w,K)=>(Kt(m,typeof w!="symbol"?w+"":w,K),K),zt=(m,w,K)=>{if(!w.has(m))throw TypeError("Cannot "+K)},Bt=(m,w,K)=>(zt(m,w,"read from private field"),K?K.call(m):w.get(m)),Ln=(m,w,K)=>{if(w.has(m))throw TypeError("Cannot add the same private member more than once");w instanceof WeakSet?w.add(m):w.set(m,K)},mn=(m,w,K,re)=>(zt(m,w,"write to private field"),re?re.call(m,K):w.set(m,K),K),nn,On;const nt=/^\w+$/;class gt{constructor(w,K,re){this.path=w,Vt(this,"$$type","@backstage/SubRouteRef"),Vt(this,"version","v1"),Ln(this,nn,void 0),Ln(this,On,void 0),mn(this,nn,K),mn(this,On,re)}getParams(){return Bt(this,nn)}getParent(){return Bt(this,On)}getDescription(){const w=ln(Bt(this,On));return`at ${this.path} with parent ${w.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}nn=new WeakMap,On=new WeakMap;function Tt(m){const{path:w,parent:K}=m,D=ln(K).getParams(),U=w.split("/").filter(Re=>Re.startsWith(":")).map(Re=>Re.substring(1)),Y=[...D,...U];if(D.some(Re=>U.includes(Re)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!w.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${w}'`);if(w.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${w}'`);for(const Re of U)if(!nt.test(Re))throw new Error(`SubRouteRef path has invalid param, got '${Re}'`);return new gt(w,Y,K)}var ot=Object.defineProperty,Ze=(m,w,K)=>w in m?ot(m,w,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[w]=K,V=(m,w,K)=>(Ze(m,typeof w!="symbol"?w+"":w,K),K);class de extends qt{constructor(w,K=[],re,D){super(K,D),this.optional=w,this.params=K,this.defaultTarget=re,V(this,"$$type","@backstage/ExternalRouteRef")}getDefaultTarget(){return this.defaultTarget}}function ge(m){return new de(!!(m!=null&&m.optional),m==null?void 0:m.params,m==null?void 0:m.defaultTarget,W())}function Pt(m){const{pathname:w}=useLocation(),K=useApi(G),re=useMemo(()=>K.resolve(m,{sourcePath:w}),[K,m,w]),D="optional"in m&&m.optional;if(!re&&!D)throw new Error(`No path for ${m}`);return re}function xt(m){return useParams()}var cn=e(29835),An=e(17899),Bn=e(2069);function $n(m,w){const K=new Set([...getEntityRelations(m,RELATION_MEMBER_OF,{kind:"group"}),...m?[getCompoundEntityRef(m)]:[]].map(stringifyEntityRef)),re=getEntityRelations(w,RELATION_OWNED_BY).map(stringifyEntityRef);for(const D of re)if(K.has(D))return!0;return!1}function kn(m){const{entity:w,loading:K,error:re}=(0,Bn.a)(),{allowed:D,loading:U,error:Y}=(0,An.JT)({permission:m,resourceRef:w?(0,cn.U2)(w):void 0});return K||U?{loading:!0,allowed:!1}:re?{loading:!1,allowed:!1,error:re}:{loading:!1,allowed:D,error:Y}}const bn={entityContentTitle:ue("catalog.entity-content-title"),entityFilterFunction:ue("catalog.entity-filter-function"),entityFilterExpression:ue("catalog.entity-filter-expression")};function jn(m){var w,K;const re="configSchema"in m?m.configSchema:createSchemaFromZod(D=>D.object({filter:D.string().optional()}));return createExtension({kind:"entity-card",namespace:m.namespace,name:m.name,attachTo:(w=m.attachTo)!=null?w:{id:"entity-content:catalog/overview",input:"cards"},disabled:(K=m.disabled)!=null?K:!0,output:{element:coreExtensionData.reactElement,filterFunction:bn.entityFilterFunction.optional(),filterExpression:bn.entityFilterExpression.optional()},inputs:m.inputs,configSchema:re,factory({config:D,inputs:U,node:Y}){const Se=lazy(()=>m.loader({inputs:U,config:D}).then(Re=>({default:()=>Re})));return{element:React.createElement(ExtensionBoundary,{node:Y},React.createElement(Se,null)),...ct({config:D,options:m})}}})}function ra(m){var w,K;return createExtension({kind:"entity-content",namespace:m.namespace,name:m.name,attachTo:(w=m.attachTo)!=null?w:{id:"page:catalog/entity",input:"contents"},disabled:(K=m.disabled)!=null?K:!0,output:{element:coreExtensionData.reactElement,path:coreExtensionData.routePath,routeRef:coreExtensionData.routeRef.optional(),title:bn.entityContentTitle,filterFunction:bn.entityFilterFunction.optional(),filterExpression:bn.entityFilterExpression.optional()},inputs:m.inputs,configSchema:createSchemaFromZod(re=>re.object({path:re.string().default(m.defaultPath),title:re.string().default(m.defaultTitle),filter:re.string().optional()})),factory({config:re,inputs:D,node:U}){const Y=lazy(()=>m.loader({inputs:D}).then(Se=>({default:()=>Se})));return{path:re.path,title:re.title,routeRef:m.routeRef,element:React.createElement(ExtensionBoundary,{node:U,routable:!0},React.createElement(Y,null)),...ct({config:re,options:m})}}})}function ct(m){const{options:w,config:K}=m;return K.filter?{filterExpression:K.filter}:typeof w.filter=="string"?{filterExpression:w.filter}:typeof w.filter=="function"?{filterFunction:w.filter}:{}}},2069:(Dn,Ct,e)=>{"use strict";e.d(Ct,{A:()=>q,a:()=>he,g:()=>z,u:()=>a});var s=e(29835),l=e(11638),b=e(97388),_=e(14041);function z(_e,le,ie){var G;let we=((G=_e==null?void 0:_e.relations)==null?void 0:G.filter(Ce=>Ce.type===le).map(Ce=>(0,s.KU)(Ce.targetRef)))||[];return ie!=null&&ie.kind&&(we=we.filter(Ce=>Ce.kind.toLocaleLowerCase("en-US")===ie.kind.toLocaleLowerCase("en-US"))),we}const r=(0,b.tK)("entity-context"),q=_e=>{const{children:le,entity:ie,loading:G,error:we,refresh:Ce}=_e,ft={entity:ie,loading:G,error:we,refresh:Ce};return _.createElement(r.Provider,{value:(0,b.Bl)({1:ft})},_.createElement(l.Ig,{attributes:{...ie?{entityRef:(0,s.U2)(ie)}:void 0}},le))},ee=_e=>React.createElement(q,{entity:_e.entity,loading:!_e.entity,error:void 0,refresh:void 0,children:_e.children});function a(){const _e=(0,b.qO)("entity-context");if(!_e)throw new Error("Entity context is not available");const le=_e.atVersion(1);if(!le)throw new Error("EntityContext v1 not available");if(!le.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:le.entity}}function he(){const _e=(0,b.qO)("entity-context");if(!_e)throw new Error("Entity context is not available");const le=_e.atVersion(1);if(!le)throw new Error("EntityContext v1 not available");const{entity:ie,loading:G,error:we,refresh:Ce}=le;return{entity:ie,loading:G,error:we,refresh:Ce}}},92651:(Dn,Ct,e)=>{"use strict";e.d(Ct,{B9:()=>Sn,Cr:()=>Y,EH:()=>Xn,GI:()=>w,IT:()=>H,Id:()=>ya,QD:()=>Ha,SE:()=>Rn,Tj:()=>Pt,WI:()=>an,ah:()=>$n,d5:()=>ka,iI:()=>Qa,jF:()=>rn,lD:()=>wn,mM:()=>tt,mb:()=>ne,mo:()=>ur,nK:()=>Jt,nQ:()=>ge,o9:()=>Ar,qq:()=>ho,rd:()=>Fn,s8:()=>da,sF:()=>La,t3:()=>$a,uR:()=>tr,vp:()=>de,y2:()=>vn,zI:()=>Oa});var s=e(48821),l=e(11638),b=e(29835),_=e(46123),z=e.n(_),r=e(14041),q=e(96403),ee=e.n(q),a=e(5893),he=e(54917),_e=e(64947),le=e(73845),ie=e(77125),G=e(72501),we=e(42899),Ce=e(69076),ft=e(86901),k=e(58837),ce=e(16249),I=e(71677),h=e(40703),M=e(58007),C=e(26343),v=e(46423),N=e(5951),Q=e(65569),De=e(75173),Ee=e(95061),X=e(63301),p=e(34839),j=e(29365),J=e(7031),ue=e(59461),Te=e(62261),dt=e(48653),Ge=e(8109),rt=e(76891),pt=e(61477),qe=e(46805),st=e(31653),Oe=e(38605),je=e(93453),$e=e(37197),vt=e(65859),ht=e(22968),Ft=e(2069),me=e(45250),ke=e.n(me),bt=e(45810),Yt=e.n(bt),yt=e(18690),_t=e(87290),S=e(22771),R=e(71581),W=e(73466),Z=e(46343),Pe=e.n(Z),Ue=e(40074),lt=e.n(Ue),et=e(11746),Je=e(6924),Wt=e(20577),tn=e(74219),Ut=e(44148),mt=e(41260),Xt=e(53373),on=e.n(Xt),ln=e(76842),qt=e(92367),ve=e(48108),Qe=e(47966),Kt=e(9684),Vt=e(80109),zt=e(48899),Bt=e(97388),Ln=e(64704),mn=e(45917),nn=e(16983),On=e(15303),nt=e(10437),gt=e(97262),Tt=e(87809),ot=e.n(Tt),Ze=e(51419),V=e(3399);const de=(0,s.c)({id:"plugin.catalog.service"}),ge=(0,s.c)({id:"plugin.catalog.entity-presentation"});function Pt(y,O){const{kind:x,namespace:L,name:te,title:ye,description:Be,displayName:xe,type:at}=xt(y),Nt=(0,b.U2)({kind:x||"unknown",namespace:L||b.oQ,name:te||"unknown"}),wt=cn({kind:x,namespace:L,name:te,context:O}),en=[xe,ye,wt].find(un=>un&&typeof un=="string"),En=[en!==Nt?Nt:void 0,at,Be].filter(un=>un&&typeof un=="string").join(" | ");return{entityRef:Nt,primaryTitle:en,secondaryTitle:En||void 0,Icon:void 0}}function xt(y){if(typeof y=="string"){let O=y.indexOf(":");const x=y.indexOf("/");x!==-1&&x<O&&(O=-1);const L=O===-1?void 0:y.slice(0,O),te=x===-1?void 0:y.slice(O+1,x),ye=y.slice(Math.max(O+1,x+1));return{kind:L,namespace:te,name:ye}}if(typeof y=="object"&&y!==null){const O=[z()(y,"kind")].find(at=>at&&typeof at=="string"),x=[z()(y,"metadata.namespace"),z()(y,"namespace")].find(at=>at&&typeof at=="string"),L=[z()(y,"metadata.name"),z()(y,"name")].find(at=>at&&typeof at=="string"),te=[z()(y,"metadata.title")].find(at=>at&&typeof at=="string"),ye=[z()(y,"metadata.description")].find(at=>at&&typeof at=="string"),Be=[z()(y,"spec.profile.displayName")].find(at=>at&&typeof at=="string"),xe=[z()(y,"spec.type")].find(at=>at&&typeof at=="string");return{kind:O,namespace:x,name:L,title:te,description:ye,displayName:Be,type:xe}}return{}}function cn(y){var O,x,L,te,ye;const Be=((O=y.kind)==null?void 0:O.toLocaleLowerCase("en-US"))||"unknown",xe=y.namespace||b.oQ,at=y.name||"unknown",Nt=(L=(x=y.context)==null?void 0:x.defaultKind)==null?void 0:L.toLocaleLowerCase("en-US"),wt=(ye=(te=y.context)==null?void 0:te.defaultNamespace)==null?void 0:ye.toLocaleLowerCase("en-US");let en=at;return(wt&&xe.toLocaleLowerCase("en-US")!==wt||xe!==b.oQ)&&(en=`${xe}/${en}`),Nt&&Be.toLocaleLowerCase("en-US")!==Nt&&(en=`${Be}:${en}`),en}function An(y,O,x){const[L,te]=(0,r.useState)(y);return(0,r.useEffect)(()=>{te(y);const ye=O==null?void 0:O.subscribe({next:Be=>{te(Be)},complete:()=>{ye==null||ye.unsubscribe()}});return()=>{ye==null||ye.unsubscribe()}},x),L}function Bn(y,O){const L=(0,s.b)().get(ge),te=[L,JSON.stringify(y),JSON.stringify(O||null)],ye=(0,r.useMemo)(()=>L?L.forEntity(typeof y=="string"||"metadata"in y?y:(0,b.U2)(y),O):{snapshot:Pt(y,O)},te);return An(ye.snapshot,ye.update$,[ye])}const $n=(0,s.c)({id:"catalog-react.starred-entities"});var kn=Object.defineProperty,bn=(y,O,x)=>O in y?kn(y,O,{enumerable:!0,configurable:!0,writable:!0,value:x}):y[O]=x,jn=(y,O,x)=>(bn(y,typeof O!="symbol"?O+"":O,x),x);class ra{constructor(){jn(this,"starredEntities",new Set),jn(this,"subscribers",new Set),jn(this,"observable",new ObservableImpl(O=>(O.next(new Set(this.starredEntities)),this.subscribers.add(O),()=>{this.subscribers.delete(O)})))}async toggleStarred(O){this.starredEntities.delete(O)||this.starredEntities.add(O);for(const x of this.subscribers)x.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const ct=y=>{var O,x;const L=(0,a.A)(xe=>{var at,Nt;return xe.breakpoints.down((Nt=(at=y.options)==null?void 0:at.drawerBreakpoint)!=null?Nt:"md")}),te=(0,he.A)(),[ye,Be]=(0,r.useState)(!1);return L?r.createElement(r.Fragment,null,r.createElement(_e.A,{style:{marginTop:te.spacing(1),marginLeft:te.spacing(1)},onClick:()=>Be(!0),startIcon:r.createElement(vt.A,null)},"Filters"),r.createElement(le.Ay,{open:ye,onClose:()=>Be(!1),anchor:(x=(O=y.options)==null?void 0:O.drawerAnchor)!=null?x:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},r.createElement(ie.A,{m:2},r.createElement(G.A,{variant:"h6",component:"h2",style:{marginBottom:te.spacing(1)}},"Filters"),y.children))):r.createElement(we.A,{item:!0,lg:2},y.children)},m=y=>r.createElement(we.A,{item:!0,xs:12,lg:10},y.children),w=y=>r.createElement(we.A,{container:!0,style:{position:"relative"}},y.children);w.Filters=ct,w.Content=m;function K(y){return!!y.getFullTextFilters}function re(y){var O;const x=y.reduce((te,ye)=>({...te,...ye.getCatalogFilters?ye.getCatalogFilters():{}}),{}),L=(O=y.find(K))==null?void 0:O.getFullTextFilters();return{filter:x,fullTextFilter:L}}function D(y){const O={};return y.forEach(x=>{var L;x instanceof Zt||x instanceof dn||x instanceof kt||x instanceof yn||x instanceof gn||x instanceof Qn||x instanceof hn||x instanceof Un||Object.assign(O,((L=x.getCatalogFilters)==null?void 0:L.call(x))||{})}),O}function U(y){return O=>y.every(x=>!x.filterEntity||x.filterEntity(O))}function Y(y,O){var x;const L=(x=y.metadata.annotations)==null?void 0:x[b.I4];if(L)try{const te=(0,b.aY)(L),ye=O.byUrl(te.target);return{locationTargetUrl:te.target,integrationType:ye==null?void 0:ye.type}}catch{return}}var Se=Object.defineProperty,Re=(y,O,x)=>O in y?Se(y,O,{enumerable:!0,configurable:!0,writable:!0,value:x}):y[O]=x,ut=(y,O,x)=>(Re(y,typeof O!="symbol"?O+"":O,x),x);class St{constructor(O){this.value=O}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class sn{constructor(O){this.value=O}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class Zt{constructor(O){this.values=O}filterEntity(O){return this.values.every(x=>{var L;return((L=O.metadata.tags)!=null?L:[]).includes(x)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class hn{constructor(O){this.value=O}filterEntity(O){const x=this.toUpperArray(this.value.split(/\s/)),L=this.toUpperArray([O.metadata.tags]),te=this.toUpperArray([O.metadata.name,O.metadata.title]);for(const ye of x)if(L.every(Be=>Be!==ye)&&te.every(Be=>!Be.includes(ye)))return!1;return!0}getFullTextFilters(){return{term:this.value,fields:["metadata.name","metadata.title","spec.profile.displayName"]}}toQueryValue(){return this.value}toUpperArray(O){return O.flat().filter(x=>!!x).map(x=>x.toLocaleUpperCase("en-US"))}}class dn{constructor(O){ut(this,"values"),this.values=O.reduce((x,L)=>{try{return x.push((0,b.U2)((0,b.KU)(L,{defaultKind:"Group"}))),x}catch{return x}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(O){return this.values.some(x=>(0,Ft.g)(O,b.vv).some(L=>(0,b.U2)(L)===x))}toQueryValue(){return this.values}}class kt{constructor(O){this.values=O}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(O){return this.values.some(x=>{var L;return((L=O.spec)==null?void 0:L.lifecycle)===x})}toQueryValue(){return this.values}}class yn{constructor(O){this.values=O}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(O){return this.values.some(x=>O.metadata.namespace===x)}toQueryValue(){return this.values}}class gn{constructor(O,x){this.value=O,this.refs=x}static owned(O){return new gn("owned",O)}static all(){return new gn("all")}static starred(O){return new gn("starred",O)}getCatalogFilters(){var O,x,L;return this.value==="owned"?{"relations.ownedBy":(O=this.refs)!=null?O:[]}:this.value==="starred"?{"metadata.name":(L=(x=this.refs)==null?void 0:x.map(te=>(0,b.KU)(te).name))!=null?L:[]}:{}}filterEntity(O){var x,L,te,ye;if(this.value==="starred")return(L=(x=this.refs)==null?void 0:x.includes((0,b.U2)(O)))!=null?L:!0;if(this.value==="owned"){const Be=(0,Ft.g)(O,b.vv);return(ye=(te=this.refs)==null?void 0:te.some(xe=>Be.some(at=>(0,b.U2)(at)===xe)))!=null?ye:!1}return!0}toQueryValue(){return this.value}}class Un{constructor(O,x,L){this.value=O,this.isOwnedEntity=x,this.isStarredEntity=L}filterEntity(O){switch(this.value){case"owned":return this.isOwnedEntity(O);case"starred":return this.isStarredEntity(O);default:return!0}}toQueryValue(){return this.value}}class Qn{constructor(O){this.value=O}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(O){var x;const L=(x=O.metadata.annotations)==null?void 0:x["backstage.io/orphan"];return L!==void 0&&this.value.toString()===L}}class ea{constructor(O){this.value=O}filterEntity(O){var x,L;const te=((L=(x=O==null?void 0:O.status)==null?void 0:x.items)==null?void 0:L.length)>0;return te!==void 0&&this.value===te}}const Pn=(0,r.createContext)(void 0),Sn=y=>{const O=(0,R.A)(),x=(0,s.u)(de),[L,te]=(0,r.useState)({}),ye=(0,yt.zy)(),Be=y.pagination===!0||typeof y.pagination=="object",xe=y.pagination&&typeof y.pagination=="object"&&typeof y.pagination.limit=="number"?y.pagination.limit:20,{queryParameters:at,cursor:Nt}=(0,r.useMemo)(()=>{var Yn;const oa=Yt().parse(ye.search,{ignoreQueryPrefix:!0});return{queryParameters:(Yn=oa.filters)!=null?Yn:{},cursor:typeof oa.cursor=="string"?oa.cursor:void 0}},[ye]),[wt,en]=(0,r.useState)(Nt),[En,un]=(0,r.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[],pageInfo:Be?{}:void 0})),[{loading:xn,error:Zn},In]=(0,_t.A)(async()=>{var Yn;const oa=(0,me.compact)(Object.values(L)),ca=Object.keys(L).reduce((ha,ma)=>{const Ea=L[ma];return Ea!=null&&Ea.toQueryValue&&(ha[ma]=Ea.toQueryValue()),ha},{});if(Be)if(wt){if(wt!==En.appliedCursor){const ha=U(oa),ma=await x.queryEntities({cursor:wt,limit:xe});un({appliedFilters:L,appliedCursor:wt,backendEntities:ma.items,entities:ma.items.filter(ha),pageInfo:ma.pageInfo,totalItems:ma.totalItems})}}else{const ha=U(oa),ma=re(oa),Ea=re((0,me.compact)(Object.values(En.appliedFilters)));if(!(0,me.isEqual)(Ea,ma)){const Aa=await x.queryEntities({...ma,limit:xe,orderFields:[{field:"metadata.name",order:"asc"}]});un({appliedFilters:L,backendEntities:Aa.items,entities:Aa.items.filter(ha),pageInfo:Aa.pageInfo,totalItems:Aa.totalItems})}}else{const ha=U(oa),ma=D(oa),Ea=D((0,me.compact)(Object.values(En.appliedFilters)));if((0,me.isEqual)(Ea,ma)){const Aa=En.backendEntities.filter(ha);un({appliedFilters:L,backendEntities:En.backendEntities,entities:Aa,totalItems:Aa.length})}else{const Aa=await x.getEntities({filter:ma}),qa=Aa.items.filter(ha);un({appliedFilters:L,backendEntities:Aa.items,entities:qa,totalItems:qa.length})}}if(O()){const ha=Yt().parse(ye.search,{ignoreQueryPrefix:!0}),ma=Yt().stringify({...ha,filters:ca,cursor:wt},{addQueryPrefix:!0,arrayFormat:"repeat"}),Ea=`${window.location.pathname}${ma}`;(Yn=window.history)==null||Yn.replaceState(null,document.title,Ea)}},[x,at,L,En,wt,Be],{loading:!0});(0,S.A)(In,10,[L,wt]);const sa=(0,r.useCallback)(Yn=>{en(void 0),te(oa=>{const ca=typeof Yn=="function"?Yn(oa):Yn;return{...oa,...ca}})},[]),pa=(0,r.useMemo)(()=>{var Yn,oa;if(!Be)return;const ca=(Yn=En.pageInfo)==null?void 0:Yn.prevCursor,ha=(oa=En.pageInfo)==null?void 0:oa.nextCursor;return{prev:ca?()=>en(ca):void 0,next:ha?()=>en(ha):void 0}},[Be,En.pageInfo]),Wn=(0,r.useMemo)(()=>({filters:En.appliedFilters,entities:En.entities,backendEntities:En.backendEntities,updateFilters:sa,queryParameters:at,loading:xn,error:Zn,pageInfo:pa,totalItems:En.totalItems}),[En,sa,at,xn,Zn,pa]);return r.createElement(Pn.Provider,{value:Wn},y.children)};function Jt(){const y=(0,r.useContext)(Pn);if(!y)throw new Error("useEntityList must be used within EntityListProvider");return y}function rn(){var y;const O=(0,s.u)(de),{filters:{kind:x,type:L},queryParameters:{type:te},updateFilters:ye}=Jt(),Be=(0,r.useMemo)(()=>[te].flat().filter(Boolean),[te]),[xe,at]=(0,r.useState)(Be.length?Be:(y=L==null?void 0:L.getTypes())!=null?y:[]);(0,r.useEffect)(()=>{Be.length&&at(Be)},[Be]);const[Nt,wt]=(0,r.useState)([]),en=(0,r.useMemo)(()=>x==null?void 0:x.value,[x]),{error:En,loading:un,value:xn}=(0,W.A)(async()=>en?await O.getEntityFacets({filter:{kind:en},facets:["spec.type"]}).then(sa=>sa.facets["spec.type"]||[]):[],[en,O]),Zn=(0,r.useRef)(xn);return(0,r.useEffect)(()=>{const In=Zn.current;if(Zn.current=xn,un||!en||In===xn||!xn)return;const sa=[...new Set(lt()(xn,Wn=>-Wn.count).map(Wn=>Wn.value.toLocaleLowerCase("en-US")))];wt(sa);const pa=xe.filter(Wn=>sa.includes(Wn));Pe()(xe,pa)||at(pa)},[un,en,xe,at,xn]),(0,r.useEffect)(()=>{ye({type:xe.length?new sn(xe):void 0})},[xe,ye]),{loading:un,error:En,availableTypes:Nt,selectedTypes:xe,setSelectedTypes:at}}function Xn(y,O){var x,L;const te=(x=O==null?void 0:O.type)==null?void 0:x.toLocaleLowerCase("en-US"),ye=(L=O==null?void 0:O.kind)==null?void 0:L.toLocaleLowerCase("en-US"),Be=(0,s.u)(de),{loading:xe,value:at,error:Nt}=(0,W.A)(async()=>{var wt;const en=(wt=y.relations)==null?void 0:wt.filter(un=>(!te||un.type.toLocaleLowerCase("en-US")===te)&&(!ye||(0,b.KU)(un.targetRef).kind===ye));if(!(en!=null&&en.length))return[];const{items:En}=await Be.getEntitiesByRefs({entityRefs:en.map(un=>un.targetRef)});return En.filter(un=>!!un)},[y,te,ye]);return{entities:at,loading:xe,error:Nt}}function _n(y){return typeof y=="string"?y:(0,b.U2)(y)}function H(){const y=(0,s.u)($n),O=(0,et.A)((0,r.useMemo)(()=>y.starredEntitie$(),[y]),new Set),x=(0,r.useCallback)(te=>O.has(_n(te)),[O]),L=(0,r.useCallback)(te=>y.toggleStarred(_n(te)).then(),[y]);return{starredEntities:O,toggleStarredEntity:L,isStarredEntity:x}}function be(y){return typeof y=="string"?y:(0,b.U2)(y)}function Fe(y){const O=(0,s.u)($n),[x,L]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const ye=O.starredEntitie$().subscribe({next(Be){L(Be.has(be(y)))}});return()=>{ye.unsubscribe()}},[y,O]),{toggleStarredEntity:(0,r.useCallback)(()=>O.toggleStarred(be(y)).then(),[y,O]),isStarredEntity:x}}function tt(){const y=(0,s.u)(s.t),{loading:O,value:x}=(0,W.A)(async()=>{const{ownershipEntityRefs:te}=await y.getBackstageIdentity();return te},[]),L=(0,r.useMemo)(()=>{const te=new Set(x!=null?x:[]);return ye=>{const Be=(0,Ft.g)(ye,b.vv).map(b.U2);for(const xe of Be)if(te.has(xe))return!0;return!1}},[x]);return{loading:O,isOwnedEntity:L}}function It(){const y=(0,s.u)(de),{error:O,loading:x,value:L}=(0,W.A)(async()=>await y.getEntityFacets({facets:["kind"]}).then(ye=>{var Be;return((Be=ye.facets.kind)==null?void 0:Be.map(xe=>xe.value).sort())||[]}),[y]);return{loading:x,error:O,allKinds:L!=null?L:[]}}function Ot(y,O,x){let L=y;return O&&(L=L.filter(ye=>O.some(Be=>Be.toLocaleLowerCase("en-US")===ye.toLocaleLowerCase("en-US")))),x&&!y.some(ye=>ye.toLocaleLowerCase("en-US")===x.toLocaleLowerCase("en-US"))&&(L=L.concat([x])),L.sort().reduce((ye,Be)=>(ye[Be.toLocaleLowerCase("en-US")]=Be,ye),{})}function jt(y){var O,x;const{filters:L,queryParameters:{kind:te},updateFilters:ye}=Jt(),Be=(0,r.useMemo)(()=>[te].flat()[0],[te]),[xe,at]=(0,r.useState)((x=Be!=null?Be:(O=L.kind)==null?void 0:O.value)!=null?x:y.initialFilter);(0,r.useEffect)(()=>{Be&&at(Be)},[Be]),(0,r.useEffect)(()=>{var En,un;(En=L.kind)!=null&&En.value&&at((un=L.kind)==null?void 0:un.value)},[L.kind]),(0,r.useEffect)(()=>{ye({kind:xe?new St(xe):void 0})},[xe,ye]);const{allKinds:Nt,loading:wt,error:en}=It();return{loading:wt,error:en,allKinds:Nt!=null?Nt:[],selectedKind:xe,setSelectedKind:at}}const ne=y=>{const{allowedKinds:O,hidden:x,initialFilter:L="component"}=y,te=(0,s.u)(s.l),{error:ye,allKinds:Be,selectedKind:xe,setSelectedKind:at}=jt({initialFilter:L});if((0,r.useEffect)(()=>{ye&&te.post({message:"Failed to load entity kinds",severity:"error"})},[ye,te]),ye)return null;const Nt=Ot(Be,O,xe),wt=Object.keys(Nt).map(en=>({value:en,label:Nt[en]}));return x?null:r.createElement(ie.A,{pb:1,pt:1},r.createElement(ht.l6,{label:"Kind",items:wt,selected:xe.toLocaleLowerCase("en-US"),onChange:en=>at(String(en))}))},We=r.createElement(mt.A,{fontSize:"small"}),He=r.createElement(Ut.A,{fontSize:"small"});function Me({selected:y}){return r.createElement(Ce.A,{icon:We,checkedIcon:He,checked:y})}const Xe=(0,r.memo)(y=>{const{selected:O,value:x,availableOptions:L,showCounts:te}=y,ye=te?`${x} (${L==null?void 0:L[x]})`:x;return r.createElement(ft.A,{control:r.createElement(Me,{selected:O}),label:ye,onClick:Be=>Be.preventDefault()})}),Ve=(0,k.A)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function Et(y){const O=Ve();return r.createElement(ce.A,{variant:"outlined",...y,className:on()(O.input,y.className)})}const Dt=(0,k.A)({root:{},label:{}},{name:"CatalogReactEntityAutocompletePicker"});function Gt(y){var O,x;const{label:L,name:te,path:ye,showCounts:Be,Filter:xe,InputProps:at,initialSelectedOptions:Nt=[],filtersForAvailableValues:wt=["kind"]}=y,en=Dt(),{updateFilters:En,filters:un,queryParameters:{[te]:xn}}=Jt(),Zn=(0,s.u)(de),In=wt.map(ma=>un[ma]),{value:sa}=(0,W.A)(async()=>{const ma=ye,{facets:Ea}=await Zn.getEntityFacets({facets:[ma],filter:D(In.filter(Boolean))});return Object.fromEntries(Ea[ma].map(({value:Aa,count:qa})=>[Aa,qa]))},[...In]),pa=(0,r.useMemo)(()=>[xn].flat().filter(Boolean),[xn]),[Wn,Yn]=(0,r.useState)(pa.length?pa:(x=(O=un[te])==null?void 0:O.values)!=null?x:Nt);(0,r.useEffect)(()=>{pa.length&&Yn(pa)},[pa]);const oa=Object.keys(sa!=null?sa:{}),ca=Wn.length&&oa.length;(0,r.useEffect)(()=>{En({[te]:ca?new xe(Wn):void 0})},[te,ca,Wn,xe,En]);const ha=un[te];return ha&&typeof ha=="object"&&!("values"in ha)||!oa.length||oa.length<=1?null:r.createElement(ie.A,{className:en.root,pb:1,pt:1},r.createElement(G.A,{className:en.label,variant:"button",component:"label"},L,r.createElement(Wt.Ay,{multiple:!0,disableCloseOnSelect:!0,options:oa,value:Wn,onChange:(ma,Ea)=>Yn(Ea),renderOption:(ma,{selected:Ea})=>r.createElement(Xe,{selected:Ea,value:ma,availableOptions:sa,showCounts:!!Be}),size:"small",popupIcon:r.createElement(Je.A,{"data-testid":`${String(te)}-picker-expand`}),renderInput:ma=>r.createElement(Et,{...ma,...at})})))}const fn=(0,k.A)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),an=y=>{const{initialFilter:O=[]}=y,x=fn();return r.createElement(Gt,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:kt,InputProps:{className:x.input},initialSelectedOptions:O})},ta=(0,k.A)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),Mn=y=>{const{initiallySelectedNamespaces:O}=y,x=ta();return r.createElement(Gt,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:yn,InputProps:{className:x.input},initialSelectedOptions:O})};function Rn(y,O){const x=O==null?void 0:O.defaultKind;let L,te,ye;return"metadata"in y?(L=y.kind,te=y.metadata.namespace,ye=y.metadata.name):(L=y.kind,te=y.namespace,ye=y.name),(te===void 0||te==="")&&(te=b.oQ),(O==null?void 0:O.defaultNamespace)!==void 0?(O==null?void 0:O.defaultNamespace)===te&&(te=void 0):te===b.oQ&&(te=void 0),L=L.toLocaleLowerCase("en-US"),L=x&&x.toLocaleLowerCase("en-US")===L?void 0:L,`${L?`${L}:`:""}${te?`${te}/`:""}${ye}`}function Vn(y,O){for(const x of["spec.profile.displayName","metadata.title"]){const L=z()(y,x);if(L&&typeof L=="string")return L}return O}function na({enabled:y}){const O=(0,s.u)(de),[x]=(0,r.useState)(async()=>{if(!y)return[];const L="relations.ownedBy";return O.getEntityFacets({facets:[L]}).then(te=>te.facets[L].map(ye=>ye.value).map(ye=>{const{kind:Be,name:xe,namespace:at}=(0,b.KU)(ye);return{apiVersion:"backstage.io/v1beta1",kind:Be,metadata:{name:xe,namespace:at}}}).sort((ye,Be)=>(ye.metadata.namespace||"").localeCompare(Be.metadata.namespace||"","en-US")||ye.metadata.name.localeCompare(Be.metadata.name,"en-US")||ye.kind.localeCompare(Be.kind,"en-US"))).catch(()=>[])});return(0,_t.A)(async(L,te)=>{var ye;const Be=await x;if(!Be)return{items:[]};const xe=(ye=te==null?void 0:te.limit)!=null?ye:20,{text:at,start:Nt}=Nn(L),wt=Be.filter(En=>_a(at,En)),en=Nt+xe;return{items:wt.slice(0,en),...ia({entities:wt,limit:en,payload:{text:at,start:en}})}},[x],{loading:!0,value:{items:[]}})}function Nn(y){return qn(y)&&y.cursor?JSON.parse(atob(y.cursor)):{text:y.text||"",start:0}}function qn(y){return!!y.cursor}function ia({entities:y,limit:O,payload:x}){return y.length>O?{cursor:btoa(JSON.stringify(x))}:{}}function _a(y,O){var x;const L=y.trim();return O.kind.includes(L)||((x=O.metadata.namespace)==null?void 0:x.includes(L))||O.metadata.name.includes(L)}function ba(){const y=(0,s.u)(de);return(0,_t.A)(async(O,x)=>{var L;const te=O,ye=O,Be=(L=x==null?void 0:x.limit)!=null?L:20;if(ye.cursor){const at=await y.queryEntities({cursor:ye.cursor,limit:Be});return{cursor:at.pageInfo.nextCursor,items:[...ye.items,...at.items]}}const xe=await y.queryEntities({fullTextFilter:{term:te.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:Be});return{cursor:xe.pageInfo.nextCursor,items:xe.items}},[],{loading:!0})}function Pa({mode:y,initialSelectedOwnersRefs:O}){const x=y==="owners-only",L=ba(),te=na({enabled:x}),[ye,Be]=x?te:L;return[ye,Be,xa({enabled:!x,initialSelectedOwnersRefs:O})]}function xa({enabled:y,initialSelectedOwnersRefs:O}){const x=(0,r.useRef)({}),L=(0,s.u)(de),[,te]=(0,_t.A)(async()=>{(await L.getEntitiesByRefs({entityRefs:O})).items.forEach(Be=>{Be&&(x.current[(0,b.U2)(Be)]=Be)})},[]);return(0,ln.u)(()=>{y&&O.length>0&&te()}),{getEntity:ye=>x.current[ye],setEntity:ye=>{x.current[(0,b.U2)(ye)]=ye}}}const ja=(0,k.A)({root:{},label:{},input:{},fullWidth:{width:"100%"},boxLabel:{width:"100%",textOverflow:"ellipsis",overflow:"hidden"}},{name:"CatalogReactEntityOwnerPicker"}),Da=(0,J.A)(y=>({label:{width:"100%"},root:{width:"90%"}}),{name:"FixedWidthFormControlLabel"})(ft.A),Fa=r.createElement(mt.A,{fontSize:"small"}),lr=r.createElement(Ut.A,{fontSize:"small"});function rr(y){const O=ja(),x=y.entity.kind.toLocaleLowerCase("en-US")==="group",{primaryTitle:L}=Bn(y.entity);return r.createElement(ie.A,{className:O.fullWidth},r.createElement(Da,{className:O.fullWidth,control:r.createElement(Ce.A,{icon:Fa,checkedIcon:lr,checked:y.isSelected}),onClick:te=>te.preventDefault(),label:r.createElement(I.Ay,{title:L},r.createElement(ie.A,{display:"flex",alignItems:"center"},x?r.createElement(Qe.A,{fontSize:"small"}):r.createElement(ve.A,{fontSize:"small"}),"\xA0",r.createElement(ie.A,{className:O.boxLabel},r.createElement(G.A,{noWrap:!0},L))))}))}const $a=y=>{var O,x,L;const te=ja(),{mode:ye="owners-only"}=y||{},{updateFilters:Be,filters:xe,queryParameters:{owners:at}}=Jt(),[Nt,wt]=(0,r.useState)(""),en=(0,r.useMemo)(()=>[at].flat().filter(Boolean),[at]),[En,un]=(0,r.useState)(en.length?en:(x=(O=xe.owners)==null?void 0:O.values)!=null?x:[]),[{value:xn,loading:Zn},In,sa]=Pa({mode:ye,initialSelectedOwnersRefs:En});(0,qt.s)(()=>In({text:Nt}),[Nt,In],250);const pa=(xn==null?void 0:xn.items)||[];return(0,r.useEffect)(()=>{if(en.length){const Wn=new dn(en);un(Wn.values)}},[en]),(0,r.useEffect)(()=>{Be({owners:En.length?new dn(En):void 0})},[En,Be]),["user","group"].includes(((L=xe.kind)==null?void 0:L.value.toLocaleLowerCase("en-US"))||"")?null:r.createElement(ie.A,{className:te.root,pb:1,pt:1},r.createElement(G.A,{className:te.label,variant:"button",component:"label"},"Owner",r.createElement(Wt.Ay,{multiple:!0,disableCloseOnSelect:!0,loading:Zn,options:pa,value:En,getOptionSelected:(Wn,Yn)=>typeof Yn=="string"?(0,b.U2)(Wn)===Yn:Wn===Yn,getOptionLabel:Wn=>{const Yn=typeof Wn=="string"?sa.getEntity(Wn)||(0,b.KU)(Wn,{defaultKind:"group",defaultNamespace:"default"}):Wn;return Vn(Yn,Rn(Yn))},onChange:(Wn,Yn)=>{wt(""),un(Yn.map(oa=>{const ca=typeof oa=="string"?oa:(0,b.U2)(oa);return typeof oa!="string"&&sa.setEntity(oa),ca}))},filterOptions:Wn=>Wn,renderOption:(Wn,{selected:Yn})=>r.createElement(rr,{entity:Wn,isSelected:Yn}),size:"small",popupIcon:r.createElement(Je.A,{"data-testid":"owner-picker-expand"}),renderInput:Wn=>r.createElement(ce.A,{...Wn,className:te.input,onChange:Yn=>{wt(Yn.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:Wn=>{const Yn=Wn.currentTarget;Math.abs(Yn.scrollHeight-Yn.clientHeight-Yn.scrollTop)<1&&(xn!=null&&xn.cursor)&&In({items:xn.items,cursor:xn.cursor})},"data-testid":"owner-picker-listbox"}})))},Ja=(0,k.A)({root:{},input:{},label:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),Sr=r.createElement(mt.A,{fontSize:"small"}),cr=r.createElement(Ut.A,{fontSize:"small"}),or=()=>{const y=Ja(),{updateFilters:O}=Jt(),[x,L]=(0,r.useState)([]);function te(xe){O({orphan:xe?new Qn(xe):void 0})}function ye(xe){O({error:xe?new ea(xe):void 0})}const Be=["Is Orphan","Has Error"];return r.createElement(ie.A,{className:y.root,pb:1,pt:1},r.createElement(G.A,{className:y.label,variant:"button",component:"label"},"Processing Status",r.createElement(Wt.Ay,{multiple:!0,disableCloseOnSelect:!0,options:Be,value:x,onChange:(xe,at)=>{L(at),te(at.includes("Is Orphan")),ye(at.includes("Has Error"))},renderOption:(xe,{selected:at})=>r.createElement(ft.A,{control:r.createElement(Ce.A,{icon:Sr,checkedIcon:cr,checked:at}),onClick:Nt=>Nt.preventDefault(),label:xe}),size:"small",popupIcon:r.createElement(Je.A,{"data-testid":"processing-status-picker-expand"}),renderInput:xe=>r.createElement(ce.A,{...xe,className:y.input,variant:"outlined"})})))},ga=(0,k.A)({input:{}},{name:"CatalogReactEntityTagPicker"}),ur=y=>{const O=ga();return r.createElement(Gt,{label:"Tags",name:"tags",path:"metadata.tags",Filter:Zt,showCounts:y.showCounts,InputProps:{className:O.input}})},Ha=y=>{var O;const{hidden:x,initialFilter:L}=y,te=(0,s.u)(s.l),{error:ye,availableTypes:Be,selectedTypes:xe,setSelectedTypes:at}=rn();if((0,r.useEffect)(()=>{ye&&te.post({message:"Failed to load entity types",severity:"error"}),L&&at([L])},[ye,te,L,at]),Be.length===0||ye)return null;const Nt=[{value:"all",label:"all"},...Be.map(wt=>({value:wt,label:wt}))];return x?null:r.createElement(ie.A,{pb:1,pt:1},r.createElement(ht.l6,{label:"Type",items:Nt,selected:(O=Nt.length>1?xe[0]:void 0)!=null?O:"all",onChange:wt=>at(wt==="all"?[]:[String(wt)])}))};function ir(){const y=(0,s.u)(s.t),O=(0,s.u)(de),{filters:x}=Jt(),{value:L,loading:te}=(0,W.A)(async()=>(await y.getBackstageIdentity()).ownershipEntityRefs,[]),{user:ye,owners:Be,...xe}=x,at=re((0,me.compact)(Object.values(xe))),[{value:Nt,loading:wt},en]=(0,_t.A)(async un=>{const xn=Ga(un.owners,un.ownershipEntityRefs);if(xn===void 0)return 0;const{["metadata.name"]:Zn,...In}=un.filter.filter,{totalItems:sa}=await O.queryEntities({...un.filter,filter:{...In,"relations.ownedBy":xn},limit:0});return sa},[],{loading:!0});return(0,zt.A)(()=>{Object.keys(at.filter).length!==0&&L!==void 0&&en({ownershipEntityRefs:L,owners:Be,filter:at})},[L,Be,at]),{count:Nt,loading:te||wt,filter:(0,r.useMemo)(()=>gn.owned(L!=null?L:[]),[L]),ownershipEntityRefs:L}}function Ga(y,O){var x;if(O===void 0)return;const L=(x=y==null?void 0:y.values)!=null?x:[];if(L.length){const te=(0,me.intersection)(L,O);return te.length===0?void 0:te}return O}function Ne(){const y=(0,s.u)(de),{filters:O}=Jt(),x=(0,r.useRef)(),L=(0,r.useMemo)(()=>{const{user:Be,...xe}=O,at=(0,me.compact)(Object.values(xe)),Nt=re(at),wt={...Nt,limit:0};return Object.keys(Nt.filter).length===0?(x.current=void 0,x.current):(0,me.isEqual)(wt,x.current)?x.current:(x.current=wt,wt)},[O]),{value:te,loading:ye}=(0,W.A)(async()=>{if(L===void 0)return 0;const{totalItems:Be}=await y.queryEntities(L);return Be},[L]);return{count:te,loading:ye}}function oe(){const y=(0,s.u)(de),{filters:O}=Jt(),{starredEntities:x}=H(),L=(0,r.useRef)(),te=(0,r.useMemo)(()=>{const{user:at,...Nt}=O,wt=(0,me.compact)(Object.values(Nt)),en=re(wt),un={...en,filter:{...en.filter,["metadata.name"]:Array.from(x).map(xn=>(0,b.KU)(xn).name)},limit:1e3};return(0,me.isEqual)(un,L.current)?L.current:(L.current=un,un)},[O,x]),{value:ye,loading:Be}=(0,W.A)(async()=>x.size?(await y.queryEntities(te)).items.map(Nt=>(0,b.U2)({kind:Nt.kind,namespace:Nt.metadata.namespace,name:Nt.metadata.name})).filter(Nt=>x.has(Nt)).length:0,[te,x]),xe=(0,r.useMemo)(()=>gn.starred(Array.from(x)),[x]);return{count:ye,loading:Be,filter:xe}}const it=(0,k.A)(y=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:y.spacing(1,0,1,0)},title:{margin:y.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:y.palette.text.primary},menuItem:{minHeight:y.spacing(6)},groupWrapper:{margin:y.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function pn(y){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:Kt.A},{id:"starred",label:"Starred",icon:Vt.A}]},{name:y!=null?y:"Company",items:[{id:"all",label:"All"}]}]}const vn=y=>{var O;const{initialFilter:x,availableFilters:L}=y,te=it(),Be=(O=(0,s.u)(s.p).getOptionalString("organization.name"))!=null?O:"Company",{filters:xe,updateFilters:at,queryParameters:{kind:Nt,user:wt}}=Jt(),en=["starred","all"],En=pn(Be).map(Ea=>({...Ea,items:Ea.items.filter(({id:Aa})=>["group","user"].some(qa=>qa===Nt)?en.includes(Aa):!L||L.includes(Aa))})).filter(({items:Ea})=>!!Ea.length),{count:un,loading:xn,filter:Zn}=ir(),{count:In}=Ne(),{count:sa,filter:pa,loading:Wn}=oe(),Yn=(0,r.useMemo)(()=>[wt].flat()[0],[wt]),[oa,ca]=(0,r.useState)(Yn!=null?Yn:x),ha=(0,r.useMemo)(()=>({all:In,starred:sa,owned:un}),[sa,un,In]);(0,r.useEffect)(()=>{Yn&&ca(Yn)},[Yn]);const ma=xn||Wn;return(0,r.useEffect)(()=>{!ma&&oa&&oa!=="all"&&ha[oa]===0&&ca("all")},[ma,ha,oa,ca]),(0,r.useEffect)(()=>{if(!oa||ma)return;at({user:oa==="owned"?Zn:oa==="starred"?pa:gn.all()})},[oa,pa,Zn,at,ma]),r.createElement(h.A,{className:te.root},En.map(Ea=>r.createElement(r.Fragment,{key:Ea.name},r.createElement(G.A,{variant:"subtitle2",component:"span",className:te.title},Ea.name),r.createElement(h.A,{className:te.groupWrapper},r.createElement(M.A,{disablePadding:!0,dense:!0,role:"menu","aria-label":Ea.name},Ea.items.map(Aa=>{var qa,ro;return r.createElement(C.A,{role:"none presentation",key:Aa.id,divider:!0,onClick:()=>ca(Aa.id),selected:Aa.id===((qa=xe.user)==null?void 0:qa.value),className:te.menuItem,disabled:ha[Aa.id]===0,"data-testid":`user-picker-${Aa.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Aa.icon&&r.createElement(v.A,{className:te.listIcon},r.createElement(Aa.icon,{fontSize:"small"})),r.createElement(N.A,null,r.createElement(G.A,{variant:"body1"},Aa.label," ")),r.createElement(Q.A,null,(ro=ha[Aa.id])!=null?ro:"-"))}))))))},Fn=y=>{const{initialKind:O,initiallySelectedFilter:x,ownerPickerMode:L,initiallySelectedNamespaces:te}=y;return r.createElement(r.Fragment,null,r.createElement(ne,{initialFilter:O}),r.createElement(Ha,null),r.createElement(vn,{initialFilter:x}),r.createElement($a,{mode:L}),r.createElement(an,null),r.createElement(ur,null),r.createElement(or,null),r.createElement(Mn,{initiallySelectedNamespaces:te}))},va=(0,k.A)(y=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:y.spacing(.5),color:y.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),ka=y=>{const{entityRef:O,hideIcon:x,disableTooltip:L,defaultKind:te,defaultNamespace:ye}=y,Be=va(),{primaryTitle:xe,secondaryTitle:at,Icon:Nt}=Bn(O,{defaultKind:te,defaultNamespace:ye});let wt=r.createElement(r.Fragment,null,xe);return wt=r.createElement(ie.A,{component:"span",className:Be.root},Nt&&!x?r.createElement(ie.A,{component:"span",className:Be.icon},r.createElement(Nt,{fontSize:"inherit"})):null,wt),at&&!L&&(wt=r.createElement(I.Ay,{enterDelay:1500,title:at},wt)),wt},La=(0,Bt.Q6)("catalog:entity-route-ref",()=>(0,l.HM)({id:"catalog:entity",params:["namespace","kind","name"]}));function Sa(y){var O,x;return{kind:y.kind.toLocaleLowerCase("en-US"),namespace:(x=(O=y.metadata.namespace)==null?void 0:O.toLocaleLowerCase("en-US"))!=null?x:DEFAULT_NAMESPACE,name:y.metadata.name}}const Oa=(0,r.forwardRef)((y,O)=>{var x;const{entityRef:L,defaultKind:te,defaultNamespace:ye,title:Be,children:xe,hideIcon:at,...Nt}=y,wt=Ba(y.entityRef),en=(x=xe!=null?xe:Be)!=null?x:r.createElement(ka,{entityRef:L,defaultKind:te,defaultNamespace:ye,hideIcon:at});return r.createElement(ht.N_,{...Nt,ref:O,to:wt},en)});function Ba(y){var O;const x=(0,l.Sf)(La);let L,te,ye;if(typeof y=="string"){const xe=(0,b.KU)(y);L=xe.kind,te=xe.namespace,ye=xe.name}else"metadata"in y?(L=y.kind,te=y.metadata.namespace,ye=y.metadata.name):(L=y.kind,te=y.namespace,ye=y.name);L=L.toLocaleLowerCase("en-US"),te=(O=te==null?void 0:te.toLocaleLowerCase("en-US"))!=null?O:b.oQ;const Be={kind:encodeURIComponent(L),namespace:encodeURIComponent(te),name:encodeURIComponent(ye)};return x(Be)}function Qa(y){const{entityRefs:O,hideIcons:x,...L}=y;return r.createElement(r.Fragment,null,O.map((te,ye)=>{const Be=typeof te=="string"?te:(0,b.U2)(te);return r.createElement(r.Fragment,{key:`${ye}.${Be}`},ye>0&&", ",r.createElement(Oa,{...L,entityRef:te,hideIcon:x}))}))}const E=y=>{const O=useRouteRef(La);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:O(getCompoundEntityRef(y.entity))},React.createElement(InfoIcon,null))},c=y=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${y.email}`,to:`mailto:${y.email}`},React.createElement(EmailIcon,null)),A=y=>{var O;const x=(O=y.entity.spec.profile)==null?void 0:O.email;return x?React.createElement(c,{email:x}):null},$=y=>{var O;const x=(O=y.entity.spec.profile)==null?void 0:O.email;return x?React.createElement(c,{email:x}):null},fe=(0,k.A)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),Ie=4,Rt=y=>{var O,x,L,te;const{entityRef:ye,children:Be,delayTime:xe=500}=y,at=fe(),Nt=useApiHolder(),wt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[en,En]=useState(!1),un=useMemo(()=>debounce(()=>En(!0),xe),[xe]),[{loading:xn,error:Zn,value:In},sa]=useAsyncFn(async()=>{const Wn=Nt.get(de);if(Wn){const Yn=await Wn.getEntityByRef(ye);if(!Yn)throw new Error(`${ye} not found`);return Yn}},[Nt,ye]),pa=()=>{En(!1),un.cancel()};return useEffect(()=>{wt.isOpen&&!In&&!Zn&&!xn&&sa()},[wt.isOpen,sa,In,Zn,xn]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:un},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(wt)},Be)),en&&React.createElement(HoverPopover,{PaperProps:{className:at.popoverPaper},...bindPopover(wt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:pa},React.createElement(Card,null,React.createElement(CardContent,null,Zn&&React.createElement(ResponseErrorPanel,{error:Zn}),xn&&React.createElement(Progress,null),In&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},In.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},In.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},In.kind),In.metadata.description&&React.createElement(Typography,{className:at.descriptionTypography,paragraph:!0},In.metadata.description),React.createElement(Typography,null,(x=(O=In.spec)==null?void 0:O.type)==null?void 0:x.toString()),React.createElement(Box,{marginTop:"0.5em"},(In.metadata.tags||[]).slice(0,Ie).map(Wn=>React.createElement(Chip,{key:Wn,size:"small",label:Wn})),((L=In.metadata.tags)==null?void 0:L.length)&&((te=In.metadata.tags)==null?void 0:te.length)>Ie&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!Zn&&In&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(In)&&React.createElement($,{entity:In}),isGroupEntity(In)&&React.createElement(A,{entity:In}),React.createElement(E,{entity:In}))))))},Lt=(0,k.A)(y=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),wn=()=>{const y=Lt(),{updateFilters:O,queryParameters:{text:x}}=Jt(),L=(0,r.useMemo)(()=>[x].flat()[0],[x]),[te,ye]=(0,r.useState)(L!=null?L:"");return(0,nn.A)(()=>{O({text:te.length?new hn(te):void 0})},250,[te,O]),(0,r.useEffect)(()=>{L&&ye(L)},[L]),r.createElement(De.A,{className:y.searchToolbar},r.createElement(Ee.A,null,r.createElement(X.A,{"aria-label":"search",id:"input-with-icon-adornment",className:y.input,placeholder:"Search",autoComplete:"off",onChange:Be=>ye(Be.target.value),value:te,startAdornment:r.createElement(p.A,{position:"start"},r.createElement(mn.A,null)),endAdornment:r.createElement(p.A,{position:"end"},r.createElement(j.A,{"aria-label":"clear search",onClick:()=>ye(""),edge:"end",disabled:te.length===0},r.createElement(Ln.A,null)))})))},Cn=Object.freeze({createEntityRefColumn(y){const{defaultKind:O}=y;function x(L){var te;return((te=L.metadata)==null?void 0:te.title)||Rn(L,{defaultKind:O})}return{title:"Name",highlight:!0,customFilterAndSearch(L,te){return x(te).includes(L)},customSort(L,te){return x(L).localeCompare(x(te))},render:L=>{var te;return r.createElement(Oa,{entityRef:L,defaultKind:O,title:(te=L.metadata)==null?void 0:te.title})}}},createEntityRelationColumn(y){const{title:O,relation:x,defaultKind:L,filter:te}=y;function ye(xe){return(0,Ft.g)(xe,x,te)}function Be(xe){return ye(xe).map(at=>Rn(at,{defaultKind:L})).join(", ")}return{title:O,customFilterAndSearch(xe,at){return Be(at).includes(xe)},customSort(xe,at){return Be(xe).localeCompare(Be(at))},render:xe=>r.createElement(Qa,{entityRefs:ye(xe),defaultKind:L})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:b.vv,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:b.jn,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:b.jn,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:y=>r.createElement(ht.Mm,{text:y.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),Ta=[Cn.createEntityRefColumn({defaultKind:"system"}),Cn.createDomainColumn(),Cn.createOwnerColumn(),Cn.createMetadataDescriptionColumn()],Ia=[Cn.createEntityRefColumn({defaultKind:"component"}),Cn.createSystemColumn(),Cn.createOwnerColumn(),Cn.createSpecTypeColumn(),Cn.createSpecLifecycleColumn(),Cn.createMetadataDescriptionColumn()],Ra=(0,k.A)(y=>({empty:{padding:y.spacing(2),display:"flex",justifyContent:"center"}})),da=y=>{const{entities:O,title:x,emptyContent:L,variant:te="gridItem",columns:ye,tableOptions:Be={}}=y,xe=Ra(),at={minWidth:"0",width:"100%"};return te==="gridItem"&&(at.height="calc(100% - 10px)"),r.createElement(ht.XI,{columns:ye,title:x,style:at,emptyContent:L&&r.createElement("div",{className:xe.empty},L),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...Be},data:O})};da.columns=Cn,da.systemEntityColumns=Ta,da.componentEntityColumns=Ia;const Va=(0,J.A)({root:{color:"#f3ba37"}})(Vt.A),tr=y=>{const{toggleStarredEntity:O,isStarredEntity:x}=Fe(y.entity);return r.createElement(j.A,{"aria-label":"favorite",color:"inherit",...y,onClick:()=>O()},r.createElement(I.Ay,{title:x?"Remove from favorites":"Add to favorites"},x?r.createElement(Va,null):r.createElement(On.A,null)))},dr=nt.A;function Er(y,O){if(y)return y.toLocaleLowerCase("en-US");if(O)try{return(0,b.KU)(O).kind.toLocaleLowerCase("en-US")}catch{return}}function uo(y,O){const x=(0,l.nm)(),L=Er(y,O);return L&&x.getSystemIcon(`kind:${L}`)||dr}function Nr(y){const{kind:O,entityRef:x,...L}=y,te=uo(O,x);return r.createElement(te,{...L})}const mo=(0,k.A)(y=>({node:{fill:y.palette.grey[300],stroke:y.palette.grey[300],"&.primary":{fill:y.palette.primary.light,stroke:y.palette.primary.light},"&.secondary":{fill:y.palette.secondary.light,stroke:y.palette.secondary.light}},text:{fill:y.palette.getContrastText(y.palette.grey[300]),"&.primary":{fill:y.palette.primary.contrastText},"&.secondary":{fill:y.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Vr(y){const O=(0,s.u)(de),x=(0,b.U2)(y),{loading:L,error:te,value:ye}=(0,W.A)(async()=>{const Be=await O.getEntityAncestors({entityRef:x}),xe=new Array,at=new Array;for(const Nt of Be.items){const wt=(0,b.U2)(Nt.entity),en=wt===Be.rootEntityRef;xe.push({id:wt,root:en,...Nt.entity});for(const En of Nt.parentEntityRefs)at.push({from:wt,to:En})}return{nodes:xe,edges:at}},[x]);return{loading:L,error:te,nodes:(ye==null?void 0:ye.nodes)||[],edges:(ye==null?void 0:ye.edges)||[]}}function Zr({node:y}){const O=mo(),x=(0,yt.Zp)(),L=(0,l.Sf)(La),[te,ye]=(0,r.useState)(0),[Be,xe]=(0,r.useState)(0),at=(0,l.nm)(),Nt=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(Nt.current){let{height:pa,width:Wn}=Nt.current.getBBox();pa=Math.round(pa),Wn=Math.round(Wn),(pa!==Be||Wn!==te)&&(ye(Wn),xe(pa))}},[te,Be]);const wt=at.getSystemIcon(`kind:${y.kind.toLocaleLowerCase("en-US")}`),en=10,En=Be,un=wt?En+en:0,xn=un+te+en*2,Zn=Be+en*2,In=y.metadata.title||(y.kind&&y.metadata.name&&y.metadata.namespace?Rn({kind:y.kind,name:y.metadata.name,namespace:y.metadata.namespace||""}):y.id),sa=()=>{x(L({kind:y.kind,namespace:y.metadata.namespace||b.oQ,name:y.metadata.name}))};return r.createElement("g",{onClick:sa,className:O.clickable},r.createElement("rect",{className:on()(O.node,y.root?"secondary":"primary"),width:xn,height:Zn,rx:10}),wt&&r.createElement(Nr,{kind:y.kind,y:en,x:en,width:En,height:En,className:on()(O.text,y.root?"secondary":"primary")}),r.createElement("text",{ref:Nt,className:on()(O.text,y.root?"secondary":"primary"),y:Zn/2,x:un+(te+en*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},In))}function Rr(y){const{loading:O,error:x,nodes:L,edges:te}=Vr(y.entity);return O?r.createElement(ht.ke,null):x?r.createElement(ht._1,{error:x}):r.createElement(r.Fragment,null,r.createElement(ue.A,{variant:"h2"},"Ancestry"),r.createElement(ue.A,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",r.createElement(ht.N_,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),r.createElement(ie.A,{mt:4},r.createElement(ht.wB,{nodes:L,edges:te,renderNode:Zr,direction:ht.DT.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const Yr=(0,k.A)(y=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:y.spacing(2)},helpIcon:{marginLeft:y.spacing(1),color:y.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Xa(y){const O=Yr();return r.createElement(N.A,{...y,primaryTypographyProps:{className:O.monospace},secondaryTypographyProps:{className:O.monospace}})}function vr(y){const O=Yr();return r.createElement(Te.A,{className:O.monospace},y.children)}function Dr(y){return r.createElement(ie.A,{mt:2},r.createElement(h.A,{variant:"outlined"},r.createElement(dt.A,null,r.createElement(G.A,{variant:"h6",gutterBottom:!0},y.title,y.helpLink&&r.createElement(eo,{to:y.helpLink})),y.children)))}function qr(y){if(y.match(/^url:https?:\/\//))return y.slice(4);if(y.match(/^https?:\/\//))return y}function Jr(y){const[O,x]=y.entry,L=qr(x);return r.createElement(Ge.A,null,y.indent&&r.createElement(v.A,null),r.createElement(Xa,{primary:O,secondary:L?r.createElement(ht.N_,{to:L},x):x}))}function eo(y){const O=Yr();return r.createElement(ht.N_,{to:y.to,className:O.helpIcon},r.createElement(gt.A,{fontSize:"inherit"}))}const po=(0,k.A)({root:{display:"flex",flexDirection:"column"}});function wr(y){var O,x;const L=(0,s.u)(de),te=(0,b.U2)(y),ye=(O=y.metadata.annotations)==null?void 0:O[b.Eo],Be=(x=y.metadata.annotations)==null?void 0:x[b.r2],{loading:xe,error:at,value:Nt}=(0,W.A)(async()=>!ye&&!Be?[]:(await L.getEntities({filter:[...ye?[{[`metadata.annotations.${b.Eo}`]:ye}]:[],...Be?[{[`metadata.annotations.${b.r2}`]:Be}]:[]]})).items,[ye,Be]);return{loading:xe,error:at,location:ye,originLocation:Be,colocatedEntities:Nt==null?void 0:Nt.filter(wt=>(0,b.U2)(wt)!==te)}}function Fr(y){return r.createElement(M.A,{dense:!0},y.header&&r.createElement(Jr,{key:"header",entry:y.header}),y.entities.map(O=>r.createElement(Ge.A,{key:(0,b.U2)(O)},r.createElement(Xa,{primary:r.createElement(Oa,{entityRef:O})}))))}function to(y){const{entity:O}=y,{loading:x,error:L,location:te,originLocation:ye,colocatedEntities:Be}=wr(O);if(x)return r.createElement(ht.ke,null);if(L)return r.createElement(ht._1,{error:L});if(!te&&!ye)return r.createElement(tn.A,{severity:"warning"},"Entity had no location information.");if(!(Be!=null&&Be.length))return r.createElement(tn.A,{severity:"info"},"There were no other entities on this location.");if(te===ye)return r.createElement(Fr,{entities:Be});const xe=Be.filter(Nt=>{var wt;return((wt=Nt.metadata.annotations)==null?void 0:wt[b.Eo])===te}),at=Be.filter(Nt=>{var wt;return((wt=Nt.metadata.annotations)==null?void 0:wt[b.r2])===ye});return r.createElement(r.Fragment,null,xe.length>0&&r.createElement(Fr,{entities:xe,header:["At the same location",te]}),at.length>0&&r.createElement(Fr,{entities:at,header:["At the same origin",ye]}))}function hr(y){const O=po();return r.createElement(r.Fragment,null,r.createElement(ue.A,{variant:"h2"},"Colocated"),r.createElement(ue.A,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),r.createElement("div",{className:O.root},r.createElement(to,{entity:y.entity})))}function gr(y){return Object.fromEntries([...Object.entries(y)].sort((O,x)=>O[0]<x[0]?-1:1))}function Wr(y){return r.createElement(r.Fragment,null,r.createElement(ue.A,{variant:"h2"},"Entity as JSON"),r.createElement(ue.A,null,"This is the raw entity data as received from the catalog, on JSON form."),r.createElement(ue.A,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(ht.z7,{text:JSON.stringify(gr(y.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const Or=(0,k.A)({root:{display:"flex",flexDirection:"column"}});function yr(y){var O,x,L;const te=Or(),{apiVersion:ye,kind:Be,metadata:xe,spec:at,relations:Nt=[],status:wt={}}=y.entity,en=ot()(lt()(Nt,un=>un.targetRef),"type"),En=(0,b.U2)(y.entity);return r.createElement(r.Fragment,null,r.createElement(ue.A,{variant:"h2"},"Overview"),r.createElement("div",{className:te.root},r.createElement(Dr,{title:"Identity"},r.createElement(M.A,{dense:!0},r.createElement(Ge.A,null,r.createElement(Xa,{primary:"apiVersion",secondary:ye})),r.createElement(Ge.A,null,r.createElement(Xa,{primary:"kind",secondary:Be})),(at==null?void 0:at.type)&&r.createElement(Ge.A,null,r.createElement(Xa,{primary:"spec.type",secondary:(O=at.type)==null?void 0:O.toString()})),xe.uid&&r.createElement(Ge.A,null,r.createElement(Xa,{primary:"uid",secondary:xe.uid}),r.createElement(Q.A,null,r.createElement(ht.lz,{text:xe.uid}))),xe.etag&&r.createElement(Ge.A,null,r.createElement(Xa,{primary:"etag",secondary:xe.etag}),r.createElement(Q.A,null,r.createElement(ht.lz,{text:xe.etag}))),r.createElement(Ge.A,null,r.createElement(Xa,{primary:"entityRef",secondary:En}),r.createElement(Q.A,null,r.createElement(ht.lz,{text:En}))))),r.createElement(Dr,{title:"Metadata"},!!Object.keys(xe.annotations||{}).length&&r.createElement(M.A,{dense:!0,subheader:r.createElement(vr,null,"Annotations",r.createElement(eo,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(xe.annotations).map(un=>r.createElement(Jr,{key:un[0],indent:!0,entry:un}))),!!Object.keys(xe.labels||{}).length&&r.createElement(M.A,{dense:!0,subheader:r.createElement(vr,null,"Labels")},Object.entries(xe.labels).map(un=>r.createElement(Jr,{key:un[0],indent:!0,entry:un}))),!!((x=xe.tags)!=null&&x.length)&&r.createElement(M.A,{dense:!0,subheader:r.createElement(vr,null,"Tags")},xe.tags.map((un,xn)=>r.createElement(Ge.A,{key:`${un}-${xn}`},r.createElement(v.A,null),r.createElement(Xa,{primary:un}))))),!!Nt.length&&r.createElement(Dr,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(en).map(([un,xn],Zn)=>r.createElement("div",{key:Zn},r.createElement(M.A,{dense:!0,subheader:r.createElement(vr,null,un)},xn.map(In=>r.createElement(Ge.A,{key:In.targetRef},r.createElement(Xa,{primary:r.createElement(Oa,{entityRef:In.targetRef})}))))))),!!((L=wt.items)!=null&&L.length)&&r.createElement(Dr,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},wt.items.map((un,xn)=>r.createElement("div",{key:xn},r.createElement(G.A,null,un.level,": ",un.type),r.createElement(ie.A,{ml:2},un.message))))))}function Mr(y){return r.createElement(r.Fragment,null,r.createElement(ue.A,{variant:"h2"},"Entity as YAML"),r.createElement(ue.A,null,"This is the raw entity data as received from the catalog, on YAML form."),r.createElement(ue.A,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(ht.z7,{text:Ze.Ay.stringify(gr(y.entity)),language:"yaml",showCopyCodeButton:!0}))))}const Tr=(0,k.A)(y=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:y.palette.background.paper},tabs:{borderRight:`1px solid ${y.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Wa(y){const{children:O,value:x,index:L,...te}=y,ye=Tr();return r.createElement("div",{role:"tabpanel",hidden:x!==L,id:`vertical-tabpanel-${L}`,"aria-labelledby":`vertical-tab-${L}`,className:ye.tabContents,...te},x===L&&r.createElement(ie.A,{pl:3,pr:3},O))}function xr(y){return{id:`vertical-tab-${y}`,"aria-controls":`vertical-tabpanel-${y}`}}function ho(y){const O=Tr(),[x,L]=r.useState(0);return(0,r.useEffect)(()=>{L(0)},[y.open]),y.entity?r.createElement(rt.A,{fullWidth:!0,maxWidth:"xl",open:y.open,onClose:y.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:O.fullHeightDialog}},r.createElement(pt.A,{id:"entity-inspector-dialog-title"},"Entity Inspector"),r.createElement(qe.A,{dividers:!0},r.createElement("div",{className:O.root},r.createElement(st.A,{orientation:"vertical",variant:"scrollable",value:x,onChange:(te,ye)=>L(ye),"aria-label":"Inspector options",className:O.tabs},r.createElement(Oe.A,{label:"Overview",...xr(0)}),r.createElement(Oe.A,{label:"Ancestry",...xr(1)}),r.createElement(Oe.A,{label:"Colocated",...xr(2)}),r.createElement(Oe.A,{label:"Raw JSON",...xr(3)}),r.createElement(Oe.A,{label:"Raw YAML",...xr(4)})),r.createElement(Wa,{value:x,index:0},r.createElement(yr,{entity:y.entity})),r.createElement(Wa,{value:x,index:1},r.createElement(Rr,{entity:y.entity})),r.createElement(Wa,{value:x,index:2},r.createElement(hr,{entity:y.entity})),r.createElement(Wa,{value:x,index:3},r.createElement(Wr,{entity:y.entity})),r.createElement(Wa,{value:x,index:4},r.createElement(Mr,{entity:y.entity})))),r.createElement(je.A,null,r.createElement(_e.A,{onClick:y.onClose,color:"primary"},"Close"))):null}function go(y){var O;const x=(0,s.u)(de),L=(O=y.metadata.annotations)==null?void 0:O[b.r2],te=y.metadata.uid,ye=L==="bootstrap:bootstrap",Be=(0,W.A)(async()=>{const xn=x.getLocationByRef(L);let Zn;if(!L)Zn=Promise.resolve([]);else{const In=`metadata.annotations.${b.r2}`;Zn=x.getEntities({filter:{[In]:L},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(sa=>sa.items)}return Promise.all([xn,Zn]).then(([In,sa])=>({location:In,colocatedEntities:sa}))},[x,y]),xe=(0,r.useCallback)(async function(){const{location:Zn}=Be.value;await x.removeLocationById(Zn.id)},[x,Be]),at=(0,r.useCallback)(async function(){await x.removeEntityByUid(te)},[x,te]);if(ye)return{type:"bootstrap",location:L,deleteEntity:at};const{loading:Nt,error:wt,value:en}=Be;if(Nt)return{type:"loading"};if(wt)return{type:"error",error:wt};const{location:En,colocatedEntities:un}=en;return En?{type:"unregister",location:L,colocatedEntities:un.map(b.sM),unregisterLocation:xe,deleteEntity:at}:{type:"only-delete",deleteEntity:at}}const no=(0,k.A)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),ao=({entity:y,onConfirm:O,onClose:x})=>{var L;const te=(0,s.u)(s.l),ye=(0,s.u)(s.p),Be=no(),xe=go(y),[at,Nt]=(0,r.useState)(!1),[wt,en]=(0,r.useState)(!1),En=(L=ye.getOptionalString("app.title"))!=null?L:"Backstage",un=(0,r.useCallback)(async function(){if("unregisterLocation"in xe){en(!0);try{await xe.unregisterLocation(),O()}catch(sa){(0,V.tX)(sa),te.post({message:sa.message})}finally{en(!1)}}},[te,O,xe]),xn=(0,r.useCallback)(async function(){var sa;if("deleteEntity"in xe){en(!0);try{await xe.deleteEntity();const pa=(sa=y.metadata.title)!=null?sa:y.metadata.name;O(),te.post({message:`Removed entity ${pa}`,severity:"success",display:"transient"})}catch(pa){(0,V.tX)(pa),te.post({message:pa.message})}finally{en(!1)}}},[te,O,xe,y]),Zn=()=>r.createElement(je.A,{className:Be.dialogActions},r.createElement(_e.A,{onClick:x,color:"primary"},"Cancel"));return xe.type==="loading"?r.createElement(ht.ke,null):xe.type==="error"?r.createElement(ht._1,{error:xe.error}):xe.type==="bootstrap"?r.createElement(r.Fragment,null,r.createElement(tn.A,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',xe.location,'"). If you believe this is in error, please contact the ',En," ","integrator."),r.createElement(ie.A,{marginTop:2},!at&&r.createElement(r.Fragment,null,r.createElement(_e.A,{variant:"text",size:"small",color:"primary",className:Be.advancedButton,onClick:()=>Nt(!0)},"Advanced Options"),r.createElement(Zn,null)),at&&r.createElement(r.Fragment,null,r.createElement(ue.A,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(_e.A,{variant:"contained",color:"secondary",disabled:wt,onClick:xn},"Delete Entity"),r.createElement(Zn,null)))):xe.type==="only-delete"?r.createElement(r.Fragment,null,r.createElement(ue.A,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),r.createElement(_e.A,{variant:"contained",color:"secondary",disabled:wt,onClick:xn},"Delete Entity"),r.createElement(Zn,null)):xe.type==="unregister"?r.createElement(r.Fragment,null,r.createElement(ue.A,null,"This action will unregister the following entities:"),r.createElement(ue.A,{component:"ul"},xe.colocatedEntities.map(In=>r.createElement("li",{key:`${In.kind}:${In.namespace}/${In.name}`},r.createElement(Oa,{entityRef:In})))),r.createElement(ue.A,null,"Located at the following location:"),r.createElement(ue.A,{component:"ul"},r.createElement("li",null,xe.location)),r.createElement(ue.A,null,"To undo, just re-register the entity in ",En,"."),r.createElement(ie.A,{marginTop:2},r.createElement(_e.A,{variant:"contained",color:"secondary",disabled:wt,onClick:un},"Unregister Location"),!at&&r.createElement(ie.A,{component:"span",marginLeft:2},r.createElement(_e.A,{variant:"text",size:"small",color:"primary",className:Be.advancedButton,onClick:()=>Nt(!0)},"Advanced Options"))),at&&r.createElement(r.Fragment,null,r.createElement(ie.A,{paddingTop:4,paddingBottom:4},r.createElement($e.A,null)),r.createElement(ue.A,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(_e.A,{variant:"contained",color:"secondary",disabled:wt,onClick:xn},"Delete Entity"))):r.createElement(tn.A,{severity:"error"},"Internal error: Unknown state")},ya=y=>{const{open:O,onConfirm:x,onClose:L,entity:te}=y;return r.createElement(rt.A,{open:O,onClose:L},r.createElement(pt.A,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),r.createElement(qe.A,null,r.createElement(ao,{entity:te,onConfirm:x,onClose:L})))},Za=(0,k.A)(y=>({code:{borderRadius:6,margin:y.spacing(2,0),background:y.palette.type==="dark"?"#444":y.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Kr(y,O){var x,L;const te=(O==null?void 0:O.kind)||"Component",ye=(O==null?void 0:O.metadata.name)||"example",Be=((x=O==null?void 0:O.spec)==null?void 0:x.type)||"website",xe=((L=O==null?void 0:O.spec)==null?void 0:L.owner)||"user:default/guest",at=`apiVersion: backstage.io/v1alpha1
kind: ${te}
metadata:
  name: ${ye}
  annotations:${y.map(en=>`
    ${en}: value`).join("")}
spec:
  type: ${Be}
  owner: ${xe}`;let Nt=6;const wt=[];return y.forEach(()=>{wt.push(Nt),Nt++}),{yamlText:at,lineNumbers:wt}}function mr(y,O="Component"){const x=y.length<=1;return r.createElement(r.Fragment,null,"The ",x?"annotation":"annotations"," ",y.map(L=>r.createElement("code",null,L)).reduce((L,te)=>r.createElement(r.Fragment,null,L,", ",te))," ",x?"is":"are"," missing. You need to add the"," ",x?"annotation":"annotations"," to your ",O," if you want to enable this tool.")}function Ar(y){let O;try{O=(0,Ft.u)().entity}catch{}const{annotation:x,readMoreUrl:L}=y,te=Array.isArray(x)?x:[x],ye=L||"https://backstage.io/docs/features/software-catalog/well-known-annotations",Be=Za(),xe=(O==null?void 0:O.kind)||"Component",{yamlText:at,lineNumbers:Nt}=Kr(te,O);return r.createElement(ht.pp,{missing:"field",title:"Missing Annotation",description:mr(te,xe),action:r.createElement(r.Fragment,null,r.createElement(G.A,{variant:"body1"},"Add the annotation to your ",xe," YAML as shown in the highlighted example below:"),r.createElement(ie.A,{className:Be.code},r.createElement(ht.z7,{text:at,language:"yaml",showLineNumbers:!0,highlightedNumbers:Nt,customStyle:{background:"inherit",fontSize:"115%"}})),r.createElement(_e.A,{color:"primary",component:ht.N_,to:ye},"Read more"))})}function Qr(y){var O;const{children:x,value:L}=y,[te,ye]=useState((O=L==null?void 0:L.filters)!=null?O:{}),Be=useCallback(Nt=>{ye(wt=>{const en=typeof Nt=="function"?Nt(wt):Nt;return{...wt,...en}})},[]),xe=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),at=useMemo(()=>{var Nt,wt,en,En,un,xn,Zn;return{entities:(Nt=L==null?void 0:L.entities)!=null?Nt:xe.entities,backendEntities:(wt=L==null?void 0:L.backendEntities)!=null?wt:xe.backendEntities,updateFilters:(en=L==null?void 0:L.updateFilters)!=null?en:Be,filters:te,loading:(En=L==null?void 0:L.loading)!=null?En:!1,queryParameters:(un=L==null?void 0:L.queryParameters)!=null?un:xe.queryParameters,error:L==null?void 0:L.error,totalItems:(Zn=L==null?void 0:L.totalItems)!=null?Zn:((xn=L==null?void 0:L.entities)!=null?xn:xe.entities).length}},[L,xe,te,Be]);return React.createElement(Pn.Provider,{value:at},x)}},98881:(Dn,Ct,e)=>{"use strict";e.d(Ct,{E:()=>Ge});var s=e(29835),l=e(22968),b=e(48821),_=e(11638),z=e(92651),r=e(2069),q=e(77125),ee=e(74219),a=e(14041),he=e(18690),_e=e(37197),le=e(29365),ie=e(46423),G=e(5951),we=e(26343),Ce=e(28233),ft=e(55197),k=e(71677),ce=e(58837),I=e(85005),h=e(71407),M=e(26314),C=e(90749),v=e(99993),N=e(92399),Q=e(36338),De=e(21319);function Ee(rt){var pt;const{unregisterEntityOptions:qe,isUnregisterAllowed:st,onUnregisterEntity:Oe,onClose:je}=rt,$e=typeof(qe==null?void 0:qe.disableUnregister)=="boolean",vt=(pt=!st||($e?!!(qe!=null&&qe.disableUnregister):(qe==null?void 0:qe.disableUnregister)==="disable"))!=null?pt:!1;let ht=a.createElement(a.Fragment,null);return(qe==null?void 0:qe.disableUnregister)!=="hidden"&&(ht=a.createElement(we.A,{onClick:()=>{je(),Oe()},disabled:vt},a.createElement(ie.A,null,a.createElement(N.A,{fontSize:"small"})),a.createElement(G.A,{primary:"Unregister entity"}))),a.createElement(a.Fragment,null,ht)}const X=(0,ce.A)(rt=>({button:{color:rt.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function p(rt){const{UNSTABLE_extraContextMenuItems:pt,UNSTABLE_contextMenuOptions:qe,onUnregisterEntity:st,onInspectEntity:Oe}=rt,[je,$e]=(0,a.useState)(),vt=X(),Ft=(0,C.Az)(v.Nf).allowed,me=S=>{$e(S.currentTarget)},ke=()=>{$e(void 0)},bt=(0,b.u)(b.l),[Yt,yt]=(0,Q.A)();(0,a.useEffect)(()=>{!Yt.error&&Yt.value&&bt.post({message:"Copied!",severity:"info",display:"transient"})},[Yt,bt]);const _t=pt&&[...pt.map(S=>a.createElement(we.A,{key:S.title,onClick:()=>{ke(),S.onClick()}},a.createElement(ie.A,null,a.createElement(S.Icon,{fontSize:"small"})),a.createElement(G.A,{primary:S.title}))),a.createElement(_e.A,{key:"the divider is here!"})];return a.createElement(a.Fragment,null,a.createElement(k.Ay,{title:"More",arrow:!0},a.createElement(le.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!je,role:"button",onClick:me,"data-testid":"menu-button",className:vt.button,id:"long-menu"},a.createElement(h.A,null))),a.createElement(ft.Ay,{open:!!je,onClose:ke,anchorEl:je,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},a.createElement(Ce.A,{autoFocusItem:!!je},_t,a.createElement(Ee,{unregisterEntityOptions:qe,isUnregisterAllowed:Ft,onUnregisterEntity:st,onClose:ke}),a.createElement(we.A,{onClick:()=>{ke(),Oe()}},a.createElement(ie.A,null,a.createElement(I.A,{fontSize:"small"})),a.createElement(G.A,{primary:"Inspect entity"})),a.createElement(we.A,{onClick:()=>{ke(),yt(window.location.toString())}},a.createElement(ie.A,null,a.createElement(M.A,{fontSize:"small"})),a.createElement(G.A,{primary:"Copy entity URL"})))))}const j="plugin.catalog.entityLayoutRoute",J=()=>null;(0,_.h3)(J,j,!0),(0,_.h3)(J,"core.gatherMountPoints",!0);function ue(rt){const{entity:pt,title:qe}=rt;return a.createElement(q.A,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},a.createElement(q.A,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},pt?a.createElement(z.d5,{entityRef:pt,hideIcon:!0}):qe),pt&&a.createElement(z.uR,{entity:pt}))}function Te(rt,pt,qe,st){var Oe,je,$e,vt,ht;const Ft=(Oe=rt!=null?rt:st==null?void 0:st.kind)!=null?Oe:"",me=(je=pt!=null?pt:st==null?void 0:st.metadata.namespace)!=null?je:"";return{headerTitle:`${(ht=(vt=($e=st==null?void 0:st.metadata.title)!=null?$e:qe)!=null?vt:st==null?void 0:st.metadata.name)!=null?ht:""}${me&&me!==s.oQ?` in ${me}`:""}`,headerType:(()=>{let bt=Ft.toLocaleLowerCase("en-US");return st&&st.spec&&"type"in st.spec&&(bt+=" \u2014 ",bt+=st.spec.type.toLocaleLowerCase("en-US")),bt})()}}function dt(rt){var pt,qe;const{entity:st}=rt,Oe=(0,r.g)(st,s.vv);return a.createElement(a.Fragment,null,Oe.length>0&&a.createElement(l.ST,{label:"Owner",contentTypograpyRootComponent:"p",value:a.createElement(z.iI,{entityRefs:Oe,defaultKind:"Group",color:"inherit"})}),((pt=st.spec)==null?void 0:pt.lifecycle)&&a.createElement(l.ST,{label:"Lifecycle",value:(qe=st.spec.lifecycle)==null?void 0:qe.toString()}))}const Ge=rt=>{var pt,qe,st;const{UNSTABLE_extraContextMenuItems:Oe,UNSTABLE_contextMenuOptions:je,children:$e,NotFoundComponent:vt}=rt,{kind:ht,namespace:Ft,name:me}=(0,_.KS)(z.sF),{entity:ke,loading:bt,error:Yt}=(0,r.a)(),yt=(0,he.zy)(),_t=(0,_.OJ)($e,tn=>tn.selectByComponentData({key:j,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:Ut})=>{if(ke){if(Ut.if&&!Ut.if(ke))return[]}else return[];return[{path:Ut.path,title:Ut.title,children:Ut.children,tabProps:Ut.tabProps}]}),[ke]),{headerTitle:S,headerType:R}=Te(ht,Ft,me,ke),[W,Z]=(0,a.useState)(!1),[Pe,Ue]=(0,a.useState)(!1),lt=(0,he.Zp)(),et=(0,_.Sf)(De.r),Je=(0,_.Sf)(De.u),Wt=async()=>{Z(!1),Ue(!1),lt(Je?Je():et())};return(0,a.useEffect)(()=>{Z(!1),Ue(!1)},[yt.pathname]),a.createElement(l.YW,{themeId:(st=(qe=(pt=ke==null?void 0:ke.spec)==null?void 0:pt.type)==null?void 0:qe.toString())!=null?st:"home"},a.createElement(l.Y9,{title:a.createElement(ue,{title:S,entity:ke}),pageTitleOverride:S,type:R},ke&&a.createElement(a.Fragment,null,a.createElement(dt,{entity:ke}),a.createElement(p,{UNSTABLE_extraContextMenuItems:Oe,UNSTABLE_contextMenuOptions:je,onUnregisterEntity:()=>Z(!0),onInspectEntity:()=>Ue(!0)}))),bt&&a.createElement(l.ke,null),ke&&a.createElement(l.kE,{routes:_t}),Yt&&a.createElement(l.UC,null,a.createElement(ee.A,{severity:"error"},Yt.toString())),!bt&&!Yt&&!ke&&a.createElement(l.UC,null,vt||a.createElement(l.Bp,{title:"Entity not found"},"There is no ",ht," with the requested"," ",a.createElement(l.N_,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),a.createElement(z.Id,{open:W,entity:ke,onConfirm:Wt,onClose:()=>Z(!1)}),a.createElement(z.qq,{open:Pe,entity:ke,onClose:()=>Ue(!1)}))};Ge.Route=J},54067:(Dn,Ct,e)=>{"use strict";e.d(Ct,{E:()=>j,a:()=>h,b:()=>v,c:()=>De,d:()=>Ee,h:()=>C,i:()=>I});var s=e(92651),l=e(2069),b=e(74219),_=e(14041),z=e(18690),r=e(64947),q=e(76891),ee=e(93453),a=e(61477),he=e(48821),_e=e(11638),le=e(3399),ie=e(21319),G=e(73466),we=e(77125),Ce=e(22968),ft=e(29835),k=e(75757);function ce(Te){const{open:dt,onClose:Ge,onConfirm:rt,entity:pt}=Te,[qe,st]=(0,_.useState)(!1),Oe=(0,he.u)(s.vp),je=(0,he.u)(he.l),$e=async()=>{st(!0);try{const vt=pt.metadata.uid;await Oe.removeEntityByUid(vt),rt()}catch(vt){(0,le.tX)(vt),je.post({message:vt.message})}finally{st(!1)}};return _.createElement(q.A,{open:dt,onClose:Ge},_.createElement(a.A,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),_.createElement(ee.A,null,_.createElement(r.A,{variant:"contained",color:"secondary",disabled:qe,onClick:$e},"Delete"),_.createElement(r.A,{onClick:Ge,color:"primary"},"Cancel")))}function I(Te){var dt,Ge;return((Ge=(dt=Te==null?void 0:Te.metadata)==null?void 0:dt.annotations)==null?void 0:Ge["backstage.io/orphan"])==="true"}function h(){const Te=(0,z.Zp)(),dt=(0,_e.Sf)(ie.r),[Ge,rt]=(0,_.useState)(!1),{entity:pt}=(0,l.u)(),qe=async()=>{rt(!1),Te(dt())};return _.createElement(_.Fragment,null,_.createElement(b.A,{severity:"warning",onClick:()=>rt(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),_.createElement(ce,{open:Ge,entity:pt,onConfirm:qe,onClose:()=>rt(!1)}))}async function M(Te,dt){var Ge;const rt=(Ge=Te.relations)==null?void 0:Ge.map(qe=>qe.targetRef);if(!rt||(rt==null?void 0:rt.length)<1||rt.length>1e3)return[];const pt=await dt.getEntitiesByRefs({entityRefs:rt,fields:["kind","metadata.name","metadata.namespace"]});return rt.filter((qe,st)=>pt.items[st]===void 0)}async function C(Te,dt){const Ge=dt.apis.get(s.vp);if(!Ge)throw new Error(`No implementation available for ${s.vp}`);return(await M(Te,Ge)).length>0}function v(){const{entity:Te}=(0,l.u)(),dt=(0,he.u)(s.vp),{loading:Ge,error:rt,value:pt}=(0,G.A)(async()=>M(Te,dt),[Te,dt]);return rt?_.createElement(we.A,{mb:1},_.createElement(Ce._1,{error:rt})):Ge||!pt||pt.length===0?null:_.createElement(_.Fragment,null,_.createElement(b.A,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",_.createElement("br",null),"Entities not found are: ",pt.join(", ")))}const N=Te=>Te.error&&Te.level==="error"&&Te.type===k.K3;async function Q(Te,dt){return{items:(await dt.getEntityAncestors({entityRef:Te})).items.map(pt=>{var qe,st;return{errors:((st=(qe=pt.entity.status)==null?void 0:qe.items)!=null?st:[]).filter(N).map($e=>$e.error).filter($e=>!!$e),entity:pt.entity}}).filter(pt=>pt.errors.length>0)}}async function De(Te,dt){const Ge=dt.apis.get(s.vp);if(!Ge)throw new Error(`No implementation available for ${s.vp}`);return(await Q((0,ft.U2)(Te),Ge)).items.length>0}function Ee(){const{entity:Te}=(0,l.u)(),dt=(0,ft.U2)(Te),Ge=(0,he.u)(s.vp),{loading:rt,error:pt,value:qe}=(0,G.A)(async()=>Q(dt,Ge),[dt,Ge]);return pt?_.createElement(we.A,{mb:1},_.createElement(Ce._1,{error:pt})):rt||!qe?null:_.createElement(_.Fragment,null,qe.items.map((st,Oe)=>_.createElement(we.A,{key:Oe,mb:1},(0,ft.U2)(Te)!==(0,ft.U2)(st.entity)&&_.createElement(we.A,{p:1},"The error below originates from"," ",_.createElement(s.zI,{entityRef:st.entity})),st.errors.map((je,$e)=>_.createElement(Ce._1,{key:$e,error:je})))))}const X="core.backstage.entitySwitch",p=Te=>null;(0,_e.h3)(p,X,!0);const j=Te=>{var dt,Ge;const{entity:rt,loading:pt}=(0,l.a)(),qe=(0,he.b)(),st=(0,_e.OJ)(Te.children,je=>je.selectByComponentData({key:X,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap($e=>{if(pt&&!rt)return[];const{if:vt,children:ht}=$e.props;return rt?[{if:vt==null?void 0:vt(rt,{apis:qe}),children:ht}]:[{if:vt===void 0,children:ht}]}),[qe,rt,pt]);if(st.some(je=>typeof je.if=="object"&&"then"in je.if))return _.createElement(J,{results:st,renderMultipleMatches:Te.renderMultipleMatches});if(Te.renderMultipleMatches==="all"){const je=st.filter($e=>$e.if).map($e=>$e.children);return je.length===0?ue(st):_.createElement(_.Fragment,null,je)}return(Ge=(dt=st.find(je=>je.if))==null?void 0:dt.children)!=null?Ge:ue(st)};function J({results:Te,renderMultipleMatches:dt}){const{loading:Ge,value:rt}=(0,G.A)(async()=>{var pt;const qe=Te.map(async({if:st,children:Oe})=>{try{if(await st)return Oe}catch{}return null});if(dt==="all"){const st=(await Promise.all(qe)).filter(Boolean);return st.length===0?ue(Te):_.createElement(_.Fragment,null,st)}return(pt=(await Promise.all(qe)).find(Boolean))!=null?pt:ue(Te)},[Te]);return Ge||!rt?null:rt}function ue(Te){var dt,Ge;return(Ge=(dt=Te.filter(rt=>rt.if===void 0)[0])==null?void 0:dt.children)!=null?Ge:null}j.Case=p},21319:(Dn,Ct,e)=>{"use strict";e.d(Ct,{D:()=>me,a:()=>Yt,b:()=>je,c:()=>ke,r:()=>_t,u:()=>yt,v:()=>bt});var s=e(29835);function l(S){const{years:R=0,months:W=0,weeks:Z=0,days:Pe=0,hours:Ue=0,minutes:lt=0,seconds:et=0,milliseconds:Je=0}=S;return((((R*365+W*30+Z*7+Pe)*24+Ue)*60+lt)*60+et)*1e3+Je}var b=e(25033),_=e.n(b),z=e(25295),r=e.n(z),q=e(96403),ee=e.n(q),a=e(92651),he=e(14451),_e=e(94389),le=e(17400),ie=e(71865),G=e(52755),we=e(89350),Ce=e(33602),ft=e(48108),k=e(55700),ce=e(45250),I=e(11638);const h={seconds:10},M={milliseconds:50},C={api:le.A,component:we.A,system:_e.A,resource:k.A,domain:he.A,location:G.A,user:ft.A,group:Ce.A,template:ie.A};function v(S){return{async:S.async,render:({entityRef:R,entity:W,context:Z})=>({snapshot:(0,a.Tj)(W||R,Z),loadEntity:S.async})}}var N=(S,R,W)=>{if(!R.has(S))throw TypeError("Cannot "+W)},Q=(S,R,W)=>(N(S,R,"read from private field"),W?W.call(S):R.get(S)),De=(S,R,W)=>{if(R.has(S))throw TypeError("Cannot add the same private member more than once");R instanceof WeakSet?R.add(S):R.set(S,W)},Ee=(S,R,W,Z)=>(N(S,R,"write to private field"),Z?Z.call(S,W):R.set(S,W),W),X=(S,R,W)=>(N(S,R,"access private method"),W),p,j,J,ue,Te,dt,Ge,rt,pt,qe,st;const Oe=class Zo{constructor(R){De(this,dt),De(this,rt),De(this,qe),De(this,p,void 0),De(this,j,void 0),De(this,J,void 0),De(this,ue,void 0),De(this,Te,void 0);var W,Z,Pe,Ue;const lt=(W=R.cacheTtl)!=null?W:h,et=(Z=R.batchDelay)!=null?Z:M,Je=(Pe=R.renderer)!=null?Pe:v({async:!0}),Wt={};if(Object.entries(C).forEach(([tn,Ut])=>{Wt[tn.toLocaleLowerCase("en-US")]=Ut}),Object.entries((Ue=R.kindIcons)!=null?Ue:{}).forEach(([tn,Ut])=>{Wt[tn.toLocaleLowerCase("en-US")]=Ut}),Je.async){if(!R.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");Ee(this,J,X(this,rt,pt).call(this,{cacheTtl:lt,batchDelay:et,renderer:Je,catalogApi:R.catalogApi}))}Ee(this,j,l(lt)),Ee(this,p,new Map),Ee(this,ue,Wt),Ee(this,Te,Je)}static createLocal(){return new Zo({renderer:v({async:!1})})}static create(R){return new Zo(R)}forEntity(R,W){const{entityRef:Z,kind:Pe,entity:Ue,needsLoad:lt}=X(this,dt,Ge).call(this,R),et=tn=>{const{snapshot:Ut}=Q(this,Te).render({entityRef:Z,loading:tn.loading,entity:tn.entity,context:W||{}});return{...Ut,entityRef:Z,Icon:X(this,qe,st).call(this,Ut.Icon,Pe)}};let Je;try{Je=et({loading:lt,entity:Ue})}catch{Je={primaryTitle:Z,entityRef:Z}}const Wt=lt?new(ee())(tn=>{let Ut=!1;return Promise.resolve().then(()=>{var mt;return(mt=Q(this,J))==null?void 0:mt.load(Z)}).then(mt=>{if(!Ut&&mt&&mt.metadata.etag!==(Ue==null?void 0:Ue.metadata.etag)){const Xt=et({loading:!1,entity:mt});tn.next(Xt)}}).catch(()=>{}).finally(()=>{Ut||tn.complete()}),()=>{Ut=!0}}):void 0;return{snapshot:Je,update$:Wt}}};p=new WeakMap,j=new WeakMap,J=new WeakMap,ue=new WeakMap,Te=new WeakMap,dt=new WeakSet,Ge=function(S){if(typeof S!="string")return{entity:S,kind:S.kind,entityRef:(0,s.U2)(S),needsLoad:!1};const R=Q(this,p).get(S),W=R==null?void 0:R.entity,Pe=(!R||Date.now()-R.updatedAt>Q(this,j))&&Q(this,Te).async!==!1&&Q(this,J)!==void 0;return{entity:W,kind:(0,s.KU)(S).kind,entityRef:S,needsLoad:Pe}},rt=new WeakSet,pt=function(S){const R=l(S.cacheTtl),W=l(S.batchDelay);return new(_())(async Z=>{const{items:Pe}=await S.catalogApi.getEntitiesByRefs({entityRefs:Z}),Ue=Date.now();return Z.forEach((lt,et)=>{Q(this,p).set(lt,{updatedAt:Ue,entity:Pe[et]})}),Pe},{name:"DefaultEntityPresentationApi",cacheMap:new(r())(R),maxBatchSize:100,batchScheduleFn:W?Z=>setTimeout(Z,W):void 0})},qe=new WeakSet,st=function(S,R){return S||(S===!1?!1:Q(this,ue)[R.toLocaleLowerCase("en-US")])};let je=Oe;async function $e({storageApi:S}){var R;const W=S.forBucket("settings"),Z=S.forBucket("starredEntities"),Pe=W.snapshot("starredEntities").value;if(!(0,ce.isArray)(Pe))return;const Ue=new Set((R=Z.snapshot("entityRefs").value)!=null?R:[]);Pe.filter(ce.isString).map(lt=>lt.split(":")).filter(lt=>lt.length===4&&lt[0]==="entity").map(([lt,et,Je,Wt])=>(0,s.U2)({kind:et,namespace:Je,name:Wt})).forEach(lt=>Ue.add(lt)),await Z.set("entityRefs",Array.from(Ue)),await W.remove("starredEntities")}var vt=Object.defineProperty,ht=(S,R,W)=>R in S?vt(S,R,{enumerable:!0,configurable:!0,writable:!0,value:W}):S[R]=W,Ft=(S,R,W)=>(ht(S,typeof R!="symbol"?R+"":R,W),W);class me{constructor(R){Ft(this,"settingsStore"),Ft(this,"starredEntities"),Ft(this,"subscribers",new Set),Ft(this,"observable",new(ee())(Z=>(Z.next(new Set(this.starredEntities)),this.subscribers.add(Z),()=>{this.subscribers.delete(Z)})));var W;$e(R).then(),this.settingsStore=R.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((W=this.settingsStore.snapshot("entityRefs").value)!=null?W:[]),this.settingsStore.observe$("entityRefs").subscribe({next:Z=>{var Pe;this.starredEntities=new Set((Pe=Z.value)!=null?Pe:[]),this.notifyChanges()}})}async toggleStarred(R){this.starredEntities.has(R)?this.starredEntities.delete(R):this.starredEntities.add(R),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const R of this.subscribers)R.next(new Set(this.starredEntities))}}const ke=(0,I.Il)({id:"create-component",optional:!0}),bt=(0,I.Il)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Yt=(0,I.Il)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),yt=(0,I.Il)({id:"catalog:unregister-redirect",optional:!0}),_t=(0,I.HM)({id:"catalog"})},22073:(Dn,Ct,e)=>{"use strict";e.d(Ct,{E:()=>je,JF:()=>vt,N8:()=>Ge,Sz:()=>pt,TZ:()=>dt,VF:()=>v,Wm:()=>N,XQ:()=>ue,Z9:()=>J,bb:()=>Oe,sU:()=>Ft,yE:()=>qe,yP:()=>st,yW:()=>Te});var s=e(21319),l=e(14041),b=e(58837),_=e(99703),z=e(92651),r=e(65398),q=e.n(r),ee=e(11638),a=e(48821),he=e(75757),_e=e(70735),le=e(25033),ie=e.n(le),G=e(96403),we=e.n(G),Ce=e(45250),ft=e.n(Ce);function k(){const me=useApi(catalogApiRef),{error:ke,loading:bt,value:Yt}=useAsync(async()=>await me.getEntityFacets({facets:["kind"]}).then(_t=>{var S;return((S=_t.facets.kind)==null?void 0:S.map(R=>R.value).sort())||[]}),[me]);return{loading:bt,error:ke,allKinds:Yt!=null?Yt:[]}}function ce(me,ke,bt){let Yt=me;return ke&&(Yt=Yt.filter(_t=>ke.some(S=>S.toLocaleLowerCase("en-US")===_t.toLocaleLowerCase("en-US")))),bt&&!me.some(_t=>_t.toLocaleLowerCase("en-US")===bt.toLocaleLowerCase("en-US"))&&(Yt=Yt.concat([bt])),Yt.sort().reduce((_t,S)=>(_t[S.toLocaleLowerCase("en-US")]=S,_t),{})}const I=(0,b.A)(me=>(0,_.A)({root:{...me.typography.h4}}));function h(me){var ke,bt;const{initialFilter:Yt="component",allowedKinds:yt}=me,_t=I(),{allKinds:S}=k(),{filters:R,updateFilters:W,queryParameters:{kind:Z}}=useEntityList(),Pe=useMemo(()=>[Z].flat()[0],[Z]),[Ue,lt]=useState((bt=Pe!=null?Pe:(ke=R.kind)==null?void 0:ke.value)!=null?bt:Yt);useEffect(()=>{Pe&&lt(Pe)},[Pe]),useEffect(()=>{var Je,Wt;(Je=R.kind)!=null&&Je.value&&lt((Wt=R.kind)==null?void 0:Wt.value)},[R.kind]),useEffect(()=>{W({kind:Ue?new EntityKindFilter(Ue):void 0})},[Ue,W]);const et=ce(S,yt,Ue);return React.createElement(Select,{input:React.createElement(InputBase,null),value:Ue.toLocaleLowerCase("en-US"),onChange:Je=>lt(Je.target.value),classes:_t},Object.keys(et).map(Je=>React.createElement(MenuItem,{value:Je,key:Je},`${pluralize(et[Je])}`)))}function M(me,ke){return!!(me&&typeof me=="string"&&(me==null?void 0:me.toLocaleLowerCase("en-US"))===(ke==null?void 0:ke.toLocaleLowerCase("en-US")))}function C(me,ke){return typeof ke=="string"?M(me,ke):ke.length===0||ke.some(bt=>M(me,bt))}function v(me){return De({kind:me})}function N(me){return De({kind:"component",type:me})}function Q(me){return De({kind:"resource",type:me})}function De(me){return ke=>{var bt;return!(me.kind&&!C(ke.kind,me.kind)||me.type&&!C((bt=ke.spec)==null?void 0:bt.type,me.type))}}function Ee(me){return ke=>{var bt;return C((bt=ke.metadata)==null?void 0:bt.namespace,me)}}const X=null,p=z.GI.Filters,j=z.GI.Content,J=(0,ee.i1)({id:"catalog",apis:[(0,ee.bW)({api:z.vp,deps:{discoveryApi:a.q,fetchApi:a.s},factory:({discoveryApi:me,fetchApi:ke})=>new he.dJ({discoveryApi:me,fetchApi:ke})}),(0,ee.bW)({api:z.ah,deps:{storageApi:a.y},factory:({storageApi:me})=>new s.D({storageApi:me})}),(0,ee.bW)({api:z.nQ,deps:{catalogApi:z.vp},factory:({catalogApi:me})=>s.b.create({catalogApi:me})})],routes:{catalogIndex:s.r,catalogEntity:z.sF},externalRoutes:{createComponent:s.c,viewTechDoc:s.v,createFromTemplate:s.a,unregisterRedirect:s.u}}),ue=J.provide((0,ee.QJ)({name:"CatalogIndexPage",component:()=>e.e(2994).then(e.bind(e,62994)).then(me=>me.CatalogPage),mountPoint:s.r})),Te=J.provide((0,ee.QJ)({name:"CatalogEntityPage",component:()=>e.e(2059).then(e.bind(e,32059)).then(me=>me.CatalogEntityPage),mountPoint:z.sF})),dt=J.provide((0,ee.NC)({name:"EntityAboutCard",component:{lazy:()=>e.e(315).then(e.bind(e,50315)).then(me=>me.AboutCard)}})),Ge=J.provide((0,ee.NC)({name:"EntityLinksCard",component:{lazy:()=>e.e(3532).then(e.bind(e,73532)).then(me=>me.EntityLinksCard)}})),rt=J.provide((0,ee.NC)({name:"EntityLabelsCard",component:{lazy:()=>e.e(8878).then(e.bind(e,8878)).then(me=>me.EntityLabelsCard)}})),pt=J.provide((0,ee.NC)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(2611).then(e.bind(e,72611)).then(me=>me.HasSystemsCard)}})),qe=J.provide((0,ee.NC)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(5511).then(e.bind(e,55511)).then(me=>me.HasComponentsCard)}})),st=J.provide((0,ee.NC)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(6518).then(e.bind(e,16518)).then(me=>me.HasSubcomponentsCard)}})),Oe=J.provide((0,ee.NC)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(7471).then(e.bind(e,27471)).then(me=>me.HasResourcesCard)}})),je=J.provide((0,ee.NC)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(971).then(e.bind(e,20971)).then(me=>me.DependsOnComponentsCard)}})),$e=J.provide((0,ee.NC)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(7120).then(e.bind(e,67120)).then(me=>me.DependencyOfComponentsCard)}})),vt=J.provide((0,ee.NC)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(4271).then(e.bind(e,44271)).then(me=>me.DependsOnResourcesCard)}})),ht=J.provide((0,ee.NC)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(8484).then(e.bind(e,88484)).then(me=>me.RelatedEntitiesCard)}})),Ft=J.provide((0,_e.c)({name:"CatalogSearchResultListItem",component:()=>e.e(9575).then(e.bind(e,39575)).then(me=>me.CatalogSearchResultListItem),predicate:me=>me.type==="software-catalog"}))},79367:(Dn,Ct,e)=>{"use strict";e.d(Ct,{MM:()=>m,P4:()=>re,XT:()=>tn,Zg:()=>w,ee:()=>kn});var s=e(48821),l=e(11638),b=e(63188),_=e(49863),z=e(33478),r=e(14041),q=e(2069),ee=e(92651),a=e(73657),he=e(18690),_e=e(58837),le=e(8973),ie=e(29655),G=e(72501),we=e(78467),Ce=e(71677),ft=e(43669),k=e(4313),ce=e(18171),I=e(9719),h=e(54801),M=e(5951),C=e(91567),v=e(10985),N=e(61009),Q=e(77125),De=e(88951),Ee=e(4321),X=e(13677),p=e(99703),j=e(42899),J=e(67720),ue=e(91413),Te=e(29365),dt=e(60083),Ge=e(16249),rt=e(64947),pt=e(81215),qe=e(26343),st=e(6924),Oe=e(21718),je=e(52950),$e=e(22968),vt=e(73466),ht=e(4832),Ft=e(29835),me=e(52536),ke=e.n(me),bt=e(42226),Yt=e(64118),yt=e(77714),_t=e(28966),S=e(74219);const R=(0,s.c)({id:"plugin.githubactions.service"});var W=Object.defineProperty,Z=(D,U,Y)=>U in D?W(D,U,{enumerable:!0,configurable:!0,writable:!0,value:Y}):D[U]=Y,Pe=(D,U,Y)=>(Z(D,typeof U!="symbol"?U+"":U,Y),Y);class Ue{constructor(U){Pe(this,"configApi"),Pe(this,"scmAuthApi"),this.configApi=U.configApi,this.scmAuthApi=U.scmAuthApi}async getOctokit(U="github.com"){var Y;const{token:Se}=await this.scmAuthApi.getCredentials({url:`https://${U}/`,additionalScope:{customScopes:{github:["repo"]}}}),ut=(0,b.bm)((Y=this.configApi.getOptionalConfigArray("integrations.github"))!=null?Y:[]).find(sn=>sn.host===U),St=ut==null?void 0:ut.apiBaseUrl;return new _.E({auth:Se,baseUrl:St})}async reRunWorkflow(U){const{hostname:Y,owner:Se,repo:Re,runId:ut}=U;return(await this.getOctokit(Y)).actions.reRunWorkflow({owner:Se,repo:Re,run_id:ut})}async listWorkflowRuns(U){const{hostname:Y,owner:Se,repo:Re,pageSize:ut=100,page:St=0,branch:sn}=U;return(await(await this.getOctokit(Y)).actions.listWorkflowRunsForRepo({owner:Se,repo:Re,per_page:ut,page:St,...sn?{branch:sn}:{}})).data}async getWorkflow(U){const{hostname:Y,owner:Se,repo:Re,id:ut}=U;return(await(await this.getOctokit(Y)).actions.getWorkflow({owner:Se,repo:Re,workflow_id:ut})).data}async getWorkflowRun(U){const{hostname:Y,owner:Se,repo:Re,id:ut}=U;return(await(await this.getOctokit(Y)).actions.getWorkflowRun({owner:Se,repo:Re,run_id:ut})).data}async listJobsForWorkflowRun(U){const{hostname:Y,owner:Se,repo:Re,id:ut,pageSize:St=100,page:sn=0}=U;return(await(await this.getOctokit(Y)).actions.listJobsForWorkflowRun({owner:Se,repo:Re,run_id:ut,per_page:St,page:sn})).data}async downloadJobLogsForWorkflowRun(U){const{hostname:Y,owner:Se,repo:Re,runId:ut}=U;return(await(await this.getOctokit(Y)).actions.downloadJobLogsForWorkflowRun({owner:Se,repo:Re,job_id:ut})).data}async listBranches(U){const{hostname:Y,owner:Se,repo:Re,page:ut=0}=U;return(await(await this.getOctokit(Y)).rest.repos.listBranches({owner:Se,repo:Re,per_page:100,page:ut})).data}async getDefaultBranch(U){const{hostname:Y,owner:Se,repo:Re}=U;return(await(await this.getOctokit(Y)).rest.repos.get({owner:Se,repo:Re})).data.default_branch}}var lt=(D=>(D[D.success=0]="success",D[D.failure=1]="failure",D[D.pending=2]="pending",D[D.running=3]="running",D))(lt||{});const et=(0,l.HM)({id:"github-actions"}),Je=(0,l.Vb)({id:"github-actions/build",path:"/:id",parent:et}),Wt=(0,l.i1)({id:"github-actions",apis:[(0,l.bW)({api:R,deps:{configApi:s.p,scmAuthApi:z.$J},factory:({configApi:D,scmAuthApi:U})=>new Ue({configApi:D,scmAuthApi:U})})],routes:{entityContent:et}}),tn=Wt.provide((0,l.QJ)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return jn}).then(D=>D.Router),mountPoint:et})),Ut=Wt.provide((0,l.NC)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(2132).then(e.bind(e,52132)).then(D=>D.LatestWorkflowRunCard)}})),mt=Wt.provide((0,l.NC)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(2132).then(e.bind(e,52132)).then(D=>D.LatestWorkflowsForBranchCard)}})),Xt=Wt.provide((0,l.NC)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(2132).then(e.bind(e,52132)).then(D=>D.RecentWorkflowRunsCard)}})),on="github.com/project-slug",ln=D=>{var U,Y;return(Y=(U=D==null?void 0:D.metadata.annotations)==null?void 0:U[on])!=null?Y:""},qt=D=>r.createElement(r.Fragment,null,r.createElement(ve,{...D}),Qe(D));function ve({status:D,conclusion:U}){if(D===void 0)return null;switch(D.toLocaleLowerCase("en-US")){case"queued":return r.createElement($e.Ek,null);case"in_progress":return r.createElement($e.W$,null);case"completed":switch(U==null?void 0:U.toLocaleLowerCase("en-US")){case"skipped":case"cancelled":return r.createElement($e.c_,null);case"timed_out":return r.createElement($e.EV,null);case"failure":return r.createElement($e.Xs,null);default:return r.createElement($e.So,null)}default:return r.createElement($e.Ek,null)}}function Qe({status:D,conclusion:U}){if(D===void 0)return"";switch(D.toLocaleLowerCase("en-US")){case"queued":return"Queued";case"in_progress":return"In progress";case"completed":switch(U==null?void 0:U.toLocaleLowerCase("en-US")){case"skipped":case"cancelled":return"Aborted";case"timed_out":return"Timed out";case"failure":return"Error";default:return"Completed"}default:return"Pending"}}const Kt=({hostname:D,owner:U,repo:Y})=>{const Se=(0,s.u)(R),{id:Re}=(0,l.KS)(Je);return(0,vt.A)(async()=>{if(!Y||!U)throw new Error("No repo/owner provided");const ut=await Se.listJobsForWorkflowRun({hostname:D,owner:U,repo:Y,id:parseInt(Re,10)});return{total_count:ut.total_count,jobs:ut.jobs.map(St=>{var sn,Zt,hn,dn;return{html_url:(sn=St.html_url)!=null?sn:void 0,status:St.status,conclusion:(Zt=St.conclusion)!=null?Zt:void 0,started_at:St.started_at,completed_at:(hn=St.completed_at)!=null?hn:void 0,id:St.id,name:St.name,steps:(dn=St.steps)==null?void 0:dn.map(kt=>{var yn,gn,Un;return{name:kt.name,status:kt.status,conclusion:(yn=kt.conclusion)!=null?yn:void 0,number:kt.number,started_at:(gn=kt.started_at)!=null?gn:void 0,completed_at:(Un=kt.completed_at)!=null?Un:void 0}})}})}},[Y,U,Re])},Vt=({hostname:D,owner:U,repo:Y})=>{const Se=(0,s.u)(R),{id:Re}=(0,l.KS)(Je);return(0,vt.A)(async()=>Y&&U?Se.getWorkflowRun({hostname:D,owner:U,repo:Y,id:parseInt(Re,10)}):Promise.reject(new Error("No repo/owner provided")),[Y,U,Re])},zt=({hostname:D,owner:U,repo:Y,id:Se})=>{const Re=(0,s.u)(R);return(0,vt.A)(async()=>Y&&U?Re.downloadJobLogsForWorkflowRun({hostname:D,owner:U,repo:Y,runId:Se}):Promise.reject("No repo/owner provided"),[Y,U,Se])},Bt=D=>{var U,Y,Se;const Re=(Se=(U=D==null?void 0:D.metadata.annotations)==null?void 0:U[Ft.I4])!=null?Se:(Y=D==null?void 0:D.metadata.annotations)==null?void 0:Y[Ft.Eo];return Re!=null&&Re.startsWith("url:")?ke()(Re.slice(4)).resource:void 0},Ln=(0,_e.A)(D=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:D.palette.background.default}})),mn=({entity:D,runId:U,inProgress:Y})=>{const Se=Ln(),Re=ln(D),ut=Bt(D),[St,sn]=Re&&Re.split("/")||[],Zt=zt({hostname:ut,owner:St,repo:sn,id:U}),hn=Zt.value?String(Zt.value):void 0,[dn,kt]=r.useState(!1),yn=()=>{kt(!0)},gn=()=>{kt(!1)};return r.createElement(le.A,{TransitionProps:{unmountOnExit:!0},disabled:Y},r.createElement(ie.A,{expandIcon:r.createElement(st.A,null),IconButtonProps:{className:Se.button}},r.createElement(G.A,{variant:"button"},Zt.loading?r.createElement(we.A,null):"Job Log"),r.createElement(Ce.Ay,{title:"Open Log",TransitionComponent:ft.A,arrow:!0},r.createElement(ht.A,{onClick:Un=>{Un.stopPropagation(),yn()},style:{marginLeft:"auto"}})),r.createElement(k.A,{className:Se.modal,onClick:Un=>Un.stopPropagation(),open:dn,onClose:gn},r.createElement(ce.A,{in:dn},r.createElement("div",{className:Se.modalLogContainer},r.createElement($e.rW,{text:hn!=null?hn:"No Values Found",classes:{root:Se.log}}))))),hn&&r.createElement("div",{className:Se.normalLogContainer},r.createElement($e.rW,{text:hn,classes:{root:Se.log}})))},nn=(0,_e.A)(D=>({root:{maxWidth:720,margin:D.spacing(2)},title:{padding:D.spacing(1,0,2,0)},table:{padding:D.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),On=(D,U)=>{if(!D||!U)return"";const Y=je.c9.fromISO(D);return(U?je.c9.fromISO(U):je.c9.now()).diff(Y).toFormat("m 'minutes' s 'seconds'")},nt=({step:D})=>{var U;return r.createElement(I.A,null,r.createElement(h.A,null,r.createElement(M.A,{primary:D.name,secondary:On(D.started_at,D.completed_at)})),r.createElement(h.A,null,r.createElement(qt,{status:D.status.toLocaleUpperCase("en-US"),conclusion:(U=D.conclusion)==null?void 0:U.toLocaleUpperCase("en-US")})))},gt=({job:D,className:U,entity:Y})=>{var Se;const Re=nn();return r.createElement(le.A,{TransitionProps:{unmountOnExit:!0},className:U},r.createElement(ie.A,{expandIcon:r.createElement(st.A,null),IconButtonProps:{className:Re.button}},r.createElement(G.A,{variant:"button"},D.name," (",On(D.started_at,D.completed_at),")")),r.createElement(C.A,{className:Re.accordionDetails},r.createElement(v.A,null,r.createElement(N.A,null,(Se=D.steps)==null?void 0:Se.map(ut=>r.createElement(nt,{key:ut.number,step:ut}))))),D.status==="queued"||D.status==="in_progress"?r.createElement(mn,{runId:D.id,inProgress:!0,entity:Y}):r.createElement(mn,{runId:D.id,inProgress:!1,entity:Y}))},Tt=({jobs:D,entity:U})=>{const Y=nn();return r.createElement(Q.A,null,D&&D.total_count>0&&D.jobs.map(Se=>r.createElement(gt,{key:Se.id,job:Se,className:Se.status!=="success"?Y.failed:Y.success,entity:U})))},ot=({entity:D})=>{var U,Y,Se,Re,ut,St,sn,Zt,hn,dn,kt,yn,gn,Un,Qn;const ea=ln(D),Pn=Bt(D),[Sn,Jt]=ea&&ea.split("/")||[],rn=Vt({hostname:Pn,owner:Sn,repo:Jt}),Xn=Kt({hostname:Pn,owner:Sn,repo:Jt}),_n=nn();return rn.error&&rn.error.message?r.createElement(G.A,{variant:"h6",color:"error"},"Failed to load build, ",rn.error.message):rn.loading?r.createElement(De.A,null):r.createElement("div",{className:_n.root},r.createElement(Q.A,{mb:3},r.createElement($e.BI,{"aria-label":"breadcrumb"},r.createElement($e.N_,{to:".."},"Workflow runs"),r.createElement(G.A,null,"Workflow run details"))),r.createElement(v.A,{component:Ee.A,className:_n.table},r.createElement(N.A,null,r.createElement(X.A,null,r.createElement(I.A,null,r.createElement(h.A,null,r.createElement(G.A,{noWrap:!0},"Branch")),r.createElement(h.A,null,(U=rn.value)==null?void 0:U.head_branch)),r.createElement(I.A,null,r.createElement(h.A,null,r.createElement(G.A,{noWrap:!0},"Message")),r.createElement(h.A,null,(Se=(Y=rn.value)==null?void 0:Y.head_commit)==null?void 0:Se.message)),r.createElement(I.A,null,r.createElement(h.A,null,r.createElement(G.A,{noWrap:!0},"Commit ID")),r.createElement(h.A,null,(ut=(Re=rn.value)==null?void 0:Re.head_commit)==null?void 0:ut.id)),r.createElement(I.A,null,r.createElement(h.A,null,r.createElement(G.A,{noWrap:!0},"Workflow")),r.createElement(h.A,null,(St=rn.value)==null?void 0:St.name)),r.createElement(I.A,null,r.createElement(h.A,null,r.createElement(G.A,{noWrap:!0},"Status")),r.createElement(h.A,null,r.createElement(qt,{status:((sn=rn.value)==null?void 0:sn.status)||void 0,conclusion:((Zt=rn.value)==null?void 0:Zt.conclusion)||void 0}))),r.createElement(I.A,null,r.createElement(h.A,null,r.createElement(G.A,{noWrap:!0},"Author")),r.createElement(h.A,null,`${(kt=(dn=(hn=rn.value)==null?void 0:hn.head_commit)==null?void 0:dn.author)==null?void 0:kt.name} (${(Un=(gn=(yn=rn.value)==null?void 0:yn.head_commit)==null?void 0:gn.author)==null?void 0:Un.email})`)),r.createElement(I.A,null,r.createElement(h.A,null,r.createElement(G.A,{noWrap:!0},"Links")),r.createElement(h.A,null,((Qn=rn.value)==null?void 0:Qn.html_url)&&r.createElement($e.N_,{to:rn.value.html_url},"Workflow runs on GitHub"," ",r.createElement(Oe.A,{className:_n.externalLinkIcon})))),r.createElement(I.A,null,r.createElement(h.A,{colSpan:2},r.createElement(G.A,{noWrap:!0},"Jobs"),Xn.loading?r.createElement(we.A,null):r.createElement(Tt,{jobs:Xn.value,entity:D})))))))};function Ze({hostname:D,owner:U,repo:Y,branch:Se,initialPageSize:Re=6}){const ut=(0,s.u)(R),St=(0,s.u)(s.r),[sn,Zt]=(0,r.useState)(0),[hn,dn]=(0,r.useState)(0),[kt,yn]=(0,r.useState)(Re),[gn,Un]=(0,r.useState)([]),[Qn,ea]=(0,r.useState)(""),{loading:Pn,value:Sn,retry:Jt,error:rn}=(0,_t.A)(async()=>{const Xn=await ut.getDefaultBranch({hostname:D,owner:U,repo:Y});ea(Xn);let _n=Se;Se==="default"&&(_n=Xn);const be=await(async()=>{let tt=!0,It=0;const Ot=[];for(;tt;){const jt=await ut.listBranches({hostname:D,owner:U,repo:Y,page:It});jt.length===0&&(tt=!1),It++,Ot.push(...jt)}return Ot})();Un(be);const Fe=await ut.listWorkflowRuns({hostname:D,owner:U,repo:Y,pageSize:kt,page:hn+1,branch:_n});return Zt(Fe.total_count),Fe.workflow_runs.map(tt=>{var It,Ot,jt,ne,We,He,Me,Xe,Ve;return{workflowName:(It=tt.name)!=null?It:void 0,message:(Ot=tt.head_commit)==null?void 0:Ot.message,id:`${tt.id}`,onReRunClick:async()=>{try{await ut.reRunWorkflow({hostname:D,owner:U,repo:Y,runId:tt.id})}catch(Et){St.post(new Error(`Failed to rerun the workflow: ${Et.message}`))}},source:{branchName:(jt=tt.head_branch)!=null?jt:void 0,commit:{hash:(ne=tt.head_commit)==null?void 0:ne.id,url:(Me=(We=tt.head_repository)==null?void 0:We.branches_url)==null?void 0:Me.replace("{/branch}",(He=tt.head_branch)!=null?He:"")}},status:(Xe=tt.status)!=null?Xe:void 0,conclusion:(Ve=tt.conclusion)!=null?Ve:void 0,url:tt.url,githubUrl:tt.html_url}})},[hn,kt,Y,U]);return[{page:hn,pageSize:kt,loading:Pn,runs:Sn,branches:gn,defaultBranch:Qn,projectName:`${U}/${Y}`,total:sn,error:rn},{runs:Sn,setPage:dn,setPageSize:yn,retry:Jt}]}const V=(0,_e.A)(D=>(0,p.A)({card:{border:`1px solid ${D.palette.divider}`,boxShadow:D.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:D.spacing(4,1,1),flex:"1",minWidth:"0px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"middle"},bottomline:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-5px"},pagination:{width:"100%"}})),de={skipped:"warning",canceled:"info",timed_out:"error",failure:"error",success:"success"},ge=(D,U)=>{var Y,Se,Re,ut;const St=U.toLocaleLowerCase();return((Y=D.workflowName)==null?void 0:Y.toLocaleLowerCase().includes(St))||((Se=D.source.branchName)==null?void 0:Se.toLocaleLowerCase().includes(St))||((Re=D.status)==null?void 0:Re.toLocaleLowerCase().includes(St))||((ut=D.id)==null?void 0:ut.toLocaleLowerCase().includes(St))},Pt=({runs:D,searchTerm:U,loading:Y,onChangePageSize:Se,onChangePage:Re,page:ut,total:St,pageSize:sn})=>{const Zt=V(),hn=(0,l.Sf)(Je),dn=D==null?void 0:D.filter(kt=>ge(kt,U));return r.createElement(j.A,{container:!0,spacing:3},dn&&(D==null?void 0:D.length)!==0?dn.map(kt=>{var yn,gn;return r.createElement(j.A,{key:kt.id,item:!0,container:!0,xs:12,sm:4,md:4,xl:4},r.createElement(Q.A,{className:Zt.card},r.createElement(Q.A,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},r.createElement(Q.A,{pt:2,sx:{width:"100%"},textAlign:"center"},r.createElement(Ce.Ay,{title:(yn=kt.status)!=null?yn:"No Status",placement:"top-start"},r.createElement(S.A,{variant:"outlined",severity:de[kt.conclusion],style:{alignItems:"center"}},r.createElement(G.A,{variant:"h6"},r.createElement($e.N_,{to:hn({id:kt.id})},r.createElement(G.A,{color:"primary",variant:"h6"},kt.workflowName))))),r.createElement(Ce.Ay,{title:(gn=kt.message)!=null?gn:"No run message"},r.createElement(G.A,{variant:"body2",component:"span",style:{fontSize:"smaller"}},r.createElement($e.h2,{content:`Commit ID : ${kt.source.commit.hash}`}))),kt.source.branchName&&r.createElement($e.h2,{content:`Branch : ${kt.source.branchName}`}),r.createElement(J.A,{key:kt.id,size:"small",label:`Workflow ID : ${kt.id}`}),r.createElement(J.A,{size:"small",label:r.createElement(Q.A,{display:"flex",alignItems:"center"},r.createElement(qt,{status:kt.status,conclusion:kt.conclusion}))}),r.createElement("div",{className:Zt.bottomline},kt.githubUrl&&r.createElement($e.N_,{to:kt.githubUrl},"Workflow runs on GitHub"," ",r.createElement(Oe.A,{className:Zt.externalLinkIcon})),r.createElement(ue.A,null,r.createElement(Ce.Ay,{title:"Rerun workflow"},r.createElement(Te.A,{onClick:kt.onReRunClick,style:{fontSize:"12px"}},r.createElement(Yt.A,null)))))))))}):r.createElement(Q.A,{p:2},Y?r.createElement(we.A,null):"No matching runs found."),r.createElement("div",{className:Zt.pagination},r.createElement(dt.A,{component:"div",count:St,page:ut,rowsPerPage:sn,onPageChange:(kt,yn)=>Re(yn),onRowsPerPageChange:kt=>Se(parseInt(kt.target.value,6)),labelRowsPerPage:"Workflows per page",rowsPerPageOptions:[6,12,18,{label:"All",value:-1}]})))},xt=({searchTerm:D,handleSearch:U,retry:Y})=>r.createElement(r.Fragment,null,r.createElement(Q.A,{flexGrow:1}),r.createElement(Ge.A,{type:"search",label:"Search",value:D,onChange:U,"data-testid":"search-control",style:{marginRight:"20px"}}),r.createElement(ue.A,null,r.createElement(Ce.Ay,{title:"Reload workflow runs"},r.createElement(Te.A,{onClick:Y},r.createElement(yt.A,null))))),cn=({entity:D})=>{const U=ln(D),Y=Bt(D),[Se,Re]=(U!=null?U:"/").split("/"),[ut,St]=(0,r.useState)("default"),[sn,Zt]=(0,r.useState)([]),[hn,dn]=(0,r.useState)(""),kt=_n=>{dn(_n.target.value)},[{runs:yn,branches:gn,defaultBranch:Un,...Qn},{retry:ea,setPage:Pn,setPageSize:Sn}]=Ze({hostname:Y,owner:Se,repo:Re,branch:ut==="all"?void 0:ut}),Jt=Y||"github.com",rn=!Qn.loading&&!yn,Xn=_n=>{const H=_n.target.value;St(H),Pn(0),ea()};return(0,r.useEffect)(()=>{Zt(yn)},[yn,ut]),(0,r.useEffect)(()=>{St(Un)},[Un]),r.createElement(j.A,{item:!0},rn?r.createElement($e.pp,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:r.createElement(rt.A,{variant:"contained",color:"primary",href:`https://${Jt}/${U}/actions/new`},"Create new Workflow")}):r.createElement($e.nO,{title:r.createElement(Q.A,{display:"flex",alignItems:"center"},r.createElement(bt.A,null),r.createElement(Q.A,{mr:1}),r.createElement(G.A,{variant:"h6"},U),r.createElement(pt.A,{value:ut,key:ut,label:"Branch",onChange:Xn,"data-testid":"menu-control",style:{marginLeft:"30px",marginRight:"20px",width:"230px"}},gn.map(_n=>r.createElement(qe.A,{key:_n.name,value:_n.name},_n.name===Un?r.createElement(G.A,{variant:"body2",component:"span"},_n.name," ",r.createElement(G.A,{variant:"body2",component:"span",style:{color:"lightgray",fontSize:"x-small"}},"(default)")):_n.name)),r.createElement(qe.A,{value:"all",key:"all",style:{color:"lightGrey",fontSize:"small"}},"select all branches")),r.createElement(xt,{searchTerm:hn,handleSearch:kt,retry:ea}))},r.createElement(Pt,{runs:sn,loading:Qn.loading,onChangePageSize:Sn,onChangePage:Pn,page:Qn.page,total:Qn.total,pageSize:Qn.pageSize,searchTerm:hn,projectName:U})))},An=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:D=>{const U=()=>{const Y=(0,l.Sf)(Je);return r.createElement($e.N_,{component:a.N_,to:Y({id:D.id})},D.message)};return r.createElement(U,null)}},{title:"Source",render:D=>{var U,Y;return r.createElement(G.A,{variant:"body2",noWrap:!0},r.createElement(G.A,{paragraph:!0,variant:"body2"},(U=D.source)==null?void 0:U.branchName),r.createElement(G.A,{paragraph:!0,variant:"body2"},(Y=D.source)==null?void 0:Y.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",customSort:(D,U)=>Qe(D).localeCompare(Qe(U)),render:D=>r.createElement(Q.A,{display:"flex",alignItems:"center"},r.createElement(qt,{status:D.status,conclusion:D.conclusion}))},{title:"Actions",render:D=>r.createElement(Ce.Ay,{title:"Rerun workflow"},r.createElement(Te.A,{onClick:D.onReRunClick},r.createElement(Yt.A,null))),width:"10%"}],Bn=({projectName:D,loading:U,pageSize:Y,page:Se,retry:Re,runs:ut,onChangePage:St,onChangePageSize:sn,total:Zt})=>r.createElement($e.XI,{isLoading:U,options:{paging:!0,pageSize:Y,padding:"dense"},totalCount:Zt,page:Se,actions:[{icon:()=>r.createElement(yt.A,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Re()}],data:ut!=null?ut:[],onPageChange:St,onRowsPerPageChange:sn,style:{width:"100%"},title:r.createElement(Q.A,{display:"flex",alignItems:"center"},r.createElement(bt.A,null),r.createElement(Q.A,{mr:1}),r.createElement(G.A,{variant:"h6"},D)),columns:An}),$n=({entity:D,branch:U})=>{const Y=ln(D),Se=Bt(D),[Re,ut]=(Y!=null?Y:"/").split("/"),[{runs:St,...sn},{retry:Zt,setPage:hn,setPageSize:dn}]=Ze({hostname:Se,owner:Re,repo:ut,branch:U}),kt=Se||"github.com";return!sn.loading&&!St?r.createElement($e.pp,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:r.createElement(rt.A,{variant:"contained",color:"primary",href:`https://${kt}/${Y}/actions/new`},"Create new Workflow")}):r.createElement(Bn,{...sn,runs:St,loading:sn.loading,retry:Zt,onChangePageSize:dn,onChangePage:hn})},kn=D=>{var U;return!!((U=D.metadata.annotations)!=null&&U[on])};var jn=Object.freeze({__proto__:null,Router:D=>{const{view:U="table"}=D,{entity:Y}=(0,q.u)();if(!kn(Y))return r.createElement(ee.o9,{annotation:on});const Se=U==="cards"?r.createElement(cn,{entity:Y}):r.createElement($n,{entity:Y});return r.createElement(he.BV,null,r.createElement(he.qh,{path:"/",element:Se}),r.createElement(he.qh,{path:`${Je.path}`,element:r.createElement(ot,{entity:Y})}))},isGithubActionsAvailable:kn});const ra=(0,_e.A)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),ct=D=>{var U;const{error:Y,loading:Se,lastRun:Re,branch:ut}=D,St=ra();return Y?r.createElement(G.A,null,"Couldn't fetch latest ",ut," run"):Se?r.createElement(De.A,null):r.createElement($e.tA,{metadata:{status:r.createElement(r.Fragment,null,r.createElement(qt,{status:Re.status,conclusion:Re.conclusion})),message:Re.message,url:r.createElement($e.N_,{to:(U=Re.githubUrl)!=null?U:""},"See more on GitHub"," ",r.createElement(Oe.A,{className:St.externalLinkIcon}))}})},m=D=>{var U,Y,Se;const{branch:Re="master",variant:ut}=D,{entity:St}=(0,q.u)(),sn=(0,s.u)(s.r),Zt=Bt(St),[hn,dn]=((Y=(U=St==null?void 0:St.metadata.annotations)==null?void 0:U[on])!=null?Y:"/").split("/"),[{runs:kt,loading:yn,error:gn}]=Ze({hostname:Zt,owner:hn,repo:dn,branch:Re}),Un=(Se=kt==null?void 0:kt[0])!=null?Se:{};return(0,r.useEffect)(()=>{gn&&sn.post(gn)},[gn,sn]),r.createElement($e.nO,{title:`Last ${Re} build`,variant:ut},r.createElement(ct,{error:gn,loading:yn,branch:Re,lastRun:Un}))},w=D=>{const{branch:U="master",variant:Y}=D,{entity:Se}=(0,q.u)();return r.createElement($e.nO,{title:`Last ${U} build`,variant:Y},r.createElement($n,{branch:U,entity:Se}))},K=D=>D.split(`
`)[0],re=D=>{var U,Y;const{branch:Se,dense:Re=!1,limit:ut=5,variant:St}=D,{entity:sn}=(0,q.u)(),Zt=(0,s.u)(s.r),hn=Bt(sn),[dn,kt]=((Y=(U=sn==null?void 0:sn.metadata.annotations)==null?void 0:U[on])!=null?Y:"/").split("/"),[{runs:yn=[],loading:gn,error:Un}]=Ze({hostname:hn,owner:dn,repo:kt,branch:Se,initialPageSize:ut});(0,r.useEffect)(()=>{Un&&Zt.post(Un)},[Un,Zt]);const Qn=hn||"github.com",ea=(0,l.Sf)(Je);return Un?r.createElement($e.bJ,{title:Un.message,error:Un}):r.createElement($e.nO,{title:"Recent Workflow Runs",subheader:Se?`Branch: ${Se}`:"All Branches",noPadding:!0,variant:St},yn.length?r.createElement($e.XI,{isLoading:gn,options:{search:!1,paging:!1,padding:Re?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:Pn=>{var Sn;return r.createElement($e.N_,{component:a.N_,to:ea({id:Pn.id})},K((Sn=Pn.message)!=null?Sn:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:qt}],data:yn}):r.createElement("div",{style:{textAlign:"center"}},r.createElement(G.A,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),r.createElement(G.A,{variant:"body2"},r.createElement($e.N_,{to:`https://${Qn}/${dn}/${kt}/actions/new`},"Create a new workflow"))))}},12670:(Dn,Ct,e)=>{"use strict";e.d(Ct,{c:()=>l});var s=e(11638);const l=(0,s.Il)({id:"catalog-index"})},78190:(Dn,Ct,e)=>{"use strict";e.d(Ct,{O2:()=>ce,VA:()=>k,iU:()=>Ce,k8:()=>I,lD:()=>ft,yJ:()=>we});var s=e(11638),l=e(48821),b=e(12670),_=e(14041),z=e(29835),r=e(22968),q=e(73466),ee=e(92651),a=e(65398),he=e.n(a),_e=e(50308),le=e.n(_e),ie=e(45250),G=e.n(ie);const we=(0,s.i1)({id:"org",externalRoutes:{catalogIndex:b.c}}),Ce=we.provide((0,s.NC)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(h=>h.GroupProfileCard)}})),ft=we.provide((0,s.NC)({name:"EntityMembersListCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(h=>h.MembersListCard)}})),k=we.provide((0,s.NC)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(h=>h.OwnershipCard)}})),ce=we.provide((0,s.NC)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(h=>h.UserProfileCard)}})),I=h=>{const{singularTitle:M,pluralTitle:C,icon:v,filter:N}=h,Q=(0,l.u)(l.t),De=(0,l.u)(ee.vp),Ee=(0,s.Sf)(ee.sF),{value:X}=(0,q.A)(async()=>{const p=await Q.getBackstageIdentity();return(await De.getEntities({filter:[{kind:"group","relations.hasMember":p.userEntityRef,...N!=null?N:{}}],fields:["metadata","kind"]})).items},[]);if(!(X!=null&&X.length))return null;if(X.length===1){const p=X[0];return _.createElement(r.uk,{text:M,to:Ee((0,z.sM)(p)),icon:v})}return _.createElement(r.uk,{icon:v,text:C},_.createElement(r.O6,{title:C},X==null?void 0:X.map(function(j){return _.createElement(r.hl,{title:j.metadata.title||j.metadata.name,subtitle:j.metadata.namespace!==z.oQ?j.metadata.namespace:void 0,to:Ee((0,z.sM)(j)),icon:v,key:(0,z.U2)(j)})})))}},50585:(Dn,Ct,e)=>{"use strict";e.d(Ct,{$D:()=>M,OL:()=>ee,bh:()=>r,iP:()=>G});var s=e(3399),l=e(10288),b=e.n(l),_=e(52964),z=e(46195),r=(C=>(C.DENY="DENY",C.ALLOW="ALLOW",C.CONDITIONAL="CONDITIONAL",C))(r||{});function q(C,v){return C.name===v.name}function ee(C,v){return"resourceType"in C?!v||C.resourceType===v:!1}function a(C){return C.attributes.action==="create"}function he(C){return C.attributes.action==="read"}function _e(C){return C.attributes.action==="update"}function le(C){return C.attributes.action==="delete"}function ie(C){return{authorize:async(v,N)=>await C.authorize(v,N),authorizeConditional(v,N){const Q=v;return C.authorize(Q,N)}}}function G({name:C,attributes:v,resourceType:N}){return N?{type:"resource",name:C,attributes:v,resourceType:N}:{type:"basic",name:C,attributes:v}}var we=Object.defineProperty,Ce=(C,v,N)=>v in C?we(C,v,{enumerable:!0,configurable:!0,writable:!0,value:N}):C[v]=N,ft=(C,v,N)=>(Ce(C,typeof v!="symbol"?v+"":v,N),N);const k=z.z.lazy(()=>z.z.object({rule:z.z.string(),resourceType:z.z.string(),params:z.z.record(z.z.any()).optional()}).or(z.z.object({anyOf:z.z.array(k).nonempty()})).or(z.z.object({allOf:z.z.array(k).nonempty()})).or(z.z.object({not:k}))),ce=z.z.object({result:z.z.literal(r.ALLOW).or(z.z.literal(r.DENY))}),I=z.z.union([z.z.object({result:z.z.literal(r.ALLOW).or(z.z.literal(r.DENY))}),z.z.object({result:z.z.literal(r.CONDITIONAL),pluginId:z.z.string(),resourceType:z.z.string(),conditions:k})]),h=(C,v)=>z.z.object({items:z.z.array(z.z.intersection(z.z.object({id:z.z.string()}),C)).refine(N=>N.length===v.size&&N.every(({id:Q})=>v.has(Q)),{message:"Items in response do not match request"})});class M{constructor(v){ft(this,"enabled"),ft(this,"discovery");var N;this.discovery=v.discovery,this.enabled=(N=v.config.getOptionalBoolean("permission.enabled"))!=null?N:!1}async authorize(v,N){return this.makeRequest(v,ce,N)}async authorizeConditional(v,N){return this.makeRequest(v,I,N)}async makeRequest(v,N,Q){if(!this.enabled)return v.map(ue=>({result:r.ALLOW}));const De={items:v.map(ue=>({id:_.A(),...ue}))},Ee=await this.discovery.getBaseUrl("permission"),X=await b()(`${Ee}/authorize`,{method:"POST",body:JSON.stringify(De),headers:{...this.getAuthorizationHeader(Q==null?void 0:Q.token),"content-type":"application/json"}});if(!X.ok)throw await s.o3.fromResponse(X);const p=await X.json(),J=h(N,new Set(De.items.map(({id:ue})=>ue))).parse(p).items.reduce((ue,Te)=>(ue[Te.id]=Te,ue),{});return De.items.map(ue=>J[ue.id])}getAuthorizationHeader(v){return v?{Authorization:`Bearer ${v}`}:{}}}},17899:(Dn,Ct,e)=>{"use strict";e.d(Ct,{JT:()=>ee,Tw:()=>he,ak:()=>q,x9:()=>r});var s=e(14041),l=e(48821),b=e(11638),_=e(50585),z=e(68721);const r=(0,l.c)({id:"plugin.permission.api"});class q{constructor(le,ie){this.permissionClient=le,this.identityApi=ie}static create(le){const{config:ie,discovery:G,identity:we}=le,Ce=new _.$D({discovery:G,config:ie});return new q(Ce,we)}async authorize(le){return(await this.permissionClient.authorize([le],await this.identityApi.getCredentials()))[0]}}function ee(_e){const le=(0,l.u)(r),{data:ie,error:G}=(0,z.Ay)(_e,async we=>{if((0,_.OL)(we.permission)&&!we.resourceRef)return _.bh.DENY;const{result:Ce}=await le.authorize(we);return Ce});return G?{error:G,loading:!1,allowed:!1}:ie===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:ie===_.bh.ALLOW}}const a=_e=>{const{permission:le,resourceRef:ie,errorComponent:G,...we}=_e,Ce=ee(isResourcePermission(le)?{permission:le,resourceRef:ie}:{permission:le}),ft=useApp(),{NotFoundErrorPage:k}=ft.getComponents();let ce=G===void 0?React.createElement(k,null):G;return Ce.loading?ce=null:Ce.allowed&&(ce=_e.element),React.createElement(Route,{...we,element:ce})};function he(_e){const{permission:le,resourceRef:ie}=_e,G=ee((0,_.OL)(le)?{permission:le,resourceRef:ie}:{permission:le}),we=(0,b.nm)();if(G.loading)return null;if(G.allowed)return s.createElement(s.Fragment,null,_e.children);if(_e.errorPage)return s.createElement(s.Fragment,null,_e.errorPage);const{NotFoundErrorPage:Ce}=we.getComponents();return s.createElement(Ce,null)}},10015:(Dn,Ct,e)=>{"use strict";e.d(Ct,{c:()=>he});var s=e(29835),l="http://json-schema.org/draft-07/schema",b="TemplateV1beta3",_="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",z=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",type:"website",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],r=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},presentation:{type:"object",description:"A way to redefine the labels for actionable buttons.",properties:{backButtonText:{type:"string",description:"A button which return the user to one step back."},createButtonText:{type:"string",description:"A button which start the execution of the template."},reviewButtonText:{type:"string",description:"A button which open the review step to verify the input prior to start the execution."}}},EXPERIMENTAL_recovery:{type:"object",description:"A task recovery section.",properties:{EXPERIMENTAL_strategy:{type:"string",description:"Recovery strategy for your task (none or startOver). By default none"}}},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],q={$schema:l,$id:b,description:_,examples:z,allOf:r};const ee=(0,s.zu)(q),a={async check(_e){return ee(_e)===_e}},he=_e=>_e.apiVersion==="scaffolder.backstage.io/v1beta3"&&_e.kind==="Template"},97093:(Dn,Ct,e)=>{"use strict";e.d(Ct,{C1:()=>D,KE:()=>Ze,KV:()=>Qn,RO:()=>jt,Wu:()=>dn,gZ:()=>kn,g_:()=>H,hJ:()=>Zt,he:()=>It,lN:()=>Xn,lV:()=>m});var s=e(48821),l=e(11638),b=e(58837),_=e(95061),z=e(72501),r=e(99703),q=e(4321),ee=e(58007),a=e(8109),he=e(46423),_e=e(5951),le=e(88951),ie=e(78733),G=e(21619),we=e(37877),Ce=e(64947),ft=e(54917),k=e(40703),ce=e(48653),I=e(42899),h=e(77125),M=e(37197),C=e(67720),v=e(59469),N=e(78467),Q=e(54819),De=e(86901),Ee=e(69076),X=e(16249),p=e(14041),j=e(42378),J=e(72937),ue=e(22968),Te=e(94403),dt=e(45810),Ge=e.n(dt),rt=e(73466),pt=e(82279),qe=e(46108),st=e.n(qe),Oe=e(43157),je=e(30860),$e=e(94384),vt=e(7147),ht=e(29835),Ft=e(92651),me=e(2069),ke=e(23127),bt=e(10015),Yt=e(86613),yt=e(4832),_t=e(51767),S=e(25711),R=e(53373),W=e.n(R),Z=e(7707),Pe=e(9181),Ue=e(45313),lt=e(52950),et=e(4794),Je=e.n(et),Wt=e(76842),tn=e(56005),Ut=e.n(tn),mt=e(44148),Xt=e(41260),on=e(6924),ln=e(20577),qt=e(29365),ve=e(26343),Qe=e(28233),Kt=e(55197),Vt=e(25534),zt=e(75625),Bt=e(20353),Ln=e(71407);function mn(ne){return typeof ne=="object"&&ne!==null&&!Array.isArray(ne)}function nn(ne,We){if(!mn(ne))return;const{properties:He,items:Me,anyOf:Xe,oneOf:Ve,allOf:Et,dependencies:Dt,then:Gt,else:fn}=ne;for(const an in ne)ne.hasOwnProperty(an)&&an.startsWith("ui:")&&(We[an]=ne[an],delete ne[an]);if(mn(He))for(const an in He){if(!He.hasOwnProperty(an))continue;const ta=He[an];if(mn(ta)){if(!mn(We[an])){const Mn={};We[an]=Mn}nn(ta,We[an])}}if(mn(Me)){const an={};We.items=an,nn(Me,an)}if(Array.isArray(Xe))for(const an of Xe)mn(an)&&nn(an,We);if(Array.isArray(Ve))for(const an of Ve)mn(an)&&nn(an,We);if(Array.isArray(Et))for(const an of Et)mn(an)&&nn(an,We);if(mn(Dt))for(const an of Object.keys(Dt)){const ta=Dt[an];mn(ta)&&nn(ta,We)}mn(Gt)&&nn(Gt,We),mn(fn)&&nn(fn,We)}const On=ne=>{const We={},He=(0,J.qg)((0,J.As)(ne));return nn(He,We),{uiSchema:We,schema:He}},nt=()=>{const ne={__errors:[],addError:We=>{var He;(He=ne.__errors)==null||He.push(We)}};return ne};function gt(ne){return!!ne&&"__errors"in ne}function Tt(ne){var We;if(!ne)return!1;for(const He of Object.values(ne)){if(gt(He)){if(((We=He.__errors)!=null?We:[]).length>0)return!0;continue}if(Tt(He))return!0}return!1}function ot(ne){return typeof ne=="object"&&ne!==null&&!Array.isArray(ne)}const Ze=(ne,We,He)=>{async function Me(Xe,Ve="#",Et=Xe){var Dt,Gt;const fn=new j.t0(ne),an={},ta=async(Mn,Rn,Vn,na,Nn)=>{const qn=We[Mn];if(qn){const ia=nt();try{await qn(Vn,ia,{...He,formData:Xe,schema:na,uiSchema:Nn})}catch(_a){ia.addError(_a.message)}an[Rn]=ia}};for(const[Mn,Rn]of Object.entries(Et)){const Vn=`${Ve}/${Mn}`,na=fn.getSchema(Vn,Xe),{schema:Nn,uiSchema:qn}=On(na),ia=na&&na.items,_a=async(Pa,xa,ja)=>{await ta(Pa["ui:field"],Mn,Rn,xa,ja)},ba=async Pa=>{if("ui:field"in Pa){const{schema:xa,uiSchema:ja}=On(na.items);await _a(Pa,xa,ja)}};if(na&&"ui:field"in na)await _a(na,Nn,qn);else if(ia&&"ui:field"in na.items)await ba(na.items);else if(ia&&na.items.type==="object"){const Pa=(Gt=(Dt=na.items)==null?void 0:Dt.properties)!=null?Gt:[];for(const[,xa]of Object.entries(Pa))await ba(xa)}else ot(Rn)&&(an[Mn]=await Me(Xe,Vn,Rn))}return an}return async Xe=>await Me(Xe)},V=ne=>{const We=Object.fromEntries(Object.entries(ne.formState).map(([He,Me])=>{var Xe;for(const Ve of ne.schemas){const Dt=new j.t0(Ve.mergedSchema).getSchema(`#/${He}`,ne.formState);if(Dt){const Gt=(Xe=Dt["ui:backstage"])==null?void 0:Xe.review;if(Gt){if(Gt.mask)return[He,Gt.mask];if(Gt.show===!1)return[]}if(Dt["ui:widget"]==="password")return[He,"******"];if(Dt.enum&&Dt.enumNames)return[He,Dt.enumNames[Dt.enum.indexOf(Me)]||Me]}}return[He,Me]}).filter(He=>He.length>0));return p.createElement(ue.tA,{metadata:We})},de=ne=>{const We=(0,s.u)(s.f),Me=ne.steps.map(({title:Xe,description:Ve,schema:Et})=>({title:Xe,description:Ve,mergedSchema:Et,...On(Et)})).filter(Xe=>{var Ve;const Et=(Ve=Xe.uiSchema["ui:backstage"])==null?void 0:Ve.featureFlag;return Et?We.isActive(Et):!0}).map(Xe=>{var Ve,Et,Dt,Gt;const fn={...Xe,schema:{...Xe.schema,title:void 0}};return((Ve=Xe.schema)!=null&&Ve.properties||!((Et=Xe.schema)!=null&&Et.dependencies))&&(fn.schema.properties=Object.fromEntries(Object.entries((Gt=(Dt=Xe.schema)==null?void 0:Dt.properties)!=null?Gt:{}).filter(([an])=>{var ta,Mn;const Rn=(Mn=(ta=Xe.uiSchema[an])==null?void 0:ta["ui:backstage"])==null?void 0:Mn.featureFlag;return Rn?We.isActive(Rn):!0}))),fn});return{presentation:ne.presentation,steps:Me}},ge=ne=>(0,p.useState)(()=>{if(ne)return ne;const We=Ge().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(We.formData)}catch{return{}}}),Pt=ne=>{const We=(0,s.u)(pt.s),{value:He,loading:Me,error:Xe}=(0,rt.A)(()=>We.getTemplateParameterSchema(ne),[We,ne]);return{manifest:He,loading:Me,error:Xe}},xt=ne=>{const We="backstage:featureFlag",He=(0,s.u)(s.f);if(!ne)return;const Me=ne==null?void 0:ne.steps.filter(Xe=>{const Ve=Xe.schema[We];return typeof Ve!="string"||He.isActive(Ve)}).map(Xe=>{var Ve;const Et=st()(Xe),Dt=[];return Et.schema.properties&&(Et.schema.properties=Object.fromEntries(Object.entries(Et.schema.properties).filter(([Gt,fn])=>fn[We]?He.isActive(fn[We])?!0:(Dt.push(Gt),!1):!0)),Et.schema.required=Array.isArray(Et.schema.required)?(Ve=Et.schema.required)==null?void 0:Ve.filter(Gt=>!Dt.includes(Gt)):Et.schema.required),Et});return{...ne,steps:Me}},cn=(ne,We={})=>{var He;const{layouts:Me=[]}=We,Xe=ne==null?void 0:ne.uiSchema["ui:ObjectFieldTemplate"];if(typeof Xe!="string")return ne;const Ve=(He=Me.find(Et=>Et.name===Xe))==null?void 0:He.component;return Ve?{...ne,uiSchema:{...ne.uiSchema,"ui:ObjectFieldTemplate":Ve}}:ne};var Bn=Object.freeze({__proto__:null,DescriptionField:({description:ne})=>ne&&p.createElement(ue.h2,{content:ne,linkTarget:"_blank"})});const $n=(0,b.A)(ne=>({markdownDescription:{fontSize:ne.typography.caption.fontSize,margin:0,color:ne.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),kn=ne=>{const{children:We,displayLabel:He=!0,rawErrors:Me=[],errors:Xe,help:Ve,rawDescription:Et,required:Dt,disabled:Gt}=ne,fn=$n();return p.createElement(_.A,{fullWidth:!0,error:!!Me.length,required:Dt,disabled:Gt},We,He&&Et?p.createElement(ue.h2,{content:Et,className:fn.markdownDescription}):null,Xe,Ve)},bn=ne=>{const{id:We,children:He,classNames:Me,style:Xe,disabled:Ve,displayLabel:Et,hidden:Dt,label:Gt,onDropPropertyClick:fn,onKeyChange:an,readonly:ta,required:Mn,rawErrors:Rn=[],errors:Vn,help:na,rawDescription:Nn,schema:qn,uiSchema:ia,registry:_a}=ne,ba=(0,je.$R)(ia),Pa=(0,je.$F)("WrapIfAdditionalTemplate",_a,ba);return Dt?p.createElement("div",{style:{display:"none"}},He):p.createElement(Pa,{classNames:Me,style:Xe,disabled:Ve,id:We,label:Gt,onDropPropertyClick:fn,onKeyChange:an,readonly:ta,required:Mn,schema:qn,uiSchema:ia,registry:_a},p.createElement(kn,{displayLabel:Et,rawErrors:Rn,help:na,disabled:Ve,rawDescription:Nn,errors:Vn,required:Mn},He))},jn=(0,b.A)(ne=>({markdownDescription:{fontSize:ne.typography.caption.fontSize,margin:0,color:ne.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),ra=ne=>{const{id:We,description:He}=ne,Me=jn();return He?typeof He=="string"?p.createElement(ue.h2,{content:He,className:Me.markdownDescription}):p.createElement(z.A,{id:We,variant:"subtitle2",style:{marginTop:"5px"}},He):null},ct=(0,Oe.SL)($e.Sx),m=ne=>{const We=p.useMemo(()=>{var Me;return Object.fromEntries(Object.entries((Me=ne.fields)!=null?Me:{}).map(([Xe,Ve])=>[Xe,Et=>{var Dt,Gt;return p.createElement(Ve,{...Et,uiSchema:(Dt=Et.uiSchema)!=null?Dt:{},formData:Et.formData,rawErrors:(Gt=Et.rawErrors)!=null?Gt:[]})}]))},[ne.fields]),He=p.useMemo(()=>({FieldTemplate:bn,DescriptionFieldTemplate:ra,...ne.templates}),[ne.templates]);return p.createElement(ct,{...ne,templates:He,fields:We})},w=(0,b.A)(ne=>(0,r.A)({list:{width:"100%"},text:{textWrap:"wrap"}})),K=({errors:ne})=>{const We=w();return p.createElement(q.A,null,p.createElement(ee.A,{dense:!0,className:We.list},ne.map((He,Me)=>p.createElement(a.A,{key:Me},p.createElement(he.A,null,p.createElement(vt.A,{color:"error"})),p.createElement(_e.A,{classes:{primary:We.text},primary:He.stack})))))},re=(0,b.A)(ne=>({backButton:{marginRight:ne.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:ne.spacing(2)},formWrapper:{padding:ne.spacing(2)}})),D=ne=>{var We,He,Me,Xe,Ve,Et,Dt;const{layouts:Gt=[],components:fn={},...an}=ne,{ReviewStateComponent:ta=V,ReviewStepComponent:Mn,backButtonText:Rn="Back",createButtonText:Vn="Create",reviewButtonText:na="Review"}=fn,Nn=(0,l.st)(),{presentation:qn,steps:ia}=de(an.manifest),_a=(0,s.b)(),[ba,Pa]=(0,p.useState)(0),[xa,ja]=(0,p.useState)(!1),[Da,Fa]=ge(an.initialState),[lr,rr]=(0,p.useState)(),$a=re(),Ja=(0,p.useMemo)(()=>Object.fromEntries(an.extensions.map(({name:pn,component:vn})=>[pn,vn])),[an.extensions]),Sr=(0,p.useMemo)(()=>({...Bn,...Ja}),[Ja]),cr=(0,p.useMemo)(()=>Object.fromEntries(an.extensions.map(({name:pn,validation:vn})=>[pn,vn])),[an.extensions]),or=(0,p.useMemo)(()=>{var pn;return Ze((pn=ia[ba])==null?void 0:pn.mergedSchema,cr,{apiHolder:_a})},[ia,ba,cr,_a]),ga=()=>{Pa(pn=>pn-1)},ur=(0,p.useCallback)(pn=>Fa(vn=>({...vn,...pn.formData})),[Fa]),Ha=(0,p.useCallback)(()=>{var pn;an.onCreate(Da);const vn=typeof Da.name=="string"?Da.name:void 0;Nn.captureEvent("create",(pn=vn!=null?vn:an.templateName)!=null?pn:"unknown")},[an,Da,Nn]),ir=cn(ia[ba],{layouts:Gt}),Ga=async({formData:pn={}})=>{rr(void 0),ja(!0);const vn=await or(pn);ja(!1),Tt(vn)?rr(vn):(rr(void 0),Pa(Fn=>{const va=Fn+1;return Nn.captureEvent("click",`Next Step (${va})`),va})),Fa(Fn=>({...Fn,...pn}))},Ne=(He=(We=qn==null?void 0:qn.buttonLabels)==null?void 0:We.backButtonText)!=null?He:Rn,oe=(Xe=(Me=qn==null?void 0:qn.buttonLabels)==null?void 0:Me.createButtonText)!=null?Xe:Vn,it=(Et=(Ve=qn==null?void 0:qn.buttonLabels)==null?void 0:Ve.reviewButtonText)!=null?Et:na;return p.createElement(p.Fragment,null,xa&&p.createElement(le.A,{variant:"indeterminate"}),p.createElement(ie.A,{activeStep:ba,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},ia.map((pn,vn)=>{const Fn=ba>vn;return p.createElement(G.A,{key:vn},p.createElement(we.A,{"aria-label":`Step ${vn+1}`,style:{cursor:Fn?"pointer":"default"},onClick:()=>{Fn&&Pa(vn)}},pn.title))}),p.createElement(G.A,null,p.createElement(we.A,null,"Review"))),p.createElement("div",{className:$a.formWrapper},ba<ia.length?p.createElement(m,{validator:Te.Ay,extraErrors:lr,formData:Da,formContext:{formData:Da},schema:ir.schema,uiSchema:ir.uiSchema,onSubmit:Ga,fields:Sr,showErrorList:"top",templates:{ErrorListTemplate:K},onChange:ur,experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...(Dt=an.formProps)!=null?Dt:{}},p.createElement("div",{className:$a.footer},p.createElement(Ce.A,{onClick:ga,className:$a.backButton,disabled:ba<1||xa},Ne),p.createElement(Ce.A,{variant:"contained",color:"primary",type:"submit",disabled:xa},ba===ia.length-1?it:"Next"))):Mn?p.createElement(Mn,{disableButtons:xa,formData:Da,handleBack:ga,handleReset:()=>{},steps:ia,handleCreate:Ha}):p.createElement(p.Fragment,null,p.createElement(ta,{formState:Da,schemas:ia}),p.createElement("div",{className:$a.footer},p.createElement(Ce.A,{onClick:ga,className:$a.backButton,disabled:ba<1},"Back"),p.createElement(Ce.A,{variant:"contained",color:"primary",onClick:Ha},oe)))))},U=(0,b.A)(()=>({header:{backgroundImage:({cardBackgroundImage:ne})=>ne,color:({cardFontColor:ne})=>ne},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),Y=ne=>{const{template:{metadata:{title:We,name:He},spec:{type:Me}}}=ne,{getPageTheme:Xe}=(0,ft.A)(),Ve=Xe({themeId:Me}),Et=U({cardFontColor:Ve.fontColor,cardBackgroundImage:Ve.backgroundImage}),Dt=p.createElement("div",{className:Et.subtitleWrapper},p.createElement("div",null,Me),p.createElement("div",null,p.createElement(Ft.uR,{entity:ne.template,style:{padding:0}})));return p.createElement(ue.f1,{title:We!=null?We:He,subtitle:Dt,classes:{root:Et.header}})},Se=(0,b.A)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),Re=({icon:ne,text:We,url:He})=>{const Me=Se();return p.createElement("div",{className:Me.linkText},p.createElement(ne,{fontSize:"small"}),p.createElement(ue.N_,{style:{marginLeft:"8px"},to:He},We||He))},ut=(0,b.A)(ne=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:ne.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:ne.palette.link}})),St=ne=>{var We,He,Me,Xe,Ve,Et,Dt;const{template:Gt}=ne,fn=ut(),an=(0,me.g)(Gt,ht.vv),ta=(0,l.nm)(),Mn=Nn=>{var qn;return Nn&&(qn=ta.getSystemIcon(Nn))!=null?qn:ke.A},Rn=!!((We=Gt.metadata.tags)!=null&&We.length),Vn=!!((He=ne.additionalLinks)!=null&&He.length)||!!((Me=Gt.metadata.links)!=null&&Me.length),na=!Rn&&!Vn;return p.createElement(k.A,null,p.createElement(Y,{template:Gt}),p.createElement(ce.A,null,p.createElement(I.A,{container:!0,spacing:2},p.createElement(I.A,{item:!0,xs:12},p.createElement(h.A,{className:fn.box},p.createElement(ue.h2,{className:fn.markdown,content:(Xe=Gt.metadata.description)!=null?Xe:"No description"}))),na&&p.createElement(I.A,{item:!0,xs:12},p.createElement(M.A,{"data-testid":"template-card-separator"})),Rn&&p.createElement(p.Fragment,null,p.createElement(I.A,{item:!0,xs:12},p.createElement(M.A,{"data-testid":"template-card-separator--tags"})),p.createElement(I.A,{item:!0,xs:12},p.createElement(I.A,{container:!0,spacing:2},(Ve=Gt.metadata.tags)==null?void 0:Ve.map(Nn=>p.createElement(I.A,{key:`grid-${Nn}`,item:!0},p.createElement(C.A,{style:{margin:0},size:"small",label:Nn,key:Nn})))))),Vn&&p.createElement(p.Fragment,null,p.createElement(I.A,{item:!0,xs:12},p.createElement(M.A,{"data-testid":"template-card-separator--links"})),p.createElement(I.A,{item:!0,xs:12},p.createElement(I.A,{container:!0,spacing:2},(Et=ne.additionalLinks)==null?void 0:Et.map(({icon:Nn,text:qn,url:ia},_a)=>p.createElement(I.A,{className:fn.linkText,item:!0,xs:6,key:_a},p.createElement(Re,{icon:Nn,text:qn,url:ia}))),(Dt=Gt.metadata.links)==null?void 0:Dt.map(({url:Nn,icon:qn,title:ia},_a)=>p.createElement(I.A,{className:fn.linkText,item:!0,xs:6,key:_a},p.createElement(Re,{icon:Mn(qn),text:ia||Nn,url:Nn})))))))),p.createElement(v.A,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},p.createElement("div",{className:fn.footer},p.createElement("div",{className:fn.ownedBy},an.length>0&&p.createElement(p.Fragment,null,p.createElement(ue.ny,{fontSize:"small"}),p.createElement(Ft.iI,{style:{marginLeft:"8px"},entityRefs:an,defaultKind:"Group",hideIcons:!0}))),p.createElement(Ce.A,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var Nn;return(Nn=ne.onSelected)==null?void 0:Nn.call(ne,Gt)}},"Choose"))))},sn=ne=>{const{templates:We,title:He,components:{CardComponent:Me}={},onSelected:Xe}=ne,Ve=typeof He=="string"?p.createElement(ue.dv,{title:He}):He;if(We.length===0)return null;const Et=Me||St;return p.createElement(ue.UC,null,Ve,p.createElement(ue.s3,null,We.map(({template:Dt,additionalLinks:Gt})=>p.createElement(Et,{key:(0,ht.U2)(Dt),additionalLinks:Gt,template:Dt,onSelected:Xe}))))},Zt=ne=>{const{loading:We,error:He,entities:Me}=(0,Ft.nK)(),{groups:Xe,templateFilter:Ve,TemplateCardComponent:Et,onTemplateSelected:Dt}=ne,Gt=(0,s.u)(s.r),fn=(0,p.useCallback)(an=>{Dt==null||Dt(an)},[Dt]);return We?p.createElement(ue.ke,null):He?(Gt.post(He),null):!Me||!Me.length?p.createElement(z.A,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",p.createElement(ue.N_,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):p.createElement(p.Fragment,null,Xe.map(({title:an,filter:ta},Mn)=>{const Rn=Me.filter(bt.c).filter(Vn=>Ve?Ve(Vn):!0).filter(ta).map(Vn=>{var na,Nn;const qn=(Nn=(na=ne.additionalLinksForEntity)==null?void 0:na.call(ne,Vn))!=null?Nn:[];return{template:Vn,additionalLinks:qn}});return p.createElement(sn,{key:Mn,templates:Rn,title:an,components:{CardComponent:Et},onSelected:fn})}))},hn=(0,b.A)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),dn=ne=>{var We;const{title:He,description:Me,namespace:Xe,templateName:Ve,...Et}=ne,Dt=hn(),Gt=(0,ht.U2)({kind:"Template",namespace:Xe,name:Ve}),fn=(0,s.u)(s.r),{loading:an,manifest:ta,error:Mn}=Pt(Gt),Rn=xt(ta);return(0,p.useEffect)(()=>{Mn&&fn.post(new Error(`Failed to load template, ${Mn}`))},[Mn,fn]),Mn?Et.onError(Mn):p.createElement(ue.UC,null,an&&p.createElement(ue.ke,null),Rn&&p.createElement(ue.nO,{title:He!=null?He:Rn.title,subheader:p.createElement(ue.h2,{className:Dt.markdown,content:(We=Me!=null?Me:Rn.description)!=null?We:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},p.createElement(D,{manifest:Rn,templateName:Ve,...Et})))},kt=ne=>React.createElement(SecretsContextProvider,null,React.createElement(dn,{...ne})),yn=(0,b.A)({root:{"&:hover":{textDecoration:"none"}}}),gn=ne=>{const{links:We=[]}=ne.output,He=yn(),Me=(0,l.nm)(),Xe=(0,l.Sf)(Ft.sF),Ve=Et=>{var Dt;return(Dt=Me.getSystemIcon(Et))!=null?Dt:Yt.A};return p.createElement(p.Fragment,null,We.filter(({url:Et,entityRef:Dt})=>Et||Dt).map(({url:Et,entityRef:Dt,title:Gt,icon:fn})=>{if(Dt){const an=(0,ht.KU)(Dt),ta=Xe(an);return{title:Gt,icon:fn,url:ta}}return{title:Gt,icon:fn,url:Et}}).map(({url:Et,title:Dt,icon:Gt},fn)=>{const an=Ve(Gt);return p.createElement(ue.N_,{to:Et,key:fn,classes:{root:He.root}},p.createElement(Ce.A,{startIcon:p.createElement(an,null),component:"div",color:"primary"},Dt))}))},Un=ne=>{const{output:{text:We=[]},index:He,setIndex:Me}=ne,Xe=(0,l.nm)(),Ve=Et=>{var Dt;return(Dt=Xe.getSystemIcon(Et))!=null?Dt:yt.A};return p.createElement(p.Fragment,null,We.filter(({content:Et})=>Et!==void 0).map(({title:Et,icon:Dt},Gt)=>{const fn=Ve(Dt);return p.createElement(Ce.A,{key:Gt,startIcon:p.createElement(fn,null),component:"div",color:"primary",onClick:()=>{He!==Gt&&(Me==null||Me(Gt))},variant:He===Gt?"outlined":void 0},Et)}))},Qn=ne=>{var We,He;const{output:Me}=ne,[Xe,Ve]=(0,p.useState)(void 0);(0,p.useEffect)(()=>{if(Xe===void 0&&(Me!=null&&Me.text)){const Dt=Me.text.findIndex(Gt=>Gt.default);Ve(Dt>=0?Dt:0)}},[Xe,Me]);const Et=(0,p.useMemo)(()=>{var Dt;return Xe!==void 0?(Dt=Me==null?void 0:Me.text)==null?void 0:Dt[Xe]:null},[Me,Xe]);return Me?p.createElement(p.Fragment,null,p.createElement(h.A,{paddingBottom:2},p.createElement(q.A,null,p.createElement(h.A,{padding:2,justifyContent:"center",display:"flex",gridGap:16},p.createElement(Un,{output:Me,index:Xe,setIndex:Ve}),p.createElement(gn,{output:Me})))),Et?p.createElement(h.A,{paddingBottom:2},p.createElement(ue.nO,{title:(We=Et.title)!=null?We:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},p.createElement(h.A,{padding:2,height:"100%"},p.createElement(ue.h2,{content:(He=Et.content)!=null?He:""})))):null):null},ea=(0,b.A)(ne=>({root:{color:ne.palette.text.disabled},completed:{color:ne.palette.status.ok},error:{color:ne.palette.status.error}})),Pn=ne=>{const We=ea(),{active:He,completed:Me,error:Xe,skipped:Ve}=ne,Et=()=>He?p.createElement(N.A,{size:"20px"}):Me?p.createElement(Z.A,null):Xe?p.createElement(Pe.A,null):Ve?p.createElement(_t.A,null):p.createElement(S.A,null);return p.createElement("div",{className:W()(We.root,{[We.completed]:Me,[We.error]:Xe})},Et())},Sn=ne=>{const[We,He]=(0,p.useState)(""),{step:Me}=ne,Xe=()=>Me.startedAt&&Me.endedAt&&We?null:Me.startedAt&&Me.endedAt?1:1e3,Ve=(0,p.useCallback)(()=>{if(!Me.startedAt){He("");return}const Et=Me.endedAt?lt.c9.fromISO(Me.endedAt):lt.c9.local(),Dt=lt.c9.fromISO(Me.startedAt),Gt=lt.IX.fromDateTimes(Dt,Et).toDuration().valueOf();He(Je()(Gt,{round:!0}))},[Me.endedAt,Me.startedAt]);return(0,Wt.u)(Ve),(0,Ue.A)(Ve,Xe()),p.createElement(z.A,{variant:"caption"},We)},Jt=(0,b.A)(ne=>({failed:{backgroundColor:ne.palette.error.main},success:{backgroundColor:ne.palette.success.main}})),rn=ne=>{const We=Jt();return ne.isComplete?p.createElement(le.A,{variant:"determinate",classes:{bar:ne.isError?We.failed:We.success},value:100}):p.createElement(le.A,{variant:"indeterminate"})},Xn=ne=>{var We,He;return p.createElement(q.A,{style:{position:"relative",overflow:"hidden"}},p.createElement(rn,{isComplete:(We=ne.isComplete)!=null?We:!1,isError:(He=ne.isError)!=null?He:!1}),p.createElement(h.A,{padding:2},p.createElement(ie.A,{activeStep:ne.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},ne.steps.map(Me=>{const Xe=Me.status==="completed",Ve=Me.status==="failed",Et=Me.status==="processing",Dt=Me.status==="skipped",Gt={completed:Xe,error:Ve,active:Et,skipped:Dt};return p.createElement(G.A,{key:Me.id},p.createElement(Q.A,null,p.createElement(we.A,{StepIconProps:Gt,StepIconComponent:Pn,"data-testid":"step-label"},p.createElement(h.A,null,Me.name),!Dt&&p.createElement(Sn,{step:Me}))))}))))},_n=(0,b.A)({root:{width:"100%",height:"100%",position:"relative"}}),H=ne=>{const We=_n();return p.createElement("div",{className:We.root},p.createElement(ue.rW,{text:Object.values(ne.logs).map(He=>He.join(`
`)).filter(Boolean).join(`
`)}))},be=p.createElement(Xt.A,{fontSize:"small"}),Fe=p.createElement(mt.A,{fontSize:"small"}),tt=(0,b.A)({root:{},label:{}},{name:"ScaffolderReactTemplateCategoryPicker"}),It=()=>{const ne=tt(),We=(0,s.u)(s.l),{error:He,loading:Me,availableTypes:Xe,selectedTypes:Ve,setSelectedTypes:Et}=(0,Ft.jF)();return Me?p.createElement(ue.ke,null):He?(We.post({message:`Failed to load entity types with error: ${He}`,severity:"error"}),null):Xe?p.createElement(h.A,{className:ne.root,pb:1,pt:1},p.createElement(z.A,{className:ne.label,variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),p.createElement(ln.Ay,{multiple:!0,id:"categories-picker",options:Xe,value:Ve,onChange:(Dt,Gt)=>Et(Gt),renderOption:(Dt,{selected:Gt})=>p.createElement(De.A,{control:p.createElement(Ee.A,{icon:be,checkedIcon:Fe,checked:Gt}),label:Ut()(Dt)}),size:"small",popupIcon:p.createElement(on.A,null),renderInput:Dt=>p.createElement(X.A,{...Dt,variant:"outlined"})})):null},Ot=(0,b.A)(ne=>({button:{color:ne.page.fontColor}}));function jt(ne){const{onEditorClicked:We,onActionsClicked:He,onTasksClicked:Me,onCreateClicked:Xe}=ne,Ve=Ot(),[Et,Dt]=(0,p.useState)();if(!We&&!He)return null;const Gt=an=>{Dt(an.currentTarget)},fn=()=>{Dt(void 0)};return p.createElement(p.Fragment,null,p.createElement(qt.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!Et,"aria-haspopup":"true",role:"button",onClick:Gt,"data-testid":"menu-button",color:"inherit",className:Ve.button},p.createElement(Ln.A,null)),p.createElement(Kt.Ay,{"aria-labelledby":"long-menu",open:!!Et,onClose:fn,anchorEl:Et,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},p.createElement(Qe.A,null,Xe&&p.createElement(ve.A,{onClick:Xe},p.createElement(he.A,null,p.createElement(Vt.A,{fontSize:"small"})),p.createElement(_e.A,{primary:"Create"})),We&&p.createElement(ve.A,{onClick:We},p.createElement(he.A,null,p.createElement(zt.A,{fontSize:"small"})),p.createElement(_e.A,{primary:"Template Editor"})),He&&p.createElement(ve.A,{onClick:He},p.createElement(he.A,null,p.createElement(yt.A,{fontSize:"small"})),p.createElement(_e.A,{primary:"Installed Actions"})),Me&&p.createElement(ve.A,{onClick:Me},p.createElement(he.A,null,p.createElement(Bt.A,{fontSize:"small"})),p.createElement(_e.A,{primary:"Task List"})))))}},82279:(Dn,Ct,e)=>{"use strict";e.d(Ct,{S:()=>z,s:()=>q,u:()=>r});var s=e(97388),l=e(14041),b=e(48821);const _=(0,s.tK)("secrets-context"),z=ee=>{const[a,he]=(0,l.useState)({});return l.createElement(_.Provider,{value:(0,s.Bl)({1:{secrets:a,setSecrets:he}})},ee.children)},r=()=>{var ee;const a=(ee=(0,l.useContext)(_))==null?void 0:ee.atVersion(1);if(!a)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:he,secrets:_e={}}=a;return{setSecrets:(0,l.useCallback)(ie=>{he(G=>({...G,...ie}))},[he]),secrets:_e}},q=(0,s.Q6)("scaffolder:scaffolder-api-ref",()=>(0,b.c)({id:"plugin.scaffolder.service"}))},77189:(Dn,Ct,e)=>{"use strict";e.d(Ct,{TA:()=>we,cw:()=>ie,l3:()=>he,zD:()=>ee});var s=e(11638),l=e(48821),b=e(82279),_=e(82806),z=e(14041);const r="scaffolder.extensions.wrapper.v1",q="scaffolder.extensions.field.v1";function ee(k){return{expose(){const ce=()=>null;return(0,s.h3)(ce,q,k),ce}}}const a=()=>null;(0,s.h3)(a,r,!0);const he=k=>(0,s.OJ)(k,ce=>ce.selectByComponentData({key:r}).findComponentData({key:q})),_e="scaffolder.layout.v1",le="scaffolder.layouts.wrapper.v1",ie=k=>(0,s.OJ)(k,ce=>ce.selectByComponentData({key:le}).findComponentData({key:_e}));function G(k,ce){var I,h,M;switch(ce.type){case"INIT":{k.steps=ce.data.spec.steps.reduce((C,v)=>(C[v.id]={status:"open",id:v.id},C),{}),k.stepLogs=ce.data.spec.steps.reduce((C,v)=>(C[v.id]=[],C),{}),k.loading=!1,k.error=void 0,k.completed=!1,k.task=ce.data;return}case"LOGS":{const C=ce.data;for(const v of C){const N=`${v.createdAt} ${v.body.message}`;if(!v.body.stepId||!((I=k.steps)!=null&&I[v.body.stepId]))continue;const Q=(h=k.stepLogs)==null?void 0:h[v.body.stepId],De=(M=k.steps)==null?void 0:M[v.body.stepId];De&&v.body.status&&v.body.status!==De.status&&(De.status=v.body.status,De.status==="processing"&&(De.startedAt=v.createdAt),["cancelled","completed","failed"].includes(De.status)&&(De.endedAt=v.createdAt)),Q==null||Q.push(N)}return}case"COMPLETED":{k.completed=!0,k.output=ce.data.body.output,k.error=ce.data.body.error;return}case"CANCELLED":{k.cancelled=!0;return}case"RECOVERED":{for(const C in k.steps)k.steps.hasOwnProperty(C)&&(k.steps[C].startedAt=void 0,k.steps[C].endedAt=void 0,k.steps[C].status="open");return}case"ERROR":{k.error=ce.data,k.loading=!1,k.completed=!0;return}default:return}}const we=k=>{const ce=(0,l.u)(b.s),[I,h]=(0,_.A)(G,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,z.useEffect)(()=>{let M=!1,C,v,N=1;const Q=()=>ce.getTask(k).then(De=>{if(M)return;h({type:"INIT",data:De});const Ee=ce.streamLogs({taskId:k}),X=new Array;function p(){if(X.length){const j=X.splice(0,X.length);h({type:"LOGS",data:j})}}v=setInterval(p,500),C=Ee.subscribe({next:j=>{switch(N=1,j.type){case"log":return X.push(j);case"cancelled":h({type:"CANCELLED"});return;case"completion":p(),h({type:"COMPLETED",data:j});return;case"recovered":h({type:"RECOVERED",data:j});return;default:throw new Error(`Unhandled event type ${j.type} in observer`)}},error:j=>{p();const J=3;j.message||(j.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${N>J?J:N}/${J} retries)`),setTimeout(()=>{N+=1,Q()},15e3),h({type:"ERROR",data:j})}})},De=>{M||h({type:"ERROR",data:De})});return Q(),()=>{M=!0,C&&C.unsubscribe(),v&&clearInterval(v)}},[ce,h,k]),I};function Ce(k){return{expose(){const ce=()=>null;return attachComponentData(ce,_e,k),ce}}}const ft=()=>null;(0,s.h3)(ft,le,!0)},49661:(Dn,Ct,e)=>{"use strict";e.d(Ct,{E:()=>yt,M:()=>mt,O:()=>Je,R:()=>ot,a:()=>Yt,b:()=>Ue,c:()=>Pe,d:()=>Ut,e:()=>W,f:()=>Qe,g:()=>et,h:()=>$n,i:()=>Bn,j:()=>de,k:()=>V,l:()=>cn,m:()=>xt,n:()=>ra,r:()=>Kt,v:()=>Xt});var s=e(29835),l=e(14041),b=e(16249),_=e(46195),z=e(75757),r=e(48821),q=e(11638),ee=e(92651),a=e(95061),he=e(20577),_e=e(73466),le=e(33478),ie=e(51253),G=e(63301),we=e(48543),Ce=e(22968),ft=e(82279),k=e(77189),ce=e(22771),I=e(77125),h=e(37197),M=e(72501),C=e(8380),v=e(63177),N=e(3399),Q=e(18690),De=e(64947),Ee=e(4321),X=e(58837),p=e(54917),j=e(45516),J=e(45810),ue=e.n(J),Te=e(29365),dt=e(46423),Ge=e(5951),rt=e(26343),pt=e(28233),qe=e(55197),st=e(91042),Oe=e(92399),je=e(55534),$e=e(25283),vt=e(86868),ht=e(71407),Ft=e(97093);function me(ct,m){return{schema:{returnValue:(0,v.Ay)(ct),uiOptions:m?(0,v.Ay)(m):void 0},type:null,uiOptionsType:null}}const ke=_.z.record(_.z.string().or(_.z.object({exists:_.z.boolean().optional()})).or(_.z.array(_.z.string()))),Yt=me(_.z.string(),_.z.object({allowedKinds:_.z.array(_.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:_.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:_.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:_.z.union([_.z.string(),_.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:_.z.array(ke).or(ke).optional().describe("List of key-value filter expression for entities")})).schema,yt=ct=>{var m,w,K,re,D;const{onChange:U,schema:{title:Y="Entity",description:Se="An entity from the catalog"},required:Re,uiSchema:ut,rawErrors:St,formData:sn,idSchema:Zt}=ct,hn=R(ut),dn=(m=ut["ui:options"])==null?void 0:m.defaultKind,kt=((w=ut["ui:options"])==null?void 0:w.defaultNamespace)||void 0,yn=(0,r.u)(ee.vp),{value:gn,loading:Un}=(0,_e.A)(async()=>{const Jt=["metadata.name","metadata.namespace","kind"],{items:rn}=await yn.getEntities(hn?{filter:hn,fields:Jt}:{filter:void 0,fields:Jt});return rn}),Qn=(re=(K=ut["ui:options"])==null?void 0:K.allowArbitraryValues)!=null?re:!0,ea=(0,l.useCallback)(Jt=>{try{return(0,ee.SE)((0,s.KU)(Jt,{defaultKind:dn,defaultNamespace:kt}),{defaultKind:dn,defaultNamespace:kt})}catch{return Jt}},[dn,kt]),Pn=(0,l.useCallback)((Jt,rn,Xn)=>{if(typeof rn!="string")U(rn?(0,s.U2)(rn):void 0);else if(Xn==="blur"||Xn==="create-option"){let _n=rn;try{_n=(0,s.U2)((0,s.KU)(rn,{defaultKind:dn,defaultNamespace:kt}))}catch{}(sn!==rn||Qn)&&U(_n)}},[U,sn,dn,kt,Qn]),Sn=(D=gn==null?void 0:gn.find(Jt=>(0,s.U2)(Jt)===sn))!=null?D:Qn&&sn?ea(sn):"";return(0,l.useEffect)(()=>{(gn==null?void 0:gn.length)===1&&Sn===""&&U((0,s.U2)(gn[0]))},[gn,U,Sn]),l.createElement(a.A,{margin:"normal",required:Re,error:(St==null?void 0:St.length)>0&&!sn},l.createElement(he.Ay,{disabled:(gn==null?void 0:gn.length)===1,id:Zt==null?void 0:Zt.$id,value:Sn,loading:Un,onChange:Pn,options:gn||[],getOptionLabel:Jt=>typeof Jt=="string"?Jt:(0,ee.SE)(Jt,{defaultKind:dn,defaultNamespace:kt}),autoSelect:!0,freeSolo:Qn,renderInput:Jt=>l.createElement(b.A,{...Jt,label:Y,margin:"dense",helperText:Se,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Re,InputProps:Jt.InputProps})}))};function _t(ct){return typeof ct=="object"&&ct.exists?z.cr:ct==null?void 0:ct.toString()}function S(ct){const m={};for(const[w,K]of Object.entries(ct))Array.isArray(K)?m[w]=K:m[w]=_t(K);return m}function R(ct){var m,w;const K=(m=ct["ui:options"])==null?void 0:m.allowedKinds,re=((w=ct["ui:options"])==null?void 0:w.catalogFilter)||K&&{kind:K};if(re)return Array.isArray(re)?re.map(S):S(re)}const W=(ct,m)=>{s.yz.isValidObjectName(ct)||m.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},Pe=me(_.z.string()).schema,Ue=ct=>{const{onChange:m,required:w,schema:{title:K="Name",description:re="Unique name of the component"},rawErrors:D,formData:U,uiSchema:{"ui:autofocus":Y},idSchema:Se,placeholder:Re}=ct;return l.createElement(b.A,{id:Se==null?void 0:Se.$id,label:K,placeholder:Re,helperText:re,required:w,value:U!=null?U:"",onChange:({target:{value:ut}})=>m(ut),margin:"normal",error:(D==null?void 0:D.length)>0&&!U,inputProps:{autoFocus:Y}})},et=me(_.z.string(),_.z.object({allowedKinds:_.z.array(_.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:_.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:_.z.union([_.z.string(),_.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:_.z.array(ke).or(ke).optional().describe("List of key-value filter expression for entities")})).schema,Je=ct=>{var m,w,K,re,D;const{schema:{title:U="Owner",description:Y="The owner of the component"},uiSchema:Se,...Re}=ct,ut=(m=Se["ui:options"])==null?void 0:m.defaultNamespace,St=(w=Se["ui:options"])==null?void 0:w.allowedKinds,sn=((K=Se["ui:options"])==null?void 0:K.catalogFilter)||{kind:St||["Group","User"]},Zt={...Se,"ui:options":{catalogFilter:sn,defaultKind:"Group",allowArbitraryValues:(D=(re=Se["ui:options"])==null?void 0:re.allowArbitraryValues)!=null?D:!0,...ut!==void 0?{defaultNamespace:ut}:{}}};return l.createElement(yt,{...Re,schema:{title:U,description:Y},uiSchema:Zt})},Wt=_.z.record(_.z.string().or(_.z.object({exists:_.z.boolean().optional()})).or(_.z.array(_.z.string()))),Ut=me(_.z.array(_.z.string()),_.z.object({defaultKind:_.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:_.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:_.z.union([_.z.string(),_.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:_.z.array(Wt).or(Wt).optional().describe("List of key-value filter expression for entities")})).schema,mt=ct=>{var m,w,K,re,D;const{onChange:U,schema:{title:Y="Entity",description:Se="An entity from the catalog"},required:Re,uiSchema:ut,rawErrors:St,formData:sn,idSchema:Zt}=ct,hn=qt(ut),dn=(m=ut["ui:options"])==null?void 0:m.defaultKind,kt=((w=ut["ui:options"])==null?void 0:w.defaultNamespace)||void 0,yn=(0,r.u)(ee.vp),{value:gn,loading:Un}=(0,_e.A)(async()=>{const{items:Sn}=await yn.getEntities(hn?{filter:hn}:void 0);return Sn}),Qn=(re=(K=ut["ui:options"])==null?void 0:K.allowArbitraryValues)!=null?re:!0,ea=(0,l.useCallback)(Sn=>{try{return(0,ee.SE)((0,s.KU)(Sn,{defaultKind:dn,defaultNamespace:kt}),{defaultKind:dn,defaultNamespace:kt})}catch{return Sn}},[dn,kt]),Pn=(0,l.useCallback)((Sn,Jt,rn)=>{const Xn=Jt.map(_n=>{if(typeof _n!="string")return _n?(0,s.U2)(_n):void 0;if(rn==="blur"||rn==="create-option"){let H=_n;try{H=(0,s.U2)((0,s.KU)(_n,{defaultKind:dn,defaultNamespace:kt}))}catch{}if(sn.includes(_n)||Qn)return H}}).filter(_n=>_n!==void 0);U(Xn)},[U,sn,dn,kt,Qn]);return(0,l.useEffect)(()=>{(gn==null?void 0:gn.length)===1&&U([(0,s.U2)(gn[0])])},[gn,U]),l.createElement(a.A,{margin:"normal",required:Re,error:(St==null?void 0:St.length)>0&&!sn},l.createElement(he.Ay,{multiple:!0,filterSelectedOptions:!0,disabled:(gn==null?void 0:gn.length)===1,id:Zt==null?void 0:Zt.$id,value:(D=gn==null?void 0:gn.filter(Sn=>sn&&sn.includes((0,s.U2)(Sn))))!=null?D:Qn&&sn?sn.map(ea):[],loading:Un,onChange:Pn,options:gn||[],getOptionLabel:Sn=>typeof Sn=="string"?Sn:(0,ee.SE)(Sn,{defaultKind:dn,defaultNamespace:kt}),autoSelect:!0,freeSolo:Qn,renderInput:Sn=>l.createElement(b.A,{...Sn,label:Y,margin:"dense",helperText:Se,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Re,InputProps:Sn.InputProps})}))},Xt=(ct,m)=>{ct.forEach(w=>{try{(0,s.KU)(w)}catch{m.addError(`${w} is not a valid entity ref`)}})};function on(ct){return typeof ct=="object"&&ct.exists?z.cr:ct==null?void 0:ct.toString()}function ln(ct){const m={};for(const[w,K]of Object.entries(ct))Array.isArray(K)?m[w]=K:m[w]=on(K);return m}function qt(ct){var m;const w=(m=ct["ui:options"])==null?void 0:m.catalogFilter;if(w)return Array.isArray(w)?w.map(ln):ln(w)}const Qe=me(_.z.string(),_.z.object({allowedHosts:_.z.array(_.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:_.z.array(_.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:_.z.array(_.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:_.z.array(_.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:_.z.array(_.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:_.z.object({secretsKey:_.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:_.z.object({gitea:_.z.array(_.z.string()).optional().describe("Additional Gitea scopes to request"),gerrit:_.z.array(_.z.string()).optional().describe("Additional Gerrit scopes to request"),github:_.z.array(_.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:_.z.array(_.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:_.z.array(_.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:_.z.array(_.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,Kt=(ct,m,w)=>{var K,re;try{const{host:D,searchParams:U}=new URL(`https://${ct}`),Y=w.apiHolder.get(le.YT);D?(((K=Y==null?void 0:Y.byHost(D))==null?void 0:K.type)==="bitbucket"?(D==="bitbucket.org"&&!U.get("workspace")&&m.addError("Incomplete repository location provided, workspace not provided"),U.get("project")||m.addError("Incomplete repository location provided, project not provided")):((re=Y==null?void 0:Y.byHost(D))==null?void 0:re.type)!=="gerrit"&&(U.get("owner")||m.addError("Incomplete repository location provided, owner not provided")),U.get("repo")||m.addError("Incomplete repository location provided, repo not provided")):m.addError("Incomplete repository location provided, host not provided")}catch{m.addError("Unable to parse the Repository URL")}},Vt=ct=>{const{allowedOwners:m=[],rawErrors:w,state:K,onChange:re}=ct,D=m?m.map(Y=>({label:Y,value:Y})):[{label:"Loading...",value:"loading"}],{owner:U}=K;return l.createElement(l.Fragment,null,l.createElement(a.A,{margin:"normal",required:!0,error:(w==null?void 0:w.length)>0&&!U},m!=null&&m.length?l.createElement(Ce.l6,{native:!0,label:"Owner Available",onChange:Y=>re({owner:String(Array.isArray(Y)?Y[0]:Y)}),disabled:m.length===1,selected:U,items:D}):l.createElement(l.Fragment,null,l.createElement(we.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(G.A,{id:"ownerInput",onChange:Y=>re({owner:Y.target.value}),value:U})),l.createElement(ie.A,null,"The organization, user or project that this repo will belong to")))},zt=ct=>{const{allowedOwners:m=[],state:w,onChange:K,rawErrors:re}=ct,D=m?m.map(Y=>({label:Y,value:Y})):[{label:"Loading...",value:"loading"}],{owner:U}=w;return l.createElement(l.Fragment,null,l.createElement(a.A,{margin:"normal",required:!0,error:(re==null?void 0:re.length)>0&&!U},m!=null&&m.length?l.createElement(Ce.l6,{native:!0,label:"Owner Available",onChange:Y=>K({owner:String(Array.isArray(Y)?Y[0]:Y)}),disabled:m.length===1,selected:U,items:D}):l.createElement(l.Fragment,null,l.createElement(we.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(G.A,{id:"ownerInput",onChange:Y=>K({owner:Y.target.value}),value:U})),l.createElement(ie.A,null,"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Bt=ct=>{const{allowedOwners:m=[],state:w,onChange:K,rawErrors:re}=ct,D=m?m.map(Y=>({label:Y,value:Y})):[{label:"Loading...",value:"loading"}],{owner:U}=w;return l.createElement(l.Fragment,null,l.createElement(a.A,{margin:"normal",required:!0,error:(re==null?void 0:re.length)>0&&!U},m!=null&&m.length?l.createElement(Ce.l6,{native:!0,label:"Owner Available",onChange:Y=>K({owner:String(Array.isArray(Y)?Y[0]:Y)}),disabled:m.length===1,selected:U,items:D}):l.createElement(l.Fragment,null,l.createElement(we.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(G.A,{id:"ownerInput",onChange:Y=>K({owner:Y.target.value}),value:U})),l.createElement(ie.A,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Ln=ct=>{const{allowedOrganizations:m=[],allowedOwners:w=[],rawErrors:K,state:re,onChange:D}=ct,U=m?m.map(ut=>({label:ut,value:ut})):[{label:"Loading...",value:"loading"}],Y=w?w.map(ut=>({label:ut,value:ut})):[{label:"Loading...",value:"loading"}],{organization:Se,owner:Re}=re;return l.createElement(l.Fragment,null,l.createElement(a.A,{margin:"normal",required:!0,error:(K==null?void 0:K.length)>0&&!Se},m!=null&&m.length?l.createElement(Ce.l6,{native:!0,label:"Organization",onChange:ut=>D({organization:String(Array.isArray(ut)?ut[0]:ut)}),disabled:m.length===1,selected:Se,items:U}):l.createElement(l.Fragment,null,l.createElement(we.A,{htmlFor:"orgInput"},"Organization"),l.createElement(G.A,{id:"orgInput",onChange:ut=>D({organization:ut.target.value}),value:Se})),l.createElement(ie.A,null,"The Organization that this repo will belong to")),l.createElement(a.A,{margin:"normal",required:!0,error:(K==null?void 0:K.length)>0&&!Re},w!=null&&w.length?l.createElement(Ce.l6,{native:!0,label:"Owner",onChange:ut=>D({owner:String(Array.isArray(ut)?ut[0]:ut)}),disabled:w.length===1,selected:Re,items:Y}):l.createElement(l.Fragment,null,l.createElement(we.A,{htmlFor:"ownerInput"},"Project"),l.createElement(G.A,{id:"ownerInput",onChange:ut=>D({owner:ut.target.value}),value:Re})),l.createElement(ie.A,null,"The Project that this repo will belong to")))},mn=ct=>{const{allowedOwners:m=[],allowedProjects:w=[],onChange:K,rawErrors:re,state:D}=ct,{host:U,workspace:Y,project:Se}=D,Re=m?m==null?void 0:m.map(St=>({label:St,value:St})):[],ut=w?w==null?void 0:w.map(St=>({label:St,value:St})):[];return(0,l.useEffect)(()=>{U==="bitbucket.org"&&m.length&&K({workspace:m[0]})},[m,U,K]),l.createElement(l.Fragment,null,U==="bitbucket.org"&&l.createElement(a.A,{margin:"normal",required:!0,error:(re==null?void 0:re.length)>0&&!Y},m!=null&&m.length?l.createElement(Ce.l6,{native:!0,label:"Allowed Workspaces",onChange:St=>K({workspace:String(Array.isArray(St)?St[0]:St)}),disabled:m.length===1,selected:Y,items:Re}):l.createElement(l.Fragment,null,l.createElement(we.A,{htmlFor:"workspaceInput"},"Workspace"),l.createElement(G.A,{id:"workspaceInput",onChange:St=>K({workspace:St.target.value}),value:Y})),l.createElement(ie.A,null,"The Workspace that this repo will belong to")),l.createElement(a.A,{margin:"normal",required:!0,error:(re==null?void 0:re.length)>0&&!Se},w!=null&&w.length?l.createElement(Ce.l6,{native:!0,label:"Allowed Projects",onChange:St=>K({project:String(Array.isArray(St)?St[0]:St)}),disabled:w.length===1,selected:Se,items:ut}):l.createElement(l.Fragment,null,l.createElement(we.A,{htmlFor:"projectInput"},"Project"),l.createElement(G.A,{id:"projectInput",onChange:St=>K({project:St.target.value}),value:Se})),l.createElement(ie.A,null,"The Project that this repo will belong to")))},nn=ct=>{const{onChange:m,rawErrors:w,state:K}=ct,{workspace:re,owner:D}=K;return l.createElement(l.Fragment,null,l.createElement(a.A,{margin:"normal",error:(w==null?void 0:w.length)>0&&!re},l.createElement(we.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(G.A,{id:"ownerInput",onChange:U=>m({owner:U.target.value}),value:D}),l.createElement(ie.A,null,"The owner of the project (optional)")),l.createElement(a.A,{margin:"normal",required:!0,error:(w==null?void 0:w.length)>0&&!re},l.createElement(we.A,{htmlFor:"parentInput"},"Parent"),l.createElement(G.A,{id:"parentInput",onChange:U=>m({workspace:U.target.value}),value:re}),l.createElement(ie.A,null,"The project parent that the repo will belong to")))},On=ct=>{const{host:m,hosts:w,onChange:K,rawErrors:re}=ct,D=(0,r.u)(ft.s),{value:{integrations:U}={integrations:[]},loading:Y}=(0,_e.A)(async()=>await D.getIntegrationsList({allowedHosts:w!=null?w:[]}));(0,l.useEffect)(()=>{m||(w!=null&&w.length?K(w[0]):U!=null&&U.length&&K(U[0].host))},[w,m,K,U]);const Se=U?U.filter(Re=>w!=null&&w.length?w==null?void 0:w.includes(Re.host):!0).map(Re=>({label:Re.title,value:Re.host})):[{label:"Loading...",value:"loading"}];return Y?l.createElement(Ce.ke,null):l.createElement(l.Fragment,null,l.createElement(a.A,{margin:"normal",required:!0,error:(re==null?void 0:re.length)>0&&!m},l.createElement(Ce.l6,{native:!0,disabled:(w==null?void 0:w.length)===1,label:"Host",onChange:Re=>K(String(Array.isArray(Re)?Re[0]:Re)),selected:m,items:Se,"data-testid":"host-select"}),l.createElement(ie.A,null,"The host where the repository will be created")))},nt=ct=>{const{repoName:m,allowedRepos:w,onChange:K,rawErrors:re}=ct;(0,l.useEffect)(()=>{m||w!=null&&w.length&&K(w[0])},[w,m,K]);const D=w?w.map(U=>({label:U,value:U})):[{label:"Loading...",value:"loading"}];return l.createElement(l.Fragment,null,l.createElement(a.A,{margin:"normal",required:!0,error:(re==null?void 0:re.length)>0&&!m},w!=null&&w.length?l.createElement(Ce.l6,{native:!0,label:"Repositories Available",onChange:U=>K(String(Array.isArray(U)?U[0]:U)),disabled:w.length===1,selected:m,items:D}):l.createElement(l.Fragment,null,l.createElement(we.A,{htmlFor:"repoNameInput"},"Repository"),l.createElement(G.A,{id:"repoNameInput",onChange:U=>K(String(U.target.value)),value:m})),l.createElement(ie.A,null,"The name of the repository")))};function gt(ct){if(!ct.host)return;const m=new URLSearchParams;return ct.owner&&m.set("owner",ct.owner),ct.repoName&&m.set("repo",ct.repoName),ct.organization&&m.set("organization",ct.organization),ct.workspace&&m.set("workspace",ct.workspace),ct.project&&m.set("project",ct.project),`${ct.host}?${m.toString()}`}function Tt(ct){let m="",w="",K="",re="",D="",U="";try{if(ct){const Y=new URL(`https://${ct}`);m=Y.host,w=Y.searchParams.get("owner")||"",K=Y.searchParams.get("repo")||"",re=Y.searchParams.get("organization")||"",D=Y.searchParams.get("workspace")||"",U=Y.searchParams.get("project")||""}}catch{}return{host:m,owner:w,repoName:K,organization:re,workspace:D,project:U}}const ot=ct=>{var m,w;const{uiSchema:K,onChange:re,rawErrors:D,formData:U,schema:Y}=ct,[Se,Re]=(0,l.useState)(Tt(U)),ut=(0,r.u)(le.YT),St=(0,r.u)(le.$J),{setSecrets:sn}=(0,ft.u)(),Zt=(0,l.useMemo)(()=>{var Jt,rn;return(rn=(Jt=K==null?void 0:K["ui:options"])==null?void 0:Jt.allowedHosts)!=null?rn:[]},[K]),hn=(0,l.useMemo)(()=>{var Jt,rn;return(rn=(Jt=K==null?void 0:K["ui:options"])==null?void 0:Jt.allowedOrganizations)!=null?rn:[]},[K]),dn=(0,l.useMemo)(()=>{var Jt,rn;return(rn=(Jt=K==null?void 0:K["ui:options"])==null?void 0:Jt.allowedOwners)!=null?rn:[]},[K]),kt=(0,l.useMemo)(()=>{var Jt,rn;return(rn=(Jt=K==null?void 0:K["ui:options"])==null?void 0:Jt.allowedProjects)!=null?rn:[]},[K]),yn=(0,l.useMemo)(()=>{var Jt,rn;return(rn=(Jt=K==null?void 0:K["ui:options"])==null?void 0:Jt.allowedRepos)!=null?rn:[]},[K]),{owner:gn,organization:Un,project:Qn,repoName:ea}=Se;(0,l.useEffect)(()=>{re(gt(Se))},[Se,re]),(0,l.useEffect)(()=>{hn.length>0&&!Un&&Re(Jt=>({...Jt,organization:hn[0]}))},[Re,hn,Un]),(0,l.useEffect)(()=>{dn.length>0&&!gn&&Re(Jt=>({...Jt,owner:dn[0]}))},[Re,dn,gn]),(0,l.useEffect)(()=>{kt.length>0&&!Qn&&Re(Jt=>({...Jt,project:kt[0]}))},[Re,kt,Qn]),(0,l.useEffect)(()=>{yn.length>0&&!ea&&Re(Jt=>({...Jt,repoName:yn[0]}))},[Re,yn,ea]);const Pn=(0,l.useCallback)(Jt=>{Re(rn=>({...rn,...Jt}))},[Re]);(0,ce.A)(async()=>{var Jt;const{requestUserCredentials:rn}=(Jt=K==null?void 0:K["ui:options"])!=null?Jt:{},Xn=Se.owner?Se.owner:Se.project;if(!rn||!(Se.host&&Xn&&Se.repoName))return;const[_n,H]=[Se.host,Se.repoName].map(encodeURIComponent),{token:be}=await St.getCredentials({url:`https://${_n}/${Xn}/${H}`,additionalScope:{repoWrite:!0,customScopes:rn.additionalScopes}});sn({[rn.secretsKey]:be})},500,[Se,K]);const Sn=(w=Se.host&&((m=ut.byHost(Se.host))==null?void 0:m.type))!=null?w:null;return l.createElement(l.Fragment,null,Y.title&&l.createElement(I.A,{my:1},l.createElement(M.A,{variant:"h5"},Y.title),l.createElement(h.A,null)),Y.description&&l.createElement(M.A,{variant:"body1"},Y.description),l.createElement(On,{host:Se.host,hosts:Zt,onChange:Jt=>Re(rn=>({...rn,host:Jt})),rawErrors:D}),Sn==="github"&&l.createElement(Vt,{allowedOwners:dn,onChange:Pn,rawErrors:D,state:Se}),Sn==="gitea"&&l.createElement(zt,{allowedOwners:dn,allowedRepos:yn,rawErrors:D,state:Se,onChange:Pn}),Sn==="gitlab"&&l.createElement(Bt,{allowedOwners:dn,rawErrors:D,state:Se,onChange:Pn}),Sn==="bitbucket"&&l.createElement(mn,{allowedOwners:dn,allowedProjects:kt,rawErrors:D,state:Se,onChange:Pn}),Sn==="azure"&&l.createElement(Ln,{allowedOrganizations:hn,allowedOwners:dn,rawErrors:D,state:Se,onChange:Pn}),Sn==="gerrit"&&l.createElement(nn,{rawErrors:D,state:Se,onChange:Pn}),l.createElement(nt,{repoName:Se.repoName,allowedRepos:yn,onChange:Jt=>Re(rn=>({...rn,repoName:Jt})),rawErrors:D}))},V=me(_.z.string(),_.z.object({allowedKinds:_.z.array(_.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:_.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:_.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:_.z.union([_.z.string(),_.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:_.z.array(ke).or(ke).optional().describe("List of key-value filter expression for entities")})).schema,de=ct=>{const{schema:{title:m="Entity",description:w="An entity from the catalog"},uiSchema:K,required:re}=ct,D=(0,r.u)(r.t),{loading:U,value:Y}=(0,_e.A)(async()=>(await D.getBackstageIdentity()).ownershipEntityRefs);if(U)return l.createElement(he.Ay,{loading:U,renderInput:Re=>l.createElement(b.A,{...Re,label:m,margin:"dense",helperText:w,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:re,InputProps:Re.InputProps}),options:[]});const Se=ge(K,Y);return l.createElement(yt,{...ct,uiSchema:Se})};function ge(ct,m){const w=(ct==null?void 0:ct["ui:options"])||{},K=w.allowedKinds;return{"ui:options":{catalogFilter:{...w.catalogFilter,...K?{kind:K,[`relations.${s.vv}`]:m||[]}:{[`relations.${s.vv}`]:m||[]}}}}}const xt=me(_.z.array(_.z.string()),_.z.object({kinds:_.z.array(_.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:_.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:_.z.string().optional().describe("Helper text to display")})).schema,cn=ct=>{var m,w,K;const{formData:re,onChange:D,uiSchema:U}=ct,Y=(0,r.u)(ee.vp),[Se,Re]=(0,l.useState)([]),[ut,St]=(0,l.useState)(""),[sn,Zt]=(0,l.useState)(!1),hn=(0,s.tj)().isValidTag,dn=(m=U["ui:options"])==null?void 0:m.kinds,kt=(w=U["ui:options"])==null?void 0:w.showCounts,yn=(K=U["ui:options"])==null?void 0:K.helperText,{loading:gn,value:Un}=(0,_e.A)(async()=>{const ea="metadata.tags",Pn={facets:[ea]};dn&&(Pn.filter={kind:dn});const{facets:Sn}=await Y.getEntityFacets(Pn),Jt=Object.fromEntries(Sn[ea].map(({value:rn,count:Xn})=>[rn,Xn]));return Re(Object.keys(Jt).sort((rn,Xn)=>kt?Jt[Xn]-Jt[rn]:rn.localeCompare(Xn))),Jt}),Qn=(ea,Pn)=>{let Sn=!1,Jt=!1;const rn=re||[];if(Pn!=null&&Pn.length&&rn.length<Pn.length){const Xn=Pn[Pn.length-1]=Pn[Pn.length-1].toLocaleLowerCase("en-US").trim();Sn=!hn(Xn),Jt=rn.indexOf(Xn)!==-1}Zt(Sn),St(Sn?ut:""),!Sn&&!Jt&&D(Pn||[])};return(0,C.A)(()=>D(re||[])),l.createElement(a.A,{margin:"normal"},l.createElement(he.Ay,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:Qn,value:re||[],inputValue:ut,loading:gn,options:Se,ChipProps:{size:"small"},renderOption:ea=>kt?`${ea} (${Un==null?void 0:Un[ea]})`:ea,renderInput:ea=>l.createElement(b.A,{...ea,label:"Tags",onChange:Pn=>St(Pn.target.value),error:sn,helperText:yn!=null?yn:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},Bn=me(_.z.string(),_.z.object({title:_.z.string().default("Group").describe("Group"),description:_.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,$n=ct=>{const{schema:{title:m,description:w},required:K,rawErrors:re,onChange:D}=ct,U=(0,r.u)(r.t),Y=(0,r.u)(ee.vp),Se=(0,r.u)(r.r),[Re,ut]=(0,l.useState)([]),[St,sn]=(0,l.useState)(null);(0,_e.A)(async()=>{const{userEntityRef:hn}=await U.getBackstageIdentity();if(!hn){Se.post(new N.m_("No user entity ref found"));return}const{items:dn}=await Y.getEntities({filter:{kind:"Group","relations.hasMember":[hn]}}),kt=dn.filter(yn=>!!yn).map(yn=>{var gn;return{label:(gn=yn.metadata.title)!=null?gn:yn.metadata.name,ref:(0,s.U2)(yn)}});ut(kt)});const Zt=(hn,dn)=>{var kt;sn(dn),D((kt=dn==null?void 0:dn.ref)!=null?kt:"")};return l.createElement(a.A,{margin:"normal",required:K,error:(re==null?void 0:re.length)>0},l.createElement(he.Ay,{id:"OwnershipEntityRefPicker-dropdown",options:Re||[],value:St,onChange:Zt,getOptionLabel:hn=>hn.label,renderInput:hn=>l.createElement(b.A,{...hn,label:m,margin:"dense",helperText:w,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:K})}))},kn=(0,X.A)(()=>({button:{color:({fontColor:ct})=>ct}})),bn=ct=>{const{cancelEnabled:m,logsVisible:w,buttonBarVisible:K,onStartOver:re,onToggleLogs:D,onToggleButtonBar:U,taskId:Y}=ct,{getPageTheme:Se}=(0,p.A)(),Re=Se({themeId:"website"}),ut=kn({fontColor:Re.fontColor}),St=(0,r.u)(ft.s),[sn,Zt]=(0,l.useState)(),[{status:hn},{execute:dn}]=(0,st.Y)(async()=>{Y&&await St.cancelTask(Y)});return l.createElement(l.Fragment,null,l.createElement(Te.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:kt=>{Zt(kt.currentTarget)},"data-testid":"menu-button",className:ut.button},l.createElement(ht.A,null)),l.createElement(qe.Ay,{open:!!sn,onClose:()=>Zt(void 0),anchorEl:sn,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},l.createElement(pt.A,null,l.createElement(rt.A,{onClick:()=>D==null?void 0:D(!w)},l.createElement(dt.A,null,l.createElement($e.A,{fontSize:"small"})),l.createElement(Ge.A,{primary:w?"Hide Logs":"Show Logs"})),l.createElement(rt.A,{onClick:()=>U==null?void 0:U(!K)},l.createElement(dt.A,null,l.createElement(vt.A,{fontSize:"small"})),l.createElement(Ge.A,{primary:K?"Hide Button Bar":"Show Button Bar"})),l.createElement(rt.A,{onClick:re},l.createElement(dt.A,null,l.createElement(je.A,{fontSize:"small"})),l.createElement(Ge.A,{primary:"Start Over"})),l.createElement(rt.A,{onClick:dn,disabled:!m||hn!=="not-executed","data-testid":"cancel-task"},l.createElement(dt.A,null,l.createElement(Oe.A,{fontSize:"small"})),l.createElement(Ge.A,{primary:"Cancel"})))))},jn=(0,X.A)(ct=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:ct.spacing(1)},logsVisibilityButton:{marginRight:ct.spacing(1)}})),ra=ct=>{var m,w,K,re,D,U,Y,Se;const{taskId:Re}=(0,Q.g)(),ut=(0,q.Sf)(j.s),St=(0,Q.Zp)(),sn=(0,r.u)(ft.s),Zt=(0,k.TA)(Re),hn=jn(),dn=(0,l.useMemo)(()=>{var _n,H;return(H=(_n=Zt.task)==null?void 0:_n.spec.steps.map(be=>{var Fe;return{...be,...(Fe=Zt==null?void 0:Zt.steps)==null?void 0:Fe[be.id]}}))!=null?H:[]},[Zt]),[kt,yn]=(0,l.useState)(!1),[gn,Un]=(0,l.useState)(!0);(0,l.useEffect)(()=>{Zt.error&&yn(!0)},[Zt.error]),(0,l.useEffect)(()=>{Zt.completed&&!Zt.error&&Un(!1)},[Zt.error,Zt.completed]);const Qn=(0,l.useMemo)(()=>{for(let _n=dn.length-1;_n>=0;_n--)if(dn[_n].status!=="open")return _n;return 0},[dn]),ea=(0,l.useCallback)(()=>{var _n,H,be,Fe,tt,It;const{namespace:Ot,name:jt}=(Fe=(be=(H=(_n=Zt.task)==null?void 0:_n.spec.templateInfo)==null?void 0:H.entity)==null?void 0:be.metadata)!=null?Fe:{},ne=(It=(tt=Zt.task)==null?void 0:tt.spec.parameters)!=null?It:{};!Ot||!jt||St({pathname:ut({namespace:Ot,templateName:jt}),search:`?${ue().stringify({formData:JSON.stringify(ne)})}`})},[St,(m=Zt.task)==null?void 0:m.spec.parameters,(re=(K=(w=Zt.task)==null?void 0:w.spec.templateInfo)==null?void 0:K.entity)==null?void 0:re.metadata,ut]),[{status:Pn},{execute:Sn}]=(0,st.Y)(async()=>{Re&&await sn.cancelTask(Re)}),Jt=(D=ct.TemplateOutputsComponent)!=null?D:Ft.KV,rn=(Se=(Y=(U=Zt.task)==null?void 0:U.spec.templateInfo)==null?void 0:Y.entity)==null?void 0:Se.metadata.name,Xn=!(Zt.cancelled||Zt.completed);return l.createElement(Ce.YW,{themeId:"website"},l.createElement(Ce.Y9,{pageTitleOverride:`Run of ${rn}`,title:l.createElement("div",null,"Run of ",l.createElement("code",null,rn)),subtitle:`Task ${Re}`},l.createElement(bn,{cancelEnabled:Xn,logsVisible:kt,buttonBarVisible:gn,onStartOver:ea,onToggleLogs:yn,onToggleButtonBar:Un,taskId:Re})),l.createElement(Ce.UC,{className:hn.contentWrapper},Zt.error?l.createElement(I.A,{paddingBottom:2},l.createElement(Ce.bJ,{error:Zt.error,titleFormat:"markdown",title:Zt.error.message})):null,l.createElement(I.A,{paddingBottom:2},l.createElement(Ft.lN,{steps:dn,activeStep:Qn,isComplete:Zt.completed,isError:!!Zt.error})),l.createElement(Jt,{output:Zt.output}),gn?l.createElement(I.A,{paddingBottom:2},l.createElement(Ee.A,null,l.createElement(I.A,{padding:2},l.createElement("div",{className:hn.buttonBar},l.createElement(De.A,{className:hn.cancelButton,disabled:!Xn||Pn!=="not-executed",onClick:Sn,"data-testid":"cancel-button"},"Cancel"),l.createElement(De.A,{className:hn.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>yn(!kt)},kt?"Hide Logs":"Show Logs"),l.createElement(De.A,{variant:"contained",color:"primary",disabled:Xn,onClick:ea},"Start Over"))))):null,kt?l.createElement(I.A,{paddingBottom:2,height:"100%"},l.createElement(Ee.A,{style:{height:"100%"}},l.createElement(I.A,{padding:2,height:"100%"},l.createElement(Ft.g_,{logs:Zt.stepLogs})))):null))}},45516:(Dn,Ct,e)=>{"use strict";e.d(Ct,{S:()=>ie,a:()=>k,b:()=>I,c:()=>ce,d:()=>G,e:()=>h,r:()=>Ce,s:()=>ft,v:()=>we});var s=e(29835),l=e(3399),b=e(45810),_=e.n(b),z=e(96403),r=e.n(z),q=e(4237),ee=e.n(q),a=e(11638),he=Object.defineProperty,_e=(M,C,v)=>C in M?he(M,C,{enumerable:!0,configurable:!0,writable:!0,value:v}):M[C]=v,le=(M,C,v)=>(_e(M,typeof C!="symbol"?C+"":C,v),v);class ie{constructor(C){le(this,"discoveryApi"),le(this,"scmIntegrationsApi"),le(this,"fetchApi"),le(this,"identityApi"),le(this,"useLongPollingLogs");var v,N;this.discoveryApi=C.discoveryApi,this.fetchApi=(v=C.fetchApi)!=null?v:{fetch},this.scmIntegrationsApi=C.scmIntegrationsApi,this.useLongPollingLogs=(N=C.useLongPollingLogs)!=null?N:!1,this.identityApi=C.identityApi}async listTasks(C){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const v=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:N}=await this.identityApi.getBackstageIdentity(),Q=_().stringify(C.filterByOwnership==="owned"?{createdBy:N}:{}),De=await this.fetchApi.fetch(`${v}/v2/tasks?${Q}`);if(!De.ok)throw await l.o3.fromResponse(De);return await De.json()}async getIntegrationsList(C){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(N=>!this.scmIntegrationsApi.bitbucketCloud.byHost(N.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(N.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(N=>({type:N.type,title:N.title,host:N.config.host})).filter(N=>C.allowedHosts.includes(N.host))}}async getTemplateParameterSchema(C){const{namespace:v,kind:N,name:Q}=(0,s.KU)(C,{defaultKind:"template"}),De=await this.discoveryApi.getBaseUrl("scaffolder"),Ee=[v,N,Q].map(J=>encodeURIComponent(J)).join("/"),X=`${De}/v2/templates/${Ee}/parameter-schema`,p=await this.fetchApi.fetch(X);if(!p.ok)throw await l.o3.fromResponse(p);return await p.json()}async scaffold(C){const{templateRef:v,values:N,secrets:Q={}}=C,De=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,Ee=await this.fetchApi.fetch(De,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:v,values:{...N},secrets:Q})});if(Ee.status!==201){const p=`${Ee.status} ${Ee.statusText}`,j=await Ee.text();throw new Error(`Backend request failed, ${p} ${j.trim()}`)}const{id:X}=await Ee.json();return{taskId:X}}async getTask(C){const N=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(C)}`,Q=await this.fetchApi.fetch(N);if(!Q.ok)throw await l.o3.fromResponse(Q);return await Q.json()}streamLogs(C){return this.useLongPollingLogs?this.streamLogsPolling(C):this.streamLogsEventStream(C)}async dryRun(C){const v=await this.discoveryApi.getBaseUrl("scaffolder"),N=await this.fetchApi.fetch(`${v}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:C.template,values:C.values,secrets:C.secrets,directoryContents:C.directoryContents})});if(!N.ok)throw await l.o3.fromResponse(N);return N.json()}streamLogsEventStream({taskId:C,after:v}){return new(r())(N=>{var Q;const De=new URLSearchParams;v!==void 0&&De.set("after",String(Number(v))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(Q=this.identityApi)==null?void 0:Q.getCredentials()]).then(([Ee,X])=>{const p=`${Ee}/v2/tasks/${encodeURIComponent(C)}/eventstream`,j=ue=>{if(ue.data)try{N.next(JSON.parse(ue.data))}catch(Te){N.error(Te)}},J=new q.EventSourcePolyfill(p,{withCredentials:!0,headers:X!=null&&X.token?{Authorization:`Bearer ${X.token}`}:{}});J.addEventListener("log",j),J.addEventListener("recovered",j),J.addEventListener("cancelled",j),J.addEventListener("completion",ue=>{j(ue),J.close(),N.complete()}),J.addEventListener("error",ue=>{N.error(ue)})},Ee=>{N.error(Ee)})})}streamLogsPolling({taskId:C,after:v}){let N=v;return new(r())(Q=>{this.discoveryApi.getBaseUrl("scaffolder").then(async De=>{for(;!Q.closed;){const Ee=`${De}/v2/tasks/${encodeURIComponent(C)}/events?${_().stringify({after:N})}`,X=await this.fetchApi.fetch(Ee);if(!X.ok){await new Promise(j=>setTimeout(j,1e3));continue}const p=await X.json();for(const j of p)if(N=Number(j.id),Q.next(j),j.type==="completion"){Q.complete();return}}})})}async listActions(){const C=await this.discoveryApi.getBaseUrl("scaffolder"),v=await this.fetchApi.fetch(`${C}/v2/actions`);if(!v.ok)throw await l.o3.fromResponse(v);return await v.json()}async cancelTask(C){const N=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(C)}/cancel`,Q=await this.fetchApi.fetch(N,{method:"POST"});if(!Q.ok)throw await l.o3.fromResponse(Q);return await Q.json()}}const G=(0,a.Il)({id:"register-component",optional:!0}),we=(0,a.Il)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Ce=(0,a.HM)({id:"scaffolder"});(0,a.Vb)({id:"scaffolder/legacy/selected-template",parent:Ce,path:"/templates/:templateName"});const ft=(0,a.Vb)({id:"scaffolder/selected-template",parent:Ce,path:"/templates/:namespace/:templateName"}),k=(0,a.Vb)({id:"scaffolder/task",parent:Ce,path:"/tasks/:taskId"}),ce=(0,a.Vb)({id:"scaffolder/list-tasks",parent:Ce,path:"/tasks"}),I=(0,a.Vb)({id:"scaffolder/actions",parent:Ce,path:"/actions"}),h=(0,a.Vb)({id:"scaffolder/edit",parent:Ce,path:"/edit"})},77587:(Dn,Ct,e)=>{"use strict";e.d(Ct,{Te:()=>k,r6:()=>N});var s=e(45516),l=e(33478),b=e(82279),_=e(77189),z=e(49661),r=e(11638),q=e(48821),ee=e(14041),a=e(56005),he=e.n(a),_e=e(44148),le=e(41260),ie=e(96403),G=e.n(ie),we=e(4237),Ce=e.n(we),ft=e(63177);const k=(0,r.i1)({id:"scaffolder",apis:[(0,r.bW)({api:b.s,deps:{discoveryApi:q.q,scmIntegrationsApi:l.YT,fetchApi:q.s,identityApi:q.t},factory:({discoveryApi:pt,scmIntegrationsApi:qe,fetchApi:st,identityApi:Oe})=>new s.S({discoveryApi:pt,scmIntegrationsApi:qe,fetchApi:st,identityApi:Oe})})],routes:{root:s.r,selectedTemplate:s.s,ongoingTask:s.a,actions:s.b,listTasks:s.c,edit:s.e},externalRoutes:{registerComponent:s.d,viewTechDoc:s.v}}),ce=k.provide((0,_.zD)({component:z.E,name:"EntityPicker",schema:z.a})),I=k.provide((0,_.zD)({component:z.b,name:"EntityNamePicker",validation:z.e,schema:z.c})),h=k.provide((0,_.zD)({component:z.M,name:"MultiEntityPicker",schema:z.d,validation:z.v})),M=k.provide((0,_.zD)({component:z.R,name:"RepoUrlPicker",validation:z.r,schema:z.f})),C=k.provide((0,_.zD)({component:z.O,name:"OwnerPicker",schema:z.g})),v=k.provide((0,_.zD)({component:z.h,name:"MyGroupsPicker",schema:z.i})),N=k.provide((0,r.QJ)({name:"ScaffolderPage",component:()=>e.e(7626).then(e.bind(e,97626)).then(pt=>pt.Router),mountPoint:s.r})),Q=k.provide((0,_.zD)({component:z.j,name:"OwnedEntityPicker",schema:z.k})),De=k.provide((0,_.zD)({component:z.l,name:"EntityTagsPicker",schema:z.m})),Ee=ee.createElement(le.A,{fontSize:"small"}),X=ee.createElement(_e.A,{fontSize:"small"}),p=()=>{const pt=useApi(alertApiRef),{error:qe,loading:st,availableTypes:Oe,selectedTypes:je,setSelectedTypes:$e}=useEntityTypeFilter();return st?React.createElement(Progress,null):Oe?qe?(pt.post({message:"Failed to load entity types",severity:"error"}),null):React.createElement(Box,{pb:1,pt:1},React.createElement(Typography,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),React.createElement(Autocomplete,{id:"categories-picker",multiple:!0,options:Oe,value:je,onChange:(vt,ht)=>$e(ht),renderOption:(vt,{selected:ht})=>React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{icon:Ee,checkedIcon:X,checked:ht}),label:capitalize(vt)}),size:"small",popupIcon:React.createElement(ExpandMoreIcon,{"data-testid":"categories-picker-expand"}),renderInput:vt=>React.createElement(TextField,{...vt,variant:"outlined"})})):null},j=null,J=null,ue=null,Te=null,dt=null,Ge=null,rt=null},4237:function(Dn,Ct){var e,s,l;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(b){"use strict";var _=b.setTimeout,z=b.clearTimeout,r=b.XMLHttpRequest,q=b.XDomainRequest,ee=b.ActiveXObject,a=b.EventSource,he=b.document,_e=b.Promise,le=b.fetch,ie=b.Response,G=b.TextDecoder,we=b.TextEncoder,Ce=b.AbortController;if(typeof window!="undefined"&&typeof he!="undefined"&&!("readyState"in he)&&he.body==null&&(he.readyState="loading",window.addEventListener("load",function(S){he.readyState="complete"},!1)),r==null&&ee!=null&&(r=function(){return new ee("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(S){function R(){}return R.prototype=S,new R}),Date.now||(Date.now=function(){return new Date().getTime()}),Ce==null){var ft=le;le=function(S,R){var W=R.signal;return ft(S,{headers:R.headers,credentials:R.credentials,cache:R.cache}).then(function(Z){var Pe=Z.body.getReader();return W._reader=Pe,W._aborted&&W._reader.cancel(),{status:Z.status,statusText:Z.statusText,headers:Z.headers,body:{getReader:function(){return Pe}}}})},Ce=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function k(){this.bitsNeeded=0,this.codePoint=0}k.prototype.decode=function(S){function R(Wt,tn,Ut){if(Ut===1)return Wt>=128>>tn&&Wt<<tn<=2047;if(Ut===2)return Wt>=2048>>tn&&Wt<<tn<=55295||Wt>=57344>>tn&&Wt<<tn<=65535;if(Ut===3)return Wt>=65536>>tn&&Wt<<tn<=1114111;throw new Error}function W(Wt,tn){if(Wt===6*1)return tn>>6>15?3:tn>31?2:1;if(Wt===6*2)return tn>15?3:2;if(Wt===6*3)return 3;throw new Error}for(var Z=65533,Pe="",Ue=this.bitsNeeded,lt=this.codePoint,et=0;et<S.length;et+=1){var Je=S[et];Ue!==0&&(Je<128||Je>191||!R(lt<<6|Je&63,Ue-6,W(Ue,lt)))&&(Ue=0,lt=Z,Pe+=String.fromCharCode(lt)),Ue===0?(Je>=0&&Je<=127?(Ue=0,lt=Je):Je>=192&&Je<=223?(Ue=6*1,lt=Je&31):Je>=224&&Je<=239?(Ue=6*2,lt=Je&15):Je>=240&&Je<=247?(Ue=6*3,lt=Je&7):(Ue=0,lt=Z),Ue!==0&&!R(lt,Ue,W(Ue,lt))&&(Ue=0,lt=Z)):(Ue-=6,lt=lt<<6|Je&63),Ue===0&&(lt<=65535?Pe+=String.fromCharCode(lt):(Pe+=String.fromCharCode(55296+(lt-65535-1>>10)),Pe+=String.fromCharCode(56320+(lt-65535-1&1023))))}return this.bitsNeeded=Ue,this.codePoint=lt,Pe};var ce=function(){try{return new G().decode(new we().encode("test"),{stream:!0})==="test"}catch(S){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+S)}return!1};(G==null||we==null||!ce())&&(G=k);var I=function(){};function h(S){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=I,this.onload=I,this.onerror=I,this.onreadystatechange=I,this._contentType="",this._xhr=S,this._sendTimeout=0,this._abort=I}h.prototype.open=function(S,R){this._abort(!0);var W=this,Z=this._xhr,Pe=1,Ue=0;this._abort=function(Ut){W._sendTimeout!==0&&(z(W._sendTimeout),W._sendTimeout=0),(Pe===1||Pe===2||Pe===3)&&(Pe=4,Z.onload=I,Z.onerror=I,Z.onabort=I,Z.onprogress=I,Z.onreadystatechange=I,Z.abort(),Ue!==0&&(z(Ue),Ue=0),Ut||(W.readyState=4,W.onabort(null),W.onreadystatechange())),Pe=0};var lt=function(){if(Pe===1){var Ut=0,mt="",Xt=void 0;if("contentType"in Z)Ut=200,mt="OK",Xt=Z.contentType;else try{Ut=Z.status,mt=Z.statusText,Xt=Z.getResponseHeader("Content-Type")}catch{Ut=0,mt="",Xt=void 0}Ut!==0&&(Pe=2,W.readyState=2,W.status=Ut,W.statusText=mt,W._contentType=Xt,W.onreadystatechange())}},et=function(){if(lt(),Pe===2||Pe===3){Pe=3;var Ut="";try{Ut=Z.responseText}catch{}W.readyState=3,W.responseText=Ut,W.onprogress()}},Je=function(Ut,mt){if((mt==null||mt.preventDefault==null)&&(mt={preventDefault:I}),et(),Pe===1||Pe===2||Pe===3){if(Pe=4,Ue!==0&&(z(Ue),Ue=0),W.readyState=4,Ut==="load")W.onload(mt);else if(Ut==="error")W.onerror(mt);else if(Ut==="abort")W.onabort(mt);else throw new TypeError;W.onreadystatechange()}},Wt=function(Ut){Z!=null&&(Z.readyState===4?(!("onload"in Z)||!("onerror"in Z)||!("onabort"in Z))&&Je(Z.responseText===""?"error":"load",Ut):Z.readyState===3?"onprogress"in Z||et():Z.readyState===2&&lt())},tn=function(){Ue=_(function(){tn()},500),Z.readyState===3&&et()};"onload"in Z&&(Z.onload=function(Ut){Je("load",Ut)}),"onerror"in Z&&(Z.onerror=function(Ut){Je("error",Ut)}),"onabort"in Z&&(Z.onabort=function(Ut){Je("abort",Ut)}),"onprogress"in Z&&(Z.onprogress=et),"onreadystatechange"in Z&&(Z.onreadystatechange=function(Ut){Wt(Ut)}),("contentType"in Z||!("ontimeout"in r.prototype))&&(R+=(R.indexOf("?")===-1?"?":"&")+"padding=true"),Z.open(S,R,!0),"readyState"in Z&&(Ue=_(function(){tn()},0))},h.prototype.abort=function(){this._abort(!1)},h.prototype.getResponseHeader=function(S){return this._contentType},h.prototype.setRequestHeader=function(S,R){var W=this._xhr;"setRequestHeader"in W&&W.setRequestHeader(S,R)},h.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},h.prototype.send=function(){if((!("ontimeout"in r.prototype)||!("sendAsBinary"in r.prototype)&&!("mozAnon"in r.prototype))&&he!=null&&he.readyState!=null&&he.readyState!=="complete"){var S=this;S._sendTimeout=_(function(){S._sendTimeout=0,S.send()},4);return}var R=this._xhr;"withCredentials"in R&&(R.withCredentials=this.withCredentials);try{R.send(void 0)}catch(W){throw W}};function M(S){return S.replace(/[A-Z]/g,function(R){return String.fromCharCode(R.charCodeAt(0)+32)})}function C(S){for(var R=Object.create(null),W=S.split(`\r
`),Z=0;Z<W.length;Z+=1){var Pe=W[Z],Ue=Pe.split(": "),lt=Ue.shift(),et=Ue.join(": ");R[M(lt)]=et}this._map=R}C.prototype.get=function(S){return this._map[M(S)]},r!=null&&r.HEADERS_RECEIVED==null&&(r.HEADERS_RECEIVED=2);function v(){}v.prototype.open=function(S,R,W,Z,Pe,Ue,lt){S.open("GET",Pe);var et=0;S.onprogress=function(){var Wt=S.responseText,tn=Wt.slice(et);et+=tn.length,W(tn)},S.onerror=function(Wt){Wt.preventDefault(),Z(new Error("NetworkError"))},S.onload=function(){Z(null)},S.onabort=function(){Z(null)},S.onreadystatechange=function(){if(S.readyState===r.HEADERS_RECEIVED){var Wt=S.status,tn=S.statusText,Ut=S.getResponseHeader("Content-Type"),mt=S.getAllResponseHeaders();R(Wt,tn,Ut,new C(mt))}},S.withCredentials=Ue;for(var Je in lt)Object.prototype.hasOwnProperty.call(lt,Je)&&S.setRequestHeader(Je,lt[Je]);return S.send(),S};function N(S){this._headers=S}N.prototype.get=function(S){return this._headers.get(S)};function Q(){}Q.prototype.open=function(S,R,W,Z,Pe,Ue,lt){var et=null,Je=new Ce,Wt=Je.signal,tn=new G;return le(Pe,{headers:lt,credentials:Ue?"include":"same-origin",signal:Wt,cache:"no-store"}).then(function(Ut){return et=Ut.body.getReader(),R(Ut.status,Ut.statusText,Ut.headers.get("Content-Type"),new N(Ut.headers)),new _e(function(mt,Xt){var on=function(){et.read().then(function(ln){if(ln.done)mt(void 0);else{var qt=tn.decode(ln.value,{stream:!0});W(qt),on()}}).catch(function(ln){Xt(ln)})};on()})}).catch(function(Ut){if(Ut.name!=="AbortError")return Ut}).then(function(Ut){Z(Ut)}),{abort:function(){et!=null&&et.cancel(),Je.abort()}}};function De(){this._listeners=Object.create(null)}function Ee(S){_(function(){throw S},0)}De.prototype.dispatchEvent=function(S){S.target=this;var R=this._listeners[S.type];if(R!=null)for(var W=R.length,Z=0;Z<W;Z+=1){var Pe=R[Z];try{typeof Pe.handleEvent=="function"?Pe.handleEvent(S):Pe.call(this,S)}catch(Ue){Ee(Ue)}}},De.prototype.addEventListener=function(S,R){S=String(S);var W=this._listeners,Z=W[S];Z==null&&(Z=[],W[S]=Z);for(var Pe=!1,Ue=0;Ue<Z.length;Ue+=1)Z[Ue]===R&&(Pe=!0);Pe||Z.push(R)},De.prototype.removeEventListener=function(S,R){S=String(S);var W=this._listeners,Z=W[S];if(Z!=null){for(var Pe=[],Ue=0;Ue<Z.length;Ue+=1)Z[Ue]!==R&&Pe.push(Z[Ue]);Pe.length===0?delete W[S]:W[S]=Pe}};function X(S){this.type=S,this.target=void 0}function p(S,R){X.call(this,S),this.data=R.data,this.lastEventId=R.lastEventId}p.prototype=Object.create(X.prototype);function j(S,R){X.call(this,S),this.status=R.status,this.statusText=R.statusText,this.headers=R.headers}j.prototype=Object.create(X.prototype);function J(S,R){X.call(this,S),this.error=R.error}J.prototype=Object.create(X.prototype);var ue=-1,Te=0,dt=1,Ge=2,rt=-1,pt=0,qe=1,st=2,Oe=3,je=/^text\/event\-stream(;.*)?$/i,$e=1e3,vt=18e6,ht=function(S,R){var W=S==null?R:parseInt(S,10);return W!==W&&(W=R),Ft(W)},Ft=function(S){return Math.min(Math.max(S,$e),vt)},me=function(S,R,W){try{typeof R=="function"&&R.call(S,W)}catch(Z){Ee(Z)}};function ke(S,R){De.call(this),R=R||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,yt(this,S,R)}function bt(){return r!=null&&"withCredentials"in r.prototype||q==null?new r:new q}var Yt=le!=null&&ie!=null&&"body"in ie.prototype;function yt(S,R,W){R=String(R);var Z=!!W.withCredentials,Pe=W.lastEventIdQueryParameterName||"lastEventId",Ue=Ft(1e3),lt=ht(W.heartbeatTimeout,45e3),et="",Je=Ue,Wt=!1,tn=0,Ut=W.headers||{},mt=W.Transport,Xt=Yt&&mt==null?void 0:new h(mt!=null?new mt:bt()),on=mt!=null&&typeof mt!="string"?new mt:Xt==null?new Q:new v,ln=void 0,qt=0,ve=ue,Qe="",Kt="",Vt="",zt="",Bt=pt,Ln=0,mn=0,nn=function(ot,Ze,V,de){if(ve===Te)if(ot===200&&V!=null&&je.test(V)){ve=dt,Wt=Date.now(),Je=Ue,S.readyState=dt;var ge=new j("open",{status:ot,statusText:Ze,headers:de});S.dispatchEvent(ge),me(S,S.onopen,ge)}else{var Pt="";ot!==200?(Ze&&(Ze=Ze.replace(/\s+/g," ")),Pt="EventSource's response has a status "+ot+" "+Ze+" that is not 200. Aborting the connection."):Pt="EventSource's response has a Content-Type specifying an unsupported type: "+(V==null?"-":V.replace(/\s+/g," "))+". Aborting the connection.",gt();var ge=new j("error",{status:ot,statusText:Ze,headers:de});S.dispatchEvent(ge),me(S,S.onerror,ge),console.error(Pt)}},On=function(ot){if(ve===dt){for(var Ze=-1,V=0;V<ot.length;V+=1){var de=ot.charCodeAt(V);(de===10||de===13)&&(Ze=V)}var ge=(Ze!==-1?zt:"")+ot.slice(0,Ze+1);zt=(Ze===-1?zt:"")+ot.slice(Ze+1),ot!==""&&(Wt=Date.now(),tn+=ot.length);for(var Pt=0;Pt<ge.length;Pt+=1){var de=ge.charCodeAt(Pt);if(Bt===rt&&de===10)Bt=pt;else if(Bt===rt&&(Bt=pt),de===13||de===10){if(Bt!==pt){Bt===qe&&(mn=Pt+1);var xt=ge.slice(Ln,mn-1),cn=ge.slice(mn+(mn<Pt&&ge.charCodeAt(mn)===32?1:0),Pt);xt==="data"?(Qe+=`
`,Qe+=cn):xt==="id"?Kt=cn:xt==="event"?Vt=cn:xt==="retry"?(Ue=ht(cn,Ue),Je=Ue):xt==="heartbeatTimeout"&&(lt=ht(cn,lt),qt!==0&&(z(qt),qt=_(function(){Tt()},lt)))}if(Bt===pt){if(Qe!==""){et=Kt,Vt===""&&(Vt="message");var An=new p(Vt,{data:Qe.slice(1),lastEventId:Kt});if(S.dispatchEvent(An),Vt==="open"?me(S,S.onopen,An):Vt==="message"?me(S,S.onmessage,An):Vt==="error"&&me(S,S.onerror,An),ve===Ge)return}Qe="",Vt=""}Bt=de===13?rt:pt}else Bt===pt&&(Ln=Pt,Bt=qe),Bt===qe?de===58&&(mn=Pt+1,Bt=st):Bt===st&&(Bt=Oe)}}},nt=function(ot){if(ve===dt||ve===Te){ve=ue,qt!==0&&(z(qt),qt=0),qt=_(function(){Tt()},Je),Je=Ft(Math.min(Ue*16,Je*2)),S.readyState=Te;var Ze=new J("error",{error:ot});S.dispatchEvent(Ze),me(S,S.onerror,Ze),ot!=null&&console.error(ot)}},gt=function(){ve=Ge,ln!=null&&(ln.abort(),ln=void 0),qt!==0&&(z(qt),qt=0),S.readyState=Ge},Tt=function(){if(qt=0,ve!==ue){if(!Wt&&ln!=null)nt(new Error("No activity within "+lt+" milliseconds. "+(ve===Te?"No response received.":tn+" chars received.")+" Reconnecting.")),ln!=null&&(ln.abort(),ln=void 0);else{var ot=Math.max((Wt||Date.now())+lt-Date.now(),1);Wt=!1,qt=_(function(){Tt()},ot)}return}Wt=!1,tn=0,qt=_(function(){Tt()},lt),ve=Te,Qe="",Vt="",Kt=et,zt="",Ln=0,mn=0,Bt=pt;var Ze=R;if(R.slice(0,5)!=="data:"&&R.slice(0,5)!=="blob:"&&et!==""){var V=R.indexOf("?");Ze=V===-1?R:R.slice(0,V+1)+R.slice(V+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(cn,An){return An===Pe?"":cn}),Ze+=(R.indexOf("?")===-1?"?":"&")+Pe+"="+encodeURIComponent(et)}var de=S.withCredentials,ge={};ge.Accept="text/event-stream";var Pt=S.headers;if(Pt!=null)for(var xt in Pt)Object.prototype.hasOwnProperty.call(Pt,xt)&&(ge[xt]=Pt[xt]);try{ln=on.open(Xt,nn,On,nt,Ze,de,ge)}catch(cn){throw gt(),cn}};S.url=R,S.readyState=Te,S.withCredentials=Z,S.headers=Ut,S._close=gt,Tt()}ke.prototype=Object.create(De.prototype),ke.prototype.CONNECTING=Te,ke.prototype.OPEN=dt,ke.prototype.CLOSED=Ge,ke.prototype.close=function(){this._close()},ke.CONNECTING=Te,ke.OPEN=dt,ke.CLOSED=Ge,ke.prototype.withCredentials=void 0;var _t=a;r!=null&&(a==null||!("withCredentials"in a.prototype))&&(_t=ke),function(S){if(typeof Dn.exports=="object"){var R=S(Ct);R!==void 0&&(Dn.exports=R)}else s=[Ct],e=S,l=typeof e=="function"?e.apply(Ct,s):e,l!==void 0&&(Dn.exports=l)}(function(S){S.EventSourcePolyfill=ke,S.NativeEventSource=a,S.EventSource=_t})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},70735:(Dn,Ct,e)=>{"use strict";e.d(Ct,{S:()=>I,b:()=>le,c:()=>k});var s=e(14041),l=e(11638),b=e(58837),_=e(46423),z=e(5951),r=e(77125),q=e(8109),ee=e(58007),a=e(72501),he=e(22968);const _e=(0,b.A)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),le=h=>{const{text:M,preTag:C,postTag:v}=h,N=_e(),Q=(0,s.useMemo)(()=>M.split(new RegExp(`(${C}.+?${v})`)),[v,C,M]);return s.createElement(s.Fragment,null,Q.map((De,Ee)=>De.includes(C)?s.createElement("mark",{className:N.highlight,key:Ee},De.replace(new RegExp(`${C}|${v}`,"g"),"")):De))},ie=({result:h,highlight:M,icon:C,secondaryAction:v,lineClamp:N=5})=>h?s.createElement(s.Fragment,null,C&&s.createElement(_.A,null,C),s.createElement(z.A,{primaryTypographyProps:{variant:"h6"},primary:s.createElement(he.N_,{noTrack:!0,to:h.location},M!=null&&M.fields.title?s.createElement(le,{text:(M==null?void 0:M.fields.title)||"",preTag:(M==null?void 0:M.preTag)||"",postTag:(M==null?void 0:M.postTag)||""}):h.title),secondary:s.createElement(a.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:N,overflow:"hidden"},color:"textSecondary",variant:"body2"},M!=null&&M.fields.text?s.createElement(le,{text:M.fields.text,preTag:M.preTag,postTag:M.postTag}):h.text)}),v&&s.createElement(r.A,{alignItems:"flex-end"},v)):null,G=h=>s.createElement(l.Ig,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},s.createElement(ie,{...h})),we="search.results.list.items.extensions.v1",Ce=(h,M)=>{for(const C of h){if(!(0,s.isValidElement)(C))continue;const v=(0,l.E0)(C,we);if(v!=null&&v(M))return(0,s.cloneElement)(C,{rank:M.rank,highlight:M.highlight,result:M.document,...C.props})}return null},ft=h=>{const{rank:M,result:C,noTrack:v,children:N,alignItems:Q="flex-start",...De}=h,Ee=(0,l.st)(),X=(0,s.useCallback)(()=>{v||C&&Ee.captureEvent("discover",C.title,{attributes:{to:C.location},value:M})},[M,C,v,Ee]);return s.createElement(q.A,{divider:!0,alignItems:Q,onClickCapture:X,...De},N)},k=h=>{const{name:M,component:C,predicate:v=()=>!0}=h;return(0,l.zZ)({name:M,component:{lazy:()=>C().then(N=>Q=>s.createElement(ft,{rank:Q.rank,result:Q.result,noTrack:Q.noTrack},(0,s.createElement)(N,Q)))},data:{[we]:v}})},ce=h=>{const M=(0,l.OJ)(h,C=>C.selectByComponentData({key:we}).getElements(),[h]);return(0,s.useCallback)((C,v)=>{const N=Ce(M,C);return s.createElement(s.Fragment,{key:v},N!=null?N:s.createElement(ft,{rank:C.rank,result:C.document},s.createElement(G,{rank:C.rank,highlight:C.highlight,result:C.document})))},[M])},I=h=>{const{results:M,children:C,...v}=h,N=ce(C);return s.createElement(ee.A,{...v},M.map(N))}},13270:(Dn,Ct,e)=>{"use strict";e.d(Ct,{$6:()=>Pe,IW:()=>ht,Lt:()=>je,SQ:()=>rt,Z5:()=>On,Zf:()=>vt,nJ:()=>Je,pY:()=>bt,q0:()=>Xt,yY:()=>Te});var s=e(48821),l=e(11638),b=e(70735),_=e(34839),z=e(29365),r=e(16249),q=e(58837),ee=e(78467),a=e(67720),he=e(95061),_e=e(91761),le=e(86901),ie=e(69076),G=e(48543),we=e(81215),Ce=e(26343),ft=e(72501),k=e(60083),ce=e(64947),I=e(45917),h=e(14041),M=e(22771),C=e(45250),v=e.n(C),N=e(73466),Q=e(5877),De=e(97388),Ee=e(20577),X=e(87290),p=e(22968),j=e(21098),J=e(22982),ue=e(1048).Buffer;const Te=(0,s.c)({id:"plugin.search.queryservice"});class dt{constructor(gt){this.mockedResults=gt}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const Ge=(0,De.tK)("search-context"),rt=()=>{const nt=(0,h.useContext)(Ge);if(!nt)throw new Error("useSearch must be used within a SearchContextProvider");const gt=nt.atVersion(1);if(!gt)throw new Error("No SearchContext v1 found");return gt},pt=()=>(0,h.useContext)(Ge)!==void 0,qe={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},st=(nt=qe)=>{var gt,Tt,ot,Ze;const V=(0,s.u)(Te),de=(0,l.st)(),[ge,Pt]=(0,h.useState)(nt.term),[xt,cn]=(0,h.useState)(nt.types),[An,Bn]=(0,h.useState)(nt.filters),[$n,kn]=(0,h.useState)(nt.pageLimit),[bn,jn]=(0,h.useState)(nt.pageCursor),ra=(0,Q.A)(ge),ct=(0,Q.A)(An),m=(0,N.A)(async()=>{var Y,Se;const Re=await V.query({term:ge,types:xt,filters:An,pageLimit:$n,pageCursor:bn});return ge&&de.captureEvent("search",ge,{value:(Se=(Y=m.value)==null?void 0:Y.numberOfResults)!=null?Se:void 0}),Re},[ge,xt,An,$n,bn]),w=!m.loading&&!m.error&&((gt=m.value)==null?void 0:gt.nextPageCursor),K=!m.loading&&!m.error&&((Tt=m.value)==null?void 0:Tt.previousPageCursor),re=(0,h.useCallback)(()=>{var Y;jn((Y=m.value)==null?void 0:Y.nextPageCursor)},[(ot=m.value)==null?void 0:ot.nextPageCursor]),D=(0,h.useCallback)(()=>{var Y;jn((Y=m.value)==null?void 0:Y.previousPageCursor)},[(Ze=m.value)==null?void 0:Ze.previousPageCursor]);return(0,h.useEffect)(()=>{ra!==void 0&&ge!==ra&&jn(void 0)},[ge,ra,jn]),(0,h.useEffect)(()=>{ct!==void 0&&!(0,C.isEqual)(An,ct)&&jn(void 0)},[An,ct,jn]),{result:m,term:ge,setTerm:Pt,types:xt,setTypes:cn,filters:An,setFilters:Bn,pageLimit:$n,setPageLimit:kn,pageCursor:bn,setPageCursor:jn,fetchNextPage:w?re:void 0,fetchPreviousPage:K?D:void 0}},Oe=nt=>{const{initialState:gt,children:Tt}=nt,ot=st(gt);return h.createElement(l.Ig,{attributes:{searchTypes:ot.types.sort().join(",")}},h.createElement(Ge.Provider,{value:(0,De.Bl)({1:ot})},Tt))},je=nt=>{const{initialState:gt,inheritParentContextIfAvailable:Tt,children:ot}=nt,Ze=pt(),V=(0,s.u)(s.p),de=gt!=null?gt:{},ge=V.has("search.query.pageLimit")?{pageLimit:V.getNumber("search.query.pageLimit")}:{},Pt={...qe,...de,...ge};return Ze&&Tt?h.createElement(h.Fragment,null,ot):h.createElement(Oe,{initialState:Pt},ot)};function $e(nt){return(0,h.forwardRef)((gt,Tt)=>h.createElement(je,{inheritParentContextIfAvailable:!0},h.createElement(nt,{...gt,ref:Tt})))}const vt=$e((0,h.forwardRef)((nt,gt)=>{const{onChange:Tt,onKeyDown:ot=()=>{},onClear:Ze=()=>{},onSubmit:V=()=>{},debounceTime:de=200,clearButton:ge=!0,fullWidth:Pt=!0,value:xt,label:cn,placeholder:An,inputProps:Bn={},InputProps:$n={},endAdornment:kn,...bn}=nt,jn=(0,s.u)(s.p),[ra,ct]=(0,h.useState)(""),m=(0,h.useRef)("");(0,h.useEffect)(()=>{ct(Re=>Re===m.current?String(xt):Re)},[xt,m]),(0,M.A)(()=>{m.current=ra,Tt(ra)},de,[ra]);const w=(0,h.useCallback)(Re=>{ct(Re.target.value)},[ct]),K=(0,h.useCallback)(Re=>{ot&&ot(Re),V&&Re.key==="Enter"&&V()},[ot,V]),re=(0,h.useCallback)(()=>{m.current="",Tt(""),ct(""),Ze&&Ze()},[Tt,Ze]),D=cn?void 0:"Search",U=An!=null?An:`Search in ${jn.getOptionalString("app.title")||"Backstage"}`,Y=h.createElement(_.A,{position:"start"},h.createElement(z.A,{"aria-label":"Query",size:"small",disabled:!0},h.createElement(I.A,null))),Se=h.createElement(_.A,{position:"end"},h.createElement(ce.A,{"aria-label":"Clear",size:"small",onClick:re,onKeyDown:Re=>{Re.key==="Enter"&&Re.stopPropagation()}},"Clear"));return h.createElement(r.A,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:gt,value:ra,label:cn,placeholder:U,InputProps:{startAdornment:Y,endAdornment:ge?Se:kn,...$n},inputProps:{"aria-label":D,...Bn},fullWidth:Pt,onChange:w,onKeyDown:K,...bn})})),ht=$e((0,h.forwardRef)((nt,gt)=>{const{value:Tt="",onChange:ot,...Ze}=nt,{term:V,setTerm:de}=rt();(0,h.useEffect)(()=>{Tt&&de(String(Tt))},[Tt,de]);const ge=(0,h.useCallback)(Pt=>{ot?ot(Pt):de(Pt)},[ot,de]);return h.createElement(l.Ig,{attributes:{pluginId:"search",extension:"SearchBar"}},h.createElement(vt,{...Ze,ref:gt,value:V,onChange:ge}))})),Ft=(0,q.A)(nt=>({loading:{right:nt.spacing(1),position:"absolute"}})),me=nt=>gt=>h.createElement(je,{inheritParentContextIfAvailable:!0},h.createElement(nt,{...gt})),ke=()=>{const nt=Ft();return h.createElement(ee.A,{className:nt.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},bt=me(function(gt){const{loading:Tt,value:ot,onChange:Ze=()=>{},options:V=[],getOptionLabel:de=m=>String(m),inputPlaceholder:ge,inputDebounceTime:Pt,freeSolo:xt=!0,fullWidth:cn=!0,clearOnBlur:An=!1,"data-testid":Bn="search-autocomplete",...$n}=gt,{setTerm:kn}=rt(),bn=(0,h.useCallback)(m=>m?typeof m=="string"?m:de(m):"",[de]),jn=(0,h.useMemo)(()=>bn(ot),[ot,bn]),ra=(0,h.useCallback)((m,w,K,re)=>{kn(bn(w)),Ze(m,w,K,re)},[bn,kn,Ze]),ct=(0,h.useCallback)(({InputProps:{ref:m,className:w,endAdornment:K},InputLabelProps:re,...D})=>h.createElement(ht,{...D,ref:m,clearButton:!1,value:jn,placeholder:ge,debounceTime:Pt,endAdornment:Tt?h.createElement(ke,null):K,InputProps:{className:w}}),[Tt,jn,ge,Pt]);return h.createElement(Ee.Ay,{...$n,"data-testid":Bn,value:ot,onChange:ra,options:V,getOptionLabel:de,renderInput:ct,freeSolo:xt,fullWidth:cn,clearOnBlur:An})}),Yt=nt=>{const{icon:gt,primaryText:Tt,primaryTextTypographyProps:ot,secondaryText:Ze,secondaryTextTypographyProps:V,disableTextTypography:de}=nt;return React.createElement(React.Fragment,null,gt?React.createElement(ListItemIcon,null,gt):null,React.createElement(ListItemText,{primary:Tt,primaryTypographyProps:ot,secondary:Ze,secondaryTypographyProps:V,disableTypography:de}))},yt=(nt,gt,Tt=[],ot=250)=>{const Ze=(0,h.useRef)({}),V=nt||(()=>Promise.resolve([])),[de,ge]=(0,X.A)(V,[gt],{loading:!0});if((0,M.A)(()=>{Ze.current[gt]===void 0&&(Ze.current[gt]=ge(gt).then(xt=>(Ze.current[gt]=xt,xt)))},ot,[ge,gt]),Tt.length)return{loading:!1,value:Tt};const Pt=Ze.current[gt];return Array.isArray(Pt)?{loading:!1,value:Pt}:de},_t=(nt,gt)=>{const{setFilters:Tt}=rt();(0,h.useEffect)(()=>{gt&&[gt].flat().length>0&&Tt(ot=>({...ot,[nt]:gt}))},[])},S=nt=>{const{className:gt,defaultValue:Tt,name:ot,values:Ze,valuesDebounceMs:V,label:de,filterSelectedOptions:ge,limitTags:Pt,multiple:xt}=nt,[cn,An]=(0,h.useState)("");_t(ot,Tt);const Bn=typeof Ze=="function"?Ze:void 0,$n=typeof Ze=="function"?void 0:Ze,{value:kn,loading:bn}=yt(Bn,cn,$n,V),{filters:jn,setFilters:ra}=rt(),ct=jn[ot]||(xt?[]:null),m=(re,D)=>{ra(U=>{const{[ot]:Y,...Se}=U;return D?{...Se,[ot]:D}:{...Se}})},w=re=>h.createElement(r.A,{...re,name:"search",variant:"outlined",label:de,fullWidth:!0}),K=(re,D)=>re.map((U,Y)=>h.createElement(a.A,{label:U,color:"primary",...D({index:Y})}));return h.createElement(Ee.Ay,{filterSelectedOptions:ge,limitTags:Pt,multiple:xt,className:gt,id:`${xt?"multi-":""}select-filter-${ot}--select`,options:kn||[],loading:bn,value:ct,onChange:m,onInputChange:(re,D)=>An(D),renderInput:w,renderTags:K})},R=(0,q.A)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),W=nt=>{const{className:gt,defaultValue:Tt,label:ot,name:Ze,values:V=[],valuesDebounceMs:de}=nt,ge=R(),{filters:Pt,setFilters:xt}=rt();_t(Ze,Tt);const cn=typeof V=="function"?V:void 0,An=typeof V=="function"?void 0:V,{value:Bn=[],loading:$n}=yt(cn,"",An,de),kn=bn=>{const{target:{value:jn,checked:ra}}=bn;xt(ct=>{const{[Ze]:m,...w}=ct,K=(m||[]).filter(D=>D!==jn),re=ra?[...K,jn]:K;return re.length?{...w,[Ze]:re}:w})};return h.createElement(he.A,{className:gt,disabled:$n,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},ot?h.createElement(_e.A,{className:ge.label},ot):null,Bn.map(bn=>{var jn;return h.createElement(le.A,{key:bn,classes:{root:ge.checkboxWrapper,label:ge.textWrapper},label:bn,control:h.createElement(ie.A,{color:"primary",inputProps:{"aria-labelledby":bn},value:bn,name:bn,onChange:kn,checked:((jn=Pt[Ze])!=null?jn:[]).includes(bn)})})}))},Z=nt=>{const{className:gt,defaultValue:Tt,label:ot,name:Ze,values:V,valuesDebounceMs:de}=nt,ge=R();_t(Ze,Tt);const Pt=typeof V=="function"?V:void 0,xt=typeof V=="function"?void 0:V,{value:cn=[],loading:An}=yt(Pt,"",xt,de),{filters:Bn,setFilters:$n}=rt(),kn=bn=>{const{target:{value:jn}}=bn;$n(ra=>{const{[Ze]:ct,...m}=ra;return jn?{...m,[Ze]:jn}:m})};return h.createElement(he.A,{disabled:An,className:gt,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},ot?h.createElement(G.A,{className:ge.label,margin:"dense"},ot):null,h.createElement(we.A,{variant:"outlined",value:Bn[Ze]||"",onChange:kn},h.createElement(Ce.A,{value:""},h.createElement("em",null,"All")),cn.map(bn=>h.createElement(Ce.A,{key:bn,value:bn},h.createElement(ft.A,{variant:"inherit",noWrap:!0},bn)))))},Pe=nt=>{const{component:gt,...Tt}=nt;return h.createElement(gt,{...Tt})};Pe.Checkbox=nt=>h.createElement(Pe,{...nt,component:W}),Pe.Select=nt=>h.createElement(Pe,{...nt,component:Z}),Pe.Autocomplete=nt=>h.createElement(Pe,{...nt,component:S});const Ue=nt=>ue.from(nt.toString(),"utf-8").toString("base64"),lt=nt=>nt?Number(ue.from(nt,"base64").toString("utf-8")):0,et=nt=>{const{total:gt=-1,cursor:Tt,hasNextPage:ot,onCursorChange:Ze,limit:V=25,limitLabel:de="Results per page:",limitText:ge=({from:kn,to:bn})=>gt>0?`of ${gt}`:`${kn}-${bn}`,limitOptions:Pt,onLimitChange:xt,...cn}=nt,An=(0,h.useMemo)(()=>lt(Tt),[Tt]),Bn=(0,h.useCallback)((kn,bn)=>{Ze==null||Ze(Ue(bn))},[Ze]),$n=(0,h.useCallback)(kn=>{const bn=kn.target.value;xt==null||xt(parseInt(bn,10))},[xt]);return h.createElement(k.A,{...cn,component:"div",count:gt,page:An,nextIconButtonProps:{...ot!==void 0&&{disabled:!ot}},onPageChange:Bn,rowsPerPage:V,labelRowsPerPage:de,labelDisplayedRows:ge,rowsPerPageOptions:Pt,onRowsPerPageChange:$n})},Je=nt=>{const{pageLimit:gt,setPageLimit:Tt,pageCursor:ot,setPageCursor:Ze,fetchNextPage:V}=rt(),de=(0,h.useCallback)(ge=>{Tt(ge),Ze(void 0)},[Tt,Ze]);return h.createElement(et,{...nt,hasNextPage:!!V,limit:gt,onLimitChange:de,cursor:ot,onCursorChange:Ze})},Wt=nt=>{const{children:gt}=nt,Tt=rt(),{result:ot,...Ze}=Tt;return gt(ot,Ze)},tn=nt=>{const{query:gt,children:Tt}=nt,ot=(0,s.u)(Te),Ze=(0,N.A)(()=>{const{term:V="",types:de=[],filters:ge={},...Pt}=gt;return ot.query({...Pt,term:V,types:de,filters:ge})},[gt]);return Tt(Ze,gt)},Ut=nt=>{const{query:gt,children:Tt}=nt;return gt?h.createElement(tn,{query:gt},Tt):h.createElement(Wt,null,Tt)},mt=nt=>{const{query:gt,children:Tt,noResultsComponent:ot=h.createElement(p.pp,{missing:"data",title:"Sorry, no results were found"}),...Ze}=nt;return h.createElement(Ut,{query:gt},({loading:V,error:de,value:ge})=>V?h.createElement(p.ke,null):de?h.createElement(p._1,{title:"Error encountered while fetching search results",error:de}):ge!=null&&ge.results.length?(0,C.isFunction)(Tt)?Tt(ge):h.createElement(b.S,{...Ze,results:ge.results},Tt):ot)},Xt=nt=>h.createElement(l.Ig,{attributes:{pluginId:"search",extension:"SearchResult"}},h.createElement(mt,{...nt})),on=nt=>{const{error:gt,loading:Tt,resultItems:ot,renderResultItem:Ze=Pt=>React.createElement(HigherOrderDefaultResultListItem,{key:Pt.document.location,result:Pt.document}),disableRenderingWithNoResults:V,noResultsComponent:de=V?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...ge}=nt;return Tt?React.createElement(Progress,null):gt?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:gt}):ot!=null&&ot.length?React.createElement(List,{...ge},ot.map(Ze)):React.createElement(React.Fragment,null,de)},ln=nt=>{const{query:gt,renderResultItem:Tt,children:ot,...Ze}=nt,V=useSearchResultListItemExtensions(ot);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(Ut,{query:gt},({loading:de,error:ge,value:Pt})=>React.createElement(on,{...Ze,error:ge,loading:de,resultItems:Pt==null?void 0:Pt.results,renderResultItem:Tt!=null?Tt:V})))},qt=(0,q.A)(nt=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:nt.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:nt.palette.text.secondary,margin:nt.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:nt.palette.text.secondary,margin:nt.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:nt.spacing(.5)}})),ve=nt=>{const gt=qt(),{label:Tt,children:ot,...Ze}=nt;return React.createElement(Chip,{...Ze,className:gt.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,Tt,": ",ot)})},Qe=()=>null,Kt=(0,q.A)(nt=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:nt.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:nt.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),Vt=nt=>{const gt=Kt(),{label:Tt,value:ot="None",onChange:Ze,onDelete:V}=nt,de=useCallback(ge=>{Ze(ge.target.value)},[Ze]);return React.createElement(ve,{label:Tt,onDelete:V},React.createElement(Typography,{role:"textbox",component:"span",className:gt.root,onChange:de,contentEditable:!0,suppressContentEditableWarning:!0},ot==null?void 0:ot.toString()))},zt=(0,q.A)(nt=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:nt.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),Bt=nt=>{const gt=zt(),{label:Tt,value:ot="none",onChange:Ze,onDelete:V,children:de}=nt,ge=useCallback(Pt=>{Ze(Pt.target.value)},[Ze]);return React.createElement(ve,{label:Tt,onDelete:V},React.createElement(Select,{className:gt.root,value:ot,onChange:ge,input:React.createElement(InputBase,null),IconComponent:Qe},React.createElement(MenuItem,{value:"none"},"None"),de))};function Ln(nt){const gt=qt(),[Tt,ot]=useState(null),{error:Ze,loading:V,icon:de,title:ge,titleProps:Pt={},link:xt=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:gt.listSubheaderLinkIcon})),linkProps:cn={},filterOptions:An,renderFilterOption:Bn=re=>React.createElement(MenuItem,{key:String(re),value:String(re)},String(re)),filterFields:$n,renderFilterField:kn,resultItems:bn,renderResultItem:jn=re=>React.createElement(HigherOrderDefaultResultListItem,{key:re.document.location,result:re.document}),disableRenderingWithNoResults:ra,noResultsComponent:ct=ra?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...m}=nt,w=useCallback(re=>{ot(re.currentTarget)},[]),K=useCallback(()=>{ot(null)},[]);return V?React.createElement(Progress,null):Ze?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:Ze}):bn!=null&&bn.length?React.createElement(List,{...m},React.createElement(ListSubheader,{className:gt.listSubheader},de,React.createElement(Typography,{className:gt.listSubheaderName,component:"strong",...Pt},ge),An?React.createElement(Chip,{className:gt.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:w}):null,An?React.createElement(Menu,{id:"filters-menu",anchorEl:Tt,open:!!Tt,onClose:K,onClick:K,keepMounted:!0},An.map(Bn)):null,$n==null?void 0:$n.map(re=>{var D;return(D=kn==null?void 0:kn(re))!=null?D:null}),React.createElement(Link,{className:gt.listSubheaderLink,to:"/search",...cn},xt)),bn.map(jn)):React.createElement(React.Fragment,null,ct)}function mn(nt){const{query:gt,children:Tt,renderResultItem:ot,linkProps:Ze={},...V}=nt,de=useSearchResultListItemExtensions(Tt);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(Ut,{query:gt},({loading:ge,error:Pt,value:xt},{term:cn,types:An,pageCursor:Bn,filters:$n={}})=>{const kn=`/search?${qs.stringify({term:cn,types:An,filters:$n,pageCursor:Bn,query:cn},{arrayFormat:"brackets"})}`;return React.createElement(Ln,{...V,error:Pt,loading:ge,linkProps:{to:kn,...Ze},filterFields:Object.keys($n),resultItems:xt==null?void 0:xt.results,renderResultItem:ot!=null?ot:de})}))}const nn=(0,q.A)(nt=>({root:{display:"flex",justifyContent:"space-between",gap:nt.spacing(2),margin:nt.spacing(2,0)}})),On=()=>{const{fetchNextPage:nt,fetchPreviousPage:gt}=rt(),Tt=nn();return!nt&&!gt?h.createElement(h.Fragment,null):h.createElement("nav",{"aria-label":"pagination navigation",className:Tt.root},h.createElement(ce.A,{"aria-label":"previous page",disabled:!gt,onClick:gt,startIcon:h.createElement(J.A,null)},"Previous"),h.createElement(ce.A,{"aria-label":"next page",disabled:!nt,onClick:nt,endIcon:h.createElement(j.A,null)},"Next"))}},2788:(Dn,Ct,e)=>{"use strict";e.d(Ct,{S:()=>vt,a:()=>Yt,b:()=>st,c:()=>Oe,r:()=>pt});var s=e(3399),l=e(45810),b=e.n(l),_=e(13270),z=e(11638),r=e(48821),q=e(14041),ee=e(5877),a=e(18690),he=e(69076),_e=e(67720),le=e(95061),ie=e(48543),G=e(5951),we=e(26343),Ce=e(81215),ft=e(58837),k=e(8380),ce=e(8973),I=e(29655),h=e(91567),M=e(40703),C=e(48653),v=e(45685),N=e(37197),Q=e(58007),De=e(8109),Ee=e(46423),X=e(6924),p=e(53364),j=e(73466),J=e(38605),ue=e(31653),Te=Object.defineProperty,dt=(yt,_t,S)=>_t in yt?Te(yt,_t,{enumerable:!0,configurable:!0,writable:!0,value:S}):yt[_t]=S,Ge=(yt,_t,S)=>(dt(yt,typeof _t!="symbol"?_t+"":_t,S),S);class rt{constructor(_t){Ge(this,"discoveryApi"),Ge(this,"identityApi"),this.discoveryApi=_t.discoveryApi,this.identityApi=_t.identityApi}async query(_t){const{token:S}=await this.identityApi.getCredentials(),R=b().stringify(_t),W=`${await this.discoveryApi.getBaseUrl("search")}/query?${R}`,Z=await fetch(W,{headers:S?{Authorization:`Bearer ${S}`}:{}});if(!Z.ok)throw await s.o3.fromResponse(Z);return Z.json()}}const pt=(0,z.HM)({id:"search"}),qe=(0,z.i1)({id:"search",apis:[(0,z.bW)({api:_.yY,deps:{discoveryApi:r.q,identityApi:r.t},factory:({discoveryApi:yt,identityApi:_t})=>new rt({discoveryApi:yt,identityApi:_t})})],routes:{root:pt}}),st=qe.provide((0,z.QJ)({name:"SearchPage",component:()=>e.e(4428).then(e.bind(e,84428)).then(yt=>yt.SearchPage),mountPoint:pt})),Oe=qe.provide((0,z.NC)({name:"SidebarSearchModal",component:{lazy:()=>e.e(6119).then(e.bind(e,26119)).then(yt=>yt.SidebarSearchModal)}})),je=qe.provide((0,z.NC)({name:"HomePageSearchBar",component:{lazy:()=>e.e(776).then(e.bind(e,70776)).then(yt=>yt.HomePageSearchBar)}})),$e=()=>{const yt=(0,a.zy)(),{term:_t,setTerm:S,types:R,setTypes:W,pageCursor:Z,setPageCursor:Pe,filters:Ue,setFilters:lt}=(0,_.SQ)(),et=(0,ee.A)(yt.search);return(0,q.useEffect)(()=>{if(yt.search===et)return;const Je=b().parse(yt.search.substring(1),{arrayLimit:0})||{};Je.filters&&lt(Je.filters),Je.query&&S(Je.query),Je.pageCursor&&Pe(Je.pageCursor),Je.types&&W(Je.types)},[et,yt,S,W,Pe,lt]),(0,q.useEffect)(()=>{const Je=b().stringify({query:_t,types:R,pageCursor:Z,filters:Ue},{arrayFormat:"brackets"}),Wt=`${window.location.pathname}?${Je}`;window.history.replaceState(null,document.title,Wt)},[_t,R,Z,Ue]),null},vt=()=>{const yt=(0,a.P1)();return q.createElement(_.Lt,null,q.createElement($e,null),yt)},ht=(0,ft.A)(yt=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:yt.spacing(1)},icon:{color:yt.palette.text.primary},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:yt.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:yt.spacing(2,0),"&.Mui-expanded":{margin:yt.spacing(2,0)}},accordionDetails:{padding:yt.spacing(0,0,1)}})),Ft=yt=>{const _t=ht(),{filters:S,setPageCursor:R,setTypes:W,term:Z,types:Pe}=(0,_.SQ)(),Ue=(0,r.u)(_.yY),[lt,et]=(0,q.useState)(!0),{defaultValue:Je,name:Wt,showCounts:tn,types:Ut}=yt,mt=()=>et(ve=>!ve),Xt=ve=>()=>{W(ve!==""?[ve]:[]),R(void 0),et(!1)};(0,q.useEffect)(()=>{Je&&W([Je])},[]);const on=[{value:"",name:"All",icon:q.createElement(p.A,null)},...Ut],ln=Pe[0]||"",{value:qt}=(0,j.A)(async()=>{if(!tn)return{};const ve=await Promise.all(on.map(Qe=>Qe.value).map(async Qe=>{const{numberOfResults:Kt}=await Ue.query({term:Z,types:Qe?[Qe]:[],filters:Pe.includes(Qe)||!Pe.length&&!Qe?S:{},pageLimit:0});return[Qe,Kt!==void 0?`${Kt>=1e4?">10000":Kt} results`:" -- "]}));return Object.fromEntries(ve)},[S,tn,Z,Pe]);return q.createElement(M.A,{className:_t.card},q.createElement(v.A,{title:Wt,titleTypographyProps:{variant:"overline"}}),q.createElement(C.A,{className:_t.cardContent},q.createElement(ce.A,{className:_t.accordion,expanded:lt,onChange:mt},q.createElement(I.A,{classes:{root:_t.accordionSummary,content:_t.accordionSummaryContent},expandIcon:q.createElement(X.A,{className:_t.icon}),IconButtonProps:{size:"small"}},lt?"Collapse":on.filter(ve=>ve.value===ln)[0].name),q.createElement(h.A,{classes:{root:_t.accordionDetails}},q.createElement(Q.A,{className:_t.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},on.map(ve=>q.createElement(q.Fragment,{key:ve.value},q.createElement(N.A,null),q.createElement(De.A,{selected:Pe[0]===ve.value||Pe.length===0&&ve.value==="",onClick:Xt(ve.value),button:!0},q.createElement(Ee.A,null,(0,q.cloneElement)(ve.icon,{className:_t.listItemIcon})),q.createElement(G.A,{primary:ve.name,secondary:qt&&qt[ve.value]})))))))))},me=(0,ft.A)(yt=>({tabs:{borderBottom:`1px solid ${yt.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:yt.typography.fontWeightBold,fontSize:yt.typography.pxToRem(13),color:yt.palette.text.primary,minWidth:"130px"}})),ke=yt=>{const _t=me(),{setPageCursor:S,setTypes:R,types:W}=(0,_.SQ)(),{defaultValue:Z,types:Pe}=yt,Ue=(et,Je)=>{R(Je!==""?[Je]:[]),S(void 0)};(0,q.useEffect)(()=>{Z&&R([Z])},[]);const lt=[{value:"",name:"All"},...Pe];return q.createElement(ue.A,{"aria-label":"List of search types tabs",className:_t.tabs,indicatorColor:"primary",value:W.length===0?"":W[0],onChange:Ue},lt.map((et,Je)=>q.createElement(J.A,{key:Je,className:_t.tab,label:et.name,value:et.value})))},bt=(0,ft.A)(yt=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:yt.spacing(1)},chip:{margin:2}})),Yt=yt=>{const{className:_t,defaultValue:S,name:R,values:W=[]}=yt,Z=bt(),{types:Pe,setTypes:Ue}=(0,_.SQ)();(0,k.A)(()=>{Pe.length||(S&&Array.isArray(S)?Ue(S):S&&Ue([S]))});const lt=et=>{const Je=et.target.value;Ue(Je)};return q.createElement(le.A,{className:_t,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},q.createElement(ie.A,{className:Z.label,margin:"dense"},R),q.createElement(Ce.A,{multiple:!0,variant:"outlined",value:Pe,onChange:lt,placeholder:"All Results",renderValue:et=>q.createElement("div",{className:Z.chips},et.map(Je=>q.createElement(_e.A,{key:Je,label:Je,className:Z.chip,size:"small"})))},W.map(et=>q.createElement(we.A,{key:et,value:et},q.createElement(he.A,{checked:Pe.indexOf(et)>-1}),q.createElement(G.A,{primary:et})))))};Yt.Accordion=yt=>q.createElement(Ft,{...yt}),Yt.Tabs=yt=>q.createElement(ke,{...yt})},47745:(Dn,Ct,e)=>{"use strict";e.d(Ct,{M:()=>_,T:()=>le,a:()=>b});var s=e(48821),l=e(11638);const b=(0,s.c)({id:"plugin.techradar.service"});var _=(ie=>(ie[ie.Down=-1]="Down",ie[ie.NoChange=0]="NoChange",ie[ie.Up=1]="Up",ie))(_||{});const z=new Array;z.push({id:"adopt",name:"ADOPT",color:"#5BA300",description:"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus."}),z.push({id:"trial",name:"TRIAL",color:"#009EB0",description:"Recusandae possimus ipsum dolores."}),z.push({id:"assess",name:"ASSESS",color:"#C7BA00",description:"In asperiores repellat error recusandae et adipisci laborum porro."}),z.push({id:"hold",name:"HOLD",color:"#E09B96",description:"Esse mollitia in."});const r=new Array;r.push({id:"infrastructure",name:"Infrastructure"}),r.push({id:"frameworks",name:"Frameworks"}),r.push({id:"languages",name:"Languages"}),r.push({id:"process",name:"Process"});const q=new Array;q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),q.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),q.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),q.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),q.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),q.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const ee={entries:q,quadrants:r,rings:z};class a{async load(){return ee}}const he=(0,l.HM)({id:"tech-radar"}),le=(0,l.i1)({id:"tech-radar",routes:{root:he},apis:[(0,l.bW)(b,new a)]}).provide((0,l.QJ)({name:"TechRadarPage",component:()=>e.e(8095).then(e.bind(e,38095)).then(function(ie){return ie.b}).then(ie=>ie.RadarPage),mountPoint:he}))},51330:(Dn,Ct,e)=>{"use strict";e.d(Ct,{Gr:()=>Wt});var s=e(48821),l=e(11638),b=e(20443),_=e(14041),z=e(87881),r=e(7031),q=e(64947),ee=e(58837),a=e(41883),he=e(4321),_e=e(33466),le=e(54917),ie=e(26343),G=e(5951),we=e(72501),Ce=e(77125),ft=e(29365),k=e(63798),ce=e(6924),I=e(52536),h=e.n(I),M=e(63188),C=e(33478),v=e(85005),N=e(22968),Q=e(18466),De=e(80113),Ee=e(10527),X=e(60367);const p=".md-nav__item--nested .md-toggle",j="@backstage/techdocs-addons/nav-expanded",J=(0,r.A)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(q.A),ue=(0,r.A)({root:{height:"20px",width:"20px"}})(k.A),Te=(0,r.A)({root:{height:"20px",width:"20px"}})(ce.A),dt=()=>{const mt={expandAllNestedNavs:!1},{value:Xt,set:on}=(0,z.t)(j,{defaultValue:mt}),[ln,qt]=(0,_.useState)(!1),[...ve]=(0,b.$r)([p]),Qe=(0,_.useCallback)(Vt=>{const zt=Vt.checked,Bt=Xt==null?void 0:Xt.expandAllNestedNavs;return!!(Bt&&!zt||!Bt&&zt)},[Xt]);(0,_.useEffect)(()=>{ve!=null&&ve.length&&(qt(!0),ve.forEach(Vt=>{Qe(Vt)&&Vt.click()}))},[Xt,Qe,ve]);const Kt=()=>{on(Vt=>({expandAllNestedNavs:!(Vt!=null&&Vt.expandAllNestedNavs)}))};return _.createElement(_.Fragment,null,ln?_.createElement(J,{size:"small",onClick:Kt,"aria-label":Xt!=null&&Xt.expandAllNestedNavs?"collapse-nav":"expand-nav"},Xt!=null&&Xt.expandAllNestedNavs?_.createElement(Te,null):_.createElement(ue,null)):null)},Ge="techdocs-report-issue",rt=`#${Ge}`,pt='[title^="Edit this page"]',qe='[title^="Leave feedback for"]',st='[data-md-component="main"] .md-content',Oe=(mt,Xt)=>Xt==="github"?(0,M.Fw)(mt,"blob"):Xt==="gitlab"?(0,M.B)(mt,"blob"):(console.error(`Invalid SCM type ${Xt} found in ReportIssue addon for URL ${mt}!`),mt),je=mt=>{const Xt=mt.toString().substring(0,70),on=Xt.length===70?"...":"";return`Documentation feedback: ${Xt}${on}`},$e=(mt,Xt,on)=>{const ln="## Documentation Feedback \u{1F4DD}",qt="#### The highlighted text:",ve="#### The comment on the text:",Qe="_>replace this line with your comment<_",Kt=mt.toString().trim().split(`
`).map(zt=>`> ${zt.trim()}`).join(`
`),Vt=[`${on} URL: <${window.location.href}> 
Markdown URL: <${Xt}>`];return`${ln}

 ${qt} 

 ${Kt}

 ${ve} 
 ${Qe}

 ___
${Vt}`},vt=mt=>{var Xt,on;const ln={title:"",body:""},qt=(0,b.k0)(mt),[ve]=(0,b.$r)([pt]),Qe=(Xt=ve==null?void 0:ve.href)!=null?Xt:"",Kt=(0,s.u)(C.YT),zt=(0,s.u)(s.p).getOptionalString("app.title")||"Backstage";if(!qt||!Qe)return ln;const Bt=(on=Kt.byUrl(Qe))==null?void 0:on.type;return Bt?{title:je(qt),body:$e(qt,Oe(Qe,Bt),zt)}:ln},ht=()=>{var mt,Xt;const on=(0,s.u)(C.YT),[ln]=(0,b.$r)([pt]),qt=(mt=ln==null?void 0:ln.href)!=null?mt:"";if(!qt)return null;const ve=(Xt=on.byUrl(qt))==null?void 0:Xt.type;return ve?{...h()(Oe(qt,ve)),type:ve}:null},Ft=(0,ee.A)(mt=>({root:{display:"grid",gridGap:mt.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:mt.palette.common.black,fontSize:mt.typography.button.fontSize}})),me=({type:mt})=>mt==="github"?N.Hk:v.A,ke=({type:mt})=>mt==="github"?"Github":"Gitlab",bt=(mt,Xt)=>{const{title:on,body:ln}=Xt,qt=encodeURIComponent(on),ve=encodeURIComponent(ln),{protocol:Qe,resource:Kt,owner:Vt,name:zt,type:Bt}=mt,Ln=`${Qe}://${Kt}/${Vt}/${zt}`,mn=encodeURI(Ln);return Bt==="github"?`${mn}/issues/new?title=${qt}&body=${ve}`:`${mn}/issues/new?issue[title]=${qt}&issue[description]=${ve}`},Yt=({template:mt,repository:Xt})=>{const on=Ft(),ln=me(Xt),qt=bt(Xt,mt);return _.createElement(N.N_,{className:on.root,to:qt,target:"_blank"},_.createElement(ln,null)," Open new ",ke(Xt)," issue")},yt=(0,ee.A)(mt=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:mt.spacing(1),zIndex:mt.zIndex.tooltip,background:mt.palette.common.white}})),_t=({debounceTime:mt=500,templateBuilder:Xt})=>{const on=yt(),[ln,qt]=(0,_.useState)(),ve=ht(),Qe=vt(mt),Kt=(0,b.k0)(mt),[Vt,zt]=(0,b.$r)([st,qe]);let[Bt]=(0,b.$r)([rt]);return zt&&(zt.style.display="none"),(0,_.useEffect)(()=>{if(!ve||!Kt||!Kt.containsNode(Vt,!0)||Kt!=null&&Kt.containsNode(Bt,!0))return;const Ln=Vt.getBoundingClientRect(),mn=Kt.getRangeAt(0).getBoundingClientRect(),nn=mn.top-Ln.top,On=50;let nt=nn<On?101:nn-16;if(Ln.top<0){const gt=Math.abs(Ln.top);nn-gt<On&&(nt+=89)}qt({top:`${nt}px`,left:`${mn.left+mn.width/2}px`})},[Kt,Vt,Bt]),!Kt||!ve||!["github","gitlab"].includes(ve.type)?null:(Bt||(Bt=document.createElement("div"),Bt.setAttribute("id",Ge),Vt.prepend(Bt)),_.createElement(a.A,{container:Bt},_.createElement(he.A,{"data-testid":"report-issue-addon",className:on.root,style:ln},_.createElement(Yt,{repository:ve,template:Xt?Xt({selection:Kt}):Qe}))))},S="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",R=(0,r.A)(mt=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:mt.palette.common.white,boxShadow:S,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:S}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:mt.palette.textSubtle,fontSize:mt.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(_e.A),W={key:"techdocs.addons.settings.textsize",defaultValue:100},Z=[{value:90},{value:100},{value:115},{value:130},{value:150}],Pe=(0,ee.A)(mt=>({container:{color:mt.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:mt.spacing(1)},increaseButton:{marginLeft:mt.spacing(1)}})),Ue=()=>{const mt=Pe(),Xt=(0,le.A)(),[on]=(0,b.$r)(["body"]),[ln,qt]=(0,_.useState)(()=>{const nn=localStorage==null?void 0:localStorage.getItem(W.key);return nn?parseInt(nn,10):W.defaultValue}),ve=(0,_.useMemo)(()=>Z.map(nn=>nn.value),[]),Qe=(0,_.useMemo)(()=>ve.indexOf(ln),[ve,ln]),Kt=(0,_.useMemo)(()=>ve[0],[ve]),Vt=(0,_.useMemo)(()=>ve[ve.length-1],[ve]),zt=(0,_.useCallback)(()=>`${ln}%`,[ln]),Bt=(0,_.useCallback)((nn,On)=>{Array.isArray(On)||(qt(On),localStorage==null||localStorage.setItem(W.key,String(On)))},[qt]),Ln=(0,_.useCallback)(nn=>{Bt(nn,ve[Qe-1])},[Qe,ve,Bt]),mn=(0,_.useCallback)(nn=>{Bt(nn,ve[Qe+1])},[Qe,ve,Bt]);return(0,_.useEffect)(()=>{var nn,On;if(!on)return;const nt=(On=(nn=Xt.typography)==null?void 0:nn.htmlFontSize)!=null?On:16;on.style.setProperty("--md-typeset-font-size",`${nt*(ln/100)}px`)},[on,ln,Xt]),_.createElement(ie.A,{className:mt.menuItem,button:!0,disableRipple:!0},_.createElement(G.A,{primary:_.createElement(we.A,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:_.createElement(Ce.A,{className:mt.container},_.createElement(ft.A,{className:mt.decreaseButton,size:"small",edge:"start",disabled:ln===Kt,onClick:Ln,"aria-label":"Decrease text size"},_.createElement(De.A,null)),_.createElement(R,{value:ln,"aria-labelledby":"text-size-slider",getAriaValueText:zt,valueLabelDisplay:"on",valueLabelFormat:zt,marks:Z,step:null,min:Kt,max:Vt,onChangeCommitted:Bt}),_.createElement(ft.A,{className:mt.increaseButton,size:"small",edge:"end",disabled:ln===Vt,onClick:mn,"aria-label":"Increase text size"},_.createElement(Q.A,null))),disableTypography:!0}))},lt=()=>{const mt=(0,b.$r)(["img"]);return(0,_.useEffect)(()=>{let Xt=null,on=new Ee.A({pswpModule:X.A,initialZoomLevel:1,secondaryZoomLevel:ln=>{const qt=ln.elementSize.x,ve=ln.elementSize.y,Qe=ln.panAreaSize.x,Kt=ln.panAreaSize.y,Vt=Qe/qt,zt=Kt/ve;return Math.min(Vt,zt)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return mt.forEach((ln,qt)=>{ln.onclick=()=>(Xt===null&&(Xt=mt.map(ve=>({element:ve,src:ve.src,msrc:ve.src,alt:ve.alt,width:ve.clientWidth,height:ve.clientHeight}))),on.loadAndOpen(qt,Xt),!1)}),on.init(),()=>{on.destroy(),on=null}},[mt]),null},et=(0,l.i1)({id:"techdocsModuleAddonsContrib"}),Je=et.provide((0,b.Hr)({name:"ExpandableNavigation",location:b.eK.PrimarySidebar,component:dt})),Wt=et.provide((0,b.Hr)({name:"ReportIssue",location:b.eK.Content,component:_t})),tn=et.provide((0,b.Hr)({name:"TextSize",location:b.eK.Settings,component:Ue})),Ut=et.provide((0,b.Hr)({name:"LightBox",location:b.eK.Content,component:lt}))},20443:(Dn,Ct,e)=>{"use strict";e.d(Ct,{$r:()=>pt,AF:()=>Ce,Hr:()=>ce,K$:()=>ue,R7:()=>p,V1:()=>j,Wm:()=>we,YR:()=>C,_$:()=>dt,eK:()=>J,eh:()=>Ge,k0:()=>st,l9:()=>v,po:()=>ft,sm:()=>N});var s=e(14041),l=e(18690),b=e(11638),_=e(48821),z=e(73466),r=e(28966),q=e(29835),ee=e(97388),a=e(9394),he=e(22856),_e=e(91360),le=e(22968),ie=e(12784),G=e.n(ie);const we="techdocs.addons.addon.v1",Ce="techdocs.addons.wrapper.v1",ft=()=>null;(0,b.h3)(ft,Ce,!0);const k=Oe=>`${we}.${Oe.toLocaleLowerCase("en-US")}`;function ce(Oe){const{name:je,component:$e}=Oe;return(0,b.zZ)({name:je,component:{sync:vt=>s.createElement($e,{...vt})},data:{[we]:Oe,[k(je)]:!0}})}const I=(Oe,je)=>Oe.selectByComponentData({key:je}).getElements()[0],h=Oe=>Oe.selectByComponentData({key:Ce}).selectByComponentData({key:we}),M=Oe=>Oe.selectByComponentData({key:Ce}).findComponentData({key:we}),C=()=>{const Oe=(0,l.P1)(),je=(0,b.OJ)(Oe,h),$e=(0,b.OJ)(Oe,M),vt=(0,s.useCallback)(me=>{var ke;if(!je||!me)return null;const bt=k(me.name);return(ke=I(je,bt))!=null?ke:null},[je]),ht=(0,s.useCallback)(me=>{const ke=$e.find(bt=>bt.name===me);return ke?vt(ke):null},[$e,vt]),Ft=(0,s.useCallback)(me=>{const ke=$e.filter(bt=>bt.location===me);return ke.length?ke.map(vt):null},[$e,vt]);return{renderComponentByName:ht,renderComponentsByLocation:Ft}},v=(0,_.c)({id:"plugin.techdocs.service"}),N=(0,_.c)({id:"plugin.techdocs.storageservice"});function Q(Oe,je){return je.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(Oe.kind=Oe.kind.toLocaleLowerCase(),Oe.name=Oe.name.toLocaleLowerCase(),Oe.namespace=Oe.namespace.toLocaleLowerCase()),Oe}const De=(Oe,je)=>(0,q.U2)(Oe)===(0,q.U2)(je),Ee={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},X=(0,ee.tK)("techdocs-reader-page-context"),p=(0,s.memo)(Oe=>{const{entityRef:je,children:$e}=Oe,vt=(0,_.u)(v),ht=(0,_.u)(_.p),Ft=(0,z.A)(async()=>vt.getEntityMetadata(je),[je]),me=(0,r.A)(async()=>vt.getTechDocsMetadata(je),[je]),[ke,bt]=(0,s.useState)(Ee.title),[Yt,yt]=(0,s.useState)(Ee.subtitle),[_t,S]=(0,s.useState)(Ee.shadowRoot);(0,s.useEffect)(()=>{_t&&!me.value&&!me.loading&&me.retry()},[me.value,me.loading,_t,me.retry,me]);const R={metadata:me,entityRef:Q(je,ht),entityMetadata:Ft,shadowRoot:_t,setShadowRoot:S,title:ke,setTitle:bt,subtitle:Yt,setSubtitle:yt},W=(0,ee.Bl)({1:R});return s.createElement(b.Ig,{attributes:{entityRef:(0,q.U2)(je)}},s.createElement(X.Provider,{value:W},$e instanceof Function?$e(R):$e))},(Oe,je)=>De(Oe.entityRef,je.entityRef)),j=()=>{const Oe=(0,s.useContext)(X);if(Oe===void 0)return Ee;const je=Oe.atVersion(1);if(je===void 0)throw new Error("No context found for version 1.");return je},J=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),ue="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",Te=Oe=>{(0,s.useEffect)(()=>{var je;if(!Oe)return()=>{};const $e=Oe.querySelectorAll('head > link[rel="stylesheet"]');let vt=(je=$e==null?void 0:$e.length)!=null?je:0;const ht=new CustomEvent(ue);if(!vt)return Oe.dispatchEvent(ht),()=>{};const Ft=()=>{--vt===0&&Oe.dispatchEvent(ht)};return $e==null||$e.forEach(me=>{me.addEventListener("load",Ft)}),()=>{$e==null||$e.forEach(me=>{me.removeEventListener("load",Ft)})}},[Oe])},dt=Oe=>{const[je,$e]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!Oe)return()=>{};$e(!0);const vt=Oe.style;vt.setProperty("opacity","0");const ht=()=>{$e(!1),vt.setProperty("opacity","1")};return Oe.addEventListener(ue,ht),()=>{Oe.removeEventListener(ue,ht)}},[Oe]),je},Ge=Oe=>{const{element:je,onAppend:$e,children:vt}=Oe,[ht,Ft]=(0,s.useState)((0,a.vt)({...(0,he.A)(),insertionPoint:void 0}));Te(je);const me=dt(je),ke=(0,s.useCallback)(bt=>{if(!je||!bt)return;Ft((0,a.vt)({...(0,he.A)(),insertionPoint:je.querySelector("head")||void 0}));let Yt=bt.shadowRoot;Yt||(Yt=bt.attachShadow({mode:"open"})),Yt.replaceChildren(je),typeof $e=="function"&&$e(Yt)},[je,$e]);return s.createElement(s.Fragment,null,me&&s.createElement(le.ke,null),s.createElement(_e.Ay,{jss:ht,sheetsManager:new Map},s.createElement("div",{ref:ke,"data-testid":"techdocs-native-shadowroot"}),vt))},rt=()=>{const{shadowRoot:Oe}=j();return Oe},pt=Oe=>{const je=rt();return je?Oe.map($e=>je==null?void 0:je.querySelectorAll($e)).filter($e=>$e.length).map($e=>Array.from($e)).flat():[]},qe=Oe=>Oe.toString()&&Oe.rangeCount&&Oe.getRangeAt(0).getBoundingClientRect().top,st=(Oe=0)=>{const je=rt(),[$e,vt]=(0,s.useState)(null),ht=(0,s.useMemo)(()=>G()(()=>{const Ft=je,me=Ft.getSelection?Ft.getSelection():document.getSelection();me&&qe(me)?vt(me):vt(null)},Oe),[je,vt,Oe]);return(0,s.useEffect)(()=>(window.document.addEventListener("selectionchange",ht),()=>{ht.cancel(),window.document.removeEventListener("selectionchange",ht)}),[ht]),$e}},96024:(Dn,Ct,e)=>{"use strict";e.d(Ct,{E:()=>we,a:()=>ft,c:()=>k,d:()=>ce,t:()=>ie});var s=e(14041),l=e(18690),b=e(29835),_=e(20443),z=e(45495),r=e(11638),q=e(48821),ee=e(70735),a=e(97186),he=e(20356),_e=e(2069),le=e(92651);const ie=(0,r.i1)({id:"techdocs",apis:[(0,r.bW)({api:_.sm,deps:{configApi:q.p,discoveryApi:q.q,identityApi:q.t,fetchApi:q.s},factory:({configApi:Ee,discoveryApi:X,identityApi:p,fetchApi:j})=>new z.T({configApi:Ee,discoveryApi:X,identityApi:p,fetchApi:j})}),(0,r.bW)({api:_.l9,deps:{configApi:q.p,discoveryApi:q.q,fetchApi:q.s},factory:({configApi:Ee,discoveryApi:X,fetchApi:p})=>new z.a({configApi:Ee,discoveryApi:X,fetchApi:p})})],routes:{root:z.r,docRoot:z.b,entityContent:z.c}}),G=ie.provide((0,r.QJ)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return De}).then(Ee=>Ee.Router),mountPoint:z.r})),we=ie.provide((0,r.QJ)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return De}).then(Ee=>Ee.EmbeddedDocsRouter),mountPoint:z.c})),Ce=ie.provide((0,r.QJ)({name:"TechDocsCustomHome",component:()=>e.e(257).then(e.bind(e,52638)).then(Ee=>Ee.TechDocsCustomHome),mountPoint:z.r})),ft=ie.provide((0,r.QJ)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(e.bind(e,20356)).then(function(Ee){return Ee.d}).then(Ee=>Ee.TechDocsIndexPage),mountPoint:z.r})),k=ie.provide((0,r.QJ)({name:"TechDocsReaderPage",component:()=>e.e(9158).then(e.bind(e,66777)).then(Ee=>Ee.TechDocsReaderPage),mountPoint:z.b})),ce=ie.provide((0,ee.c)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(e.bind(e,27332)).then(Ee=>Ee.TechDocsSearchResultListItem),predicate:Ee=>Ee.type==="techdocs"})),I="backstage.io/techdocs-entity",h=({entity:Ee})=>{var X,p;let j=(0,b.sM)(Ee);if((X=Ee.metadata.annotations)!=null&&X[I])try{j=(0,b.KU)((p=Ee.metadata.annotations)==null?void 0:p[I])}catch{}return s.createElement(k,{entityRef:j},s.createElement(a.e,null),s.createElement(a.d,{withSearch:!1}))},M="backstage.io/techdocs-ref",C="backstage.io/techdocs-entity";var De=Object.freeze({__proto__:null,EmbeddedDocsRouter:Ee=>{var X,p;const{children:j}=Ee,{entity:J}=(0,_e.u)(),ue=(0,l.Ye)([{path:"/*",element:s.createElement(h,{entity:J}),children:[{path:"*",element:j}]}]);return((X=J.metadata.annotations)==null?void 0:X[M])||((p=J.metadata.annotations)==null?void 0:p[C])?ue:s.createElement(le.o9,{annotation:[M]})},Router:()=>s.createElement(l.BV,null,s.createElement(l.qh,{path:"/",element:s.createElement(he.c,null)}),s.createElement(l.qh,{path:"/:namespace/:kind/:name/*",element:s.createElement(a.T,null)})),isTechDocsAvailable:Ee=>{var X,p,j,J;return!!((p=(X=Ee==null?void 0:Ee.metadata)==null?void 0:X.annotations)!=null&&p[M])||!!((J=(j=Ee==null?void 0:Ee.metadata)==null?void 0:j.annotations)!=null&&J[C])}})},20356:(Dn,Ct,e)=>{"use strict";e.r(Ct),e.d(Ct,{D:()=>C,E:()=>v,T:()=>N,a:()=>Ee,b:()=>De,c:()=>X,d:()=>p,t:()=>k});var s=e(14041),l=e(18690),b=e(22968),_=e(92651),z=e(2069),r=e(75757),q=e(11638),ee=e(48821),a=e(36338),he=e(45250),_e=e.n(he),le=e(29835),ie=e(45495),G=e(55290),we=e(7031),Ce=e(80109),ft=e(15303);function k(j,J){return J.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?j:j.toLocaleLowerCase("en-US")}const ce=(0,we.A)({root:{color:"#f3ba37"}})(Ce.A),I={createCopyDocsUrlAction(j){return J=>({icon:()=>s.createElement(G.A,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>j(`${window.location.origin}${J.resolved.docsUrl}`)})},createStarEntityAction(j,J){return ue=>{const Te=ue.entity,dt=j(Te);return{cellStyle:{paddingLeft:"1em"},icon:()=>dt?s.createElement(ce,null):s.createElement(ft.A,null),tooltip:dt?"Remove from favorites":"Add to favorites",onClick:()=>J(Te)}}}};function h(j){return j.metadata.title||j.metadata.name}const M={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:j=>s.createElement(b.md,{value:s.createElement(b.N_,{to:j.resolved.docsUrl},h(j.entity)),subvalue:j.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:j})=>s.createElement(_.iI,{entityRefs:j.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},C=j=>{const{entities:J,title:ue,loading:Te,columns:dt,actions:Ge,options:rt}=j,[,pt]=(0,a.A)(),qe=(0,q.Sf)(ie.b),st=(0,ee.u)(ee.p);if(!J)return null;const Oe=J.map(Ft=>{var me;const ke=(0,z.g)(Ft,le.vv);return{entity:Ft,resolved:{docsUrl:qe({namespace:k((me=Ft.metadata.namespace)!=null?me:"default",st),kind:k(Ft.kind,st),name:k(Ft.metadata.name,st)}),ownedByRelations:ke,ownedByRelationsTitle:ke.map(bt=>(0,_.SE)(bt,{defaultKind:"group"})).join(", ")}}}),je=[M.createNameColumn(),M.createOwnerColumn(),M.createKindColumn(),M.createTypeColumn()],$e=[I.createCopyDocsUrlAction(pt)],vt=20,ht=Oe&&Oe.length>vt;return s.createElement(s.Fragment,null,Te||Oe&&Oe.length>0?s.createElement(b.XI,{isLoading:Te,options:{paging:ht,pageSize:vt,search:!0,actionsColumnIndex:-1,...rt},data:Oe,columns:dt||je,actions:Ge||$e,title:ue?`${ue} (${Oe.length})`:`All (${Oe.length})`}):s.createElement(b.pp,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:s.createElement(b.Su,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};C.columns=M,C.actions=I;const v=j=>{var J,ue;const{columns:Te,actions:dt,options:Ge}=j,{loading:rt,error:pt,entities:qe,filters:st}=(0,_.nK)(),{isStarredEntity:Oe,toggleStarredEntity:je}=(0,_.IT)(),[,$e]=(0,a.A)(),vt=(0,he.capitalize)((ue=(J=st.user)==null?void 0:J.value)!=null?ue:"all"),ht=[I.createCopyDocsUrlAction($e),I.createStarEntityAction(Oe,je)];return pt?s.createElement(b.Bp,{severity:"error",title:"Could not load available documentation."},s.createElement(b.z7,{language:"text",text:pt.toString()})):s.createElement(C,{title:vt,entities:qe,loading:rt,actions:dt||ht,columns:Te,options:Ge})};v.columns=M,v.actions=I;const N=j=>{var J;const{children:ue}=j,dt=`Documentation available in ${(J=(0,ee.u)(ee.p).getOptionalString("organization.name"))!=null?J:"Backstage"}`;return s.createElement(b.dT,{title:"Documentation",subtitle:dt,themeId:"documentation"},ue)};class Q{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":r.cr}}}const De=()=>{const{updateFilters:j}=(0,_.nK)();return(0,s.useEffect)(()=>{j({techdocs:new Q})},[j]),null},Ee=j=>{const{initialFilter:J="owned",columns:ue,actions:Te}=j;return s.createElement(N,null,s.createElement(b.UC,null,s.createElement(b.dv,{title:""},s.createElement(b.Yl,null,"Discover documentation in your ecosystem.")),s.createElement(_.B9,null,s.createElement(_.GI,null,s.createElement(_.GI.Filters,null,s.createElement(De,null),s.createElement(_.y2,{initialFilter:J}),s.createElement(_.t3,null),s.createElement(_.mo,null)),s.createElement(_.GI.Content,null,s.createElement(v,{actions:Te,columns:ue}))))))},X=j=>(0,l.P1)()||s.createElement(Ee,{...j});var p=Object.freeze({__proto__:null,TechDocsIndexPage:X})},97186:(Dn,Ct,e)=>{"use strict";e.d(Ct,{T:()=>_n,a:()=>Xn,d:()=>Qn,e:()=>rn});var s=e(14041),l=e(18690),b=e(22968),_=e(20443),z=e(42899),r=e(58837),q=e(99703),ee=e(268),a=e(54917),he=e(7031),_e=e(50868),le=e(13270),ie=e(27332),G=e(78467),we=e(64947),Ce=e(74219),ft=e(73845),k=e(29365),ce=e(72501),I=e(32881),h=e(48821),M=e(11638),C=e(73466),v=e(28966),N=e(5893),Q=e(33478),De=e(71651),Ee=e.n(De),X=e(63188),p=e(90292),j=e(52536),J=e.n(j),ue=e(27326),Te=e(10437),dt=e(71677),Ge=e(36338),rt=e(41883),pt=e(93285),qe=e(4387),st=e(13660),Oe=e(2069),je=e(92651),$e=e(29835),vt=e(45250),ht=e(45495),Ft=e(75173),me=e(37757),ke=e(77125),bt=e(9684),Yt=e(91042),yt=e(76842),_t=e(3399);function S(H){const{pluginId:be,path:Fe="/cookie"}=H!=null?H:{},tt=(0,h.u)(h.s),It=(0,h.u)(h.q),Ot=(0,s.useMemo)(()=>"BroadcastChannel"in window?new BroadcastChannel(`${be}-auth-cookie-expires-at`):null,[be]),[jt,ne]=(0,Yt.Y)(async()=>{const Xe=`${await It.getBaseUrl(be)}${Fe}`,Ve=await tt.fetch(`${Xe}`,{credentials:"include"});if(!Ve.ok)throw await _t.o3.fromResponse(Ve);const Et=await Ve.json();if(!Et.expiresAt)throw new Error("No expiration date found in response");return Et});(0,yt.u)(ne.execute);const We=(0,s.useCallback)(()=>{ne.execute()},[ne]),He=(0,s.useCallback)(Me=>{const Xe=(1+3*Math.random())*6e4,Ve=Date.parse(Me.expiresAt)-Date.now()-Xe,Et=setTimeout(We,Ve);return()=>clearTimeout(Et)},[We]);return(0,s.useEffect)(()=>{if(jt.status!=="success"||!jt.result)return()=>{};Ot==null||Ot.postMessage({action:"COOKIE_REFRESH_SUCCESS",payload:jt.result});let Me=He(jt.result);const Xe=Ve=>{const{action:Et,payload:Dt}=Ve.data;Et==="COOKIE_REFRESH_SUCCESS"&&(Me(),Me=He(Dt))};return Ot==null||Ot.addEventListener("message",Xe),()=>{Me(),Ot==null||Ot.removeEventListener("message",Xe)}},[jt,He,Ot]),jt.status==="not-executed"?{status:"loading"}:jt.status==="loading"&&!jt.result?{status:"loading"}:jt.status==="loading"&&jt.error?{status:"loading"}:jt.status==="error"&&jt.error?{status:"error",error:jt.error,retry:We}:{status:"success",data:jt.result}}function R(H){const{children:be,...Fe}=H,tt=(0,M.nm)(),{Progress:It}=tt.getComponents(),Ot=S(Fe);return Ot.status==="loading"?s.createElement(It,null):Ot.status==="error"?s.createElement(b.bJ,{error:Ot.error},s.createElement(we.A,{variant:"outlined",onClick:Ot.retry},"Retry")):s.createElement(s.Fragment,null,be)}function W({contentLoading:H,content:be,activeSyncState:Fe}){return H||Fe==="BUILD_READY_RELOAD"||!be&&Fe==="CHECKING"?"CHECKING":!be&&Fe==="BUILDING"?"INITIAL_BUILD":be?Fe==="BUILDING"?"CONTENT_STALE_REFRESHING":Fe==="BUILD_READY"?"CONTENT_STALE_READY":Fe==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function Z(H,be){const Fe={...H};switch(be.type){case"sync":be.state==="CHECKING"&&(Fe.buildLog=[]),Fe.activeSyncState=be.state,Fe.syncError=be.syncError;break;case"contentLoading":Fe.contentLoading=!0,Fe.contentError=void 0;break;case"content":typeof be.path=="string"&&(Fe.path=be.path),Fe.contentLoading=!1,Fe.content=be.content,Fe.contentError=be.contentError;break;case"buildLog":Fe.buildLog=Fe.buildLog.concat(be.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(Fe.activeSyncState)&&["contentLoading","content"].includes(be.type)&&(Fe.activeSyncState="UP_TO_DATE",Fe.buildLog=[]),Fe}function Pe(H,be,Fe,tt){var It,Ot;const[jt,ne]=(0,s.useReducer)(Z,{activeSyncState:"CHECKING",path:tt,contentLoading:!0,buildLog:[]}),We=(0,h.u)(_.sm),{retry:He}=(0,v.A)(async()=>{ne({type:"contentLoading"});try{const Ve=await We.getEntityDocs({kind:H,namespace:be,name:Fe},tt);return ne({type:"content",content:Ve,path:tt}),Ve}catch(Ve){ne({type:"content",contentError:Ve,path:tt})}},[We,H,be,Fe,tt]),Me=(0,s.useRef)({content:void 0,reload:()=>{}});return Me.current={content:jt.content,reload:He},(0,C.A)(async()=>{ne({type:"sync",state:"CHECKING"});const Ve=setTimeout(()=>{ne({type:"sync",state:"BUILDING"})},1e3);try{switch(await We.syncEntityDocs({kind:H,namespace:be,name:Fe},Dt=>{ne({type:"buildLog",log:Dt})})){case"updated":Me.current.content?ne({type:"sync",state:"BUILD_READY"}):(Me.current.reload(),ne({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":ne({type:"sync",state:"UP_TO_DATE"});break;default:ne({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(Et){ne({type:"sync",state:"ERROR",syncError:Et})}finally{clearTimeout(Ve)}},[H,Fe,be,We,ne,Me]),{state:(0,s.useMemo)(()=>W({activeSyncState:jt.activeSyncState,contentLoading:jt.contentLoading,content:jt.content}),[jt.activeSyncState,jt.content,jt.contentLoading]),contentReload:He,path:jt.path,content:jt.content,contentErrorMessage:(It=jt.contentError)==null?void 0:It.toString(),syncErrorMessage:(Ot=jt.syncError)==null?void 0:Ot.toString(),buildLog:jt.buildLog}}const Ue=(0,s.createContext)({}),lt=()=>(0,s.useContext)(Ue),et=H=>{const{children:be}=H,{"*":Fe=""}=(0,l.g)(),{entityRef:tt}=(0,_.V1)(),{kind:It,namespace:Ot,name:jt}=tt,ne=Pe(It,Ot,jt,Fe);return s.createElement(Ue.Provider,{value:ne},be instanceof Function?be(ne):be)},Je=H=>be=>s.createElement(et,null,s.createElement(H,{...be})),Wt=H=>H==null?void 0:H.document,tn=H=>{const{entityId:be,entityTitle:Fe,debounceTime:tt=150}=H,[It,Ot]=(0,s.useState)(!1),jt=(0,l.Zp)(),{setFilters:ne,result:{loading:We,value:He}}=(0,le.SQ)(),[Me,Xe]=(0,s.useState)([]);(0,s.useEffect)(()=>{let fn=!0;if(fn&&He){const an=He.results.slice(0,10);Xe(an)}return()=>{fn=!1}},[We,He]);const{kind:Ve,name:Et,namespace:Dt}=be;(0,s.useEffect)(()=>{ne(fn=>({...fn,kind:Ve,namespace:Dt,name:Et}))},[Ve,Dt,Et,ne]);const Gt=(fn,an)=>{if(Wt(an)){const{location:ta}=an.document;jt(ta)}};return s.createElement(le.pY,{"data-testid":"techdocs-search-bar",size:"small",open:It,getOptionLabel:()=>"",filterOptions:fn=>fn,onClose:()=>{Ot(!1)},onFocus:()=>{Ot(!0)},onChange:Gt,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Me,renderOption:({document:fn,highlight:an})=>s.createElement(ie.TechDocsSearchResultListItem,{result:fn,lineClamp:3,asListItem:!1,asLink:!1,title:fn.title,highlight:an}),loading:We,inputDebounceTime:tt,inputPlaceholder:`Search ${Fe||be.name} docs`,freeSolo:!1})},Ut=H=>{const be={term:"",types:["techdocs"],pageCursor:"",filters:H.entityId};return s.createElement(le.Lt,{initialState:be},s.createElement(tn,{...H}))},mt=(0,r.A)(H=>(0,q.A)({paper:{width:"100%",[H.breakpoints.up("sm")]:{width:"75%"},[H.breakpoints.up("md")]:{width:"50%"},padding:H.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:H.palette.background.default}})),Xt=({buildLog:H,onClose:be})=>{const Fe=mt(),tt=H.length===0?"Waiting for logs...":H.join(`
`);return s.createElement(z.A,{container:!0,direction:"column",className:Fe.root,spacing:0,wrap:"nowrap"},s.createElement(z.A,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},s.createElement(ce.A,{variant:"h5"},"Build Details"),s.createElement(k.A,{key:"dismiss",title:"Close the drawer",onClick:be,color:"inherit"},s.createElement(I.A,null))),s.createElement(z.A,{item:!0,xs:!0},s.createElement(b.rW,{text:tt,classes:{root:Fe.logs}})))},on=({buildLog:H})=>{const be=mt(),[Fe,tt]=(0,s.useState)(!1);return s.createElement(s.Fragment,null,s.createElement(we.A,{color:"inherit",onClick:()=>tt(!0)},"Show Build Logs"),s.createElement(ft.Ay,{classes:{paper:be.paper},anchor:"right",open:Fe,onClose:()=>tt(!1)},s.createElement(Xt,{buildLog:H,onClose:()=>tt(!1)})))},ln=({errorMessage:H})=>{const be=(0,h.u)(h.p).getOptionalString("techdocs.builder"),Fe=(0,M.st)(),{entityRef:tt}=(0,_.V1)(),It=(0,l.zy)();(0,s.useEffect)(()=>{const{pathname:jt,search:ne,hash:We}=It;Fe.captureEvent("not-found",`${jt}${ne}${We}`,{attributes:tt})},[Fe,tt,It]);let Ot="";return be!=="local"&&(Ot="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),s.createElement(b.M,{status:"404",statusMessage:H||"Documentation not found",additionalInfo:Ot})},qt=(0,r.A)(H=>({root:{marginBottom:H.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),ve=()=>{let H=null;const be=qt(),{state:Fe,contentReload:tt,contentErrorMessage:It,syncErrorMessage:Ot,buildLog:jt}=lt();return Fe==="INITIAL_BUILD"&&(H=s.createElement(Ce.A,{classes:{root:be.root},variant:"outlined",severity:"info",icon:s.createElement(G.A,{size:"24px"}),action:s.createElement(on,{buildLog:jt})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),Fe==="CONTENT_STALE_REFRESHING"&&(H=s.createElement(Ce.A,{variant:"outlined",severity:"info",icon:s.createElement(G.A,{size:"24px"}),action:s.createElement(on,{buildLog:jt}),classes:{root:be.root}},"A newer version of this documentation is being prepared and will be available shortly.")),Fe==="CONTENT_STALE_READY"&&(H=s.createElement(Ce.A,{variant:"outlined",severity:"success",action:s.createElement(we.A,{color:"inherit",onClick:()=>tt()},"Refresh"),classes:{root:be.root}},"A newer version of this documentation is now available, please refresh to view.")),Fe==="CONTENT_STALE_ERROR"&&(H=s.createElement(Ce.A,{variant:"outlined",severity:"error",action:s.createElement(on,{buildLog:jt}),classes:{root:be.root,message:be.message}},"Building a newer version of this documentation failed."," ",Ot)),Fe==="CONTENT_NOT_FOUND"&&(H=s.createElement(s.Fragment,null,Ot&&s.createElement(Ce.A,{variant:"outlined",severity:"error",action:s.createElement(on,{buildLog:jt}),classes:{root:be.root,message:be.message}},"Building a newer version of this documentation failed."," ",Ot),s.createElement(ln,{errorMessage:It}))),H},Qe=/main\.[A-Fa-f0-9]{8}\.min\.css$/,Kt=/^https:\/\/fonts\.googleapis\.com/,Vt=/^https:\/\/fonts\.gstatic\.com/,zt=H=>H.nodeName==="LINK",Bt=H=>{const be=(H==null?void 0:H.getAttribute("href"))||"",Fe=be.match(Qe),tt=be.match(Kt),It=be.match(Vt);return Fe||tt||It},Ln=H=>(zt(H)&&!Bt(H)&&H.remove(),H),mn=H=>H.nodeName==="IFRAME",nn=(H,be)=>{const Fe=H.getAttribute("src")||"";try{const{host:tt}=new URL(Fe);return be.includes(tt)}catch{return!1}},On=H=>be=>(mn(be)&&!nn(be,H)&&be.remove(),be),nt=()=>{const H=(0,h.u)(h.p);return(0,s.useMemo)(()=>H.getOptionalConfig("techdocs.sanitizer"),[H])},gt=()=>{const H=nt();return(0,s.useCallback)(async be=>{const Fe=H==null?void 0:H.getOptionalStringArray("allowedIframeHosts");Ee().addHook("beforeSanitizeElements",Ln);const tt=["link"];return Fe&&(tt.push("iframe"),Ee().addHook("beforeSanitizeElements",On(Fe))),Ee().sanitize(be.outerHTML,{ADD_TAGS:tt,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[H])};var Tt=({theme:H})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${H.palette.text.primary};
  --md-default-fg-color--light: ${H.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,ee.a)(H.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,ee.a)(H.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${H.palette.background.default};
  --md-default-bg-color--light: ${H.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,ee.a)(H.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,ee.a)(H.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${H.palette.primary.main};
  --md-primary-fg-color--light: ${H.palette.primary.light};
  --md-primary-fg-color--dark: ${H.palette.primary.dark};
  --md-primary-bg-color: ${H.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,ee.a)(H.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${H.shadows[1]};
  --md-shadow-z2: ${H.shadows[2]};
  --md-shadow-z3: ${H.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${H.palette.text.primary};
  --md-code-bg-color: ${H.palette.background.paper};
  --md-code-hl-color: ${(0,ee.X4)(H.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${H.palette.type==="dark"?H.palette.primary.light:H.palette.primary.dark};
  --md-code-hl-function-color: ${H.palette.type==="dark"?H.palette.secondary.light:H.palette.secondary.dark};
  --md-code-hl-string-color: ${H.palette.type==="dark"?H.palette.success.light:H.palette.success.dark};
  --md-code-hl-number-color: ${H.palette.type==="dark"?H.palette.error.light:H.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${H.palette.link};
  --md-typeset-table-color: ${H.palette.text.primary};
  --md-typeset-del-color: ${H.palette.type==="dark"?(0,ee.X4)(H.palette.error.dark,.5):(0,ee.X4)(H.palette.error.light,.5)};
  --md-typeset-ins-color: ${H.palette.type==="dark"?(0,ee.X4)(H.palette.success.dark,.5):(0,ee.X4)(H.palette.success.light,.5)};
  --md-typeset-mark-color: ${H.palette.type==="dark"?(0,ee.X4)(H.palette.warning.dark,.5):(0,ee.X4)(H.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,ot=({theme:H})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${H.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const Ze="224px";var V=({theme:H,sidebar:be})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${H.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${H.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link, .md-footer__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${be.isPinned?`calc(-12.1rem + ${Ze})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const de=["h1","h2","h3","h4","h5","h6"];var ge=({theme:H})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${de.reduce((be,Fe)=>{var tt;const It=(tt=H.typography.htmlFontSize)!=null?tt:16,Ot=H.typography[Fe],{lineHeight:jt,fontFamily:ne,fontWeight:We,fontSize:He}=Ot,Me=Xe=>{let Ve=1;return typeof Xe=="number"&&(Ve=Xe/It*.6),typeof Xe=="string"&&(Ve=Xe.replace("rem","")),`calc(${Ve} * var(--md-typeset-font-size))`};return be.concat(`
    .md-typeset ${Fe} {
      color: var(--md-default-fg-color);
      line-height: ${jt};
      font-family: ${ne};
      font-weight: ${We};
      font-size: ${Me(He)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${H.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}

.md-typeset code {
  word-break: keep-all;
}
`,Pt=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,xt=({theme:H})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${H.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${H.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${H.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${H.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${H.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const cn=[Tt,ot,V,ge,Pt,xt],An=()=>(0,b.Ut)(),Bn=()=>{const H=An(),be=(0,a.A)();return(0,s.useMemo)(()=>{const Fe={theme:be,sidebar:H};return cn.reduce((tt,It)=>tt+It(Fe),"")},[be,H])},$n=()=>{const H=Bn();return(0,s.useCallback)(be=>(be.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${H}</style>`),be),[H])},kn=(H,be,Fe)=>{const tt=H==="src"&&be.endsWith(".svg"),It=!be.match(/^([a-z]*:)?\/\//i),Ot=be.startsWith(Fe);return tt&&(It||Ot)},bn=({techdocsStorageApi:H,entityId:be,path:Fe})=>async tt=>{const It=await H.getApiOrigin(),Ot=async(jt,ne)=>{for(const We of jt)if(We.hasAttribute(ne)){const He=We.getAttribute(ne);if(!He)return;const Me=await H.getBaseUrl(He,be,Fe);if(kn(ne,He,It))try{const Ve=await(await fetch(Me,{credentials:"include"})).text();We.setAttribute(ne,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(Ve)))}`)}catch{We.setAttribute("alt",`Error: ${He}`)}else We.setAttribute(ne,Me)}};return await Promise.all([Ot(tt.querySelectorAll("img"),"src"),Ot(tt.querySelectorAll("script"),"src"),Ot(tt.querySelectorAll("source"),"src"),Ot(tt.querySelectorAll("link"),"href"),Ot(tt.querySelectorAll("a[download]"),"href")]),tt};let jn;jn=Promise.resolve().then(e.t.bind(e,25873,19));function ra(H,be){jn.then(Fe=>{"createRoot"in Fe?Fe.createRoot(be).render(H):Fe.render(H,be)})}const ct=H=>be=>{var Fe;const tt=be.querySelector('[title="Edit this page"]');if(!tt||!tt.href)return be;const It=new URL(tt.href),Ot=H.byUrl(It);if((Ot==null?void 0:Ot.type)!=="github"&&(Ot==null?void 0:Ot.type)!=="gitlab")return be;const jt=((Fe=be.querySelector("article>h1"))==null?void 0:Fe.childNodes[0].textContent)||"",ne=encodeURIComponent(`Documentation Feedback: ${jt}`),We=encodeURIComponent(`Page source:
${tt.href}

Feedback:`),He=(Ot==null?void 0:Ot.type)==="github"?(0,X.Fw)(It.href,"blob"):It.href,Me=J()(He),Xe=`/${Me.organization}/${Me.name}`,Ve=tt.cloneNode();switch(Ot==null?void 0:Ot.type){case"gitlab":Ve.href=`${It.origin}${Xe}/issues/new?issue[title]=${ne}&issue[description]=${We}`;break;case"github":Ve.href=`${It.origin}${Xe}/issues/new?title=${ne}&body=${We}`;break;default:return be}return ra(s.createElement(p.A),Ve),Ve.style.paddingLeft="5px",Ve.title="Leave feedback for this page",Ve.id="git-feedback-link",tt==null||tt.insertAdjacentElement("beforebegin",Ve),be},m=()=>H=>{const be=H.querySelector('.md-header label[for="__drawer"]'),Fe=H.querySelector("article");if(!be||!Fe)return H;const tt=be.cloneNode();return ra(s.createElement(ue.A),tt),tt.id="toggle-sidebar",tt.title="Toggle Sidebar",tt.classList.add("md-content__button"),tt.style.setProperty("padding","0 0 0 5px"),tt.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),Fe==null||Fe.prepend(tt),H},w=()=>H=>(((Fe,tt)=>{Array.from(Fe).filter(It=>It.hasAttribute(tt)).forEach(It=>{const Ot=It.getAttribute(tt);if(Ot){Ot.match(/^https?:\/\//i)&&It.setAttribute("target","_blank");try{const jt=K(window.location.href);It.setAttribute(tt,new URL(Ot,jt).toString())}catch{It.replaceWith(It.textContent||Ot)}}})})(Array.from(H.getElementsByTagName("a")),"href"),H);function K(H){const be=new URL(H);return!be.pathname.endsWith("/")&&!be.pathname.endsWith(".html")&&(be.pathname+="/"),be.toString()}const re=({baseUrl:H,onClick:be})=>Fe=>(Array.from(Fe.getElementsByTagName("a")).forEach(tt=>{tt.addEventListener("click",It=>{const jt=tt.getAttribute("href");jt&&jt.startsWith(H)&&!tt.hasAttribute("download")&&(It.preventDefault(),be(It,jt))})}),Fe),D=(0,he.A)(H=>({tooltip:{fontSize:"inherit",color:H.palette.text.primary,margin:0,padding:H.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(dt.Ay),U=()=>s.createElement(Te.A,null,s.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),Y=({text:H})=>{const[be,Fe]=(0,s.useState)(!1),[,tt]=(0,Ge.A)(),It=(0,s.useCallback)(()=>{tt(H),Fe(!0)},[H,tt]),Ot=(0,s.useCallback)(()=>{Fe(!1)},[Fe]);return s.createElement(D,{title:"Copied to clipboard",placement:"left",open:be,onClose:Ot,leaveDelay:1e3},s.createElement(k.A,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:It},s.createElement(U,null)))},Se=H=>be=>{var Fe;const tt=be.querySelectorAll("pre > code");for(const It of tt){const Ot=It.textContent||"",jt=document.createElement("div");(Fe=It==null?void 0:It.parentElement)==null||Fe.prepend(jt),ra(s.createElement(_e.A,{theme:H},s.createElement(Y,{text:Ot})),jt)}return be},Re=()=>H=>{var be;return(be=H.querySelector(".md-header"))==null||be.remove(),H},ut=()=>H=>{var be,Fe;return(be=H.querySelector(".md-footer .md-copyright"))==null||be.remove(),(Fe=H.querySelector(".md-footer-copyright"))==null||Fe.remove(),H},St=({onLoading:H,onLoaded:be})=>Fe=>(H(),Fe.addEventListener(_.K$,function tt(){be(),Fe.removeEventListener(_.K$,tt)}),Fe),sn=()=>H=>(setTimeout(()=>{const be=H==null?void 0:H.querySelectorAll("li.md-nav__item--active");be.length!==0&&(be.forEach(tt=>{const It=tt==null?void 0:tt.querySelector("input");It!=null&&It.checked||It==null||It.click()}),be[be.length-1].scrollIntoView())},200),H),Zt=async(H,be)=>{let Fe;if(typeof H=="string")Fe=new DOMParser().parseFromString(H,"text/html").documentElement;else if(H instanceof Element)Fe=H;else throw new Error("dom is not a recognized type");for(const tt of be)Fe=await tt(Fe);return Fe};function hn(H,be){const Fe=new URL(be),tt=`${Fe.origin}${Fe.pathname.replace(/\/$/,"")}`,It=H.replace(tt,"").replace(/^\/+/,""),Ot=new URL(`http://localhost/${It}`);return`${Ot.pathname}${Ot.search}${Ot.hash}`}function dn(){const H=(0,l.Zp)(),Fe=(0,h.u)(h.p).getOptionalString("app.baseUrl");return(0,s.useCallback)(It=>{let Ot=It;if(Fe)try{Ot=hn(It,Fe)}catch{}H(Ot)},[H,Fe])}const kt="screen and (max-width: 76.1875em)",yn=H=>{const be=dn(),Fe=(0,a.A)(),tt=(0,N.A)(kt),It=gt(),Ot=$n(),jt=(0,M.st)(),ne=(0,h.u)(_.sm),We=(0,h.u)(Q.YT),{state:He,path:Me,content:Xe}=lt(),[Ve,Et]=(0,s.useState)(null),Dt=(0,_._$)(Ve),Gt=(0,s.useCallback)(()=>{if(!Ve)return;Ve.querySelectorAll(".md-sidebar").forEach(Rn=>{var Vn,na,Nn,qn;if(tt)Rn.style.top="0px";else{const ia=document==null?void 0:document.querySelector(".techdocs-reader-page"),_a=(Vn=ia==null?void 0:ia.getBoundingClientRect().top)!=null?Vn:0;let ba=(na=Ve.getBoundingClientRect().top)!=null?na:0;const Pa=Ve.querySelector(".md-container > .md-tabs"),xa=(Nn=Pa==null?void 0:Pa.getBoundingClientRect().height)!=null?Nn:0;ba<_a&&(ba=_a);const ja=Math.max(ba,0)+xa;Rn.style.top=`${ja}px`;const Da=Ve.querySelector(".md-container > .md-footer"),Fa=(qn=Da==null?void 0:Da.getBoundingClientRect().top)!=null?qn:window.innerHeight;Rn.style.height=`${Fa-ja}px`}Rn.style.setProperty("opacity","1")})},[Ve,tt]);(0,s.useEffect)(()=>(window.addEventListener("resize",Gt),window.addEventListener("scroll",Gt,!0),()=>{window.removeEventListener("resize",Gt),window.removeEventListener("scroll",Gt,!0)}),[Ve,Gt]);const fn=(0,s.useCallback)(()=>{if(!Ve)return;const Mn=Ve.querySelector(".md-footer");Mn&&(Mn.style.width=`${Ve.getBoundingClientRect().width}px`)},[Ve]);(0,s.useEffect)(()=>(window.addEventListener("resize",fn),()=>{window.removeEventListener("resize",fn)}),[Ve,fn]),(0,s.useEffect)(()=>{Dt||(fn(),Gt())},[He,Dt,fn,Gt]);const an=(0,s.useCallback)((Mn,Rn)=>Zt(Mn,[It,bn({techdocsStorageApi:ne,entityId:H,path:Rn}),w(),m(),Re(),ut(),ct(We),Ot]),[H,We,ne,It,Ot]),ta=(0,s.useCallback)(async Mn=>Zt(Mn,[sn(),Se(Fe),re({baseUrl:window.location.origin,onClick:(Rn,Vn)=>{var na,Nn;const qn=Rn.ctrlKey||Rn.metaKey,ia=new URL(Vn),_a=((na=Rn.target)==null?void 0:na.innerText)||Vn,ba=Vn.replace(window.location.origin,"");jt.captureEvent("click",_a,{attributes:{to:ba}}),ia.hash?qn?window.open(Vn,"_blank"):(be(Vn),(Nn=Mn==null?void 0:Mn.querySelector(`[id="${ia.hash.slice(1)}"]`))==null||Nn.scrollIntoView()):qn?window.open(Vn,"_blank"):be(Vn)}}),St({onLoading:()=>{},onLoaded:()=>{var Rn;(Rn=Mn.querySelector(".md-nav__title"))==null||Rn.removeAttribute("for")}}),St({onLoading:()=>{Array.from(Mn.querySelectorAll(".md-sidebar")).forEach(Vn=>{Vn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[Fe,be,jt]);return(0,s.useEffect)(()=>{if(!Xe)return()=>{};let Mn=!0;return an(Xe,Me).then(async Rn=>{if(!(Rn!=null&&Rn.innerHTML)||!Mn)return;window.scroll({top:0});const Vn=await ta(Rn);Et(Vn)}),()=>{Mn=!1}},[Xe,Me,an,ta]),Ve},gn=()=>{const H=(0,_.YR)(),{shadowRoot:be}=(0,_.V1)(),Fe=be==null?void 0:be.querySelector('[data-md-component="content"]'),tt=be==null?void 0:be.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let It=tt==null?void 0:tt.querySelector('[data-techdocs-addons-location="primary sidebar"]');It||(It=document.createElement("div"),It.setAttribute("data-techdocs-addons-location","primary sidebar"),tt==null||tt.prepend(It));const Ot=be==null?void 0:be.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let jt=Ot==null?void 0:Ot.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return jt||(jt=document.createElement("div"),jt.setAttribute("data-techdocs-addons-location","secondary sidebar"),Ot==null||Ot.prepend(jt)),s.createElement(s.Fragment,null,s.createElement(rt.A,{container:It},H.renderComponentsByLocation(_.eK.PrimarySidebar)),s.createElement(rt.A,{container:Fe},H.renderComponentsByLocation(_.eK.Content)),s.createElement(rt.A,{container:jt},H.renderComponentsByLocation(_.eK.SecondarySidebar)))},Un=(0,r.A)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),Qn=Je(H=>{var be;const{withSearch:Fe=!0,onReady:tt}=H,It=Un(),{entityMetadata:{value:Ot,loading:jt},entityRef:ne,setShadowRoot:We}=(0,_.V1)(),He=yn(ne),Me=window.location.pathname,Xe=window.location.hash,Ve=(0,_._$)(He),[Et]=(0,_.$r)([`[id="${Xe.slice(1)}"]`]);(0,s.useEffect)(()=>{var Gt;Ve||(Xe?Et&&Et.scrollIntoView():(Gt=document==null?void 0:document.querySelector("header"))==null||Gt.scrollIntoView())},[Me,Xe,Et,Ve]);const Dt=(0,s.useCallback)(Gt=>{We(Gt),tt instanceof Function&&tt()},[We,tt]);return jt===!1&&!Ot?s.createElement(b.M,{status:"404",statusMessage:"PAGE NOT FOUND"}):He?s.createElement(b.UC,null,s.createElement(z.A,{container:!0},s.createElement(z.A,{xs:12,item:!0},s.createElement(ve,null)),Fe&&s.createElement(z.A,{className:It.search,xs:"auto",item:!0},s.createElement(Ut,{entityId:ne,entityTitle:(be=Ot==null?void 0:Ot.metadata)==null?void 0:be.title})),s.createElement(z.A,{xs:12,item:!0},s.createElement(_.eh,{element:He,onAppend:Dt},s.createElement(gn,null))))):s.createElement(b.UC,null,s.createElement(z.A,{container:!0},s.createElement(z.A,{xs:12,item:!0},s.createElement(ve,null))))}),ea=null,Pn=s.createElement(qe.A,{animation:"wave",variant:"text",height:40}),Sn=H=>{const{palette:{common:{white:be}}}=(0,a.A)(),{children:Fe}=H,tt=(0,_.YR)(),It=(0,h.u)(h.p),{title:Ot,setTitle:jt,subtitle:ne,setSubtitle:We,entityRef:He,metadata:{value:Me,loading:Xe},entityMetadata:{value:Ve,loading:Et}}=(0,_.V1)();(0,s.useEffect)(()=>{Me&&(jt(Me.site_name),We(()=>{let{site_description:qn}=Me;return(!qn||qn==="None")&&(qn=""),qn}))},[Me,jt,We]);const Dt=It.getOptional("app.title")||"Backstage",Gt=[Ot,ne,Dt].filter(Boolean).join(" | "),{locationMetadata:fn,spec:an}=Ve||{},ta=an==null?void 0:an.lifecycle,Mn=Ve?(0,Oe.g)(Ve,$e.vv):[],Rn=(0,M.Sf)(ht.r)(),Vn=s.createElement(s.Fragment,null,s.createElement(b.ST,{label:(0,vt.capitalize)((Ve==null?void 0:Ve.kind)||"entity"),value:s.createElement(je.zI,{color:"inherit",entityRef:He,title:Ve==null?void 0:Ve.metadata.title,defaultKind:"Component"})}),Mn.length>0&&s.createElement(b.ST,{label:"Owner",value:s.createElement(je.iI,{color:"inherit",entityRefs:Mn,defaultKind:"group"})}),ta?s.createElement(b.ST,{label:"Lifecycle",value:String(ta)}):null,fn&&fn.type!=="dir"&&fn.type!=="file"?s.createElement(b.ST,{label:"",value:s.createElement(z.A,{container:!0,direction:"column",alignItems:"center",style:{color:be}},s.createElement(z.A,{style:{padding:0},item:!0},s.createElement(st.A,{style:{marginTop:"-25px"}})),s.createElement(z.A,{style:{padding:0},item:!0},"Source")),url:fn.target}):null);return!Et&&Ve===void 0||!Xe&&Me===void 0?null:s.createElement(b.Y9,{type:"Documentation",typeLink:Rn,title:Ot||Pn,subtitle:ne===""?void 0:ne||Pn},s.createElement(pt.A,{titleTemplate:"%s"},s.createElement("title",null,Gt)),Vn,Fe,tt.renderComponentsByLocation(_.eK.Header))},Jt=(0,r.A)(H=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:H.spacing(3,3,0),"@media print":{display:"none"}}})),rn=H=>{const be=Jt(),[Fe,tt]=(0,s.useState)(null),It=(0,s.useCallback)(Xe=>{tt(Xe.currentTarget)},[]),Ot=(0,s.useCallback)(()=>{tt(null)},[]),{entityMetadata:{value:jt,loading:ne}}=(0,_.V1)(),We=(0,_.YR)(),He=We.renderComponentsByLocation(_.eK.Subheader),Me=We.renderComponentsByLocation(_.eK.Settings);return!He&&!Me||ne===!1&&!jt?null:s.createElement(Ft.A,{classes:be,...H.toolbarProps},s.createElement(ke.A,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},He,Me?s.createElement(s.Fragment,null,s.createElement(dt.Ay,{title:"Settings"},s.createElement(k.A,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:It},s.createElement(bt.A,null))),s.createElement(me.A,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:Fe,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!!Fe,onClose:Ot,keepMounted:!0},s.createElement("div",null,Me))):null))},Xn=H=>{const{withSearch:be,withHeader:Fe=!0}=H;return s.createElement(b.YW,{themeId:"documentation"},Fe&&s.createElement(Sn,null),s.createElement(rn,null),s.createElement(Qn,{withSearch:be}))},_n=H=>{const{kind:be,name:Fe,namespace:tt}=(0,M.KS)(ht.b),{children:It,entityRef:Ot={kind:be,name:Fe,namespace:tt}}=H,jt=(0,l.P1)();if(!It){const He=(jt?s.Children.toArray(jt.props.children):[]).flatMap(Me=>{var Xe,Ve;return(Ve=(Xe=Me==null?void 0:Me.props)==null?void 0:Xe.children)!=null?Ve:[]}).find(Me=>!(0,M.E0)(Me,_.AF)&&!(0,M.E0)(Me,_.Wm));return s.createElement(R,{pluginId:"techdocs"},s.createElement(_.R7,{entityRef:Ot},He||s.createElement(Xn,null)))}return s.createElement(R,{pluginId:"techdocs"},s.createElement(_.R7,{entityRef:Ot},({metadata:ne,entityMetadata:We,onReady:He})=>s.createElement("div",{className:"techdocs-reader-page"},s.createElement(b.YW,{themeId:"documentation"},It instanceof Function?It({entityRef:Ot,techdocsMetadataValue:ne.value,entityMetadataValue:We.value,onReady:He}):It))))}},27332:(Dn,Ct,e)=>{"use strict";e.r(Ct),e.d(Ct,{TechDocsSearchResultListItem:()=>a});var s=e(14041),l=e(46423),b=e(5951),_=e(58837),z=e(72501),r=e(22968),q=e(70735);const ee=(0,_.A)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),a=he=>{const{result:_e,highlight:le,lineClamp:ie=5,asListItem:G=!0,asLink:we=!0,title:Ce,icon:ft}=he,k=ee(),ce=({children:M})=>we?s.createElement(r.N_,{noTrack:!0,to:_e.location},M):s.createElement(s.Fragment,null,M),I=()=>{const M=le!=null&&le.fields.title?s.createElement(q.b,{text:le.fields.title,preTag:le.preTag,postTag:le.postTag}):_e.title,C=le!=null&&le.fields.entityTitle?s.createElement(q.b,{text:le.fields.entityTitle,preTag:le.preTag,postTag:le.postTag}):_e.entityTitle,v=le!=null&&le.fields.name?s.createElement(q.b,{text:le.fields.name,preTag:le.preTag,postTag:le.postTag}):_e.name;return _e?s.createElement(b.A,{className:k.itemText,primaryTypographyProps:{variant:"h6"},primary:s.createElement(ce,null,Ce||s.createElement(s.Fragment,null,M," | ",C!=null?C:v," docs")),secondary:s.createElement(z.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:ie,overflow:"hidden"},color:"textSecondary",variant:"body2"},le!=null&&le.fields.text?s.createElement(q.b,{text:le.fields.text,preTag:le.preTag,postTag:le.postTag}):_e.text)}):null},h=({children:M})=>G?s.createElement(s.Fragment,null,ft&&s.createElement(l.A,null,typeof ft=="function"?ft(_e):ft),s.createElement("div",{className:k.flexContainer},M)):s.createElement(s.Fragment,null,M);return s.createElement(h,null,s.createElement(I,null))}},45495:(Dn,Ct,e)=>{"use strict";e.d(Ct,{T:()=>a,a:()=>ee,b:()=>_e,c:()=>le,r:()=>he});var s=e(3399),l=e(17520),b=e.n(l),_=e(11638),z=Object.defineProperty,r=(ie,G,we)=>G in ie?z(ie,G,{enumerable:!0,configurable:!0,writable:!0,value:we}):ie[G]=we,q=(ie,G,we)=>(r(ie,typeof G!="symbol"?G+"":G,we),we);class ee{constructor(G){q(this,"configApi"),q(this,"discoveryApi"),q(this,"fetchApi"),this.configApi=G.configApi,this.discoveryApi=G.discoveryApi,this.fetchApi=G.fetchApi}async getCookie(){const we=`${await this.getApiOrigin()}/cookie`,Ce=await this.fetchApi.fetch(`${we}`,{credentials:"include"});if(!Ce.ok)throw await s.o3.fromResponse(Ce);return await Ce.json()}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(G){const{kind:we,namespace:Ce,name:ft}=G,ce=`${await this.getApiOrigin()}/metadata/techdocs/${Ce}/${we}/${ft}`,I=await this.fetchApi.fetch(`${ce}`);if(!I.ok)throw await s.o3.fromResponse(I);return await I.json()}async getEntityMetadata(G){const{kind:we,namespace:Ce,name:ft}=G,ce=`${await this.getApiOrigin()}/metadata/entity/${Ce}/${we}/${ft}`,I=await this.fetchApi.fetch(`${ce}`);if(!I.ok)throw await s.o3.fromResponse(I);return await I.json()}}class a{constructor(G){q(this,"configApi"),q(this,"discoveryApi"),q(this,"identityApi"),q(this,"fetchApi"),this.configApi=G.configApi,this.discoveryApi=G.discoveryApi,this.identityApi=G.identityApi,this.fetchApi=G.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var G;return(G=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?G:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(G,we){const{kind:Ce,namespace:ft,name:k}=G,I=`${await this.getStorageUrl()}/${ft}/${Ce}/${k}/${we}`,h=await this.fetchApi.fetch(`${I.endsWith("/")?I:`${I}/`}index.html`);let M="";switch(h.status){case 404:throw M="Page not found. ",we||(M+="This could be because there is no index.md file in the root of the docs directory of this repository."),new s.m_(M);case 500:throw M="Could not generate documentation or an error in the TechDocs backend. ",new Error(M)}return h.text()}async syncEntityDocs(G,we=()=>{}){const{kind:Ce,namespace:ft,name:k}=G,I=`${await this.getApiOrigin()}/sync/${ft}/${Ce}/${k}`,{token:h}=await this.identityApi.getCredentials();return new Promise((M,C)=>{const v=new l.EventSourcePolyfill(I,{withCredentials:!0,headers:h?{Authorization:`Bearer ${h}`}:{}});v.addEventListener("log",N=>{N.data&&we(JSON.parse(N.data))}),v.addEventListener("finish",N=>{let Q=!1;N.data&&({updated:Q}=JSON.parse(N.data)),M(Q?"updated":"cached")}),v.onerror=N=>{switch(v.close(),N.status){case 404:C(new s.m_(N.message));return;default:C(new Error(N.data));return}}})}async getBaseUrl(G,we,Ce){const{kind:ft,namespace:k,name:ce}=we,h=`${await this.getApiOrigin()}/static/docs/${k}/${ft}/${ce}/${Ce}`;return new URL(G,h.endsWith("/")?h:`${h}/`).toString()}}const he=(0,_.HM)({id:"techdocs:index-page"}),_e=(0,_.HM)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),le=(0,_.HM)({id:"techdocs:catalog-reader-view"})},70210:(Dn,Ct,e)=>{"use strict";e.d(Ct,{L:()=>mt,S:()=>qt,a:()=>on,e:()=>Yt});var s=e(18690),l=e(14041),b=e(58007),_=e(64947),z=e(72501),r=e(22968),q=e(80109),ee=e(42899),a=e(8109),he=e(46423),_e=e(65569),le=e(5951),ie=e(71677),G=e(48821),we=e(11638),Ce=e(19087),ft=e(58837),k=e(16249),ce=e(29365),I=e(73643),h=e(64704),M=e(73466),C=e(37757),v=e(26343),N=e(89383),Q=e(71407),De=e(11746),Ee=e(93970),X=e(15485),p=e(42247),j=e(59294),J=e(84095),ue=e(92651);const Te=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,dt=()=>l.createElement(r.pp,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:l.createElement(l.Fragment,null,l.createElement(z.A,{variant:"body1"},"Open ",l.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),l.createElement(r.z7,{text:Te,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(_.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),Ge=(0,ft.A)(ve=>({avatar:{width:({size:Qe})=>Qe,height:({size:Qe})=>Qe,fontSize:({size:Qe})=>Qe*.7,border:`1px solid ${ve.palette.textSubtle}`}})),rt=({size:ve,picture:Qe})=>{const{iconSize:Kt}=r.hC,Vt=Ge(ve?{size:ve}:{size:Kt});return l.createElement(Ce.A,{src:Qe,className:Vt.avatar})},pt={},qe=ve=>{const{title:Qe,description:Kt,icon:Vt,apiRef:zt}=ve,Bt=(0,G.u)(zt),Ln=(0,G.u)(G.r),[mn,nn]=(0,l.useState)(!1),[On,nt]=(0,l.useState)(pt);return(0,l.useEffect)(()=>{let gt=!1;const Tt=Bt.sessionState$().subscribe(ot=>{ot!==G.S.SignedIn&&(nt(pt),nn(!1)),gt||Bt.getProfile({optional:!0}).then(Ze=>{gt||(ot===G.S.SignedIn&&nn(!0),Ze&&nt(Ze))})});return()=>{gt=!0,Tt.unsubscribe()}},[Bt]),l.createElement(a.A,null,l.createElement(he.A,null,l.createElement(Vt,null)),l.createElement(le.A,{primary:Qe,secondary:l.createElement(ie.Ay,{placement:"top",arrow:!0,title:Kt},l.createElement(ee.A,{container:!0,spacing:6},l.createElement(ee.A,{item:!0},l.createElement(rt,{size:48,picture:On.picture})),l.createElement(ee.A,{item:!0,xs:12,sm:!0,container:!0},l.createElement(ee.A,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(ee.A,{item:!0,xs:!0},On.displayName&&l.createElement(z.A,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},On.displayName),On.email&&l.createElement(z.A,{variant:"body2",color:"textSecondary"},On.email),l.createElement(z.A,{variant:"body2",color:"textSecondary"},Kt)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),l.createElement(_e.A,null,l.createElement(ie.Ay,{placement:"top",arrow:!0,title:mn?`Sign out from ${Qe}`:`Sign in to ${Qe}`},l.createElement(_.A,{variant:"outlined",color:"primary",onClick:()=>{(mn?Bt.signOut():Bt.signIn()).catch(Tt=>Ln.post(Tt))}},mn?"Sign out":"Sign in"))))},st=ve=>{const{configuredProviders:Qe}=ve;return l.createElement(l.Fragment,null,Qe.includes("google")&&l.createElement(qe,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:G.g,icon:q.A}),Qe.includes("microsoft")&&l.createElement(qe,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:G.m,icon:q.A}),Qe.includes("github")&&l.createElement(qe,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:G.d,icon:q.A}),Qe.includes("gitlab")&&l.createElement(qe,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:G.e,icon:q.A}),Qe.includes("okta")&&l.createElement(qe,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:G.o,icon:q.A}),Qe.includes("bitbucket")&&l.createElement(qe,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:G.i,icon:q.A}),Qe.includes("onelogin")&&l.createElement(qe,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:G.h,icon:q.A}),Qe.includes("atlassian")&&l.createElement(qe,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:G.k,icon:q.A}),Qe.includes("bitbucketServer")&&l.createElement(qe,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:G.j,icon:q.A}))},Oe=ve=>{const{providerSettings:Qe}=ve,Vt=(0,G.u)(G.p).getOptionalConfig("auth.providers"),zt=(Vt==null?void 0:Vt.keys())||[],Bt=Qe!=null?Qe:l.createElement(st,{configuredProviders:zt});return!Qe&&!(zt!=null&&zt.length)?l.createElement(dt,null):l.createElement(r.nO,{title:"Available Providers"},l.createElement(b.A,{dense:!0},Bt))},je=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,$e=()=>l.createElement(r.pp,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:l.createElement(l.Fragment,null,l.createElement(z.A,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),l.createElement(r.z7,{text:je,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(_.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),vt=ve=>ve.description?ve.description:ve.pluginId?`Registered in ${ve.pluginId} plugin`:"Registered in the application",ht=({flag:ve,enabled:Qe,toggleHandler:Kt})=>l.createElement(a.A,{divider:!0,button:!0,onClick:()=>Kt(ve.name)},l.createElement(he.A,null,l.createElement(ie.Ay,{placement:"top",arrow:!0,title:Qe?"Disable":"Enable"},l.createElement(I.A,{color:"primary",checked:Qe,name:ve.name}))),l.createElement(le.A,{primary:ve.name,secondary:vt(ve)})),Ft=(ve,Qe)=>{const Kt=ve.filter(zt=>Qe.isActive(zt.name)),Vt=ve.filter(zt=>!Qe.isActive(zt.name));return[...Kt,...Vt]},me=()=>{const ve=(0,G.u)(G.f),Qe=l.useRef(),Kt=ve.getRegisteredFlags(),Vt=Ft(Kt,ve),[zt]=(0,l.useState)(Vt),Bt=Object.fromEntries(zt.map(({name:Ze})=>[Ze,ve.isActive(Ze)])),[Ln,mn]=(0,l.useState)(Bt),[nn,On]=(0,l.useState)(""),nt=(0,l.useCallback)(Ze=>{const V=ve.isActive(Ze)?G.F.None:G.F.Active;ve.save({states:{[Ze]:V},merge:!0}),mn(de=>({...de,[Ze]:V===G.F.Active}))},[ve]);if(!zt.length)return l.createElement($e,null);const gt=()=>{var Ze;On(""),(Ze=Qe==null?void 0:Qe.current)==null||Ze.focus()},Tt=zt.filter(Ze=>Ze.name.toLocaleLowerCase("en-US").includes(nn.toLocaleLowerCase("en-US"))),ot=()=>l.createElement(ee.A,{container:!0,style:{justifyContent:"space-between"}},l.createElement(ee.A,{item:!0,xs:6,md:8},l.createElement(z.A,{variant:"h5"},"Feature Flags"),l.createElement(z.A,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),zt.length>=10&&l.createElement(ee.A,{item:!0,xs:6,md:4},l.createElement(k.A,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:Ze=>Ze&&Ze.focus(),InputProps:{...nn.length&&{endAdornment:l.createElement(ce.A,{"aria-label":"Clear filter",onClick:gt,edge:"end"},l.createElement(h.A,null))}},onChange:Ze=>On(Ze.target.value),value:nn})));return l.createElement(r.nO,{title:l.createElement(ot,null)},l.createElement(b.A,{dense:!0},Tt.map(Ze=>{const V=!!Ln[Ze.name];return l.createElement(ht,{key:Ze.name,flag:Ze,enabled:V,toggleHandler:nt})})))},ke=()=>{var ve;const Qe=(0,G.u)(G.t),Kt=(0,G.u)(G.l),{value:Vt,loading:zt,error:Bt}=(0,M.A)(async()=>({profile:await Qe.getProfileInfo(),identity:await Qe.getBackstageIdentity()}),[]);return(0,l.useEffect)(()=>{Bt&&Kt.post({message:`Failed to load user identity: ${Bt}`,severity:"error"})},[Bt,Kt]),zt||Bt?{profile:{},displayName:"",loading:zt}:{profile:Vt.profile,backstageIdentity:Vt.identity,displayName:(ve=Vt.profile.displayName)!=null?ve:Vt.identity.userEntityRef,loading:zt}},bt=(0,ft.A)(ve=>({avatar:{width:({size:Qe})=>Qe,height:({size:Qe})=>Qe,fontSize:({size:Qe})=>Qe*.7,border:`1px solid ${ve.palette.textSubtle}`}})),Yt=ve=>{const{size:Qe}=ve,{iconSize:Kt}=r.hC,Vt=bt(Qe?{size:Qe}:{size:Kt}),{profile:zt}=ke();return l.createElement(Ce.A,{src:zt.picture,className:Vt.avatar,alt:"Profile picture"})},yt=()=>{const ve=(0,G.u)(G.r),Qe=(0,G.u)(G.t),[Kt,Vt]=l.useState(!1),[zt,Bt]=l.useState(void 0),Ln=nn=>{Bt(nn.currentTarget),Vt(!0)},mn=()=>{Bt(void 0),Vt(!1)};return l.createElement(l.Fragment,null,l.createElement(ce.A,{"data-testid":"user-settings-menu","aria-label":"more",onClick:Ln},l.createElement(Q.A,null)),l.createElement(C.A,{anchorEl:zt,open:Kt,onClose:mn},l.createElement(v.A,{"data-testid":"sign-out",onClick:()=>Qe.signOut().catch(nn=>ve.post(nn))},l.createElement(he.A,null,l.createElement(N.A,null)),"Sign Out")))},_t=()=>{const{profile:ve,displayName:Qe}=ke();return l.createElement(r.nO,{title:"Profile",variant:"gridItem"},l.createElement(ee.A,{container:!0,spacing:6},l.createElement(ee.A,{item:!0},l.createElement(Yt,{size:96})),l.createElement(ee.A,{item:!0,xs:12,sm:!0,container:!0},l.createElement(ee.A,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(ee.A,{item:!0,xs:!0},l.createElement(z.A,{variant:"subtitle1",gutterBottom:!0},Qe),ve.email&&l.createElement(z.A,{variant:"body2",color:"textSecondary"},ve.email))),l.createElement(ee.A,{item:!0},l.createElement(yt,null)))))},S=()=>{const{isPinned:ve,toggleSidebarPinState:Qe}=(0,r.Ut)();return l.createElement(a.A,null,l.createElement(le.A,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),l.createElement(_e.A,null,l.createElement(ie.Ay,{placement:"top",arrow:!0,title:`${ve?"Unpin":"Pin"} Sidebar`},l.createElement(I.A,{color:"primary",checked:ve,onChange:()=>Qe(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},R=({id:ve,activeId:Qe,icon:Kt})=>Kt?(0,l.cloneElement)(Kt,{color:Qe===ve?"primary":void 0}):l.createElement(Ee.A,{color:Qe===ve?"primary":void 0}),W=(0,ft.A)(ve=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[ve.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[ve.breakpoints.down("xs")]:{paddingLeft:0}}})),Z=({children:ve,title:Qe,value:Kt,...Vt})=>l.createElement(ie.Ay,{placement:"top",arrow:!0,title:Qe},l.createElement(X.A,{value:Kt,...Vt},ve)),Pe=()=>{const ve=W(),Qe=(0,G.u)(G.n),Kt=(0,De.A)(Qe.activeThemeId$(),Qe.getActiveThemeId()),Vt=Qe.getInstalledThemes(),{t:zt}=(0,j.ie)(J.u),Bt=(Ln,mn)=>{Vt.some(nn=>nn.id===mn)?Qe.setActiveThemeId(mn):Qe.setActiveThemeId(void 0)};return l.createElement(a.A,{className:ve.list,classes:{container:ve.container}},l.createElement(le.A,{className:ve.listItemText,primary:zt("themeToggle.title"),secondary:zt("themeToggle.description")}),l.createElement(_e.A,{className:ve.listItemSecondaryAction},l.createElement(p.A,{exclusive:!0,size:"small",value:Kt!=null?Kt:"auto",onChange:Bt},Vt.map(Ln=>{const mn=Ln.id,nn=Ln.icon,On=Ln.title||(mn==="light"||mn==="dark"?zt(`themeToggle.names.${mn}`):mn);return l.createElement(Z,{key:mn,title:zt("themeToggle.select",{theme:On}),value:mn},l.createElement(l.Fragment,null,On,"\xA0",l.createElement(R,{id:mn,icon:nn,activeId:Kt})))}),l.createElement(ie.Ay,{placement:"top",arrow:!0,title:zt("themeToggle.selectAuto")},l.createElement(X.A,{value:"auto",selected:Kt===void 0},zt("themeToggle.names.auto"),"\xA0",l.createElement(Ee.A,{color:Kt===void 0?"primary":void 0}))))))},Ue=(0,ft.A)(ve=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[ve.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[ve.breakpoints.down("xs")]:{paddingLeft:0}}})),lt=()=>{const ve=Ue(),Qe=(0,G.u)(j.pl),{t:Kt}=(0,j.ie)(J.u),[Vt]=(0,l.useState)(()=>Qe.language$()),{language:zt}=(0,De.A)(Vt,Qe.getLanguage()),{languages:Bt}=Qe.getAvailableLanguages();if(Bt.length<=1)return null;const Ln=nn=>{Qe.setLanguage(nn)},mn=nn=>{try{return new Intl.DisplayNames([nn],{type:"language"}).of(nn)||nn}catch{return nn}};return l.createElement(a.A,{className:ve.list,classes:{container:ve.container}},l.createElement(le.A,{className:ve.listItemText,primary:Kt("languageToggle.title"),secondary:Kt("languageToggle.description")}),l.createElement(_e.A,{className:ve.listItemSecondaryAction},l.createElement(r.l6,{label:"",selected:zt,items:Bt.map(nn=>({label:mn(nn),value:nn})),onChange:nn=>Ln(nn)})))},et=()=>{const{isMobile:ve}=(0,r.Ut)();return l.createElement(r.nO,{title:"Appearance",variant:"gridItem"},l.createElement(b.A,{dense:!0},l.createElement(Pe,null),l.createElement(lt,null),!ve&&l.createElement(S,null)))},Je=()=>{const{backstageIdentity:ve}=ke();return ve?l.createElement(ee.A,{container:!0,spacing:1},l.createElement(ee.A,{item:!0,xs:12},l.createElement(z.A,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",l.createElement(ue.iI,{entityRefs:[ve.userEntityRef]}))),l.createElement(ee.A,{item:!0,xs:12},l.createElement(z.A,{variant:"subtitle1"},"Ownership Entities:"," ",l.createElement(ue.iI,{entityRefs:ve.ownershipEntityRefs})))):l.createElement(z.A,null,"No Backstage Identity")},Wt=()=>l.createElement(r.nO,{title:"Backstage Identity"},l.createElement(Je,null)),tn=()=>l.createElement(ee.A,{container:!0,direction:"row",spacing:3},l.createElement(ee.A,{item:!0,xs:12,md:6},l.createElement(_t,null)),l.createElement(ee.A,{item:!0,xs:12,md:6},l.createElement(et,null)),l.createElement(ee.A,{item:!0,xs:12,md:6},l.createElement(Wt,null))),Ut="plugin.user-settings.settingsLayout",mt="plugin.user-settings.settingsLayoutRoute",Xt=()=>null;(0,we.h3)(Xt,mt,!0),(0,we.h3)(Xt,"core.gatherMountPoints",!0);const on=ve=>{const{title:Qe,children:Kt}=ve,{isMobile:Vt}=(0,r.Ut)(),zt=(0,we.OJ)(Kt,Bt=>Bt.selectByComponentData({key:mt,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(Ln=>Ln.props));return l.createElement(r.YW,{themeId:"home"},!Vt&&l.createElement(r.Y9,{title:Qe!=null?Qe:"Settings"}),l.createElement(r.kE,{routes:zt}))};(0,we.h3)(on,Ut,!0),on.Route=Xt;const ln=ve=>{const{providerSettings:Qe,tabs:Kt}=ve;return l.createElement(on,null,l.createElement(on.Route,{path:"general",title:"General"},l.createElement(tn,null)),l.createElement(on.Route,{path:"auth-providers",title:"Authentication Providers"},l.createElement(Oe,{providerSettings:Qe})),l.createElement(on.Route,{path:"feature-flags",title:"Feature Flags"},l.createElement(me,null)),Kt)},qt=ve=>{const{providerSettings:Qe}=ve,Kt=(0,s.P1)(),Vt=(0,we.OJ)(Kt,Bt=>Bt.selectByComponentData({key:Ut}).getElements()),zt=(0,we.OJ)(Kt,Bt=>Bt.selectByComponentData({key:mt}).getElements());return l.createElement(l.Fragment,null,Vt.length!==0&&Vt||l.createElement(ln,{tabs:zt,providerSettings:Qe}))}},84095:(Dn,Ct,e)=>{"use strict";e.d(Ct,{U:()=>z,s:()=>b,u:()=>r});var s=e(11638),l=e(59294);const b=(0,s.HM)({id:"user-settings"}),z=(0,s.i1)({id:"user-settings",routes:{settingsPage:b}}).provide((0,s.QJ)({name:"UserSettingsPage",component:()=>e.e(7136).then(e.bind(e,37136)).then(q=>q.SettingsPage),mountPoint:b})),r=(0,l.h2)({id:"user-settings",messages:{languageToggle:{title:"Language",description:"Change the language",select:"Select language {{language}}"},themeToggle:{title:"Theme",description:"Change the theme mode",select:"Select theme {{theme}}",selectAuto:"Select Auto Theme",names:{light:"Light",dark:"Dark",auto:"Auto"}}}})},93449:(Dn,Ct,e)=>{"use strict";e.d(Ct,{wB:()=>we});var s=e(96403),l=e.n(s),b=e(84095),_=e(14041),z=e(9684),r=e(22968),q=e(11638),ee=e(70210),a=Object.defineProperty,he=(k,ce,I)=>ce in k?a(k,ce,{enumerable:!0,configurable:!0,writable:!0,value:I}):k[ce]=I,_e=(k,ce,I)=>(he(k,typeof ce!="symbol"?ce+"":ce,I),I);const le={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},ie=new Map;class G{constructor(ce,I,h,M,C,v){this.namespace=ce,this.fetchApi=I,this.discoveryApi=h,this.errorApi=M,this.identityApi=C,this.fallback=v,_e(this,"subscribers",new Set),_e(this,"observables",new Map)}static create(ce){var I;return new G((I=ce.namespace)!=null?I:"default",ce.fetchApi,ce.discoveryApi,ce.errorApi,ce.identityApi,WebStorage.create({namespace:ce.namespace,errorApi:ce.errorApi}))}forBucket(ce){const I=`${this.namespace}.${ce}`;return ie.has(I)||ie.set(I,new G(I,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),ie.get(I)}async remove(ce){const I=await this.getFetchUrl(ce),h=await this.fetchApi.fetch(I,{method:"DELETE"});if(!h.ok&&h.status!==404)throw await ResponseError.fromResponse(h);this.notifyChanges({key:ce,presence:"absent"})}async set(ce,I){if(!await this.isSignedIn()){await this.fallback.set(ce,I),this.notifyChanges({key:ce,presence:"present",value:I});return}const h=await this.getFetchUrl(ce),M=await this.fetchApi.fetch(h,{method:"PUT",headers:le,body:JSON.stringify({value:I})});if(!M.ok)throw await ResponseError.fromResponse(M);const{value:C}=await M.json();this.notifyChanges({key:ce,value:C,presence:"present"})}observe$(ce){return this.observables.has(ce)||this.observables.set(ce,new ObservableImpl(I=>(this.subscribers.add(I),Promise.resolve().then(()=>this.get(ce)).then(h=>I.next(h)).catch(h=>this.errorApi.post(h)),()=>{this.subscribers.delete(I)})).filter(({key:I})=>I===ce)),this.observables.get(ce)}snapshot(ce){return{key:ce,presence:"unknown"}}async get(ce){if(!await this.isSignedIn())return this.fallback.snapshot(ce);const I=await this.getFetchUrl(ce),h=await this.fetchApi.fetch(I);if(h.status===404)return{key:ce,presence:"absent"};if(!h.ok)throw await ResponseError.fromResponse(h);try{const{value:M}=await h.json(),C=JSON.parse(JSON.stringify(M),(v,N)=>(typeof N=="object"&&N!==null&&Object.freeze(N),N));return{key:ce,presence:"present",value:C}}catch{return{key:ce,presence:"absent"}}}async getFetchUrl(ce){const I=await this.discoveryApi.getBaseUrl("user-settings"),h=encodeURIComponent(this.namespace),M=encodeURIComponent(ce);return`${I}/buckets/${h}/keys/${M}`}async notifyChanges(ce){for(const I of this.subscribers)try{I.next(ce)}catch{}}async isSignedIn(){try{const ce=await this.identityApi.getCredentials();return!!(ce!=null&&ce.token)}catch{return!1}}}const we=k=>{const ce=(0,q.Sf)(b.s),I=k.icon?k.icon:z.A;return _.createElement(r.uk,{text:"Settings",to:ce(),icon:I})},Ce=ee.L,ft=k=>_.createElement(ee.a.Route,{path:k.path,title:k.title},_.createElement(_.Fragment,null,"props.children"));(0,q.h3)(ft,Ce,"UserSettingsTab")},97388:(Dn,Ct,e)=>{"use strict";e.d(Ct,{Bl:()=>r,Q6:()=>z,qO:()=>ee,tK:()=>q});var s=e(14041);function l(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const b=l(),_=he=>`__@backstage/${he}__`;function z(he,_e){const le=_(he);let ie=b[le];return ie||(ie=_e(),b[le]=ie,ie)}function r(he){Object.freeze(he);const _e={atVersion(le){return he[le]}};return Object.defineProperty(_e,"$map",{configurable:!0,enumerable:!0,get(){return he}}),_e}function q(he){return z(he,()=>(0,s.createContext)(void 0))}function ee(he){return(0,s.useContext)(q(he))}function a(he){return{set(_e){globalThis[`__@backstage/${he}__`]=createContext(r(_e))},reset(){delete globalThis[`__@backstage/${he}__`]}}}}}]);})();

//# sourceMappingURL=module-backstage.e818c096.js.map