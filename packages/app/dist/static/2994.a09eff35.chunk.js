"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2994],{58907:(X,P,t)=>{t.d(P,{C:()=>O});var i=t(29835),u=t(22968),r=t(92651),T=t(2069),E=t(72501),g=t(58837),b=t(7031);const M={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};var z=t(75625),N=t(39330),F=t(80109),Y=t(15303),j=t(45250),$=t(65398),V=t.n($),n=t(14041),L=t(67720),J=t(75173);const c=Object.freeze({createNameColumn(e){function a(l){var o;return((o=l.metadata)==null?void 0:o.title)||(0,r.SE)(l,{defaultKind:e==null?void 0:e.defaultKind})}return{title:"Name",field:"resolved.entityRef",highlight:!0,customSort({entity:l},{entity:o}){return a(l).localeCompare(a(o))},render:({entity:l})=>n.createElement(r.zI,{entityRef:l,defaultKind:(e==null?void 0:e.defaultKind)||"Component"})}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:e})=>n.createElement(r.iI,{entityRefs:e.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:e})=>n.createElement(r.iI,{entityRefs:e.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",customFilterAndSearch:(e,a)=>{var l,o,d,s,p,v,S,x,U,R;let D=[];return(o=(l=a.entity)==null?void 0:l.spec)!=null&&o.targets&&Array.isArray((s=(d=a.entity)==null?void 0:d.spec)==null?void 0:s.targets)?D=(v=(p=a.entity)==null?void 0:p.spec)==null?void 0:v.targets:(x=(S=a.entity)==null?void 0:S.spec)!=null&&x.target&&(D=[(R=(U=a.entity)==null?void 0:U.spec)==null?void 0:R.target]),D.join(", ").toLocaleUpperCase("en-US").includes(e.toLocaleUpperCase("en-US"))},render:({entity:e})=>{var a,l;return n.createElement(n.Fragment,null,(((a=e==null?void 0:e.spec)==null?void 0:a.targets)||((l=e==null?void 0:e.spec)==null?void 0:l.target))&&n.createElement(u.Mm,{text:(e.spec.targets||[e.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(e={hidden:!1}){return{title:"Type",field:"entity.spec.type",hidden:e.hidden,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:e})=>n.createElement(u.Mm,{text:e.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:e})=>n.createElement(n.Fragment,null,e.metadata.tags&&e.metadata.tags.map(a=>n.createElement(L.A,{key:a,label:a,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(e){return{title:"Title",field:"entity.metadata.title",hidden:e==null?void 0:e.hidden,searchable:!0}},createLabelColumn(e,a){return{title:(a==null?void 0:a.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:l})=>{var o;const d=(o=l.metadata)==null?void 0:o.labels,s=d&&d[e]||(a==null?void 0:a.defaultValue);return n.createElement(n.Fragment,null,s&&n.createElement(L.A,{key:s,label:s,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}}),B=(0,g.A)(e=>({root:{paddingTop:e.spacing(1.25),paddingLeft:e.spacing(2.5),paddingBottom:e.spacing(.75),display:"flex",justifyContent:"space-between"},text:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),{name:"BackstageTableToolbar"});function K(e){const a=B();return n.createElement(J.A,{className:a.root},n.createElement(E.A,{variant:"h5",className:a.text},e.title),n.createElement(r.lD,null))}function H(e){const{columns:a,data:l,next:o,prev:d,title:s,isLoading:p,options:v}=e;return n.createElement(u.XI,{title:p?"":s,columns:a,data:l,options:{...v,paginationPosition:"both",pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1},onPageChange:S=>{S>0?o==null||o():d==null||d()},components:{Toolbar:K},page:d?1:0,totalCount:o?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}}})}const f=({filters:e,entities:a})=>{var l;const o=e.type===void 0;return[c.createTitleColumn({hidden:!0}),c.createNameColumn({defaultKind:(l=e.kind)==null?void 0:l.value}),...d(),c.createMetadataDescriptionColumn(),c.createTagsColumn()];function d(){var s;const p=[c.createSystemColumn(),c.createOwnerColumn(),c.createSpecTypeColumn({hidden:!o}),c.createSpecLifecycleColumn()];switch((s=e.kind)==null?void 0:s.value){case"user":return[];case"domain":case"system":return[c.createOwnerColumn()];case"group":case"template":return[c.createSpecTypeColumn({hidden:!o})];case"location":return[c.createSpecTypeColumn({hidden:!o}),c.createSpecTargetsColumn()];default:return a.every(v=>v.metadata.namespace==="default")?p:[...p,c.createNamespaceColumn()]}}},h=(0,b.A)({root:{color:"#f3ba37"}})(F.A),_=(e,a)=>{const l=o=>o.metadata.title||(0,r.SE)(o,{defaultKind:"Component"});return l(e).localeCompare(l(a))},O=e=>{var a,l,o,d;const{columns:s=f,tableOptions:p,subtitle:v,emptyContent:S}=e,{isStarredEntity:x,toggleStarredEntity:U}=(0,r.IT)(),R=(0,r.nK)(),{loading:D,error:Q,entities:Z,filters:G,pageInfo:w,totalItems:le}=R,oe=!!w,k=(0,n.useMemo)(()=>typeof s=="function"?s(R):s,[s,R]);if(Q)return n.createElement("div",null,n.createElement(u.Bp,{severity:"error",title:"Could not fetch catalog entities."},n.createElement(u.z7,{language:"text",text:Q.toString()})));const ie=[({entity:C})=>{var y;const m=(y=C.metadata.annotations)==null?void 0:y[i._P],I="View";return{icon:()=>n.createElement(n.Fragment,null,n.createElement(E.A,{style:M},I),n.createElement(N.A,{fontSize:"small"})),tooltip:I,disabled:!m,onClick:()=>{m&&window.open(m,"_blank")}}},({entity:C})=>{var y;const m=(y=C.metadata.annotations)==null?void 0:y[i.P],I="Edit";return{icon:()=>n.createElement(n.Fragment,null,n.createElement(E.A,{style:M},I),n.createElement(z.A,{fontSize:"small"})),tooltip:I,disabled:!m,onClick:()=>{m&&window.open(m,"_blank")}}},({entity:C})=>{const y=x(C),m=y?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>n.createElement(n.Fragment,null,n.createElement(E.A,{style:M},m),y?n.createElement(h,null):n.createElement(Y.A,null)),tooltip:m,onClick:()=>U(C)}}],re=((a=G.kind)==null?void 0:a.value)||"",se=((l=G.type)==null?void 0:l.value)||"",q=[(0,j.capitalize)((d=(o=G.user)==null?void 0:o.value)!=null?d:"all"),se,V()(re)].filter(C=>C).join(" "),de=`${q} (${le})`,ee=e.actions||ie,te={actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!D,padding:"dense",...p};if(oe)return n.createElement(H,{columns:k,emptyContent:S,isLoading:D,title:q,actions:ee,subtitle:v,options:te,data:Z.map(A),next:w.next,prev:w.prev});const ae=Z.sort(_).map(A),ne=20,ce=ae.length>ne;return n.createElement(u.XI,{isLoading:D,columns:k,options:{paging:ce,pageSize:ne,pageSizeOptions:[20,50,100],...te},title:de,data:ae,actions:ee,subtitle:v,emptyContent:S})};O.columns=c,O.defaultColumnsFunc=f;function A(e){const a=(0,T.g)(e,i.jn,{kind:"system"}),l=(0,T.g)(e,i.vv);return{entity:e,resolved:{name:(0,r.SE)(e,{defaultKind:"Component"}),entityRef:(0,i.U2)(e),ownedByRelationsTitle:l.map(o=>(0,r.SE)(o,{defaultKind:"group"})).join(", "),ownedByRelations:l,partOfSystemRelationTitle:a.map(o=>(0,r.SE)(o,{defaultKind:"system"})).join(", "),partOfSystemRelations:a}}}},62994:(X,P,t)=>{t.r(P),t.d(P,{BaseCatalogPage:()=>B,CatalogPage:()=>H,DefaultCatalogPage:()=>K});var i=t(14041),u=t(18690),r=t(22968),T=t(48821),E=t(11638),g=t(92651),b=t(21319),W=t(58907),M=t(59294),z=t(99993),N=t(17899),F=t(25033),Y=t.n(F),j=t(96403),$=t.n(j),V=t(45250),n=t.n(V),L=t(65398),J=t.n(L);const c=(0,M.h2)({id:"catalog",messages:{indexPage:{title:"{{orgName}} Catalog",createButtonTitle:"Create"}}});function B(f){var h;const{filters:_,content:O=i.createElement(W.C,null),pagination:A}=f,e=(h=(0,T.u)(T.p).getOptionalString("organization.name"))!=null?h:"Backstage",a=(0,E.Sf)(b.c),{t:l}=(0,M.ie)(c),{allowed:o}=(0,N.JT)({permission:z.C4});return i.createElement(r.dT,{title:l("indexPage.title",{orgName:e}),themeId:"home"},i.createElement(r.UC,null,i.createElement(r.dv,{title:""},o&&i.createElement(r.ly,{title:l("indexPage.createButtonTitle"),to:a&&a()}),i.createElement(r.Yl,null,"All your software catalog entities")),i.createElement(g.B9,{pagination:A},i.createElement(g.GI,null,i.createElement(g.GI.Filters,null,_),i.createElement(g.GI.Content,null,O)))))}function K(f){const{columns:h,actions:_,initiallySelectedFilter:O="owned",initialKind:A="component",tableOptions:e={},emptyContent:a,pagination:l,ownerPickerMode:o,filters:d,initiallySelectedNamespaces:s}=f;return i.createElement(B,{filters:d!=null?d:i.createElement(g.rd,{initialKind:A,initiallySelectedFilter:O,ownerPickerMode:o,initiallySelectedNamespaces:s}),content:i.createElement(W.C,{columns:h,actions:_,tableOptions:e,emptyContent:a}),pagination:l})}function H(f){return(0,u.P1)()||i.createElement(K,{...f})}},39330:(X,P,t)=>{var i,u=t(4293),r=t(78920);i={value:!0},P.A=void 0;var T=r(t(14041)),E=u(t(74044)),g=(0,E.default)(T.createElement("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew");P.A=g}}]);})();

//# sourceMappingURL=2994.a09eff35.chunk.js.map